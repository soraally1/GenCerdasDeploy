(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function II(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sy={exports:{}},Vu={},oy={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nk;function E4(){if(nk)return qe;nk=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x($){return $===null||typeof $!="object"?null:($=y&&$[y]||$["@@iterator"],typeof $=="function"?$:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,P={};function S($,ne,xe){this.props=$,this.context=ne,this.refs=P,this.updater=xe||k}S.prototype.isReactComponent={},S.prototype.setState=function($,ne){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ne,"setState")},S.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function N(){}N.prototype=S.prototype;function L($,ne,xe){this.props=$,this.context=ne,this.refs=P,this.updater=xe||k}var O=L.prototype=new N;O.constructor=L,E(O,S.prototype),O.isPureReactComponent=!0;var Q=Array.isArray,W=Object.prototype.hasOwnProperty,U={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function I($,ne,xe){var Re,Oe={},Ve=null,Ue=null;if(ne!=null)for(Re in ne.ref!==void 0&&(Ue=ne.ref),ne.key!==void 0&&(Ve=""+ne.key),ne)W.call(ne,Re)&&!C.hasOwnProperty(Re)&&(Oe[Re]=ne[Re]);var Ge=arguments.length-2;if(Ge===1)Oe.children=xe;else if(1<Ge){for(var Z=Array(Ge),Ee=0;Ee<Ge;Ee++)Z[Ee]=arguments[Ee+2];Oe.children=Z}if($&&$.defaultProps)for(Re in Ge=$.defaultProps,Ge)Oe[Re]===void 0&&(Oe[Re]=Ge[Re]);return{$$typeof:n,type:$,key:Ve,ref:Ue,props:Oe,_owner:U.current}}function j($,ne){return{$$typeof:n,type:$.type,key:ne,ref:$.ref,props:$.props,_owner:$._owner}}function D($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function F($){var ne={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(xe){return ne[xe]})}var q=/\/+/g;function V($,ne){return typeof $=="object"&&$!==null&&$.key!=null?F(""+$.key):ne.toString(36)}function ge($,ne,xe,Re,Oe){var Ve=typeof $;(Ve==="undefined"||Ve==="boolean")&&($=null);var Ue=!1;if($===null)Ue=!0;else switch(Ve){case"string":case"number":Ue=!0;break;case"object":switch($.$$typeof){case n:case e:Ue=!0}}if(Ue)return Ue=$,Oe=Oe(Ue),$=Re===""?"."+V(Ue,0):Re,Q(Oe)?(xe="",$!=null&&(xe=$.replace(q,"$&/")+"/"),ge(Oe,ne,xe,"",function(Ee){return Ee})):Oe!=null&&(D(Oe)&&(Oe=j(Oe,xe+(!Oe.key||Ue&&Ue.key===Oe.key?"":(""+Oe.key).replace(q,"$&/")+"/")+$)),ne.push(Oe)),1;if(Ue=0,Re=Re===""?".":Re+":",Q($))for(var Ge=0;Ge<$.length;Ge++){Ve=$[Ge];var Z=Re+V(Ve,Ge);Ue+=ge(Ve,ne,xe,Z,Oe)}else if(Z=x($),typeof Z=="function")for($=Z.call($),Ge=0;!(Ve=$.next()).done;)Ve=Ve.value,Z=Re+V(Ve,Ge++),Ue+=ge(Ve,ne,xe,Z,Oe);else if(Ve==="object")throw ne=String($),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return Ue}function Pe($,ne,xe){if($==null)return $;var Re=[],Oe=0;return ge($,Re,"","",function(Ve){return ne.call(xe,Ve,Oe++)}),Re}function Me($){if($._status===-1){var ne=$._result;ne=ne(),ne.then(function(xe){($._status===0||$._status===-1)&&($._status=1,$._result=xe)},function(xe){($._status===0||$._status===-1)&&($._status=2,$._result=xe)}),$._status===-1&&($._status=0,$._result=ne)}if($._status===1)return $._result.default;throw $._result}var fe={current:null},re={transition:null},ve={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:re,ReactCurrentOwner:U};function he(){throw Error("act(...) is not supported in production builds of React.")}return qe.Children={map:Pe,forEach:function($,ne,xe){Pe($,function(){ne.apply(this,arguments)},xe)},count:function($){var ne=0;return Pe($,function(){ne++}),ne},toArray:function($){return Pe($,function(ne){return ne})||[]},only:function($){if(!D($))throw Error("React.Children.only expected to receive a single React element child.");return $}},qe.Component=S,qe.Fragment=t,qe.Profiler=i,qe.PureComponent=L,qe.StrictMode=r,qe.Suspense=d,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,qe.act=he,qe.cloneElement=function($,ne,xe){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var Re=E({},$.props),Oe=$.key,Ve=$.ref,Ue=$._owner;if(ne!=null){if(ne.ref!==void 0&&(Ve=ne.ref,Ue=U.current),ne.key!==void 0&&(Oe=""+ne.key),$.type&&$.type.defaultProps)var Ge=$.type.defaultProps;for(Z in ne)W.call(ne,Z)&&!C.hasOwnProperty(Z)&&(Re[Z]=ne[Z]===void 0&&Ge!==void 0?Ge[Z]:ne[Z])}var Z=arguments.length-2;if(Z===1)Re.children=xe;else if(1<Z){Ge=Array(Z);for(var Ee=0;Ee<Z;Ee++)Ge[Ee]=arguments[Ee+2];Re.children=Ge}return{$$typeof:n,type:$.type,key:Oe,ref:Ve,props:Re,_owner:Ue}},qe.createContext=function($){return $={$$typeof:a,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:s,_context:$},$.Consumer=$},qe.createElement=I,qe.createFactory=function($){var ne=I.bind(null,$);return ne.type=$,ne},qe.createRef=function(){return{current:null}},qe.forwardRef=function($){return{$$typeof:c,render:$}},qe.isValidElement=D,qe.lazy=function($){return{$$typeof:g,_payload:{_status:-1,_result:$},_init:Me}},qe.memo=function($,ne){return{$$typeof:f,type:$,compare:ne===void 0?null:ne}},qe.startTransition=function($){var ne=re.transition;re.transition={};try{$()}finally{re.transition=ne}},qe.unstable_act=he,qe.useCallback=function($,ne){return fe.current.useCallback($,ne)},qe.useContext=function($){return fe.current.useContext($)},qe.useDebugValue=function(){},qe.useDeferredValue=function($){return fe.current.useDeferredValue($)},qe.useEffect=function($,ne){return fe.current.useEffect($,ne)},qe.useId=function(){return fe.current.useId()},qe.useImperativeHandle=function($,ne,xe){return fe.current.useImperativeHandle($,ne,xe)},qe.useInsertionEffect=function($,ne){return fe.current.useInsertionEffect($,ne)},qe.useLayoutEffect=function($,ne){return fe.current.useLayoutEffect($,ne)},qe.useMemo=function($,ne){return fe.current.useMemo($,ne)},qe.useReducer=function($,ne,xe){return fe.current.useReducer($,ne,xe)},qe.useRef=function($){return fe.current.useRef($)},qe.useState=function($){return fe.current.useState($)},qe.useSyncExternalStore=function($,ne,xe){return fe.current.useSyncExternalStore($,ne,xe)},qe.useTransition=function(){return fe.current.useTransition()},qe.version="18.3.1",qe}var rk;function px(){return rk||(rk=1,oy.exports=E4()),oy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ik;function T4(){if(ik)return Vu;ik=1;var n=px(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(c,d,f){var g,y={},x=null,k=null;f!==void 0&&(x=""+f),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(k=d.ref);for(g in d)r.call(d,g)&&!s.hasOwnProperty(g)&&(y[g]=d[g]);if(c&&c.defaultProps)for(g in d=c.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:c,key:x,ref:k,props:y,_owner:i.current}}return Vu.Fragment=t,Vu.jsx=a,Vu.jsxs=a,Vu}var sk;function I4(){return sk||(sk=1,sy.exports=T4()),sy.exports}var u=I4(),A=px();const Pa=II(A);var Qf={},ay={exports:{}},ir={},ly={exports:{}},cy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ok;function S4(){return ok||(ok=1,function(n){function e(re,ve){var he=re.length;re.push(ve);e:for(;0<he;){var $=he-1>>>1,ne=re[$];if(0<i(ne,ve))re[$]=ve,re[he]=ne,he=$;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var ve=re[0],he=re.pop();if(he!==ve){re[0]=he;e:for(var $=0,ne=re.length,xe=ne>>>1;$<xe;){var Re=2*($+1)-1,Oe=re[Re],Ve=Re+1,Ue=re[Ve];if(0>i(Oe,he))Ve<ne&&0>i(Ue,Oe)?(re[$]=Ue,re[Ve]=he,$=Ve):(re[$]=Oe,re[Re]=he,$=Re);else if(Ve<ne&&0>i(Ue,he))re[$]=Ue,re[Ve]=he,$=Ve;else break e}}return ve}function i(re,ve){var he=re.sortIndex-ve.sortIndex;return he!==0?he:re.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var d=[],f=[],g=1,y=null,x=3,k=!1,E=!1,P=!1,S=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(re){for(var ve=t(f);ve!==null;){if(ve.callback===null)r(f);else if(ve.startTime<=re)r(f),ve.sortIndex=ve.expirationTime,e(d,ve);else break;ve=t(f)}}function Q(re){if(P=!1,O(re),!E)if(t(d)!==null)E=!0,Me(W);else{var ve=t(f);ve!==null&&fe(Q,ve.startTime-re)}}function W(re,ve){E=!1,P&&(P=!1,N(I),I=-1),k=!0;var he=x;try{for(O(ve),y=t(d);y!==null&&(!(y.expirationTime>ve)||re&&!F());){var $=y.callback;if(typeof $=="function"){y.callback=null,x=y.priorityLevel;var ne=$(y.expirationTime<=ve);ve=n.unstable_now(),typeof ne=="function"?y.callback=ne:y===t(d)&&r(d),O(ve)}else r(d);y=t(d)}if(y!==null)var xe=!0;else{var Re=t(f);Re!==null&&fe(Q,Re.startTime-ve),xe=!1}return xe}finally{y=null,x=he,k=!1}}var U=!1,C=null,I=-1,j=5,D=-1;function F(){return!(n.unstable_now()-D<j)}function q(){if(C!==null){var re=n.unstable_now();D=re;var ve=!0;try{ve=C(!0,re)}finally{ve?V():(U=!1,C=null)}}else U=!1}var V;if(typeof L=="function")V=function(){L(q)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Pe=ge.port2;ge.port1.onmessage=q,V=function(){Pe.postMessage(null)}}else V=function(){S(q,0)};function Me(re){C=re,U||(U=!0,V())}function fe(re,ve){I=S(function(){re(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){E||k||(E=!0,Me(W))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(re){switch(x){case 1:case 2:case 3:var ve=3;break;default:ve=x}var he=x;x=ve;try{return re()}finally{x=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,ve){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var he=x;x=re;try{return ve()}finally{x=he}},n.unstable_scheduleCallback=function(re,ve,he){var $=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?$+he:$):he=$,re){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=he+ne,re={id:g++,callback:ve,priorityLevel:re,startTime:he,expirationTime:ne,sortIndex:-1},he>$?(re.sortIndex=he,e(f,re),t(d)===null&&re===t(f)&&(P?(N(I),I=-1):P=!0,fe(Q,he-$))):(re.sortIndex=ne,e(d,re),E||k||(E=!0,Me(W))),re},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(re){var ve=x;return function(){var he=x;x=ve;try{return re.apply(this,arguments)}finally{x=he}}}}(cy)),cy}var ak;function C4(){return ak||(ak=1,ly.exports=S4()),ly.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lk;function N4(){if(lk)return ir;lk=1;var n=px(),e=C4();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(o){return d.call(y,o)?!0:d.call(g,o)?!1:f.test(o)?y[o]=!0:(g[o]=!0,!1)}function k(o,l,h,p){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function E(o,l,h,p){if(l===null||typeof l>"u"||k(o,l,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function P(o,l,h,p,v,w,T){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=h,this.propertyName=o,this.type=l,this.sanitizeURL=w,this.removeEmptyString=T}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new P(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];S[l]=new P(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new P(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new P(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new P(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new P(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new P(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new P(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new P(o,5,!1,o.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function L(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(N,L);S[l]=new P(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(N,L);S[l]=new P(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(N,L);S[l]=new P(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new P(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new P(o,1,!1,o.toLowerCase(),null,!0,!0)});function O(o,l,h,p){var v=S.hasOwnProperty(l)?S[l]:null;(v!==null?v.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(E(l,h,v,p)&&(h=null),p||v===null?x(l)&&(h===null?o.removeAttribute(l):o.setAttribute(l,""+h)):v.mustUseProperty?o[v.propertyName]=h===null?v.type===3?!1:"":h:(l=v.attributeName,p=v.attributeNamespace,h===null?o.removeAttribute(l):(v=v.type,h=v===3||v===4&&h===!0?"":""+h,p?o.setAttributeNS(p,l,h):o.setAttribute(l,h))))}var Q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),U=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),F=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),re=Symbol.iterator;function ve(o){return o===null||typeof o!="object"?null:(o=re&&o[re]||o["@@iterator"],typeof o=="function"?o:null)}var he=Object.assign,$;function ne(o){if($===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);$=l&&l[1]||""}return`
`+$+o}var xe=!1;function Re(o,l){if(!o||xe)return"";xe=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Y){var p=Y}Reflect.construct(o,[],l)}else{try{l.call()}catch(Y){p=Y}o.call(l.prototype)}else{try{throw Error()}catch(Y){p=Y}o()}}catch(Y){if(Y&&p&&typeof Y.stack=="string"){for(var v=Y.stack.split(`
`),w=p.stack.split(`
`),T=v.length-1,M=w.length-1;1<=T&&0<=M&&v[T]!==w[M];)M--;for(;1<=T&&0<=M;T--,M--)if(v[T]!==w[M]){if(T!==1||M!==1)do if(T--,M--,0>M||v[T]!==w[M]){var B=`
`+v[T].replace(" at new "," at ");return o.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",o.displayName)),B}while(1<=T&&0<=M);break}}}finally{xe=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?ne(o):""}function Oe(o){switch(o.tag){case 5:return ne(o.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return o=Re(o.type,!1),o;case 11:return o=Re(o.type.render,!1),o;case 1:return o=Re(o.type,!0),o;default:return""}}function Ve(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case C:return"Fragment";case U:return"Portal";case j:return"Profiler";case I:return"StrictMode";case V:return"Suspense";case ge:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case F:return(o.displayName||"Context")+".Consumer";case D:return(o._context.displayName||"Context")+".Provider";case q:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Pe:return l=o.displayName||null,l!==null?l:Ve(o.type)||"Memo";case Me:l=o._payload,o=o._init;try{return Ve(o(l))}catch{}}return null}function Ue(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(l);case 8:return l===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ge(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Z(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ee(o){var l=Z(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),p=""+o[l];if(!o.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,w=h.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return v.call(this)},set:function(T){p=""+T,w.call(this,T)}}),Object.defineProperty(o,l,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(T){p=""+T},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Je(o){o._valueTracker||(o._valueTracker=Ee(o))}function Xe(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),p="";return o&&(p=Z(o)?o.checked?"true":"false":o.value),o=p,o!==h?(l.setValue(o),!0):!1}function an(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ft(o,l){var h=l.checked;return he({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function Sn(o,l){var h=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;h=Ge(l.value!=null?l.value:h),o._wrapperState={initialChecked:p,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Fn(o,l){l=l.checked,l!=null&&O(o,"checked",l,!1)}function mi(o,l){Fn(o,l);var h=Ge(l.value),p=l.type;if(h!=null)p==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(p==="submit"||p==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?ht(o,l.type,h):l.hasOwnProperty("defaultValue")&&ht(o,l.type,Ge(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function Oi(o,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,h||l===o.value||(o.value=l),o.defaultValue=l}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function ht(o,l,h){(l!=="number"||an(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var xn=Array.isArray;function Cn(o,l,h,p){if(o=o.options,l){l={};for(var v=0;v<h.length;v++)l["$"+h[v]]=!0;for(h=0;h<o.length;h++)v=l.hasOwnProperty("$"+o[h].value),o[h].selected!==v&&(o[h].selected=v),v&&p&&(o[h].defaultSelected=!0)}else{for(h=""+Ge(h),l=null,v=0;v<o.length;v++){if(o[v].value===h){o[v].selected=!0,p&&(o[v].defaultSelected=!0);return}l!==null||o[v].disabled||(l=o[v])}l!==null&&(l.selected=!0)}}function wr(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Ps(o,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(t(92));if(xn(h)){if(1<h.length)throw Error(t(93));h=h[0]}l=h}l==null&&(l=""),h=l}o._wrapperState={initialValue:Ge(h)}}function tl(o,l){var h=Ge(l.value),p=Ge(l.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),l.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),p!=null&&(o.defaultValue=""+p)}function Hc(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Jt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yt(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Jt(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Fi,Kc=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,p,v){MSApp.execUnsafeLocalFunction(function(){return o(l,h,p,v)})}:o}(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Fi=Fi||document.createElement("div"),Fi.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Fi.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Rs(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qo=["Webkit","ms","Moz","O"];Object.keys(zo).forEach(function(o){qo.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),zo[l]=zo[o]})});function Gc(o,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||zo.hasOwnProperty(o)&&zo[o]?(""+l).trim():l+"px"}function Qc(o,l){o=o.style;for(var h in l)if(l.hasOwnProperty(h)){var p=h.indexOf("--")===0,v=Gc(h,l[h],p);h==="float"&&(h="cssFloat"),p?o.setProperty(h,v):o[h]=v}}var Jc=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yc(o,l){if(l){if(Jc[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Xc(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $o=null;function nl(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var rl=null,br=null,pi=null;function il(o){if(o=bu(o)){if(typeof rl!="function")throw Error(t(280));var l=o.stateNode;l&&(l=uf(l),rl(o.stateNode,o.type,l))}}function gi(o){br?pi?pi.push(o):pi=[o]:br=o}function Zc(){if(br){var o=br,l=pi;if(pi=br=null,il(o),l)for(o=0;o<l.length;o++)il(l[o])}}function Wo(o,l){return o(l)}function eu(){}var Bi=!1;function tu(o,l,h){if(Bi)return o(l,h);Bi=!0;try{return Wo(o,l,h)}finally{Bi=!1,(br!==null||pi!==null)&&(eu(),Zc())}}function Bt(o,l){var h=o.stateNode;if(h===null)return null;var p=uf(h);if(p===null)return null;h=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(t(231,l,typeof h));return h}var sl=!1;if(c)try{var $r={};Object.defineProperty($r,"passive",{get:function(){sl=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{sl=!1}function Ho(o,l,h,p,v,w,T,M,B){var Y=Array.prototype.slice.call(arguments,3);try{l.apply(h,Y)}catch(se){this.onError(se)}}var Ko=!1,ol=null,Wr=!1,nu=null,jg={onError:function(o){Ko=!0,ol=o}};function al(o,l,h,p,v,w,T,M,B){Ko=!1,ol=null,Ho.apply(jg,arguments)}function Dh(o,l,h,p,v,w,T,M,B){if(al.apply(this,arguments),Ko){if(Ko){var Y=ol;Ko=!1,ol=null}else throw Error(t(198));Wr||(Wr=!0,nu=Y)}}function Hr(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,l.flags&4098&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function Go(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function Kr(o){if(Hr(o)!==o)throw Error(t(188))}function Lh(o){var l=o.alternate;if(!l){if(l=Hr(o),l===null)throw Error(t(188));return l!==o?null:o}for(var h=o,p=l;;){var v=h.return;if(v===null)break;var w=v.alternate;if(w===null){if(p=v.return,p!==null){h=p;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===h)return Kr(v),o;if(w===p)return Kr(v),l;w=w.sibling}throw Error(t(188))}if(h.return!==p.return)h=v,p=w;else{for(var T=!1,M=v.child;M;){if(M===h){T=!0,h=v,p=w;break}if(M===p){T=!0,p=v,h=w;break}M=M.sibling}if(!T){for(M=w.child;M;){if(M===h){T=!0,h=w,p=v;break}if(M===p){T=!0,p=w,h=v;break}M=M.sibling}if(!T)throw Error(t(189))}}if(h.alternate!==p)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?o:l}function ru(o){return o=Lh(o),o!==null?ll(o):null}function ll(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=ll(o);if(l!==null)return l;o=o.sibling}return null}var cl=e.unstable_scheduleCallback,iu=e.unstable_cancelCallback,Mh=e.unstable_shouldYield,Dg=e.unstable_requestPaint,mt=e.unstable_now,Vh=e.unstable_getCurrentPriorityLevel,Qo=e.unstable_ImmediatePriority,js=e.unstable_UserBlockingPriority,kr=e.unstable_NormalPriority,su=e.unstable_LowPriority,Oh=e.unstable_IdlePriority,Jo=null,ar=null;function Fh(o){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(Jo,o,void 0,(o.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:Uh,ou=Math.log,Bh=Math.LN2;function Uh(o){return o>>>=0,o===0?32:31-(ou(o)/Bh|0)|0}var ul=64,dl=4194304;function Ds(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Yo(o,l){var h=o.pendingLanes;if(h===0)return 0;var p=0,v=o.suspendedLanes,w=o.pingedLanes,T=h&268435455;if(T!==0){var M=T&~v;M!==0?p=Ds(M):(w&=T,w!==0&&(p=Ds(w)))}else T=h&~v,T!==0?p=Ds(T):w!==0&&(p=Ds(w));if(p===0)return 0;if(l!==0&&l!==p&&!(l&v)&&(v=p&-p,w=l&-l,v>=w||v===16&&(w&4194240)!==0))return l;if(p&4&&(p|=h&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=p;0<l;)h=31-Bn(l),v=1<<h,p|=o[h],l&=~v;return p}function Lg(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ui(o,l){for(var h=o.suspendedLanes,p=o.pingedLanes,v=o.expirationTimes,w=o.pendingLanes;0<w;){var T=31-Bn(w),M=1<<T,B=v[T];B===-1?(!(M&h)||M&p)&&(v[T]=Lg(M,l)):B<=l&&(o.expiredLanes|=M),w&=~M}}function lr(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Xo(){var o=ul;return ul<<=1,!(ul&4194240)&&(ul=64),o}function Ls(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function Ms(o,l,h){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Bn(l),o[l]=h}function ft(o,l){var h=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var p=o.eventTimes;for(o=o.expirationTimes;0<h;){var v=31-Bn(h),w=1<<v;l[v]=0,p[v]=-1,o[v]=-1,h&=~w}}function Vs(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var p=31-Bn(h),v=1<<p;v&l|o[p]&l&&(o[p]|=l),h&=~v}}var Ye=0;function Os(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var zh,hl,qh,$h,Wh,au=!1,yi=[],_n=null,Gr=null,Qr=null,Fs=new Map,Er=new Map,vi=[],Mg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hh(o,l){switch(o){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":Fs.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(l.pointerId)}}function Yn(o,l,h,p,v,w){return o===null||o.nativeEvent!==w?(o={blockedOn:l,domEventName:h,eventSystemFlags:p,nativeEvent:w,targetContainers:[v]},l!==null&&(l=bu(l),l!==null&&hl(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),o)}function Vg(o,l,h,p,v){switch(l){case"focusin":return _n=Yn(_n,o,l,h,p,v),!0;case"dragenter":return Gr=Yn(Gr,o,l,h,p,v),!0;case"mouseover":return Qr=Yn(Qr,o,l,h,p,v),!0;case"pointerover":var w=v.pointerId;return Fs.set(w,Yn(Fs.get(w)||null,o,l,h,p,v)),!0;case"gotpointercapture":return w=v.pointerId,Er.set(w,Yn(Er.get(w)||null,o,l,h,p,v)),!0}return!1}function Kh(o){var l=ra(o.target);if(l!==null){var h=Hr(l);if(h!==null){if(l=h.tag,l===13){if(l=Go(h),l!==null){o.blockedOn=l,Wh(o.priority,function(){qh(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function zi(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=fl(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var p=new h.constructor(h.type,h);$o=p,h.target.dispatchEvent(p),$o=null}else return l=bu(h),l!==null&&hl(l),o.blockedOn=h,!1;l.shift()}return!0}function Zo(o,l,h){zi(o)&&h.delete(l)}function Gh(){au=!1,_n!==null&&zi(_n)&&(_n=null),Gr!==null&&zi(Gr)&&(Gr=null),Qr!==null&&zi(Qr)&&(Qr=null),Fs.forEach(Zo),Er.forEach(Zo)}function Jr(o,l){o.blockedOn===l&&(o.blockedOn=null,au||(au=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gh)))}function Yr(o){function l(v){return Jr(v,o)}if(0<yi.length){Jr(yi[0],o);for(var h=1;h<yi.length;h++){var p=yi[h];p.blockedOn===o&&(p.blockedOn=null)}}for(_n!==null&&Jr(_n,o),Gr!==null&&Jr(Gr,o),Qr!==null&&Jr(Qr,o),Fs.forEach(l),Er.forEach(l),h=0;h<vi.length;h++)p=vi[h],p.blockedOn===o&&(p.blockedOn=null);for(;0<vi.length&&(h=vi[0],h.blockedOn===null);)Kh(h),h.blockedOn===null&&vi.shift()}var qi=Q.ReactCurrentBatchConfig,Bs=!0;function wt(o,l,h,p){var v=Ye,w=qi.transition;qi.transition=null;try{Ye=1,lu(o,l,h,p)}finally{Ye=v,qi.transition=w}}function Og(o,l,h,p){var v=Ye,w=qi.transition;qi.transition=null;try{Ye=4,lu(o,l,h,p)}finally{Ye=v,qi.transition=w}}function lu(o,l,h,p){if(Bs){var v=fl(o,l,h,p);if(v===null)Qg(o,l,p,ea,h),Hh(o,p);else if(Vg(v,o,l,h,p))p.stopPropagation();else if(Hh(o,p),l&4&&-1<Mg.indexOf(o)){for(;v!==null;){var w=bu(v);if(w!==null&&zh(w),w=fl(o,l,h,p),w===null&&Qg(o,l,p,ea,h),w===v)break;v=w}v!==null&&p.stopPropagation()}else Qg(o,l,p,null,h)}}var ea=null;function fl(o,l,h,p){if(ea=null,o=nl(p),o=ra(o),o!==null)if(l=Hr(o),l===null)o=null;else if(h=l.tag,h===13){if(o=Go(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return ea=o,null}function cu(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vh()){case Qo:return 1;case js:return 4;case kr:case su:return 16;case Oh:return 536870912;default:return 16}default:return 16}}var cr=null,ml=null,Xn=null;function uu(){if(Xn)return Xn;var o,l=ml,h=l.length,p,v="value"in cr?cr.value:cr.textContent,w=v.length;for(o=0;o<h&&l[o]===v[o];o++);var T=h-o;for(p=1;p<=T&&l[h-p]===v[w-p];p++);return Xn=v.slice(o,1<p?1-p:void 0)}function pl(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function xi(){return!0}function du(){return!1}function wn(o){function l(h,p,v,w,T){this._reactName=h,this._targetInst=v,this.type=p,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var M in o)o.hasOwnProperty(M)&&(h=o[M],this[M]=h?h(w):w[M]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?xi:du,this.isPropagationStopped=du,this}return he(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=xi)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=xi)},persist:function(){},isPersistent:xi}),l}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gl=wn(Xr),_i=he({},Xr,{view:0,detail:0}),Fg=wn(_i),yl,$i,Us,ta=he({},_i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wi,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Us&&(Us&&o.type==="mousemove"?(yl=o.screenX-Us.screenX,$i=o.screenY-Us.screenY):$i=yl=0,Us=o),yl)},movementY:function(o){return"movementY"in o?o.movementY:$i}}),vl=wn(ta),hu=he({},ta,{dataTransfer:0}),Qh=wn(hu),xl=he({},_i,{relatedTarget:0}),_l=wn(xl),Jh=he({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wi=wn(Jh),Yh=he({},Xr,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Xh=wn(Yh),Zh=he({},Xr,{data:0}),fu=wn(Zh),wl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ef={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tf(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=ef[o])?!!l[o]:!1}function wi(){return tf}var m=he({},_i,{key:function(o){if(o.key){var l=wl[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=pl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Un[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wi,charCode:function(o){return o.type==="keypress"?pl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?pl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),_=wn(m),b=he({},ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R=wn(b),H=he({},_i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wi}),X=wn(H),ue=he({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),lt=wn(ue),Xt=he({},ta,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ze=wn(Xt),ln=[9,13,27,32],$t=c&&"CompositionEvent"in window,Tr=null;c&&"documentMode"in document&&(Tr=document.documentMode);var ur=c&&"TextEvent"in window&&!Tr,na=c&&(!$t||Tr&&8<Tr&&11>=Tr),bl=" ",Jw=!1;function Yw(o,l){switch(o){case"keyup":return ln.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var kl=!1;function wj(o,l){switch(o){case"compositionend":return Xw(l);case"keypress":return l.which!==32?null:(Jw=!0,bl);case"textInput":return o=l.data,o===bl&&Jw?null:o;default:return null}}function bj(o,l){if(kl)return o==="compositionend"||!$t&&Yw(o,l)?(o=uu(),Xn=ml=cr=null,kl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return na&&l.locale!=="ko"?null:l.data;default:return null}}var kj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zw(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!kj[o.type]:l==="textarea"}function e1(o,l,h,p){gi(p),l=af(l,"onChange"),0<l.length&&(h=new gl("onChange","change",null,h,p),o.push({event:h,listeners:l}))}var mu=null,pu=null;function Ej(o){v1(o,0)}function nf(o){var l=Cl(o);if(Xe(l))return o}function Tj(o,l){if(o==="change")return l}var t1=!1;if(c){var Bg;if(c){var Ug="oninput"in document;if(!Ug){var n1=document.createElement("div");n1.setAttribute("oninput","return;"),Ug=typeof n1.oninput=="function"}Bg=Ug}else Bg=!1;t1=Bg&&(!document.documentMode||9<document.documentMode)}function r1(){mu&&(mu.detachEvent("onpropertychange",i1),pu=mu=null)}function i1(o){if(o.propertyName==="value"&&nf(pu)){var l=[];e1(l,pu,o,nl(o)),tu(Ej,l)}}function Ij(o,l,h){o==="focusin"?(r1(),mu=l,pu=h,mu.attachEvent("onpropertychange",i1)):o==="focusout"&&r1()}function Sj(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return nf(pu)}function Cj(o,l){if(o==="click")return nf(l)}function Nj(o,l){if(o==="input"||o==="change")return nf(l)}function Aj(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Zr=typeof Object.is=="function"?Object.is:Aj;function gu(o,l){if(Zr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),p=Object.keys(l);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var v=h[p];if(!d.call(l,v)||!Zr(o[v],l[v]))return!1}return!0}function s1(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function o1(o,l){var h=s1(o);o=0;for(var p;h;){if(h.nodeType===3){if(p=o+h.textContent.length,o<=l&&p>=l)return{node:h,offset:l-o};o=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=s1(h)}}function a1(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?a1(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function l1(){for(var o=window,l=an();l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=an(o.document)}return l}function zg(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function Pj(o){var l=l1(),h=o.focusedElem,p=o.selectionRange;if(l!==h&&h&&h.ownerDocument&&a1(h.ownerDocument.documentElement,h)){if(p!==null&&zg(h)){if(l=p.start,o=p.end,o===void 0&&(o=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(o,h.value.length);else if(o=(l=h.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var v=h.textContent.length,w=Math.min(p.start,v);p=p.end===void 0?w:Math.min(p.end,v),!o.extend&&w>p&&(v=p,p=w,w=v),v=o1(h,w);var T=o1(h,p);v&&T&&(o.rangeCount!==1||o.anchorNode!==v.node||o.anchorOffset!==v.offset||o.focusNode!==T.node||o.focusOffset!==T.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),o.removeAllRanges(),w>p?(o.addRange(l),o.extend(T.node,T.offset)):(l.setEnd(T.node,T.offset),o.addRange(l)))}}for(l=[],o=h;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)o=l[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Rj=c&&"documentMode"in document&&11>=document.documentMode,El=null,qg=null,yu=null,$g=!1;function c1(o,l,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;$g||El==null||El!==an(p)||(p=El,"selectionStart"in p&&zg(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),yu&&gu(yu,p)||(yu=p,p=af(qg,"onSelect"),0<p.length&&(l=new gl("onSelect","select",null,l,h),o.push({event:l,listeners:p}),l.target=El)))}function rf(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var Tl={animationend:rf("Animation","AnimationEnd"),animationiteration:rf("Animation","AnimationIteration"),animationstart:rf("Animation","AnimationStart"),transitionend:rf("Transition","TransitionEnd")},Wg={},u1={};c&&(u1=document.createElement("div").style,"AnimationEvent"in window||(delete Tl.animationend.animation,delete Tl.animationiteration.animation,delete Tl.animationstart.animation),"TransitionEvent"in window||delete Tl.transitionend.transition);function sf(o){if(Wg[o])return Wg[o];if(!Tl[o])return o;var l=Tl[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in u1)return Wg[o]=l[h];return o}var d1=sf("animationend"),h1=sf("animationiteration"),f1=sf("animationstart"),m1=sf("transitionend"),p1=new Map,g1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(o,l){p1.set(o,l),s(l,[o])}for(var Hg=0;Hg<g1.length;Hg++){var Kg=g1[Hg],jj=Kg.toLowerCase(),Dj=Kg[0].toUpperCase()+Kg.slice(1);zs(jj,"on"+Dj)}zs(d1,"onAnimationEnd"),zs(h1,"onAnimationIteration"),zs(f1,"onAnimationStart"),zs("dblclick","onDoubleClick"),zs("focusin","onFocus"),zs("focusout","onBlur"),zs(m1,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lj=new Set("cancel close invalid load scroll toggle".split(" ").concat(vu));function y1(o,l,h){var p=o.type||"unknown-event";o.currentTarget=h,Dh(p,l,void 0,o),o.currentTarget=null}function v1(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var p=o[h],v=p.event;p=p.listeners;e:{var w=void 0;if(l)for(var T=p.length-1;0<=T;T--){var M=p[T],B=M.instance,Y=M.currentTarget;if(M=M.listener,B!==w&&v.isPropagationStopped())break e;y1(v,M,Y),w=B}else for(T=0;T<p.length;T++){if(M=p[T],B=M.instance,Y=M.currentTarget,M=M.listener,B!==w&&v.isPropagationStopped())break e;y1(v,M,Y),w=B}}}if(Wr)throw o=nu,Wr=!1,nu=null,o}function xt(o,l){var h=l[t0];h===void 0&&(h=l[t0]=new Set);var p=o+"__bubble";h.has(p)||(x1(l,o,2,!1),h.add(p))}function Gg(o,l,h){var p=0;l&&(p|=4),x1(h,o,p,l)}var of="_reactListening"+Math.random().toString(36).slice(2);function xu(o){if(!o[of]){o[of]=!0,r.forEach(function(h){h!=="selectionchange"&&(Lj.has(h)||Gg(h,!1,o),Gg(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[of]||(l[of]=!0,Gg("selectionchange",!1,l))}}function x1(o,l,h,p){switch(cu(l)){case 1:var v=wt;break;case 4:v=Og;break;default:v=lu}h=v.bind(null,l,h,o),v=void 0,!sl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),p?v!==void 0?o.addEventListener(l,h,{capture:!0,passive:v}):o.addEventListener(l,h,!0):v!==void 0?o.addEventListener(l,h,{passive:v}):o.addEventListener(l,h,!1)}function Qg(o,l,h,p,v){var w=p;if(!(l&1)&&!(l&2)&&p!==null)e:for(;;){if(p===null)return;var T=p.tag;if(T===3||T===4){var M=p.stateNode.containerInfo;if(M===v||M.nodeType===8&&M.parentNode===v)break;if(T===4)for(T=p.return;T!==null;){var B=T.tag;if((B===3||B===4)&&(B=T.stateNode.containerInfo,B===v||B.nodeType===8&&B.parentNode===v))return;T=T.return}for(;M!==null;){if(T=ra(M),T===null)return;if(B=T.tag,B===5||B===6){p=w=T;continue e}M=M.parentNode}}p=p.return}tu(function(){var Y=w,se=nl(h),oe=[];e:{var ie=p1.get(o);if(ie!==void 0){var pe=gl,_e=o;switch(o){case"keypress":if(pl(h)===0)break e;case"keydown":case"keyup":pe=_;break;case"focusin":_e="focus",pe=_l;break;case"focusout":_e="blur",pe=_l;break;case"beforeblur":case"afterblur":pe=_l;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Qh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=X;break;case d1:case h1:case f1:pe=Wi;break;case m1:pe=lt;break;case"scroll":pe=Fg;break;case"wheel":pe=Ze;break;case"copy":case"cut":case"paste":pe=Xh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=R}var we=(l&4)!==0,Ut=!we&&o==="scroll",G=we?ie!==null?ie+"Capture":null:ie;we=[];for(var z=Y,J;z!==null;){J=z;var le=J.stateNode;if(J.tag===5&&le!==null&&(J=le,G!==null&&(le=Bt(z,G),le!=null&&we.push(_u(z,le,J)))),Ut)break;z=z.return}0<we.length&&(ie=new pe(ie,_e,null,h,se),oe.push({event:ie,listeners:we}))}}if(!(l&7)){e:{if(ie=o==="mouseover"||o==="pointerover",pe=o==="mouseout"||o==="pointerout",ie&&h!==$o&&(_e=h.relatedTarget||h.fromElement)&&(ra(_e)||_e[Hi]))break e;if((pe||ie)&&(ie=se.window===se?se:(ie=se.ownerDocument)?ie.defaultView||ie.parentWindow:window,pe?(_e=h.relatedTarget||h.toElement,pe=Y,_e=_e?ra(_e):null,_e!==null&&(Ut=Hr(_e),_e!==Ut||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(pe=null,_e=Y),pe!==_e)){if(we=vl,le="onMouseLeave",G="onMouseEnter",z="mouse",(o==="pointerout"||o==="pointerover")&&(we=R,le="onPointerLeave",G="onPointerEnter",z="pointer"),Ut=pe==null?ie:Cl(pe),J=_e==null?ie:Cl(_e),ie=new we(le,z+"leave",pe,h,se),ie.target=Ut,ie.relatedTarget=J,le=null,ra(se)===Y&&(we=new we(G,z+"enter",_e,h,se),we.target=J,we.relatedTarget=Ut,le=we),Ut=le,pe&&_e)t:{for(we=pe,G=_e,z=0,J=we;J;J=Il(J))z++;for(J=0,le=G;le;le=Il(le))J++;for(;0<z-J;)we=Il(we),z--;for(;0<J-z;)G=Il(G),J--;for(;z--;){if(we===G||G!==null&&we===G.alternate)break t;we=Il(we),G=Il(G)}we=null}else we=null;pe!==null&&_1(oe,ie,pe,we,!1),_e!==null&&Ut!==null&&_1(oe,Ut,_e,we,!0)}}e:{if(ie=Y?Cl(Y):window,pe=ie.nodeName&&ie.nodeName.toLowerCase(),pe==="select"||pe==="input"&&ie.type==="file")var ke=Tj;else if(Zw(ie))if(t1)ke=Nj;else{ke=Sj;var Ce=Ij}else(pe=ie.nodeName)&&pe.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(ke=Cj);if(ke&&(ke=ke(o,Y))){e1(oe,ke,h,se);break e}Ce&&Ce(o,ie,Y),o==="focusout"&&(Ce=ie._wrapperState)&&Ce.controlled&&ie.type==="number"&&ht(ie,"number",ie.value)}switch(Ce=Y?Cl(Y):window,o){case"focusin":(Zw(Ce)||Ce.contentEditable==="true")&&(El=Ce,qg=Y,yu=null);break;case"focusout":yu=qg=El=null;break;case"mousedown":$g=!0;break;case"contextmenu":case"mouseup":case"dragend":$g=!1,c1(oe,h,se);break;case"selectionchange":if(Rj)break;case"keydown":case"keyup":c1(oe,h,se)}var Ne;if($t)e:{switch(o){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else kl?Yw(o,h)&&(Le="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Le="onCompositionStart");Le&&(na&&h.locale!=="ko"&&(kl||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&kl&&(Ne=uu()):(cr=se,ml="value"in cr?cr.value:cr.textContent,kl=!0)),Ce=af(Y,Le),0<Ce.length&&(Le=new fu(Le,o,null,h,se),oe.push({event:Le,listeners:Ce}),Ne?Le.data=Ne:(Ne=Xw(h),Ne!==null&&(Le.data=Ne)))),(Ne=ur?wj(o,h):bj(o,h))&&(Y=af(Y,"onBeforeInput"),0<Y.length&&(se=new fu("onBeforeInput","beforeinput",null,h,se),oe.push({event:se,listeners:Y}),se.data=Ne))}v1(oe,l)})}function _u(o,l,h){return{instance:o,listener:l,currentTarget:h}}function af(o,l){for(var h=l+"Capture",p=[];o!==null;){var v=o,w=v.stateNode;v.tag===5&&w!==null&&(v=w,w=Bt(o,h),w!=null&&p.unshift(_u(o,w,v)),w=Bt(o,l),w!=null&&p.push(_u(o,w,v))),o=o.return}return p}function Il(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function _1(o,l,h,p,v){for(var w=l._reactName,T=[];h!==null&&h!==p;){var M=h,B=M.alternate,Y=M.stateNode;if(B!==null&&B===p)break;M.tag===5&&Y!==null&&(M=Y,v?(B=Bt(h,w),B!=null&&T.unshift(_u(h,B,M))):v||(B=Bt(h,w),B!=null&&T.push(_u(h,B,M)))),h=h.return}T.length!==0&&o.push({event:l,listeners:T})}var Mj=/\r\n?/g,Vj=/\u0000|\uFFFD/g;function w1(o){return(typeof o=="string"?o:""+o).replace(Mj,`
`).replace(Vj,"")}function lf(o,l,h){if(l=w1(l),w1(o)!==l&&h)throw Error(t(425))}function cf(){}var Jg=null,Yg=null;function Xg(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Zg=typeof setTimeout=="function"?setTimeout:void 0,Oj=typeof clearTimeout=="function"?clearTimeout:void 0,b1=typeof Promise=="function"?Promise:void 0,Fj=typeof queueMicrotask=="function"?queueMicrotask:typeof b1<"u"?function(o){return b1.resolve(null).then(o).catch(Bj)}:Zg;function Bj(o){setTimeout(function(){throw o})}function e0(o,l){var h=l,p=0;do{var v=h.nextSibling;if(o.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(p===0){o.removeChild(v),Yr(l);return}p--}else h!=="$"&&h!=="$?"&&h!=="$!"||p++;h=v}while(h);Yr(l)}function qs(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function k1(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return o;l--}else h==="/$"&&l++}o=o.previousSibling}return null}var Sl=Math.random().toString(36).slice(2),bi="__reactFiber$"+Sl,wu="__reactProps$"+Sl,Hi="__reactContainer$"+Sl,t0="__reactEvents$"+Sl,Uj="__reactListeners$"+Sl,zj="__reactHandles$"+Sl;function ra(o){var l=o[bi];if(l)return l;for(var h=o.parentNode;h;){if(l=h[Hi]||h[bi]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=k1(o);o!==null;){if(h=o[bi])return h;o=k1(o)}return l}o=h,h=o.parentNode}return null}function bu(o){return o=o[bi]||o[Hi],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Cl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function uf(o){return o[wu]||null}var n0=[],Nl=-1;function $s(o){return{current:o}}function _t(o){0>Nl||(o.current=n0[Nl],n0[Nl]=null,Nl--)}function pt(o,l){Nl++,n0[Nl]=o.current,o.current=l}var Ws={},Nn=$s(Ws),Zn=$s(!1),ia=Ws;function Al(o,l){var h=o.type.contextTypes;if(!h)return Ws;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in h)v[w]=l[w];return p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=v),v}function er(o){return o=o.childContextTypes,o!=null}function df(){_t(Zn),_t(Nn)}function E1(o,l,h){if(Nn.current!==Ws)throw Error(t(168));pt(Nn,l),pt(Zn,h)}function T1(o,l,h){var p=o.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return h;p=p.getChildContext();for(var v in p)if(!(v in l))throw Error(t(108,Ue(o)||"Unknown",v));return he({},h,p)}function hf(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Ws,ia=Nn.current,pt(Nn,o),pt(Zn,Zn.current),!0}function I1(o,l,h){var p=o.stateNode;if(!p)throw Error(t(169));h?(o=T1(o,l,ia),p.__reactInternalMemoizedMergedChildContext=o,_t(Zn),_t(Nn),pt(Nn,o)):_t(Zn),pt(Zn,h)}var Ki=null,ff=!1,r0=!1;function S1(o){Ki===null?Ki=[o]:Ki.push(o)}function qj(o){ff=!0,S1(o)}function Hs(){if(!r0&&Ki!==null){r0=!0;var o=0,l=Ye;try{var h=Ki;for(Ye=1;o<h.length;o++){var p=h[o];do p=p(!0);while(p!==null)}Ki=null,ff=!1}catch(v){throw Ki!==null&&(Ki=Ki.slice(o+1)),cl(Qo,Hs),v}finally{Ye=l,r0=!1}}return null}var Pl=[],Rl=0,mf=null,pf=0,Ir=[],Sr=0,sa=null,Gi=1,Qi="";function oa(o,l){Pl[Rl++]=pf,Pl[Rl++]=mf,mf=o,pf=l}function C1(o,l,h){Ir[Sr++]=Gi,Ir[Sr++]=Qi,Ir[Sr++]=sa,sa=o;var p=Gi;o=Qi;var v=32-Bn(p)-1;p&=~(1<<v),h+=1;var w=32-Bn(l)+v;if(30<w){var T=v-v%5;w=(p&(1<<T)-1).toString(32),p>>=T,v-=T,Gi=1<<32-Bn(l)+v|h<<v|p,Qi=w+o}else Gi=1<<w|h<<v|p,Qi=o}function i0(o){o.return!==null&&(oa(o,1),C1(o,1,0))}function s0(o){for(;o===mf;)mf=Pl[--Rl],Pl[Rl]=null,pf=Pl[--Rl],Pl[Rl]=null;for(;o===sa;)sa=Ir[--Sr],Ir[Sr]=null,Qi=Ir[--Sr],Ir[Sr]=null,Gi=Ir[--Sr],Ir[Sr]=null}var dr=null,hr=null,bt=!1,ei=null;function N1(o,l){var h=Pr(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=o,l=o.deletions,l===null?(o.deletions=[h],o.flags|=16):l.push(h)}function A1(o,l){switch(o.tag){case 5:var h=o.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,dr=o,hr=qs(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,dr=o,hr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=sa!==null?{id:Gi,overflow:Qi}:null,o.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=Pr(18,null,null,0),h.stateNode=l,h.return=o,o.child=h,dr=o,hr=null,!0):!1;default:return!1}}function o0(o){return(o.mode&1)!==0&&(o.flags&128)===0}function a0(o){if(bt){var l=hr;if(l){var h=l;if(!A1(o,l)){if(o0(o))throw Error(t(418));l=qs(h.nextSibling);var p=dr;l&&A1(o,l)?N1(p,h):(o.flags=o.flags&-4097|2,bt=!1,dr=o)}}else{if(o0(o))throw Error(t(418));o.flags=o.flags&-4097|2,bt=!1,dr=o}}}function P1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;dr=o}function gf(o){if(o!==dr)return!1;if(!bt)return P1(o),bt=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Xg(o.type,o.memoizedProps)),l&&(l=hr)){if(o0(o))throw R1(),Error(t(418));for(;l;)N1(o,l),l=qs(l.nextSibling)}if(P1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(l===0){hr=qs(o.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}o=o.nextSibling}hr=null}}else hr=dr?qs(o.stateNode.nextSibling):null;return!0}function R1(){for(var o=hr;o;)o=qs(o.nextSibling)}function jl(){hr=dr=null,bt=!1}function l0(o){ei===null?ei=[o]:ei.push(o)}var $j=Q.ReactCurrentBatchConfig;function ku(o,l,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var p=h.stateNode}if(!p)throw Error(t(147,o));var v=p,w=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===w?l.ref:(l=function(T){var M=v.refs;T===null?delete M[w]:M[w]=T},l._stringRef=w,l)}if(typeof o!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,o))}return o}function yf(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function j1(o){var l=o._init;return l(o._payload)}function D1(o){function l(G,z){if(o){var J=G.deletions;J===null?(G.deletions=[z],G.flags|=16):J.push(z)}}function h(G,z){if(!o)return null;for(;z!==null;)l(G,z),z=z.sibling;return null}function p(G,z){for(G=new Map;z!==null;)z.key!==null?G.set(z.key,z):G.set(z.index,z),z=z.sibling;return G}function v(G,z){return G=eo(G,z),G.index=0,G.sibling=null,G}function w(G,z,J){return G.index=J,o?(J=G.alternate,J!==null?(J=J.index,J<z?(G.flags|=2,z):J):(G.flags|=2,z)):(G.flags|=1048576,z)}function T(G){return o&&G.alternate===null&&(G.flags|=2),G}function M(G,z,J,le){return z===null||z.tag!==6?(z=Z0(J,G.mode,le),z.return=G,z):(z=v(z,J),z.return=G,z)}function B(G,z,J,le){var ke=J.type;return ke===C?se(G,z,J.props.children,le,J.key):z!==null&&(z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Me&&j1(ke)===z.type)?(le=v(z,J.props),le.ref=ku(G,z,J),le.return=G,le):(le=Uf(J.type,J.key,J.props,null,G.mode,le),le.ref=ku(G,z,J),le.return=G,le)}function Y(G,z,J,le){return z===null||z.tag!==4||z.stateNode.containerInfo!==J.containerInfo||z.stateNode.implementation!==J.implementation?(z=ey(J,G.mode,le),z.return=G,z):(z=v(z,J.children||[]),z.return=G,z)}function se(G,z,J,le,ke){return z===null||z.tag!==7?(z=ma(J,G.mode,le,ke),z.return=G,z):(z=v(z,J),z.return=G,z)}function oe(G,z,J){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Z0(""+z,G.mode,J),z.return=G,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case W:return J=Uf(z.type,z.key,z.props,null,G.mode,J),J.ref=ku(G,null,z),J.return=G,J;case U:return z=ey(z,G.mode,J),z.return=G,z;case Me:var le=z._init;return oe(G,le(z._payload),J)}if(xn(z)||ve(z))return z=ma(z,G.mode,J,null),z.return=G,z;yf(G,z)}return null}function ie(G,z,J,le){var ke=z!==null?z.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return ke!==null?null:M(G,z,""+J,le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case W:return J.key===ke?B(G,z,J,le):null;case U:return J.key===ke?Y(G,z,J,le):null;case Me:return ke=J._init,ie(G,z,ke(J._payload),le)}if(xn(J)||ve(J))return ke!==null?null:se(G,z,J,le,null);yf(G,J)}return null}function pe(G,z,J,le,ke){if(typeof le=="string"&&le!==""||typeof le=="number")return G=G.get(J)||null,M(z,G,""+le,ke);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case W:return G=G.get(le.key===null?J:le.key)||null,B(z,G,le,ke);case U:return G=G.get(le.key===null?J:le.key)||null,Y(z,G,le,ke);case Me:var Ce=le._init;return pe(G,z,J,Ce(le._payload),ke)}if(xn(le)||ve(le))return G=G.get(J)||null,se(z,G,le,ke,null);yf(z,le)}return null}function _e(G,z,J,le){for(var ke=null,Ce=null,Ne=z,Le=z=0,dn=null;Ne!==null&&Le<J.length;Le++){Ne.index>Le?(dn=Ne,Ne=null):dn=Ne.sibling;var rt=ie(G,Ne,J[Le],le);if(rt===null){Ne===null&&(Ne=dn);break}o&&Ne&&rt.alternate===null&&l(G,Ne),z=w(rt,z,Le),Ce===null?ke=rt:Ce.sibling=rt,Ce=rt,Ne=dn}if(Le===J.length)return h(G,Ne),bt&&oa(G,Le),ke;if(Ne===null){for(;Le<J.length;Le++)Ne=oe(G,J[Le],le),Ne!==null&&(z=w(Ne,z,Le),Ce===null?ke=Ne:Ce.sibling=Ne,Ce=Ne);return bt&&oa(G,Le),ke}for(Ne=p(G,Ne);Le<J.length;Le++)dn=pe(Ne,G,Le,J[Le],le),dn!==null&&(o&&dn.alternate!==null&&Ne.delete(dn.key===null?Le:dn.key),z=w(dn,z,Le),Ce===null?ke=dn:Ce.sibling=dn,Ce=dn);return o&&Ne.forEach(function(to){return l(G,to)}),bt&&oa(G,Le),ke}function we(G,z,J,le){var ke=ve(J);if(typeof ke!="function")throw Error(t(150));if(J=ke.call(J),J==null)throw Error(t(151));for(var Ce=ke=null,Ne=z,Le=z=0,dn=null,rt=J.next();Ne!==null&&!rt.done;Le++,rt=J.next()){Ne.index>Le?(dn=Ne,Ne=null):dn=Ne.sibling;var to=ie(G,Ne,rt.value,le);if(to===null){Ne===null&&(Ne=dn);break}o&&Ne&&to.alternate===null&&l(G,Ne),z=w(to,z,Le),Ce===null?ke=to:Ce.sibling=to,Ce=to,Ne=dn}if(rt.done)return h(G,Ne),bt&&oa(G,Le),ke;if(Ne===null){for(;!rt.done;Le++,rt=J.next())rt=oe(G,rt.value,le),rt!==null&&(z=w(rt,z,Le),Ce===null?ke=rt:Ce.sibling=rt,Ce=rt);return bt&&oa(G,Le),ke}for(Ne=p(G,Ne);!rt.done;Le++,rt=J.next())rt=pe(Ne,G,Le,rt.value,le),rt!==null&&(o&&rt.alternate!==null&&Ne.delete(rt.key===null?Le:rt.key),z=w(rt,z,Le),Ce===null?ke=rt:Ce.sibling=rt,Ce=rt);return o&&Ne.forEach(function(k4){return l(G,k4)}),bt&&oa(G,Le),ke}function Ut(G,z,J,le){if(typeof J=="object"&&J!==null&&J.type===C&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case W:e:{for(var ke=J.key,Ce=z;Ce!==null;){if(Ce.key===ke){if(ke=J.type,ke===C){if(Ce.tag===7){h(G,Ce.sibling),z=v(Ce,J.props.children),z.return=G,G=z;break e}}else if(Ce.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Me&&j1(ke)===Ce.type){h(G,Ce.sibling),z=v(Ce,J.props),z.ref=ku(G,Ce,J),z.return=G,G=z;break e}h(G,Ce);break}else l(G,Ce);Ce=Ce.sibling}J.type===C?(z=ma(J.props.children,G.mode,le,J.key),z.return=G,G=z):(le=Uf(J.type,J.key,J.props,null,G.mode,le),le.ref=ku(G,z,J),le.return=G,G=le)}return T(G);case U:e:{for(Ce=J.key;z!==null;){if(z.key===Ce)if(z.tag===4&&z.stateNode.containerInfo===J.containerInfo&&z.stateNode.implementation===J.implementation){h(G,z.sibling),z=v(z,J.children||[]),z.return=G,G=z;break e}else{h(G,z);break}else l(G,z);z=z.sibling}z=ey(J,G.mode,le),z.return=G,G=z}return T(G);case Me:return Ce=J._init,Ut(G,z,Ce(J._payload),le)}if(xn(J))return _e(G,z,J,le);if(ve(J))return we(G,z,J,le);yf(G,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,z!==null&&z.tag===6?(h(G,z.sibling),z=v(z,J),z.return=G,G=z):(h(G,z),z=Z0(J,G.mode,le),z.return=G,G=z),T(G)):h(G,z)}return Ut}var Dl=D1(!0),L1=D1(!1),vf=$s(null),xf=null,Ll=null,c0=null;function u0(){c0=Ll=xf=null}function d0(o){var l=vf.current;_t(vf),o._currentValue=l}function h0(o,l,h){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===h)break;o=o.return}}function Ml(o,l){xf=o,c0=Ll=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&l&&(tr=!0),o.firstContext=null)}function Cr(o){var l=o._currentValue;if(c0!==o)if(o={context:o,memoizedValue:l,next:null},Ll===null){if(xf===null)throw Error(t(308));Ll=o,xf.dependencies={lanes:0,firstContext:o}}else Ll=Ll.next=o;return l}var aa=null;function f0(o){aa===null?aa=[o]:aa.push(o)}function M1(o,l,h,p){var v=l.interleaved;return v===null?(h.next=h,f0(l)):(h.next=v.next,v.next=h),l.interleaved=h,Ji(o,p)}function Ji(o,l){o.lanes|=l;var h=o.alternate;for(h!==null&&(h.lanes|=l),h=o,o=o.return;o!==null;)o.childLanes|=l,h=o.alternate,h!==null&&(h.childLanes|=l),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Ks=!1;function m0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function V1(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Yi(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Gs(o,l,h){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,nt&2){var v=p.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),p.pending=l,Ji(o,h)}return v=p.interleaved,v===null?(l.next=l,f0(p)):(l.next=v.next,v.next=l),p.interleaved=l,Ji(o,h)}function _f(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var p=l.lanes;p&=o.pendingLanes,h|=p,l.lanes=h,Vs(o,h)}}function O1(o,l){var h=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var v=null,w=null;if(h=h.firstBaseUpdate,h!==null){do{var T={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};w===null?v=w=T:w=w.next=T,h=h.next}while(h!==null);w===null?v=w=l:w=w.next=l}else v=w=l;h={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:p.shared,effects:p.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}function wf(o,l,h,p){var v=o.updateQueue;Ks=!1;var w=v.firstBaseUpdate,T=v.lastBaseUpdate,M=v.shared.pending;if(M!==null){v.shared.pending=null;var B=M,Y=B.next;B.next=null,T===null?w=Y:T.next=Y,T=B;var se=o.alternate;se!==null&&(se=se.updateQueue,M=se.lastBaseUpdate,M!==T&&(M===null?se.firstBaseUpdate=Y:M.next=Y,se.lastBaseUpdate=B))}if(w!==null){var oe=v.baseState;T=0,se=Y=B=null,M=w;do{var ie=M.lane,pe=M.eventTime;if((p&ie)===ie){se!==null&&(se=se.next={eventTime:pe,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var _e=o,we=M;switch(ie=l,pe=h,we.tag){case 1:if(_e=we.payload,typeof _e=="function"){oe=_e.call(pe,oe,ie);break e}oe=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=we.payload,ie=typeof _e=="function"?_e.call(pe,oe,ie):_e,ie==null)break e;oe=he({},oe,ie);break e;case 2:Ks=!0}}M.callback!==null&&M.lane!==0&&(o.flags|=64,ie=v.effects,ie===null?v.effects=[M]:ie.push(M))}else pe={eventTime:pe,lane:ie,tag:M.tag,payload:M.payload,callback:M.callback,next:null},se===null?(Y=se=pe,B=oe):se=se.next=pe,T|=ie;if(M=M.next,M===null){if(M=v.shared.pending,M===null)break;ie=M,M=ie.next,ie.next=null,v.lastBaseUpdate=ie,v.shared.pending=null}}while(!0);if(se===null&&(B=oe),v.baseState=B,v.firstBaseUpdate=Y,v.lastBaseUpdate=se,l=v.shared.interleaved,l!==null){v=l;do T|=v.lane,v=v.next;while(v!==l)}else w===null&&(v.shared.lanes=0);ua|=T,o.lanes=T,o.memoizedState=oe}}function F1(o,l,h){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var p=o[l],v=p.callback;if(v!==null){if(p.callback=null,p=h,typeof v!="function")throw Error(t(191,v));v.call(p)}}}var Eu={},ki=$s(Eu),Tu=$s(Eu),Iu=$s(Eu);function la(o){if(o===Eu)throw Error(t(174));return o}function p0(o,l){switch(pt(Iu,l),pt(Tu,o),pt(ki,Eu),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Yt(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=Yt(l,o)}_t(ki),pt(ki,l)}function Vl(){_t(ki),_t(Tu),_t(Iu)}function B1(o){la(Iu.current);var l=la(ki.current),h=Yt(l,o.type);l!==h&&(pt(Tu,o),pt(ki,h))}function g0(o){Tu.current===o&&(_t(ki),_t(Tu))}var It=$s(0);function bf(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var y0=[];function v0(){for(var o=0;o<y0.length;o++)y0[o]._workInProgressVersionPrimary=null;y0.length=0}var kf=Q.ReactCurrentDispatcher,x0=Q.ReactCurrentBatchConfig,ca=0,St=null,Zt=null,cn=null,Ef=!1,Su=!1,Cu=0,Wj=0;function An(){throw Error(t(321))}function _0(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!Zr(o[h],l[h]))return!1;return!0}function w0(o,l,h,p,v,w){if(ca=w,St=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,kf.current=o===null||o.memoizedState===null?Qj:Jj,o=h(p,v),Su){w=0;do{if(Su=!1,Cu=0,25<=w)throw Error(t(301));w+=1,cn=Zt=null,l.updateQueue=null,kf.current=Yj,o=h(p,v)}while(Su)}if(kf.current=Sf,l=Zt!==null&&Zt.next!==null,ca=0,cn=Zt=St=null,Ef=!1,l)throw Error(t(300));return o}function b0(){var o=Cu!==0;return Cu=0,o}function Ei(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?St.memoizedState=cn=o:cn=cn.next=o,cn}function Nr(){if(Zt===null){var o=St.alternate;o=o!==null?o.memoizedState:null}else o=Zt.next;var l=cn===null?St.memoizedState:cn.next;if(l!==null)cn=l,Zt=o;else{if(o===null)throw Error(t(310));Zt=o,o={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},cn===null?St.memoizedState=cn=o:cn=cn.next=o}return cn}function Nu(o,l){return typeof l=="function"?l(o):l}function k0(o){var l=Nr(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=o;var p=Zt,v=p.baseQueue,w=h.pending;if(w!==null){if(v!==null){var T=v.next;v.next=w.next,w.next=T}p.baseQueue=v=w,h.pending=null}if(v!==null){w=v.next,p=p.baseState;var M=T=null,B=null,Y=w;do{var se=Y.lane;if((ca&se)===se)B!==null&&(B=B.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),p=Y.hasEagerState?Y.eagerState:o(p,Y.action);else{var oe={lane:se,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};B===null?(M=B=oe,T=p):B=B.next=oe,St.lanes|=se,ua|=se}Y=Y.next}while(Y!==null&&Y!==w);B===null?T=p:B.next=M,Zr(p,l.memoizedState)||(tr=!0),l.memoizedState=p,l.baseState=T,l.baseQueue=B,h.lastRenderedState=p}if(o=h.interleaved,o!==null){v=o;do w=v.lane,St.lanes|=w,ua|=w,v=v.next;while(v!==o)}else v===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function E0(o){var l=Nr(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=o;var p=h.dispatch,v=h.pending,w=l.memoizedState;if(v!==null){h.pending=null;var T=v=v.next;do w=o(w,T.action),T=T.next;while(T!==v);Zr(w,l.memoizedState)||(tr=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),h.lastRenderedState=w}return[w,p]}function U1(){}function z1(o,l){var h=St,p=Nr(),v=l(),w=!Zr(p.memoizedState,v);if(w&&(p.memoizedState=v,tr=!0),p=p.queue,T0(W1.bind(null,h,p,o),[o]),p.getSnapshot!==l||w||cn!==null&&cn.memoizedState.tag&1){if(h.flags|=2048,Au(9,$1.bind(null,h,p,v,l),void 0,null),un===null)throw Error(t(349));ca&30||q1(h,l,v)}return v}function q1(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=St.updateQueue,l===null?(l={lastEffect:null,stores:null},St.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function $1(o,l,h,p){l.value=h,l.getSnapshot=p,H1(l)&&K1(o)}function W1(o,l,h){return h(function(){H1(l)&&K1(o)})}function H1(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!Zr(o,h)}catch{return!0}}function K1(o){var l=Ji(o,1);l!==null&&ii(l,o,1,-1)}function G1(o){var l=Ei();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nu,lastRenderedState:o},l.queue=o,o=o.dispatch=Gj.bind(null,St,o),[l.memoizedState,o]}function Au(o,l,h,p){return o={tag:o,create:l,destroy:h,deps:p,next:null},l=St.updateQueue,l===null?(l={lastEffect:null,stores:null},St.updateQueue=l,l.lastEffect=o.next=o):(h=l.lastEffect,h===null?l.lastEffect=o.next=o:(p=h.next,h.next=o,o.next=p,l.lastEffect=o)),o}function Q1(){return Nr().memoizedState}function Tf(o,l,h,p){var v=Ei();St.flags|=o,v.memoizedState=Au(1|l,h,void 0,p===void 0?null:p)}function If(o,l,h,p){var v=Nr();p=p===void 0?null:p;var w=void 0;if(Zt!==null){var T=Zt.memoizedState;if(w=T.destroy,p!==null&&_0(p,T.deps)){v.memoizedState=Au(l,h,w,p);return}}St.flags|=o,v.memoizedState=Au(1|l,h,w,p)}function J1(o,l){return Tf(8390656,8,o,l)}function T0(o,l){return If(2048,8,o,l)}function Y1(o,l){return If(4,2,o,l)}function X1(o,l){return If(4,4,o,l)}function Z1(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function eb(o,l,h){return h=h!=null?h.concat([o]):null,If(4,4,Z1.bind(null,l,o),h)}function I0(){}function tb(o,l){var h=Nr();l=l===void 0?null:l;var p=h.memoizedState;return p!==null&&l!==null&&_0(l,p[1])?p[0]:(h.memoizedState=[o,l],o)}function nb(o,l){var h=Nr();l=l===void 0?null:l;var p=h.memoizedState;return p!==null&&l!==null&&_0(l,p[1])?p[0]:(o=o(),h.memoizedState=[o,l],o)}function rb(o,l,h){return ca&21?(Zr(h,l)||(h=Xo(),St.lanes|=h,ua|=h,o.baseState=!0),l):(o.baseState&&(o.baseState=!1,tr=!0),o.memoizedState=h)}function Hj(o,l){var h=Ye;Ye=h!==0&&4>h?h:4,o(!0);var p=x0.transition;x0.transition={};try{o(!1),l()}finally{Ye=h,x0.transition=p}}function ib(){return Nr().memoizedState}function Kj(o,l,h){var p=Xs(o);if(h={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null},sb(o))ob(l,h);else if(h=M1(o,l,h,p),h!==null){var v=qn();ii(h,o,p,v),ab(h,l,p)}}function Gj(o,l,h){var p=Xs(o),v={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(sb(o))ob(l,v);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var T=l.lastRenderedState,M=w(T,h);if(v.hasEagerState=!0,v.eagerState=M,Zr(M,T)){var B=l.interleaved;B===null?(v.next=v,f0(l)):(v.next=B.next,B.next=v),l.interleaved=v;return}}catch{}finally{}h=M1(o,l,v,p),h!==null&&(v=qn(),ii(h,o,p,v),ab(h,l,p))}}function sb(o){var l=o.alternate;return o===St||l!==null&&l===St}function ob(o,l){Su=Ef=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function ab(o,l,h){if(h&4194240){var p=l.lanes;p&=o.pendingLanes,h|=p,l.lanes=h,Vs(o,h)}}var Sf={readContext:Cr,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useInsertionEffect:An,useLayoutEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useMutableSource:An,useSyncExternalStore:An,useId:An,unstable_isNewReconciler:!1},Qj={readContext:Cr,useCallback:function(o,l){return Ei().memoizedState=[o,l===void 0?null:l],o},useContext:Cr,useEffect:J1,useImperativeHandle:function(o,l,h){return h=h!=null?h.concat([o]):null,Tf(4194308,4,Z1.bind(null,l,o),h)},useLayoutEffect:function(o,l){return Tf(4194308,4,o,l)},useInsertionEffect:function(o,l){return Tf(4,2,o,l)},useMemo:function(o,l){var h=Ei();return l=l===void 0?null:l,o=o(),h.memoizedState=[o,l],o},useReducer:function(o,l,h){var p=Ei();return l=h!==void 0?h(l):l,p.memoizedState=p.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},p.queue=o,o=o.dispatch=Kj.bind(null,St,o),[p.memoizedState,o]},useRef:function(o){var l=Ei();return o={current:o},l.memoizedState=o},useState:G1,useDebugValue:I0,useDeferredValue:function(o){return Ei().memoizedState=o},useTransition:function(){var o=G1(!1),l=o[0];return o=Hj.bind(null,o[1]),Ei().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,h){var p=St,v=Ei();if(bt){if(h===void 0)throw Error(t(407));h=h()}else{if(h=l(),un===null)throw Error(t(349));ca&30||q1(p,l,h)}v.memoizedState=h;var w={value:h,getSnapshot:l};return v.queue=w,J1(W1.bind(null,p,w,o),[o]),p.flags|=2048,Au(9,$1.bind(null,p,w,h,l),void 0,null),h},useId:function(){var o=Ei(),l=un.identifierPrefix;if(bt){var h=Qi,p=Gi;h=(p&~(1<<32-Bn(p)-1)).toString(32)+h,l=":"+l+"R"+h,h=Cu++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=Wj++,l=":"+l+"r"+h.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},Jj={readContext:Cr,useCallback:tb,useContext:Cr,useEffect:T0,useImperativeHandle:eb,useInsertionEffect:Y1,useLayoutEffect:X1,useMemo:nb,useReducer:k0,useRef:Q1,useState:function(){return k0(Nu)},useDebugValue:I0,useDeferredValue:function(o){var l=Nr();return rb(l,Zt.memoizedState,o)},useTransition:function(){var o=k0(Nu)[0],l=Nr().memoizedState;return[o,l]},useMutableSource:U1,useSyncExternalStore:z1,useId:ib,unstable_isNewReconciler:!1},Yj={readContext:Cr,useCallback:tb,useContext:Cr,useEffect:T0,useImperativeHandle:eb,useInsertionEffect:Y1,useLayoutEffect:X1,useMemo:nb,useReducer:E0,useRef:Q1,useState:function(){return E0(Nu)},useDebugValue:I0,useDeferredValue:function(o){var l=Nr();return Zt===null?l.memoizedState=o:rb(l,Zt.memoizedState,o)},useTransition:function(){var o=E0(Nu)[0],l=Nr().memoizedState;return[o,l]},useMutableSource:U1,useSyncExternalStore:z1,useId:ib,unstable_isNewReconciler:!1};function ti(o,l){if(o&&o.defaultProps){l=he({},l),o=o.defaultProps;for(var h in o)l[h]===void 0&&(l[h]=o[h]);return l}return l}function S0(o,l,h,p){l=o.memoizedState,h=h(p,l),h=h==null?l:he({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Cf={isMounted:function(o){return(o=o._reactInternals)?Hr(o)===o:!1},enqueueSetState:function(o,l,h){o=o._reactInternals;var p=qn(),v=Xs(o),w=Yi(p,v);w.payload=l,h!=null&&(w.callback=h),l=Gs(o,w,v),l!==null&&(ii(l,o,v,p),_f(l,o,v))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var p=qn(),v=Xs(o),w=Yi(p,v);w.tag=1,w.payload=l,h!=null&&(w.callback=h),l=Gs(o,w,v),l!==null&&(ii(l,o,v,p),_f(l,o,v))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=qn(),p=Xs(o),v=Yi(h,p);v.tag=2,l!=null&&(v.callback=l),l=Gs(o,v,p),l!==null&&(ii(l,o,p,h),_f(l,o,p))}};function lb(o,l,h,p,v,w,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,w,T):l.prototype&&l.prototype.isPureReactComponent?!gu(h,p)||!gu(v,w):!0}function cb(o,l,h){var p=!1,v=Ws,w=l.contextType;return typeof w=="object"&&w!==null?w=Cr(w):(v=er(l)?ia:Nn.current,p=l.contextTypes,w=(p=p!=null)?Al(o,v):Ws),l=new l(h,w),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Cf,o.stateNode=l,l._reactInternals=o,p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=v,o.__reactInternalMemoizedMaskedChildContext=w),l}function ub(o,l,h,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,p),l.state!==o&&Cf.enqueueReplaceState(l,l.state,null)}function C0(o,l,h,p){var v=o.stateNode;v.props=h,v.state=o.memoizedState,v.refs={},m0(o);var w=l.contextType;typeof w=="object"&&w!==null?v.context=Cr(w):(w=er(l)?ia:Nn.current,v.context=Al(o,w)),v.state=o.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(S0(o,l,w,h),v.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&Cf.enqueueReplaceState(v,v.state,null),wf(o,h,v,p),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308)}function Ol(o,l){try{var h="",p=l;do h+=Oe(p),p=p.return;while(p);var v=h}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:o,source:l,stack:v,digest:null}}function N0(o,l,h){return{value:o,source:null,stack:h??null,digest:l??null}}function A0(o,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var Xj=typeof WeakMap=="function"?WeakMap:Map;function db(o,l,h){h=Yi(-1,h),h.tag=3,h.payload={element:null};var p=l.value;return h.callback=function(){Lf||(Lf=!0,W0=p),A0(o,l)},h}function hb(o,l,h){h=Yi(-1,h),h.tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var v=l.value;h.payload=function(){return p(v)},h.callback=function(){A0(o,l)}}var w=o.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(h.callback=function(){A0(o,l),typeof p!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})}),h}function fb(o,l,h){var p=o.pingCache;if(p===null){p=o.pingCache=new Xj;var v=new Set;p.set(l,v)}else v=p.get(l),v===void 0&&(v=new Set,p.set(l,v));v.has(h)||(v.add(h),o=h4.bind(null,o,l,h),l.then(o,o))}function mb(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function pb(o,l,h,p,v){return o.mode&1?(o.flags|=65536,o.lanes=v,o):(o===l?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=Yi(-1,1),l.tag=2,Gs(h,l,1))),h.lanes|=1),o)}var Zj=Q.ReactCurrentOwner,tr=!1;function zn(o,l,h,p){l.child=o===null?L1(l,null,h,p):Dl(l,o.child,h,p)}function gb(o,l,h,p,v){h=h.render;var w=l.ref;return Ml(l,v),p=w0(o,l,h,p,w,v),h=b0(),o!==null&&!tr?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~v,Xi(o,l,v)):(bt&&h&&i0(l),l.flags|=1,zn(o,l,p,v),l.child)}function yb(o,l,h,p,v){if(o===null){var w=h.type;return typeof w=="function"&&!X0(w)&&w.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=w,vb(o,l,w,p,v)):(o=Uf(h.type,null,p,l,l.mode,v),o.ref=l.ref,o.return=l,l.child=o)}if(w=o.child,!(o.lanes&v)){var T=w.memoizedProps;if(h=h.compare,h=h!==null?h:gu,h(T,p)&&o.ref===l.ref)return Xi(o,l,v)}return l.flags|=1,o=eo(w,p),o.ref=l.ref,o.return=l,l.child=o}function vb(o,l,h,p,v){if(o!==null){var w=o.memoizedProps;if(gu(w,p)&&o.ref===l.ref)if(tr=!1,l.pendingProps=p=w,(o.lanes&v)!==0)o.flags&131072&&(tr=!0);else return l.lanes=o.lanes,Xi(o,l,v)}return P0(o,l,h,p,v)}function xb(o,l,h){var p=l.pendingProps,v=p.children,w=o!==null?o.memoizedState:null;if(p.mode==="hidden")if(!(l.mode&1))l.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Bl,fr),fr|=h;else{if(!(h&1073741824))return o=w!==null?w.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,pt(Bl,fr),fr|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:h,pt(Bl,fr),fr|=p}else w!==null?(p=w.baseLanes|h,l.memoizedState=null):p=h,pt(Bl,fr),fr|=p;return zn(o,l,v,h),l.child}function _b(o,l){var h=l.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function P0(o,l,h,p,v){var w=er(h)?ia:Nn.current;return w=Al(l,w),Ml(l,v),h=w0(o,l,h,p,w,v),p=b0(),o!==null&&!tr?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~v,Xi(o,l,v)):(bt&&p&&i0(l),l.flags|=1,zn(o,l,h,v),l.child)}function wb(o,l,h,p,v){if(er(h)){var w=!0;hf(l)}else w=!1;if(Ml(l,v),l.stateNode===null)Af(o,l),cb(l,h,p),C0(l,h,p,v),p=!0;else if(o===null){var T=l.stateNode,M=l.memoizedProps;T.props=M;var B=T.context,Y=h.contextType;typeof Y=="object"&&Y!==null?Y=Cr(Y):(Y=er(h)?ia:Nn.current,Y=Al(l,Y));var se=h.getDerivedStateFromProps,oe=typeof se=="function"||typeof T.getSnapshotBeforeUpdate=="function";oe||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(M!==p||B!==Y)&&ub(l,T,p,Y),Ks=!1;var ie=l.memoizedState;T.state=ie,wf(l,p,T,v),B=l.memoizedState,M!==p||ie!==B||Zn.current||Ks?(typeof se=="function"&&(S0(l,h,se,p),B=l.memoizedState),(M=Ks||lb(l,h,M,p,ie,B,Y))?(oe||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(l.flags|=4194308)):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=B),T.props=p,T.state=B,T.context=Y,p=M):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{T=l.stateNode,V1(o,l),M=l.memoizedProps,Y=l.type===l.elementType?M:ti(l.type,M),T.props=Y,oe=l.pendingProps,ie=T.context,B=h.contextType,typeof B=="object"&&B!==null?B=Cr(B):(B=er(h)?ia:Nn.current,B=Al(l,B));var pe=h.getDerivedStateFromProps;(se=typeof pe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(M!==oe||ie!==B)&&ub(l,T,p,B),Ks=!1,ie=l.memoizedState,T.state=ie,wf(l,p,T,v);var _e=l.memoizedState;M!==oe||ie!==_e||Zn.current||Ks?(typeof pe=="function"&&(S0(l,h,pe,p),_e=l.memoizedState),(Y=Ks||lb(l,h,Y,p,ie,_e,B)||!1)?(se||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(p,_e,B),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(p,_e,B)),typeof T.componentDidUpdate=="function"&&(l.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof T.componentDidUpdate!="function"||M===o.memoizedProps&&ie===o.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&ie===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=_e),T.props=p,T.state=_e,T.context=B,p=Y):(typeof T.componentDidUpdate!="function"||M===o.memoizedProps&&ie===o.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&ie===o.memoizedState||(l.flags|=1024),p=!1)}return R0(o,l,h,p,w,v)}function R0(o,l,h,p,v,w){_b(o,l);var T=(l.flags&128)!==0;if(!p&&!T)return v&&I1(l,h,!1),Xi(o,l,w);p=l.stateNode,Zj.current=l;var M=T&&typeof h.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,o!==null&&T?(l.child=Dl(l,o.child,null,w),l.child=Dl(l,null,M,w)):zn(o,l,M,w),l.memoizedState=p.state,v&&I1(l,h,!0),l.child}function bb(o){var l=o.stateNode;l.pendingContext?E1(o,l.pendingContext,l.pendingContext!==l.context):l.context&&E1(o,l.context,!1),p0(o,l.containerInfo)}function kb(o,l,h,p,v){return jl(),l0(v),l.flags|=256,zn(o,l,h,p),l.child}var j0={dehydrated:null,treeContext:null,retryLane:0};function D0(o){return{baseLanes:o,cachePool:null,transitions:null}}function Eb(o,l,h){var p=l.pendingProps,v=It.current,w=!1,T=(l.flags&128)!==0,M;if((M=T)||(M=o!==null&&o.memoizedState===null?!1:(v&2)!==0),M?(w=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(v|=1),pt(It,v&1),o===null)return a0(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(l.mode&1?o.data==="$!"?l.lanes=8:l.lanes=1073741824:l.lanes=1,null):(T=p.children,o=p.fallback,w?(p=l.mode,w=l.child,T={mode:"hidden",children:T},!(p&1)&&w!==null?(w.childLanes=0,w.pendingProps=T):w=zf(T,p,0,null),o=ma(o,p,h,null),w.return=l,o.return=l,w.sibling=o,l.child=w,l.child.memoizedState=D0(h),l.memoizedState=j0,o):L0(l,T));if(v=o.memoizedState,v!==null&&(M=v.dehydrated,M!==null))return e4(o,l,T,p,M,v,h);if(w){w=p.fallback,T=l.mode,v=o.child,M=v.sibling;var B={mode:"hidden",children:p.children};return!(T&1)&&l.child!==v?(p=l.child,p.childLanes=0,p.pendingProps=B,l.deletions=null):(p=eo(v,B),p.subtreeFlags=v.subtreeFlags&14680064),M!==null?w=eo(M,w):(w=ma(w,T,h,null),w.flags|=2),w.return=l,p.return=l,p.sibling=w,l.child=p,p=w,w=l.child,T=o.child.memoizedState,T=T===null?D0(h):{baseLanes:T.baseLanes|h,cachePool:null,transitions:T.transitions},w.memoizedState=T,w.childLanes=o.childLanes&~h,l.memoizedState=j0,p}return w=o.child,o=w.sibling,p=eo(w,{mode:"visible",children:p.children}),!(l.mode&1)&&(p.lanes=h),p.return=l,p.sibling=null,o!==null&&(h=l.deletions,h===null?(l.deletions=[o],l.flags|=16):h.push(o)),l.child=p,l.memoizedState=null,p}function L0(o,l){return l=zf({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Nf(o,l,h,p){return p!==null&&l0(p),Dl(l,o.child,null,h),o=L0(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function e4(o,l,h,p,v,w,T){if(h)return l.flags&256?(l.flags&=-257,p=N0(Error(t(422))),Nf(o,l,T,p)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(w=p.fallback,v=l.mode,p=zf({mode:"visible",children:p.children},v,0,null),w=ma(w,v,T,null),w.flags|=2,p.return=l,w.return=l,p.sibling=w,l.child=p,l.mode&1&&Dl(l,o.child,null,T),l.child.memoizedState=D0(T),l.memoizedState=j0,w);if(!(l.mode&1))return Nf(o,l,T,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var M=p.dgst;return p=M,w=Error(t(419)),p=N0(w,p,void 0),Nf(o,l,T,p)}if(M=(T&o.childLanes)!==0,tr||M){if(p=un,p!==null){switch(T&-T){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=v&(p.suspendedLanes|T)?0:v,v!==0&&v!==w.retryLane&&(w.retryLane=v,Ji(o,v),ii(p,o,v,-1))}return Y0(),p=N0(Error(t(421))),Nf(o,l,T,p)}return v.data==="$?"?(l.flags|=128,l.child=o.child,l=f4.bind(null,o),v._reactRetry=l,null):(o=w.treeContext,hr=qs(v.nextSibling),dr=l,bt=!0,ei=null,o!==null&&(Ir[Sr++]=Gi,Ir[Sr++]=Qi,Ir[Sr++]=sa,Gi=o.id,Qi=o.overflow,sa=l),l=L0(l,p.children),l.flags|=4096,l)}function Tb(o,l,h){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),h0(o.return,l,h)}function M0(o,l,h,p,v){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:v}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=h,w.tailMode=v)}function Ib(o,l,h){var p=l.pendingProps,v=p.revealOrder,w=p.tail;if(zn(o,l,p.children,h),p=It.current,p&2)p=p&1|2,l.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Tb(o,h,l);else if(o.tag===19)Tb(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(pt(It,p),!(l.mode&1))l.memoizedState=null;else switch(v){case"forwards":for(h=l.child,v=null;h!==null;)o=h.alternate,o!==null&&bf(o)===null&&(v=h),h=h.sibling;h=v,h===null?(v=l.child,l.child=null):(v=h.sibling,h.sibling=null),M0(l,!1,v,h,w);break;case"backwards":for(h=null,v=l.child,l.child=null;v!==null;){if(o=v.alternate,o!==null&&bf(o)===null){l.child=v;break}o=v.sibling,v.sibling=h,h=v,v=o}M0(l,!0,h,null,w);break;case"together":M0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Af(o,l){!(l.mode&1)&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Xi(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),ua|=l.lanes,!(h&l.childLanes))return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,h=eo(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=eo(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function t4(o,l,h){switch(l.tag){case 3:bb(l),jl();break;case 5:B1(l);break;case 1:er(l.type)&&hf(l);break;case 4:p0(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,v=l.memoizedProps.value;pt(vf,p._currentValue),p._currentValue=v;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(pt(It,It.current&1),l.flags|=128,null):h&l.child.childLanes?Eb(o,l,h):(pt(It,It.current&1),o=Xi(o,l,h),o!==null?o.sibling:null);pt(It,It.current&1);break;case 19:if(p=(h&l.childLanes)!==0,o.flags&128){if(p)return Ib(o,l,h);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),pt(It,It.current),p)break;return null;case 22:case 23:return l.lanes=0,xb(o,l,h)}return Xi(o,l,h)}var Sb,V0,Cb,Nb;Sb=function(o,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},V0=function(){},Cb=function(o,l,h,p){var v=o.memoizedProps;if(v!==p){o=l.stateNode,la(ki.current);var w=null;switch(h){case"input":v=Ft(o,v),p=Ft(o,p),w=[];break;case"select":v=he({},v,{value:void 0}),p=he({},p,{value:void 0}),w=[];break;case"textarea":v=wr(o,v),p=wr(o,p),w=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(o.onclick=cf)}Yc(h,p);var T;h=null;for(Y in v)if(!p.hasOwnProperty(Y)&&v.hasOwnProperty(Y)&&v[Y]!=null)if(Y==="style"){var M=v[Y];for(T in M)M.hasOwnProperty(T)&&(h||(h={}),h[T]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(i.hasOwnProperty(Y)?w||(w=[]):(w=w||[]).push(Y,null));for(Y in p){var B=p[Y];if(M=v!=null?v[Y]:void 0,p.hasOwnProperty(Y)&&B!==M&&(B!=null||M!=null))if(Y==="style")if(M){for(T in M)!M.hasOwnProperty(T)||B&&B.hasOwnProperty(T)||(h||(h={}),h[T]="");for(T in B)B.hasOwnProperty(T)&&M[T]!==B[T]&&(h||(h={}),h[T]=B[T])}else h||(w||(w=[]),w.push(Y,h)),h=B;else Y==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,M=M?M.__html:void 0,B!=null&&M!==B&&(w=w||[]).push(Y,B)):Y==="children"?typeof B!="string"&&typeof B!="number"||(w=w||[]).push(Y,""+B):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(i.hasOwnProperty(Y)?(B!=null&&Y==="onScroll"&&xt("scroll",o),w||M===B||(w=[])):(w=w||[]).push(Y,B))}h&&(w=w||[]).push("style",h);var Y=w;(l.updateQueue=Y)&&(l.flags|=4)}},Nb=function(o,l,h,p){h!==p&&(l.flags|=4)};function Pu(o,l){if(!bt)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Pn(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,p=0;if(l)for(var v=o.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=p,o.childLanes=h,l}function n4(o,l,h){var p=l.pendingProps;switch(s0(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(l),null;case 1:return er(l.type)&&df(),Pn(l),null;case 3:return p=l.stateNode,Vl(),_t(Zn),_t(Nn),v0(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(gf(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,ei!==null&&(G0(ei),ei=null))),V0(o,l),Pn(l),null;case 5:g0(l);var v=la(Iu.current);if(h=l.type,o!==null&&l.stateNode!=null)Cb(o,l,h,p,v),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(t(166));return Pn(l),null}if(o=la(ki.current),gf(l)){p=l.stateNode,h=l.type;var w=l.memoizedProps;switch(p[bi]=l,p[wu]=w,o=(l.mode&1)!==0,h){case"dialog":xt("cancel",p),xt("close",p);break;case"iframe":case"object":case"embed":xt("load",p);break;case"video":case"audio":for(v=0;v<vu.length;v++)xt(vu[v],p);break;case"source":xt("error",p);break;case"img":case"image":case"link":xt("error",p),xt("load",p);break;case"details":xt("toggle",p);break;case"input":Sn(p,w),xt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},xt("invalid",p);break;case"textarea":Ps(p,w),xt("invalid",p)}Yc(h,w),v=null;for(var T in w)if(w.hasOwnProperty(T)){var M=w[T];T==="children"?typeof M=="string"?p.textContent!==M&&(w.suppressHydrationWarning!==!0&&lf(p.textContent,M,o),v=["children",M]):typeof M=="number"&&p.textContent!==""+M&&(w.suppressHydrationWarning!==!0&&lf(p.textContent,M,o),v=["children",""+M]):i.hasOwnProperty(T)&&M!=null&&T==="onScroll"&&xt("scroll",p)}switch(h){case"input":Je(p),Oi(p,w,!0);break;case"textarea":Je(p),Hc(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=cf)}p=v,l.updateQueue=p,p!==null&&(l.flags|=4)}else{T=v.nodeType===9?v:v.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Jt(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=T.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof p.is=="string"?o=T.createElement(h,{is:p.is}):(o=T.createElement(h),h==="select"&&(T=o,p.multiple?T.multiple=!0:p.size&&(T.size=p.size))):o=T.createElementNS(o,h),o[bi]=l,o[wu]=p,Sb(o,l,!1,!1),l.stateNode=o;e:{switch(T=Xc(h,p),h){case"dialog":xt("cancel",o),xt("close",o),v=p;break;case"iframe":case"object":case"embed":xt("load",o),v=p;break;case"video":case"audio":for(v=0;v<vu.length;v++)xt(vu[v],o);v=p;break;case"source":xt("error",o),v=p;break;case"img":case"image":case"link":xt("error",o),xt("load",o),v=p;break;case"details":xt("toggle",o),v=p;break;case"input":Sn(o,p),v=Ft(o,p),xt("invalid",o);break;case"option":v=p;break;case"select":o._wrapperState={wasMultiple:!!p.multiple},v=he({},p,{value:void 0}),xt("invalid",o);break;case"textarea":Ps(o,p),v=wr(o,p),xt("invalid",o);break;default:v=p}Yc(h,v),M=v;for(w in M)if(M.hasOwnProperty(w)){var B=M[w];w==="style"?Qc(o,B):w==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&Kc(o,B)):w==="children"?typeof B=="string"?(h!=="textarea"||B!=="")&&Rs(o,B):typeof B=="number"&&Rs(o,""+B):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?B!=null&&w==="onScroll"&&xt("scroll",o):B!=null&&O(o,w,B,T))}switch(h){case"input":Je(o),Oi(o,p,!1);break;case"textarea":Je(o),Hc(o);break;case"option":p.value!=null&&o.setAttribute("value",""+Ge(p.value));break;case"select":o.multiple=!!p.multiple,w=p.value,w!=null?Cn(o,!!p.multiple,w,!1):p.defaultValue!=null&&Cn(o,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(o.onclick=cf)}switch(h){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Pn(l),null;case 6:if(o&&l.stateNode!=null)Nb(o,l,o.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(t(166));if(h=la(Iu.current),la(ki.current),gf(l)){if(p=l.stateNode,h=l.memoizedProps,p[bi]=l,(w=p.nodeValue!==h)&&(o=dr,o!==null))switch(o.tag){case 3:lf(p.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&lf(p.nodeValue,h,(o.mode&1)!==0)}w&&(l.flags|=4)}else p=(h.nodeType===9?h:h.ownerDocument).createTextNode(p),p[bi]=l,l.stateNode=p}return Pn(l),null;case 13:if(_t(It),p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(bt&&hr!==null&&l.mode&1&&!(l.flags&128))R1(),jl(),l.flags|=98560,w=!1;else if(w=gf(l),p!==null&&p.dehydrated!==null){if(o===null){if(!w)throw Error(t(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[bi]=l}else jl(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;Pn(l),w=!1}else ei!==null&&(G0(ei),ei=null),w=!0;if(!w)return l.flags&65536?l:null}return l.flags&128?(l.lanes=h,l):(p=p!==null,p!==(o!==null&&o.memoizedState!==null)&&p&&(l.child.flags|=8192,l.mode&1&&(o===null||It.current&1?en===0&&(en=3):Y0())),l.updateQueue!==null&&(l.flags|=4),Pn(l),null);case 4:return Vl(),V0(o,l),o===null&&xu(l.stateNode.containerInfo),Pn(l),null;case 10:return d0(l.type._context),Pn(l),null;case 17:return er(l.type)&&df(),Pn(l),null;case 19:if(_t(It),w=l.memoizedState,w===null)return Pn(l),null;if(p=(l.flags&128)!==0,T=w.rendering,T===null)if(p)Pu(w,!1);else{if(en!==0||o!==null&&o.flags&128)for(o=l.child;o!==null;){if(T=bf(o),T!==null){for(l.flags|=128,Pu(w,!1),p=T.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=h,h=l.child;h!==null;)w=h,o=p,w.flags&=14680066,T=w.alternate,T===null?(w.childLanes=0,w.lanes=o,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=T.childLanes,w.lanes=T.lanes,w.child=T.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=T.memoizedProps,w.memoizedState=T.memoizedState,w.updateQueue=T.updateQueue,w.type=T.type,o=T.dependencies,w.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return pt(It,It.current&1|2),l.child}o=o.sibling}w.tail!==null&&mt()>Ul&&(l.flags|=128,p=!0,Pu(w,!1),l.lanes=4194304)}else{if(!p)if(o=bf(T),o!==null){if(l.flags|=128,p=!0,h=o.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),Pu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!T.alternate&&!bt)return Pn(l),null}else 2*mt()-w.renderingStartTime>Ul&&h!==1073741824&&(l.flags|=128,p=!0,Pu(w,!1),l.lanes=4194304);w.isBackwards?(T.sibling=l.child,l.child=T):(h=w.last,h!==null?h.sibling=T:l.child=T,w.last=T)}return w.tail!==null?(l=w.tail,w.rendering=l,w.tail=l.sibling,w.renderingStartTime=mt(),l.sibling=null,h=It.current,pt(It,p?h&1|2:h&1),l):(Pn(l),null);case 22:case 23:return J0(),p=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==p&&(l.flags|=8192),p&&l.mode&1?fr&1073741824&&(Pn(l),l.subtreeFlags&6&&(l.flags|=8192)):Pn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function r4(o,l){switch(s0(l),l.tag){case 1:return er(l.type)&&df(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Vl(),_t(Zn),_t(Nn),v0(),o=l.flags,o&65536&&!(o&128)?(l.flags=o&-65537|128,l):null;case 5:return g0(l),null;case 13:if(_t(It),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));jl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return _t(It),null;case 4:return Vl(),null;case 10:return d0(l.type._context),null;case 22:case 23:return J0(),null;case 24:return null;default:return null}}var Pf=!1,Rn=!1,i4=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Fl(o,l){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(p){Rt(o,l,p)}else h.current=null}function O0(o,l,h){try{h()}catch(p){Rt(o,l,p)}}var Ab=!1;function s4(o,l){if(Jg=Bs,o=l1(),zg(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var v=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{h.nodeType,w.nodeType}catch{h=null;break e}var T=0,M=-1,B=-1,Y=0,se=0,oe=o,ie=null;t:for(;;){for(var pe;oe!==h||v!==0&&oe.nodeType!==3||(M=T+v),oe!==w||p!==0&&oe.nodeType!==3||(B=T+p),oe.nodeType===3&&(T+=oe.nodeValue.length),(pe=oe.firstChild)!==null;)ie=oe,oe=pe;for(;;){if(oe===o)break t;if(ie===h&&++Y===v&&(M=T),ie===w&&++se===p&&(B=T),(pe=oe.nextSibling)!==null)break;oe=ie,ie=oe.parentNode}oe=pe}h=M===-1||B===-1?null:{start:M,end:B}}else h=null}h=h||{start:0,end:0}}else h=null;for(Yg={focusedElem:o,selectionRange:h},Bs=!1,ye=l;ye!==null;)if(l=ye,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,ye=o;else for(;ye!==null;){l=ye;try{var _e=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var we=_e.memoizedProps,Ut=_e.memoizedState,G=l.stateNode,z=G.getSnapshotBeforeUpdate(l.elementType===l.type?we:ti(l.type,we),Ut);G.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var J=l.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){Rt(l,l.return,le)}if(o=l.sibling,o!==null){o.return=l.return,ye=o;break}ye=l.return}return _e=Ab,Ab=!1,_e}function Ru(o,l,h){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&o)===o){var w=v.destroy;v.destroy=void 0,w!==void 0&&O0(l,h,w)}v=v.next}while(v!==p)}}function Rf(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&o)===o){var p=h.create;h.destroy=p()}h=h.next}while(h!==l)}}function F0(o){var l=o.ref;if(l!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof l=="function"?l(o):l.current=o}}function Pb(o){var l=o.alternate;l!==null&&(o.alternate=null,Pb(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[bi],delete l[wu],delete l[t0],delete l[Uj],delete l[zj])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Rb(o){return o.tag===5||o.tag===3||o.tag===4}function jb(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Rb(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function B0(o,l,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(o,l):h.insertBefore(o,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(o,h)):(l=h,l.appendChild(o)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=cf));else if(p!==4&&(o=o.child,o!==null))for(B0(o,l,h),o=o.sibling;o!==null;)B0(o,l,h),o=o.sibling}function U0(o,l,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(p!==4&&(o=o.child,o!==null))for(U0(o,l,h),o=o.sibling;o!==null;)U0(o,l,h),o=o.sibling}var bn=null,ni=!1;function Qs(o,l,h){for(h=h.child;h!==null;)Db(o,l,h),h=h.sibling}function Db(o,l,h){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(Jo,h)}catch{}switch(h.tag){case 5:Rn||Fl(h,l);case 6:var p=bn,v=ni;bn=null,Qs(o,l,h),bn=p,ni=v,bn!==null&&(ni?(o=bn,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):bn.removeChild(h.stateNode));break;case 18:bn!==null&&(ni?(o=bn,h=h.stateNode,o.nodeType===8?e0(o.parentNode,h):o.nodeType===1&&e0(o,h),Yr(o)):e0(bn,h.stateNode));break;case 4:p=bn,v=ni,bn=h.stateNode.containerInfo,ni=!0,Qs(o,l,h),bn=p,ni=v;break;case 0:case 11:case 14:case 15:if(!Rn&&(p=h.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var w=v,T=w.destroy;w=w.tag,T!==void 0&&(w&2||w&4)&&O0(h,l,T),v=v.next}while(v!==p)}Qs(o,l,h);break;case 1:if(!Rn&&(Fl(h,l),p=h.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=h.memoizedProps,p.state=h.memoizedState,p.componentWillUnmount()}catch(M){Rt(h,l,M)}Qs(o,l,h);break;case 21:Qs(o,l,h);break;case 22:h.mode&1?(Rn=(p=Rn)||h.memoizedState!==null,Qs(o,l,h),Rn=p):Qs(o,l,h);break;default:Qs(o,l,h)}}function Lb(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new i4),l.forEach(function(p){var v=m4.bind(null,o,p);h.has(p)||(h.add(p),p.then(v,v))})}}function ri(o,l){var h=l.deletions;if(h!==null)for(var p=0;p<h.length;p++){var v=h[p];try{var w=o,T=l,M=T;e:for(;M!==null;){switch(M.tag){case 5:bn=M.stateNode,ni=!1;break e;case 3:bn=M.stateNode.containerInfo,ni=!0;break e;case 4:bn=M.stateNode.containerInfo,ni=!0;break e}M=M.return}if(bn===null)throw Error(t(160));Db(w,T,v),bn=null,ni=!1;var B=v.alternate;B!==null&&(B.return=null),v.return=null}catch(Y){Rt(v,l,Y)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Mb(l,o),l=l.sibling}function Mb(o,l){var h=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ri(l,o),Ti(o),p&4){try{Ru(3,o,o.return),Rf(3,o)}catch(we){Rt(o,o.return,we)}try{Ru(5,o,o.return)}catch(we){Rt(o,o.return,we)}}break;case 1:ri(l,o),Ti(o),p&512&&h!==null&&Fl(h,h.return);break;case 5:if(ri(l,o),Ti(o),p&512&&h!==null&&Fl(h,h.return),o.flags&32){var v=o.stateNode;try{Rs(v,"")}catch(we){Rt(o,o.return,we)}}if(p&4&&(v=o.stateNode,v!=null)){var w=o.memoizedProps,T=h!==null?h.memoizedProps:w,M=o.type,B=o.updateQueue;if(o.updateQueue=null,B!==null)try{M==="input"&&w.type==="radio"&&w.name!=null&&Fn(v,w),Xc(M,T);var Y=Xc(M,w);for(T=0;T<B.length;T+=2){var se=B[T],oe=B[T+1];se==="style"?Qc(v,oe):se==="dangerouslySetInnerHTML"?Kc(v,oe):se==="children"?Rs(v,oe):O(v,se,oe,Y)}switch(M){case"input":mi(v,w);break;case"textarea":tl(v,w);break;case"select":var ie=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!w.multiple;var pe=w.value;pe!=null?Cn(v,!!w.multiple,pe,!1):ie!==!!w.multiple&&(w.defaultValue!=null?Cn(v,!!w.multiple,w.defaultValue,!0):Cn(v,!!w.multiple,w.multiple?[]:"",!1))}v[wu]=w}catch(we){Rt(o,o.return,we)}}break;case 6:if(ri(l,o),Ti(o),p&4){if(o.stateNode===null)throw Error(t(162));v=o.stateNode,w=o.memoizedProps;try{v.nodeValue=w}catch(we){Rt(o,o.return,we)}}break;case 3:if(ri(l,o),Ti(o),p&4&&h!==null&&h.memoizedState.isDehydrated)try{Yr(l.containerInfo)}catch(we){Rt(o,o.return,we)}break;case 4:ri(l,o),Ti(o);break;case 13:ri(l,o),Ti(o),v=o.child,v.flags&8192&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||($0=mt())),p&4&&Lb(o);break;case 22:if(se=h!==null&&h.memoizedState!==null,o.mode&1?(Rn=(Y=Rn)||se,ri(l,o),Rn=Y):ri(l,o),Ti(o),p&8192){if(Y=o.memoizedState!==null,(o.stateNode.isHidden=Y)&&!se&&o.mode&1)for(ye=o,se=o.child;se!==null;){for(oe=ye=se;ye!==null;){switch(ie=ye,pe=ie.child,ie.tag){case 0:case 11:case 14:case 15:Ru(4,ie,ie.return);break;case 1:Fl(ie,ie.return);var _e=ie.stateNode;if(typeof _e.componentWillUnmount=="function"){p=ie,h=ie.return;try{l=p,_e.props=l.memoizedProps,_e.state=l.memoizedState,_e.componentWillUnmount()}catch(we){Rt(p,h,we)}}break;case 5:Fl(ie,ie.return);break;case 22:if(ie.memoizedState!==null){Fb(oe);continue}}pe!==null?(pe.return=ie,ye=pe):Fb(oe)}se=se.sibling}e:for(se=null,oe=o;;){if(oe.tag===5){if(se===null){se=oe;try{v=oe.stateNode,Y?(w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(M=oe.stateNode,B=oe.memoizedProps.style,T=B!=null&&B.hasOwnProperty("display")?B.display:null,M.style.display=Gc("display",T))}catch(we){Rt(o,o.return,we)}}}else if(oe.tag===6){if(se===null)try{oe.stateNode.nodeValue=Y?"":oe.memoizedProps}catch(we){Rt(o,o.return,we)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===o)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===o)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===o)break e;se===oe&&(se=null),oe=oe.return}se===oe&&(se=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:ri(l,o),Ti(o),p&4&&Lb(o);break;case 21:break;default:ri(l,o),Ti(o)}}function Ti(o){var l=o.flags;if(l&2){try{e:{for(var h=o.return;h!==null;){if(Rb(h)){var p=h;break e}h=h.return}throw Error(t(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(Rs(v,""),p.flags&=-33);var w=jb(o);U0(o,w,v);break;case 3:case 4:var T=p.stateNode.containerInfo,M=jb(o);B0(o,M,T);break;default:throw Error(t(161))}}catch(B){Rt(o,o.return,B)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function o4(o,l,h){ye=o,Vb(o)}function Vb(o,l,h){for(var p=(o.mode&1)!==0;ye!==null;){var v=ye,w=v.child;if(v.tag===22&&p){var T=v.memoizedState!==null||Pf;if(!T){var M=v.alternate,B=M!==null&&M.memoizedState!==null||Rn;M=Pf;var Y=Rn;if(Pf=T,(Rn=B)&&!Y)for(ye=v;ye!==null;)T=ye,B=T.child,T.tag===22&&T.memoizedState!==null?Bb(v):B!==null?(B.return=T,ye=B):Bb(v);for(;w!==null;)ye=w,Vb(w),w=w.sibling;ye=v,Pf=M,Rn=Y}Ob(o)}else v.subtreeFlags&8772&&w!==null?(w.return=v,ye=w):Ob(o)}}function Ob(o){for(;ye!==null;){var l=ye;if(l.flags&8772){var h=l.alternate;try{if(l.flags&8772)switch(l.tag){case 0:case 11:case 15:Rn||Rf(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!Rn)if(h===null)p.componentDidMount();else{var v=l.elementType===l.type?h.memoizedProps:ti(l.type,h.memoizedProps);p.componentDidUpdate(v,h.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=l.updateQueue;w!==null&&F1(l,w,p);break;case 3:var T=l.updateQueue;if(T!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}F1(l,T,h)}break;case 5:var M=l.stateNode;if(h===null&&l.flags&4){h=M;var B=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&h.focus();break;case"img":B.src&&(h.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Y=l.alternate;if(Y!==null){var se=Y.memoizedState;if(se!==null){var oe=se.dehydrated;oe!==null&&Yr(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Rn||l.flags&512&&F0(l)}catch(ie){Rt(l,l.return,ie)}}if(l===o){ye=null;break}if(h=l.sibling,h!==null){h.return=l.return,ye=h;break}ye=l.return}}function Fb(o){for(;ye!==null;){var l=ye;if(l===o){ye=null;break}var h=l.sibling;if(h!==null){h.return=l.return,ye=h;break}ye=l.return}}function Bb(o){for(;ye!==null;){var l=ye;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{Rf(4,l)}catch(B){Rt(l,h,B)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var v=l.return;try{p.componentDidMount()}catch(B){Rt(l,v,B)}}var w=l.return;try{F0(l)}catch(B){Rt(l,w,B)}break;case 5:var T=l.return;try{F0(l)}catch(B){Rt(l,T,B)}}}catch(B){Rt(l,l.return,B)}if(l===o){ye=null;break}var M=l.sibling;if(M!==null){M.return=l.return,ye=M;break}ye=l.return}}var a4=Math.ceil,jf=Q.ReactCurrentDispatcher,z0=Q.ReactCurrentOwner,Ar=Q.ReactCurrentBatchConfig,nt=0,un=null,Wt=null,kn=0,fr=0,Bl=$s(0),en=0,ju=null,ua=0,Df=0,q0=0,Du=null,nr=null,$0=0,Ul=1/0,Zi=null,Lf=!1,W0=null,Js=null,Mf=!1,Ys=null,Vf=0,Lu=0,H0=null,Of=-1,Ff=0;function qn(){return nt&6?mt():Of!==-1?Of:Of=mt()}function Xs(o){return o.mode&1?nt&2&&kn!==0?kn&-kn:$j.transition!==null?(Ff===0&&(Ff=Xo()),Ff):(o=Ye,o!==0||(o=window.event,o=o===void 0?16:cu(o.type)),o):1}function ii(o,l,h,p){if(50<Lu)throw Lu=0,H0=null,Error(t(185));Ms(o,h,p),(!(nt&2)||o!==un)&&(o===un&&(!(nt&2)&&(Df|=h),en===4&&Zs(o,kn)),rr(o,p),h===1&&nt===0&&!(l.mode&1)&&(Ul=mt()+500,ff&&Hs()))}function rr(o,l){var h=o.callbackNode;Ui(o,l);var p=Yo(o,o===un?kn:0);if(p===0)h!==null&&iu(h),o.callbackNode=null,o.callbackPriority=0;else if(l=p&-p,o.callbackPriority!==l){if(h!=null&&iu(h),l===1)o.tag===0?qj(zb.bind(null,o)):S1(zb.bind(null,o)),Fj(function(){!(nt&6)&&Hs()}),h=null;else{switch(Os(p)){case 1:h=Qo;break;case 4:h=js;break;case 16:h=kr;break;case 536870912:h=Oh;break;default:h=kr}h=Jb(h,Ub.bind(null,o))}o.callbackPriority=l,o.callbackNode=h}}function Ub(o,l){if(Of=-1,Ff=0,nt&6)throw Error(t(327));var h=o.callbackNode;if(zl()&&o.callbackNode!==h)return null;var p=Yo(o,o===un?kn:0);if(p===0)return null;if(p&30||p&o.expiredLanes||l)l=Bf(o,p);else{l=p;var v=nt;nt|=2;var w=$b();(un!==o||kn!==l)&&(Zi=null,Ul=mt()+500,ha(o,l));do try{u4();break}catch(M){qb(o,M)}while(!0);u0(),jf.current=w,nt=v,Wt!==null?l=0:(un=null,kn=0,l=en)}if(l!==0){if(l===2&&(v=lr(o),v!==0&&(p=v,l=K0(o,v))),l===1)throw h=ju,ha(o,0),Zs(o,p),rr(o,mt()),h;if(l===6)Zs(o,p);else{if(v=o.current.alternate,!(p&30)&&!l4(v)&&(l=Bf(o,p),l===2&&(w=lr(o),w!==0&&(p=w,l=K0(o,w))),l===1))throw h=ju,ha(o,0),Zs(o,p),rr(o,mt()),h;switch(o.finishedWork=v,o.finishedLanes=p,l){case 0:case 1:throw Error(t(345));case 2:fa(o,nr,Zi);break;case 3:if(Zs(o,p),(p&130023424)===p&&(l=$0+500-mt(),10<l)){if(Yo(o,0)!==0)break;if(v=o.suspendedLanes,(v&p)!==p){qn(),o.pingedLanes|=o.suspendedLanes&v;break}o.timeoutHandle=Zg(fa.bind(null,o,nr,Zi),l);break}fa(o,nr,Zi);break;case 4:if(Zs(o,p),(p&4194240)===p)break;for(l=o.eventTimes,v=-1;0<p;){var T=31-Bn(p);w=1<<T,T=l[T],T>v&&(v=T),p&=~w}if(p=v,p=mt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*a4(p/1960))-p,10<p){o.timeoutHandle=Zg(fa.bind(null,o,nr,Zi),p);break}fa(o,nr,Zi);break;case 5:fa(o,nr,Zi);break;default:throw Error(t(329))}}}return rr(o,mt()),o.callbackNode===h?Ub.bind(null,o):null}function K0(o,l){var h=Du;return o.current.memoizedState.isDehydrated&&(ha(o,l).flags|=256),o=Bf(o,l),o!==2&&(l=nr,nr=h,l!==null&&G0(l)),o}function G0(o){nr===null?nr=o:nr.push.apply(nr,o)}function l4(o){for(var l=o;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var p=0;p<h.length;p++){var v=h[p],w=v.getSnapshot;v=v.value;try{if(!Zr(w(),v))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Zs(o,l){for(l&=~q0,l&=~Df,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var h=31-Bn(l),p=1<<h;o[h]=-1,l&=~p}}function zb(o){if(nt&6)throw Error(t(327));zl();var l=Yo(o,0);if(!(l&1))return rr(o,mt()),null;var h=Bf(o,l);if(o.tag!==0&&h===2){var p=lr(o);p!==0&&(l=p,h=K0(o,p))}if(h===1)throw h=ju,ha(o,0),Zs(o,l),rr(o,mt()),h;if(h===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,fa(o,nr,Zi),rr(o,mt()),null}function Q0(o,l){var h=nt;nt|=1;try{return o(l)}finally{nt=h,nt===0&&(Ul=mt()+500,ff&&Hs())}}function da(o){Ys!==null&&Ys.tag===0&&!(nt&6)&&zl();var l=nt;nt|=1;var h=Ar.transition,p=Ye;try{if(Ar.transition=null,Ye=1,o)return o()}finally{Ye=p,Ar.transition=h,nt=l,!(nt&6)&&Hs()}}function J0(){fr=Bl.current,_t(Bl)}function ha(o,l){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,Oj(h)),Wt!==null)for(h=Wt.return;h!==null;){var p=h;switch(s0(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&df();break;case 3:Vl(),_t(Zn),_t(Nn),v0();break;case 5:g0(p);break;case 4:Vl();break;case 13:_t(It);break;case 19:_t(It);break;case 10:d0(p.type._context);break;case 22:case 23:J0()}h=h.return}if(un=o,Wt=o=eo(o.current,null),kn=fr=l,en=0,ju=null,q0=Df=ua=0,nr=Du=null,aa!==null){for(l=0;l<aa.length;l++)if(h=aa[l],p=h.interleaved,p!==null){h.interleaved=null;var v=p.next,w=h.pending;if(w!==null){var T=w.next;w.next=v,p.next=T}h.pending=p}aa=null}return o}function qb(o,l){do{var h=Wt;try{if(u0(),kf.current=Sf,Ef){for(var p=St.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}Ef=!1}if(ca=0,cn=Zt=St=null,Su=!1,Cu=0,z0.current=null,h===null||h.return===null){en=1,ju=l,Wt=null;break}e:{var w=o,T=h.return,M=h,B=l;if(l=kn,M.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var Y=B,se=M,oe=se.tag;if(!(se.mode&1)&&(oe===0||oe===11||oe===15)){var ie=se.alternate;ie?(se.updateQueue=ie.updateQueue,se.memoizedState=ie.memoizedState,se.lanes=ie.lanes):(se.updateQueue=null,se.memoizedState=null)}var pe=mb(T);if(pe!==null){pe.flags&=-257,pb(pe,T,M,w,l),pe.mode&1&&fb(w,Y,l),l=pe,B=Y;var _e=l.updateQueue;if(_e===null){var we=new Set;we.add(B),l.updateQueue=we}else _e.add(B);break e}else{if(!(l&1)){fb(w,Y,l),Y0();break e}B=Error(t(426))}}else if(bt&&M.mode&1){var Ut=mb(T);if(Ut!==null){!(Ut.flags&65536)&&(Ut.flags|=256),pb(Ut,T,M,w,l),l0(Ol(B,M));break e}}w=B=Ol(B,M),en!==4&&(en=2),Du===null?Du=[w]:Du.push(w),w=T;do{switch(w.tag){case 3:w.flags|=65536,l&=-l,w.lanes|=l;var G=db(w,B,l);O1(w,G);break e;case 1:M=B;var z=w.type,J=w.stateNode;if(!(w.flags&128)&&(typeof z.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Js===null||!Js.has(J)))){w.flags|=65536,l&=-l,w.lanes|=l;var le=hb(w,M,l);O1(w,le);break e}}w=w.return}while(w!==null)}Hb(h)}catch(ke){l=ke,Wt===h&&h!==null&&(Wt=h=h.return);continue}break}while(!0)}function $b(){var o=jf.current;return jf.current=Sf,o===null?Sf:o}function Y0(){(en===0||en===3||en===2)&&(en=4),un===null||!(ua&268435455)&&!(Df&268435455)||Zs(un,kn)}function Bf(o,l){var h=nt;nt|=2;var p=$b();(un!==o||kn!==l)&&(Zi=null,ha(o,l));do try{c4();break}catch(v){qb(o,v)}while(!0);if(u0(),nt=h,jf.current=p,Wt!==null)throw Error(t(261));return un=null,kn=0,en}function c4(){for(;Wt!==null;)Wb(Wt)}function u4(){for(;Wt!==null&&!Mh();)Wb(Wt)}function Wb(o){var l=Qb(o.alternate,o,fr);o.memoizedProps=o.pendingProps,l===null?Hb(o):Wt=l,z0.current=null}function Hb(o){var l=o;do{var h=l.alternate;if(o=l.return,l.flags&32768){if(h=r4(h,l),h!==null){h.flags&=32767,Wt=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{en=6,Wt=null;return}}else if(h=n4(h,l,fr),h!==null){Wt=h;return}if(l=l.sibling,l!==null){Wt=l;return}Wt=l=o}while(l!==null);en===0&&(en=5)}function fa(o,l,h){var p=Ye,v=Ar.transition;try{Ar.transition=null,Ye=1,d4(o,l,h,p)}finally{Ar.transition=v,Ye=p}return null}function d4(o,l,h,p){do zl();while(Ys!==null);if(nt&6)throw Error(t(327));h=o.finishedWork;var v=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var w=h.lanes|h.childLanes;if(ft(o,w),o===un&&(Wt=un=null,kn=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||Mf||(Mf=!0,Jb(kr,function(){return zl(),null})),w=(h.flags&15990)!==0,h.subtreeFlags&15990||w){w=Ar.transition,Ar.transition=null;var T=Ye;Ye=1;var M=nt;nt|=4,z0.current=null,s4(o,h),Mb(h,o),Pj(Yg),Bs=!!Jg,Yg=Jg=null,o.current=h,o4(h),Dg(),nt=M,Ye=T,Ar.transition=w}else o.current=h;if(Mf&&(Mf=!1,Ys=o,Vf=v),w=o.pendingLanes,w===0&&(Js=null),Fh(h.stateNode),rr(o,mt()),l!==null)for(p=o.onRecoverableError,h=0;h<l.length;h++)v=l[h],p(v.value,{componentStack:v.stack,digest:v.digest});if(Lf)throw Lf=!1,o=W0,W0=null,o;return Vf&1&&o.tag!==0&&zl(),w=o.pendingLanes,w&1?o===H0?Lu++:(Lu=0,H0=o):Lu=0,Hs(),null}function zl(){if(Ys!==null){var o=Os(Vf),l=Ar.transition,h=Ye;try{if(Ar.transition=null,Ye=16>o?16:o,Ys===null)var p=!1;else{if(o=Ys,Ys=null,Vf=0,nt&6)throw Error(t(331));var v=nt;for(nt|=4,ye=o.current;ye!==null;){var w=ye,T=w.child;if(ye.flags&16){var M=w.deletions;if(M!==null){for(var B=0;B<M.length;B++){var Y=M[B];for(ye=Y;ye!==null;){var se=ye;switch(se.tag){case 0:case 11:case 15:Ru(8,se,w)}var oe=se.child;if(oe!==null)oe.return=se,ye=oe;else for(;ye!==null;){se=ye;var ie=se.sibling,pe=se.return;if(Pb(se),se===Y){ye=null;break}if(ie!==null){ie.return=pe,ye=ie;break}ye=pe}}}var _e=w.alternate;if(_e!==null){var we=_e.child;if(we!==null){_e.child=null;do{var Ut=we.sibling;we.sibling=null,we=Ut}while(we!==null)}}ye=w}}if(w.subtreeFlags&2064&&T!==null)T.return=w,ye=T;else e:for(;ye!==null;){if(w=ye,w.flags&2048)switch(w.tag){case 0:case 11:case 15:Ru(9,w,w.return)}var G=w.sibling;if(G!==null){G.return=w.return,ye=G;break e}ye=w.return}}var z=o.current;for(ye=z;ye!==null;){T=ye;var J=T.child;if(T.subtreeFlags&2064&&J!==null)J.return=T,ye=J;else e:for(T=z;ye!==null;){if(M=ye,M.flags&2048)try{switch(M.tag){case 0:case 11:case 15:Rf(9,M)}}catch(ke){Rt(M,M.return,ke)}if(M===T){ye=null;break e}var le=M.sibling;if(le!==null){le.return=M.return,ye=le;break e}ye=M.return}}if(nt=v,Hs(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(Jo,o)}catch{}p=!0}return p}finally{Ye=h,Ar.transition=l}}return!1}function Kb(o,l,h){l=Ol(h,l),l=db(o,l,1),o=Gs(o,l,1),l=qn(),o!==null&&(Ms(o,1,l),rr(o,l))}function Rt(o,l,h){if(o.tag===3)Kb(o,o,h);else for(;l!==null;){if(l.tag===3){Kb(l,o,h);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Js===null||!Js.has(p))){o=Ol(h,o),o=hb(l,o,1),l=Gs(l,o,1),o=qn(),l!==null&&(Ms(l,1,o),rr(l,o));break}}l=l.return}}function h4(o,l,h){var p=o.pingCache;p!==null&&p.delete(l),l=qn(),o.pingedLanes|=o.suspendedLanes&h,un===o&&(kn&h)===h&&(en===4||en===3&&(kn&130023424)===kn&&500>mt()-$0?ha(o,0):q0|=h),rr(o,l)}function Gb(o,l){l===0&&(o.mode&1?(l=dl,dl<<=1,!(dl&130023424)&&(dl=4194304)):l=1);var h=qn();o=Ji(o,l),o!==null&&(Ms(o,l,h),rr(o,h))}function f4(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),Gb(o,h)}function m4(o,l){var h=0;switch(o.tag){case 13:var p=o.stateNode,v=o.memoizedState;v!==null&&(h=v.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(l),Gb(o,h)}var Qb;Qb=function(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps||Zn.current)tr=!0;else{if(!(o.lanes&h)&&!(l.flags&128))return tr=!1,t4(o,l,h);tr=!!(o.flags&131072)}else tr=!1,bt&&l.flags&1048576&&C1(l,pf,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;Af(o,l),o=l.pendingProps;var v=Al(l,Nn.current);Ml(l,h),v=w0(null,l,p,o,v,h);var w=b0();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,er(p)?(w=!0,hf(l)):w=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,m0(l),v.updater=Cf,l.stateNode=v,v._reactInternals=l,C0(l,p,o,h),l=R0(null,l,p,!0,w,h)):(l.tag=0,bt&&w&&i0(l),zn(null,l,v,h),l=l.child),l;case 16:p=l.elementType;e:{switch(Af(o,l),o=l.pendingProps,v=p._init,p=v(p._payload),l.type=p,v=l.tag=g4(p),o=ti(p,o),v){case 0:l=P0(null,l,p,o,h);break e;case 1:l=wb(null,l,p,o,h);break e;case 11:l=gb(null,l,p,o,h);break e;case 14:l=yb(null,l,p,ti(p.type,o),h);break e}throw Error(t(306,p,""))}return l;case 0:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:ti(p,v),P0(o,l,p,v,h);case 1:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:ti(p,v),wb(o,l,p,v,h);case 3:e:{if(bb(l),o===null)throw Error(t(387));p=l.pendingProps,w=l.memoizedState,v=w.element,V1(o,l),wf(l,p,null,h);var T=l.memoizedState;if(p=T.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){v=Ol(Error(t(423)),l),l=kb(o,l,p,h,v);break e}else if(p!==v){v=Ol(Error(t(424)),l),l=kb(o,l,p,h,v);break e}else for(hr=qs(l.stateNode.containerInfo.firstChild),dr=l,bt=!0,ei=null,h=L1(l,null,p,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(jl(),p===v){l=Xi(o,l,h);break e}zn(o,l,p,h)}l=l.child}return l;case 5:return B1(l),o===null&&a0(l),p=l.type,v=l.pendingProps,w=o!==null?o.memoizedProps:null,T=v.children,Xg(p,v)?T=null:w!==null&&Xg(p,w)&&(l.flags|=32),_b(o,l),zn(o,l,T,h),l.child;case 6:return o===null&&a0(l),null;case 13:return Eb(o,l,h);case 4:return p0(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=Dl(l,null,p,h):zn(o,l,p,h),l.child;case 11:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:ti(p,v),gb(o,l,p,v,h);case 7:return zn(o,l,l.pendingProps,h),l.child;case 8:return zn(o,l,l.pendingProps.children,h),l.child;case 12:return zn(o,l,l.pendingProps.children,h),l.child;case 10:e:{if(p=l.type._context,v=l.pendingProps,w=l.memoizedProps,T=v.value,pt(vf,p._currentValue),p._currentValue=T,w!==null)if(Zr(w.value,T)){if(w.children===v.children&&!Zn.current){l=Xi(o,l,h);break e}}else for(w=l.child,w!==null&&(w.return=l);w!==null;){var M=w.dependencies;if(M!==null){T=w.child;for(var B=M.firstContext;B!==null;){if(B.context===p){if(w.tag===1){B=Yi(-1,h&-h),B.tag=2;var Y=w.updateQueue;if(Y!==null){Y=Y.shared;var se=Y.pending;se===null?B.next=B:(B.next=se.next,se.next=B),Y.pending=B}}w.lanes|=h,B=w.alternate,B!==null&&(B.lanes|=h),h0(w.return,h,l),M.lanes|=h;break}B=B.next}}else if(w.tag===10)T=w.type===l.type?null:w.child;else if(w.tag===18){if(T=w.return,T===null)throw Error(t(341));T.lanes|=h,M=T.alternate,M!==null&&(M.lanes|=h),h0(T,h,l),T=w.sibling}else T=w.child;if(T!==null)T.return=w;else for(T=w;T!==null;){if(T===l){T=null;break}if(w=T.sibling,w!==null){w.return=T.return,T=w;break}T=T.return}w=T}zn(o,l,v.children,h),l=l.child}return l;case 9:return v=l.type,p=l.pendingProps.children,Ml(l,h),v=Cr(v),p=p(v),l.flags|=1,zn(o,l,p,h),l.child;case 14:return p=l.type,v=ti(p,l.pendingProps),v=ti(p.type,v),yb(o,l,p,v,h);case 15:return vb(o,l,l.type,l.pendingProps,h);case 17:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:ti(p,v),Af(o,l),l.tag=1,er(p)?(o=!0,hf(l)):o=!1,Ml(l,h),cb(l,p,v),C0(l,p,v,h),R0(null,l,p,!0,o,h);case 19:return Ib(o,l,h);case 22:return xb(o,l,h)}throw Error(t(156,l.tag))};function Jb(o,l){return cl(o,l)}function p4(o,l,h,p){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(o,l,h,p){return new p4(o,l,h,p)}function X0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function g4(o){if(typeof o=="function")return X0(o)?1:0;if(o!=null){if(o=o.$$typeof,o===q)return 11;if(o===Pe)return 14}return 2}function eo(o,l){var h=o.alternate;return h===null?(h=Pr(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function Uf(o,l,h,p,v,w){var T=2;if(p=o,typeof o=="function")X0(o)&&(T=1);else if(typeof o=="string")T=5;else e:switch(o){case C:return ma(h.children,v,w,l);case I:T=8,v|=8;break;case j:return o=Pr(12,h,l,v|2),o.elementType=j,o.lanes=w,o;case V:return o=Pr(13,h,l,v),o.elementType=V,o.lanes=w,o;case ge:return o=Pr(19,h,l,v),o.elementType=ge,o.lanes=w,o;case fe:return zf(h,v,w,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case D:T=10;break e;case F:T=9;break e;case q:T=11;break e;case Pe:T=14;break e;case Me:T=16,p=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=Pr(T,h,l,v),l.elementType=o,l.type=p,l.lanes=w,l}function ma(o,l,h,p){return o=Pr(7,o,p,l),o.lanes=h,o}function zf(o,l,h,p){return o=Pr(22,o,p,l),o.elementType=fe,o.lanes=h,o.stateNode={isHidden:!1},o}function Z0(o,l,h){return o=Pr(6,o,null,l),o.lanes=h,o}function ey(o,l,h){return l=Pr(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function y4(o,l,h,p,v){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ls(0),this.expirationTimes=Ls(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function ty(o,l,h,p,v,w,T,M,B){return o=new y4(o,l,h,M,B),l===1?(l=1,w===!0&&(l|=8)):l=0,w=Pr(3,null,null,l),o.current=w,w.stateNode=o,w.memoizedState={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},m0(w),o}function v4(o,l,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:p==null?null:""+p,children:o,containerInfo:l,implementation:h}}function Yb(o){if(!o)return Ws;o=o._reactInternals;e:{if(Hr(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(er(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var h=o.type;if(er(h))return T1(o,h,l)}return l}function Xb(o,l,h,p,v,w,T,M,B){return o=ty(h,p,!0,o,v,w,T,M,B),o.context=Yb(null),h=o.current,p=qn(),v=Xs(h),w=Yi(p,v),w.callback=l??null,Gs(h,w,v),o.current.lanes=v,Ms(o,v,p),rr(o,p),o}function qf(o,l,h,p){var v=l.current,w=qn(),T=Xs(v);return h=Yb(h),l.context===null?l.context=h:l.pendingContext=h,l=Yi(w,T),l.payload={element:o},p=p===void 0?null:p,p!==null&&(l.callback=p),o=Gs(v,l,T),o!==null&&(ii(o,v,T,w),_f(o,v,T)),T}function $f(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Zb(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function ny(o,l){Zb(o,l),(o=o.alternate)&&Zb(o,l)}function x4(){return null}var ek=typeof reportError=="function"?reportError:function(o){console.error(o)};function ry(o){this._internalRoot=o}Wf.prototype.render=ry.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));qf(o,l,null,null)},Wf.prototype.unmount=ry.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;da(function(){qf(null,o,null,null)}),l[Hi]=null}};function Wf(o){this._internalRoot=o}Wf.prototype.unstable_scheduleHydration=function(o){if(o){var l=$h();o={blockedOn:null,target:o,priority:l};for(var h=0;h<vi.length&&l!==0&&l<vi[h].priority;h++);vi.splice(h,0,o),h===0&&Kh(o)}};function iy(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Hf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function tk(){}function _4(o,l,h,p,v){if(v){if(typeof p=="function"){var w=p;p=function(){var Y=$f(T);w.call(Y)}}var T=Xb(l,p,o,0,null,!1,!1,"",tk);return o._reactRootContainer=T,o[Hi]=T.current,xu(o.nodeType===8?o.parentNode:o),da(),T}for(;v=o.lastChild;)o.removeChild(v);if(typeof p=="function"){var M=p;p=function(){var Y=$f(B);M.call(Y)}}var B=ty(o,0,!1,null,null,!1,!1,"",tk);return o._reactRootContainer=B,o[Hi]=B.current,xu(o.nodeType===8?o.parentNode:o),da(function(){qf(l,B,h,p)}),B}function Kf(o,l,h,p,v){var w=h._reactRootContainer;if(w){var T=w;if(typeof v=="function"){var M=v;v=function(){var B=$f(T);M.call(B)}}qf(l,T,o,v)}else T=_4(h,l,o,v,p);return $f(T)}zh=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var h=Ds(l.pendingLanes);h!==0&&(Vs(l,h|1),rr(l,mt()),!(nt&6)&&(Ul=mt()+500,Hs()))}break;case 13:da(function(){var p=Ji(o,1);if(p!==null){var v=qn();ii(p,o,1,v)}}),ny(o,1)}},hl=function(o){if(o.tag===13){var l=Ji(o,134217728);if(l!==null){var h=qn();ii(l,o,134217728,h)}ny(o,134217728)}},qh=function(o){if(o.tag===13){var l=Xs(o),h=Ji(o,l);if(h!==null){var p=qn();ii(h,o,l,p)}ny(o,l)}},$h=function(){return Ye},Wh=function(o,l){var h=Ye;try{return Ye=o,l()}finally{Ye=h}},rl=function(o,l,h){switch(l){case"input":if(mi(o,h),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var p=h[l];if(p!==o&&p.form===o.form){var v=uf(p);if(!v)throw Error(t(90));Xe(p),mi(p,v)}}}break;case"textarea":tl(o,h);break;case"select":l=h.value,l!=null&&Cn(o,!!h.multiple,l,!1)}},Wo=Q0,eu=da;var w4={usingClientEntryPoint:!1,Events:[bu,Cl,uf,gi,Zc,Q0]},Mu={findFiberByHostInstance:ra,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b4={bundleType:Mu.bundleType,version:Mu.version,rendererPackageName:Mu.rendererPackageName,rendererConfig:Mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ru(o),o===null?null:o.stateNode},findFiberByHostInstance:Mu.findFiberByHostInstance||x4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gf.isDisabled&&Gf.supportsFiber)try{Jo=Gf.inject(b4),ar=Gf}catch{}}return ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w4,ir.createPortal=function(o,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iy(l))throw Error(t(200));return v4(o,l,null,h)},ir.createRoot=function(o,l){if(!iy(o))throw Error(t(299));var h=!1,p="",v=ek;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=ty(o,1,!1,null,null,h,!1,p,v),o[Hi]=l.current,xu(o.nodeType===8?o.parentNode:o),new ry(l)},ir.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=ru(l),o=o===null?null:o.stateNode,o},ir.flushSync=function(o){return da(o)},ir.hydrate=function(o,l,h){if(!Hf(l))throw Error(t(200));return Kf(null,o,l,!0,h)},ir.hydrateRoot=function(o,l,h){if(!iy(o))throw Error(t(405));var p=h!=null&&h.hydratedSources||null,v=!1,w="",T=ek;if(h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(T=h.onRecoverableError)),l=Xb(l,null,o,1,h??null,v,!1,w,T),o[Hi]=l.current,xu(o),p)for(o=0;o<p.length;o++)h=p[o],v=h._getVersion,v=v(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,v]:l.mutableSourceEagerHydrationData.push(h,v);return new Wf(l)},ir.render=function(o,l,h){if(!Hf(l))throw Error(t(200));return Kf(null,o,l,!1,h)},ir.unmountComponentAtNode=function(o){if(!Hf(o))throw Error(t(40));return o._reactRootContainer?(da(function(){Kf(null,null,o,!1,function(){o._reactRootContainer=null,o[Hi]=null})}),!0):!1},ir.unstable_batchedUpdates=Q0,ir.unstable_renderSubtreeIntoContainer=function(o,l,h,p){if(!Hf(h))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Kf(o,l,h,!1,p)},ir.version="18.3.1-next-f1338f8080-20240426",ir}var ck;function A4(){if(ck)return ay.exports;ck=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ay.exports=N4(),ay.exports}var uk;function P4(){if(uk)return Qf;uk=1;var n=A4();return Qf.createRoot=n.createRoot,Qf.hydrateRoot=n.hydrateRoot,Qf}var R4=P4(),Ou={},dk;function j4(){if(dk)return Ou;dk=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.parse=a,Ou.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function a(x,k){const E=new s,P=x.length;if(P<2)return E;const S=(k==null?void 0:k.decode)||g;let N=0;do{const L=x.indexOf("=",N);if(L===-1)break;const O=x.indexOf(";",N),Q=O===-1?P:O;if(L>Q){N=x.lastIndexOf(";",L-1)+1;continue}const W=c(x,N,L),U=d(x,L,W),C=x.slice(W,U);if(E[C]===void 0){let I=c(x,L+1,Q),j=d(x,Q,I);const D=S(x.slice(I,j));E[C]=D}N=Q+1}while(N<P);return E}function c(x,k,E){do{const P=x.charCodeAt(k);if(P!==32&&P!==9)return k}while(++k<E);return E}function d(x,k,E){for(;k>E;){const P=x.charCodeAt(--k);if(P!==32&&P!==9)return k+1}return E}function f(x,k,E){const P=(E==null?void 0:E.encode)||encodeURIComponent;if(!n.test(x))throw new TypeError(`argument name is invalid: ${x}`);const S=P(k);if(!e.test(S))throw new TypeError(`argument val is invalid: ${k}`);let N=x+"="+S;if(!E)return N;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);N+="; Max-Age="+E.maxAge}if(E.domain){if(!t.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);N+="; Domain="+E.domain}if(E.path){if(!r.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);N+="; Path="+E.path}if(E.expires){if(!y(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);N+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(N+="; HttpOnly"),E.secure&&(N+="; Secure"),E.partitioned&&(N+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":N+="; Priority=Low";break;case"medium":N+="; Priority=Medium";break;case"high":N+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":N+="; SameSite=Strict";break;case"lax":N+="; SameSite=Lax";break;case"none":N+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return N}function g(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function y(x){return i.call(x)==="[object Date]"}return Ou}j4();/**
 * react-router v7.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hk="popstate";function D4(n={}){function e(r,i){let{pathname:s,search:a,hash:c}=r.location;return Zy("",{pathname:s,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Cd(i)}return M4(e,t,null,n)}function Tt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Is(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function L4(){return Math.random().toString(36).substring(2,10)}function fk(n,e){return{usr:n.state,key:n.key,idx:e}}function Zy(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Pc(e):e,state:t,key:e&&e.key||r||L4()}}function Cd({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Pc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function M4(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,c="POP",d=null,f=g();f==null&&(f=0,a.replaceState({...a.state,idx:f},""));function g(){return(a.state||{idx:null}).idx}function y(){c="POP";let S=g(),N=S==null?null:S-f;f=S,d&&d({action:c,location:P.location,delta:N})}function x(S,N){c="PUSH";let L=Zy(P.location,S,N);f=g()+1;let O=fk(L,f),Q=P.createHref(L);try{a.pushState(O,"",Q)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;i.location.assign(Q)}s&&d&&d({action:c,location:P.location,delta:1})}function k(S,N){c="REPLACE";let L=Zy(P.location,S,N);f=g();let O=fk(L,f),Q=P.createHref(L);a.replaceState(O,"",Q),s&&d&&d({action:c,location:P.location,delta:0})}function E(S){let N=i.location.origin!=="null"?i.location.origin:i.location.href,L=typeof S=="string"?S:Cd(S);return L=L.replace(/ $/,"%20"),Tt(N,`No window.location.(origin|href) available to create URL for href: ${L}`),new URL(L,N)}let P={get action(){return c},get location(){return n(i,a)},listen(S){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(hk,y),d=S,()=>{i.removeEventListener(hk,y),d=null}},createHref(S){return e(i,S)},createURL:E,encodeLocation(S){let N=E(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:x,replace:k,go(S){return a.go(S)}};return P}function SI(n,e,t="/"){return V4(n,e,t,!1)}function V4(n,e,t,r){let i=typeof e=="string"?Pc(e):e,s=Eo(i.pathname||"/",t);if(s==null)return null;let a=CI(n);O4(a);let c=null;for(let d=0;c==null&&d<a.length;++d){let f=Q4(s);c=K4(a[d],f,r)}return c}function CI(n,e=[],t=[],r=""){let i=(s,a,c)=>{let d={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};d.relativePath.startsWith("/")&&(Tt(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let f=cs([r,d.relativePath]),g=t.concat(d);s.children&&s.children.length>0&&(Tt(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),CI(s.children,e,g,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:W4(f,s.index),routesMeta:g})};return n.forEach((s,a)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,a);else for(let d of NI(s.path))i(s,a,d)}),e}function NI(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=NI(r.join("/")),c=[];return c.push(...a.map(d=>d===""?s:[s,d].join("/"))),i&&c.push(...a),c.map(d=>n.startsWith("/")&&d===""?"/":d)}function O4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:H4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var F4=/^:[\w-]+$/,B4=3,U4=2,z4=1,q4=10,$4=-2,mk=n=>n==="*";function W4(n,e){let t=n.split("/"),r=t.length;return t.some(mk)&&(r+=$4),e&&(r+=U4),t.filter(i=>!mk(i)).reduce((i,s)=>i+(F4.test(s)?B4:s===""?z4:q4),r)}function H4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function K4(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",a=[];for(let c=0;c<r.length;++c){let d=r[c],f=c===r.length-1,g=s==="/"?e:e.slice(s.length)||"/",y=Fm({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),x=d.route;if(!y&&f&&t&&!r[r.length-1].route.index&&(y=Fm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(i,y.params),a.push({params:i,pathname:cs([s,y.pathname]),pathnameBase:Z4(cs([s,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(s=cs([s,y.pathnameBase]))}return a}function Fm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=G4(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,{paramName:g,isOptional:y},x)=>{if(g==="*"){let E=c[x]||"";a=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const k=c[x];return y&&!k?f[g]=void 0:f[g]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:n}}function G4(n,e=!1,t=!0){Is(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Q4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Is(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Eo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function J4(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Pc(n):n;return{pathname:t?t.startsWith("/")?t:Y4(t,e):e,search:eD(r),hash:tD(i)}}function Y4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function uy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function X4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gx(n){let e=X4(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function yx(n,e,t,r=!1){let i;typeof n=="string"?i=Pc(n):(i={...n},Tt(!i.pathname||!i.pathname.includes("?"),uy("?","pathname","search",i)),Tt(!i.pathname||!i.pathname.includes("#"),uy("#","pathname","hash",i)),Tt(!i.search||!i.search.includes("#"),uy("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=t;else{let y=e.length-1;if(!r&&a.startsWith("..")){let x=a.split("/");for(;x[0]==="..";)x.shift(),y-=1;i.pathname=x.join("/")}c=y>=0?e[y]:"/"}let d=J4(i,c),f=a&&a!=="/"&&a.endsWith("/"),g=(s||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var cs=n=>n.join("/").replace(/\/\/+/g,"/"),Z4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),eD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,tD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function nD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var AI=["POST","PUT","PATCH","DELETE"];new Set(AI);var rD=["GET",...AI];new Set(rD);var Rc=A.createContext(null);Rc.displayName="DataRouter";var Rp=A.createContext(null);Rp.displayName="DataRouterState";var PI=A.createContext({isTransitioning:!1});PI.displayName="ViewTransition";var iD=A.createContext(new Map);iD.displayName="Fetchers";var sD=A.createContext(null);sD.displayName="Await";var hi=A.createContext(null);hi.displayName="Navigation";var eh=A.createContext(null);eh.displayName="Location";var fi=A.createContext({outlet:null,matches:[],isDataRoute:!1});fi.displayName="Route";var vx=A.createContext(null);vx.displayName="RouteError";function oD(n,{relative:e}={}){Tt(jc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=A.useContext(hi),{hash:i,pathname:s,search:a}=th(n,{relative:e}),c=s;return t!=="/"&&(c=s==="/"?t:cs([t,s])),r.createHref({pathname:c,search:a,hash:i})}function jc(){return A.useContext(eh)!=null}function zr(){return Tt(jc(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(eh).location}var RI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jI(n){A.useContext(hi).static||A.useLayoutEffect(n)}function _r(){let{isDataRoute:n}=A.useContext(fi);return n?xD():aD()}function aD(){Tt(jc(),"useNavigate() may be used only in the context of a <Router> component.");let n=A.useContext(Rc),{basename:e,navigator:t}=A.useContext(hi),{matches:r}=A.useContext(fi),{pathname:i}=zr(),s=JSON.stringify(gx(r)),a=A.useRef(!1);return jI(()=>{a.current=!0}),A.useCallback((d,f={})=>{if(Is(a.current,RI),!a.current)return;if(typeof d=="number"){t.go(d);return}let g=yx(d,JSON.parse(s),i,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:cs([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,s,i,n])}A.createContext(null);function jp(){let{matches:n}=A.useContext(fi),e=n[n.length-1];return e?e.params:{}}function th(n,{relative:e}={}){let{matches:t}=A.useContext(fi),{pathname:r}=zr(),i=JSON.stringify(gx(t));return A.useMemo(()=>yx(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function lD(n,e){return DI(n,e)}function DI(n,e,t,r){var P;Tt(jc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=A.useContext(hi),{matches:s}=A.useContext(fi),a=s[s.length-1],c=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let f=zr(),g;if(e){let S=typeof e=="string"?Pc(e):e;Tt(d==="/"||((P=S.pathname)==null?void 0:P.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${S.pathname}" was given in the \`location\` prop.`),g=S}else g=f;let y=g.pathname||"/",x=y;if(d!=="/"){let S=d.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let k=SI(n,{pathname:x}),E=fD(k&&k.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:cs([d,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?d:cs([d,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,t,r);return e&&E?A.createElement(eh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},E):E}function cD(){let n=vD(),e=nD(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:i},t):null,null)}var uD=A.createElement(cD,null),dD=class extends A.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?A.createElement(fi.Provider,{value:this.props.routeContext},A.createElement(vx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hD({routeContext:n,match:e,children:t}){let r=A.useContext(Rc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(fi.Provider,{value:n},t)}function fD(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let d=i.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);Tt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,c=-1;if(t)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:g,errors:y}=t,x=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,f,g)=>{let y,x=!1,k=null,E=null;t&&(y=s&&f.route.id?s[f.route.id]:void 0,k=f.route.errorElement||uD,a&&(c<0&&g===0?(_D("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,E=null):c===g&&(x=!0,E=f.route.hydrateFallbackElement||null)));let P=e.concat(i.slice(0,g+1)),S=()=>{let N;return y?N=k:x?N=E:f.route.Component?N=A.createElement(f.route.Component,null):f.route.element?N=f.route.element:N=d,A.createElement(hD,{match:f,routeContext:{outlet:d,matches:P,isDataRoute:t!=null},children:N})};return t&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?A.createElement(dD,{location:t.location,revalidation:t.revalidation,component:k,error:y,children:S(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):S()},null)}function xx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mD(n){let e=A.useContext(Rc);return Tt(e,xx(n)),e}function pD(n){let e=A.useContext(Rp);return Tt(e,xx(n)),e}function gD(n){let e=A.useContext(fi);return Tt(e,xx(n)),e}function _x(n){let e=gD(n),t=e.matches[e.matches.length-1];return Tt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function yD(){return _x("useRouteId")}function vD(){var r;let n=A.useContext(vx),e=pD("useRouteError"),t=_x("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function xD(){let{router:n}=mD("useNavigate"),e=_x("useNavigate"),t=A.useRef(!1);return jI(()=>{t.current=!0}),A.useCallback(async(i,s={})=>{Is(t.current,RI),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var pk={};function _D(n,e,t){pk[n]||(pk[n]=!0,Is(!1,t))}A.memo(wD);function wD({routes:n,future:e,state:t}){return DI(n,void 0,t,e)}function bD({to:n,replace:e,state:t,relative:r}){Tt(jc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=A.useContext(hi);Is(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=A.useContext(fi),{pathname:a}=zr(),c=_r(),d=yx(n,gx(s),a,r==="path"),f=JSON.stringify(d);return A.useEffect(()=>{c(JSON.parse(f),{replace:e,state:t,relative:r})},[c,f,r,e,t]),null}function Ht(n){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function kD({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){Tt(!jc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=Pc(t));let{pathname:d="/",search:f="",hash:g="",state:y=null,key:x="default"}=t,k=A.useMemo(()=>{let E=Eo(d,a);return E==null?null:{location:{pathname:E,search:f,hash:g,state:y,key:x},navigationType:r}},[a,d,f,g,y,x,r]);return Is(k!=null,`<Router basename="${a}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:A.createElement(hi.Provider,{value:c},A.createElement(eh.Provider,{children:e,value:k}))}function ED({children:n,location:e}){return lD(ev(n),e)}function ev(n,e=[]){let t=[];return A.Children.forEach(n,(r,i)=>{if(!A.isValidElement(r))return;let s=[...e,i];if(r.type===A.Fragment){t.push.apply(t,ev(r.props.children,s));return}Tt(r.type===Ht,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=ev(r.props.children,s)),t.push(a)}),t}var gm="get",ym="application/x-www-form-urlencoded";function Dp(n){return n!=null&&typeof n.tagName=="string"}function TD(n){return Dp(n)&&n.tagName.toLowerCase()==="button"}function ID(n){return Dp(n)&&n.tagName.toLowerCase()==="form"}function SD(n){return Dp(n)&&n.tagName.toLowerCase()==="input"}function CD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ND(n,e){return n.button===0&&(!e||e==="_self")&&!CD(n)}var Jf=null;function AD(){if(Jf===null)try{new FormData(document.createElement("form"),0),Jf=!1}catch{Jf=!0}return Jf}var PD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dy(n){return n!=null&&!PD.has(n)?(Is(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ym}"`),null):n}function RD(n,e){let t,r,i,s,a;if(ID(n)){let c=n.getAttribute("action");r=c?Eo(c,e):null,t=n.getAttribute("method")||gm,i=dy(n.getAttribute("enctype"))||ym,s=new FormData(n)}else if(TD(n)||SD(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||c.getAttribute("action");if(r=d?Eo(d,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||gm,i=dy(n.getAttribute("formenctype"))||dy(c.getAttribute("enctype"))||ym,s=new FormData(c,n),!AD()){let{name:f,type:g,value:y}=n;if(g==="image"){let x=f?`${f}.`:"";s.append(`${x}x`,"0"),s.append(`${x}y`,"0")}else f&&s.append(f,y)}}else{if(Dp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=gm,r=null,i=ym,a=n}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:a}}function wx(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function jD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function LD(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await jD(s,t);return a.links?a.links():[]}return[]}));return FD(r.flat(1).filter(DD).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function gk(n,e,t,r,i,s){let a=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,c=(d,f)=>{var g;return t[f].pathname!==d.pathname||((g=t[f].route.path)==null?void 0:g.endsWith("*"))&&t[f].params["*"]!==d.params["*"]};return s==="assets"?e.filter((d,f)=>a(d,f)||c(d,f)):s==="data"?e.filter((d,f)=>{var y;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(a(d,f)||c(d,f))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function MD(n,e){return VD(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function VD(n){return[...new Set(n)]}function OD(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function FD(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(OD(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function BD(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function UD(){let n=A.useContext(Rc);return wx(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function zD(){let n=A.useContext(Rp);return wx(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var bx=A.createContext(void 0);bx.displayName="FrameworkContext";function LI(){let n=A.useContext(bx);return wx(n,"You must render this element inside a <HydratedRouter> element"),n}function qD(n,e){let t=A.useContext(bx),[r,i]=A.useState(!1),[s,a]=A.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,x=A.useRef(null);A.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let P=N=>{N.forEach(L=>{a(L.isIntersecting)})},S=new IntersectionObserver(P,{threshold:.5});return x.current&&S.observe(x.current),()=>{S.disconnect()}}},[n]),A.useEffect(()=>{if(r){let P=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(P)}}},[r]);let k=()=>{i(!0)},E=()=>{i(!1),a(!1)};return t?n!=="intent"?[s,x,{}]:[s,x,{onFocus:Fu(c,k),onBlur:Fu(d,E),onMouseEnter:Fu(f,k),onMouseLeave:Fu(g,E),onTouchStart:Fu(y,k)}]:[!1,x,{}]}function Fu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function $D({page:n,...e}){let{router:t}=UD(),r=A.useMemo(()=>SI(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?A.createElement(HD,{page:n,matches:r,...e}):(console.warn(`Tried to prefetch ${n} but no routes matched.`),null)}function WD(n){let{manifest:e,routeModules:t}=LI(),[r,i]=A.useState([]);return A.useEffect(()=>{let s=!1;return LD(n,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[n,e,t]),r}function HD({page:n,matches:e,...t}){let r=zr(),{manifest:i,routeModules:s}=LI(),{loaderData:a,matches:c}=zD(),d=A.useMemo(()=>gk(n,e,c,i,r,"data"),[n,e,c,i,r]),f=A.useMemo(()=>gk(n,e,c,i,r,"assets"),[n,e,c,i,r]),g=A.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let k=new Set,E=!1;if(e.forEach(S=>{var L;let N=i.routes[S.route.id];!N||!N.hasLoader||(!d.some(O=>O.route.id===S.route.id)&&S.route.id in a&&((L=s[S.route.id])!=null&&L.shouldRevalidate)||N.hasClientLoader?E=!0:k.add(S.route.id))}),k.size===0)return[];let P=BD(n);return E&&k.size>0&&P.searchParams.set("_routes",e.filter(S=>k.has(S.route.id)).map(S=>S.route.id).join(",")),[P.pathname+P.search]},[a,r,i,d,e,n,s]),y=A.useMemo(()=>MD(f,i),[f,i]),x=WD(f);return A.createElement(A.Fragment,null,g.map(k=>A.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...t})),y.map(k=>A.createElement("link",{key:k,rel:"modulepreload",href:k,...t})),x.map(({key:k,link:E})=>A.createElement("link",{key:k,...E})))}function KD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var MI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{MI&&(window.__reactRouterVersion="7.0.1")}catch{}function GD({basename:n,children:e,window:t}){let r=A.useRef();r.current==null&&(r.current=D4({window:t,v5Compat:!0}));let i=r.current,[s,a]=A.useState({action:i.action,location:i.location}),c=A.useCallback(d=>{A.startTransition(()=>a(d))},[a]);return A.useLayoutEffect(()=>i.listen(c),[i,c]),A.createElement(kD,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var VI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mr=A.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:c,target:d,to:f,preventScrollReset:g,viewTransition:y,...x},k){let{basename:E}=A.useContext(hi),P=typeof f=="string"&&VI.test(f),S,N=!1;if(typeof f=="string"&&P&&(S=f,MI))try{let j=new URL(window.location.href),D=f.startsWith("//")?new URL(j.protocol+f):new URL(f),F=Eo(D.pathname,E);D.origin===j.origin&&F!=null?f=F+D.search+D.hash:N=!0}catch{Is(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=oD(f,{relative:i}),[O,Q,W]=qD(r,x),U=XD(f,{replace:a,state:c,target:d,preventScrollReset:g,relative:i,viewTransition:y});function C(j){e&&e(j),j.defaultPrevented||U(j)}let I=A.createElement("a",{...x,...W,href:S||L,onClick:N||s?e:C,ref:KD(k,Q),target:d,"data-discover":!P&&t==="render"?"true":void 0});return O&&!P?A.createElement(A.Fragment,null,I,A.createElement($D,{page:L})):I});mr.displayName="Link";var QD=A.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:c,children:d,...f},g){let y=th(a,{relative:f.relative}),x=zr(),k=A.useContext(Rp),{navigator:E,basename:P}=A.useContext(hi),S=k!=null&&r5(y)&&c===!0,N=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,L=x.pathname,O=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;t||(L=L.toLowerCase(),O=O?O.toLowerCase():null,N=N.toLowerCase()),O&&P&&(O=Eo(O,P)||O);const Q=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let W=L===N||!i&&L.startsWith(N)&&L.charAt(Q)==="/",U=O!=null&&(O===N||!i&&O.startsWith(N)&&O.charAt(N.length)==="/"),C={isActive:W,isPending:U,isTransitioning:S},I=W?e:void 0,j;typeof r=="function"?j=r(C):j=[r,W?"active":null,U?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let D=typeof s=="function"?s(C):s;return A.createElement(mr,{...f,"aria-current":I,className:j,ref:g,style:D,to:a,viewTransition:c},typeof d=="function"?d(C):d)});QD.displayName="NavLink";var JD=A.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:a=gm,action:c,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...x},k)=>{let E=t5(),P=n5(c,{relative:f}),S=a.toLowerCase()==="get"?"get":"post",N=typeof c=="string"&&VI.test(c),L=O=>{if(d&&d(O),O.defaultPrevented)return;O.preventDefault();let Q=O.nativeEvent.submitter,W=(Q==null?void 0:Q.getAttribute("formmethod"))||a;E(Q||O.currentTarget,{fetcherKey:e,method:W,navigate:t,replace:i,state:s,relative:f,preventScrollReset:g,viewTransition:y})};return A.createElement("form",{ref:k,method:S,action:P,onSubmit:r?d:L,...x,"data-discover":!N&&n==="render"?"true":void 0})});JD.displayName="Form";function YD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OI(n){let e=A.useContext(Rc);return Tt(e,YD(n)),e}function XD(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let c=_r(),d=zr(),f=th(n,{relative:s});return A.useCallback(g=>{if(ND(g,e)){g.preventDefault();let y=t!==void 0?t:Cd(d)===Cd(f);c(n,{replace:y,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[d,c,f,t,r,e,n,i,s,a])}var ZD=0,e5=()=>`__${String(++ZD)}__`;function t5(){let{router:n}=OI("useSubmit"),{basename:e}=A.useContext(hi),t=yD();return A.useCallback(async(r,i={})=>{let{action:s,method:a,encType:c,formData:d,body:f}=RD(r,e);if(i.navigate===!1){let g=i.fetcherKey||e5();await n.fetch(g,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:d,body:f,formMethod:i.method||a,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:d,body:f,formMethod:i.method||a,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function n5(n,{relative:e}={}){let{basename:t}=A.useContext(hi),r=A.useContext(fi);Tt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...th(n||".",{relative:e})},a=zr();if(n==null){s.search=a.search;let c=new URLSearchParams(s.search),d=c.getAll("index");if(d.some(g=>g==="")){c.delete("index"),d.filter(y=>y).forEach(y=>c.append("index",y));let g=c.toString();s.search=g?`?${g}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:cs([t,s.pathname])),Cd(s)}function r5(n,e={}){let t=A.useContext(PI);Tt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=OI("useViewTransitionState"),i=th(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Eo(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=Eo(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Fm(i.pathname,a)!=null||Fm(i.pathname,s)!=null}new TextEncoder;var hy={exports:{}},fy,yk;function i5(){if(yk)return fy;yk=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return fy=n,fy}var my,vk;function s5(){if(vk)return my;vk=1;var n=i5();function e(){}function t(){}return t.resetWarningCache=e,my=function(){function r(a,c,d,f,g,y){if(y!==n){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},my}var xk;function o5(){return xk||(xk=1,hy.exports=s5()()),hy.exports}var a5=o5();const Ie=II(a5);var _k={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce=function(n,e){if(!n)throw Dc(e)},Dc=function(n){return new Error("Firebase Database ("+FI.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},l5=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],c=n[t++],d=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},kx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,c=a?n[i+1]:0,d=i+2<n.length,f=d?n[i+2]:0,g=s>>2,y=(s&3)<<4|c>>4;let x=(c&15)<<2|f>>6,k=f&63;d||(k=64,a||(x=64)),r.push(t[g],t[y],t[x],t[k])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(BI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):l5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||f==null||y==null)throw new c5;const x=s<<2|c>>4;if(r.push(x),f!==64){const k=c<<4&240|f>>2;if(r.push(k),y!==64){const E=f<<6&192|y;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class c5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UI=function(n){const e=BI(n);return kx.encodeByteArray(e,!0)},Bm=function(n){return UI(n).replace(/\./g,"")},Um=function(n){try{return kx.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(n){return zI(void 0,n)}function zI(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!d5(t)||(n[t]=zI(n[t],e[t]));return n}function d5(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=()=>h5().__FIREBASE_DEFAULTS__,m5=()=>{if(typeof process>"u"||typeof _k>"u")return;const n=_k.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},p5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Um(n[1]);return e&&JSON.parse(e)},Lp=()=>{try{return f5()||m5()||p5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},qI=n=>{var e,t;return(t=(e=Lp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Ex=n=>{const e=qI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$I=()=>{var n;return(n=Lp())===null||n===void 0?void 0:n.config},WI=n=>{var e;return(e=Lp())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Bm(JSON.stringify(t)),Bm(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ix(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function g5(){var n;const e=(n=Lp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function v5(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function HI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function x5(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KI(){return FI.NODE_ADMIN===!0}function GI(){return!g5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QI(){try{return typeof indexedDB=="object"}catch{return!1}}function _5(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5="FirebaseError";class Mi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=w5,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rh.prototype.create)}}class rh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?b5(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Mi(i,c,r)}}function b5(n,e){return n.replace(k5,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const k5=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(n){return JSON.parse(n)}function nn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=Nd(Um(s[0])||""),t=Nd(Um(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}},E5=function(n){const e=JI(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},T5=function(n){const e=JI(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function dc(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function tv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zm(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function qm(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(wk(s)&&wk(a)){if(!qm(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function wk(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ed(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)r[y]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let y=0;y<16;y++)r[y]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let y=16;y<80;y++){const x=r[y-3]^r[y-8]^r[y-14]^r[y-16];r[y]=(x<<1|x>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],a=this.chain_[2],c=this.chain_[3],d=this.chain_[4],f,g;for(let y=0;y<80;y++){y<40?y<20?(f=c^s&(a^c),g=1518500249):(f=s^a^c,g=1859775393):y<60?(f=s&a|c&(s|a),g=2400959708):(f=s^a^c,g=3395469782);const x=(i<<5|i>>>27)+f+d+g+r[y]&4294967295;d=c,c=a,a=(s<<30|s>>>2)&4294967295,s=i,i=x}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let a=this.inbuf_;for(;i<t;){if(a===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[a]=e.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<t;)if(s[a]=e[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function S5(n,e){const t=new C5(n,e);return t.subscribe.bind(t)}class C5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");N5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=py),i.error===void 0&&(i.error=py),i.complete===void 0&&(i.complete=py);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N5(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function py(){}function Mp(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ce(r<n.length,"Surrogate pair missing trail surrogate.");const a=n.charCodeAt(r)-56320;i=65536+(s<<10)+a}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Vp=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(n){return n&&n._delegate?n._delegate:n}class vs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new nh;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j5(e))try{this.getOrInitializeService({instanceIdentifier:ya})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ya){return this.instances.has(e)}getOptions(e=ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:R5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ya){return this.component?this.component.multipleInstances?e:ya:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function R5(n){return n===ya?void 0:n}function j5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const L5={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},M5=He.INFO,V5={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},O5=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=V5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Op{constructor(e){this.name=e,this._logLevel=M5,this._logHandler=O5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const F5=(n,e)=>e.some(t=>n instanceof t);let bk,kk;function B5(){return bk||(bk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U5(){return kk||(kk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YI=new WeakMap,nv=new WeakMap,XI=new WeakMap,gy=new WeakMap,Sx=new WeakMap;function z5(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(yo(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&YI.set(t,n)}).catch(()=>{}),Sx.set(e,n),e}function q5(n){if(nv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});nv.set(n,e)}let rv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return nv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||XI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $5(n){rv=n(rv)}function W5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(yy(this),e,...t);return XI.set(r,e.sort?e.sort():[e]),yo(r)}:U5().includes(n)?function(...e){return n.apply(yy(this),e),yo(YI.get(this))}:function(...e){return yo(n.apply(yy(this),e))}}function H5(n){return typeof n=="function"?W5(n):(n instanceof IDBTransaction&&q5(n),F5(n,B5())?new Proxy(n,rv):n)}function yo(n){if(n instanceof IDBRequest)return z5(n);if(gy.has(n))return gy.get(n);const e=H5(n);return e!==n&&(gy.set(n,e),Sx.set(e,n)),e}const yy=n=>Sx.get(n);function K5(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),c=yo(a);return r&&a.addEventListener("upgradeneeded",d=>{r(yo(a.result),d.oldVersion,d.newVersion,yo(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const G5=["get","getKey","getAll","getAllKeys","count"],Q5=["put","add","delete","clear"],vy=new Map;function Ek(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vy.get(e))return vy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Q5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||G5.includes(t)))return;const s=async function(a,...c){const d=this.transaction(a,i?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),i&&d.done]))[0]};return vy.set(e,s),s}$5(n=>({...n,get:(e,t,r)=>Ek(e,t)||n.get(e,t,r),has:(e,t)=>!!Ek(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Y5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Y5(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const iv="@firebase/app",Tk="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Op("@firebase/app"),X5="@firebase/app-compat",Z5="@firebase/analytics-compat",eL="@firebase/analytics",tL="@firebase/app-check-compat",nL="@firebase/app-check",rL="@firebase/auth",iL="@firebase/auth-compat",sL="@firebase/database",oL="@firebase/data-connect",aL="@firebase/database-compat",lL="@firebase/functions",cL="@firebase/functions-compat",uL="@firebase/installations",dL="@firebase/installations-compat",hL="@firebase/messaging",fL="@firebase/messaging-compat",mL="@firebase/performance",pL="@firebase/performance-compat",gL="@firebase/remote-config",yL="@firebase/remote-config-compat",vL="@firebase/storage",xL="@firebase/storage-compat",_L="@firebase/firestore",wL="@firebase/vertexai",bL="@firebase/firestore-compat",kL="firebase",EL="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="[DEFAULT]",TL={[iv]:"fire-core",[X5]:"fire-core-compat",[eL]:"fire-analytics",[Z5]:"fire-analytics-compat",[nL]:"fire-app-check",[tL]:"fire-app-check-compat",[rL]:"fire-auth",[iL]:"fire-auth-compat",[sL]:"fire-rtdb",[oL]:"fire-data-connect",[aL]:"fire-rtdb-compat",[lL]:"fire-fn",[cL]:"fire-fn-compat",[uL]:"fire-iid",[dL]:"fire-iid-compat",[hL]:"fire-fcm",[fL]:"fire-fcm-compat",[mL]:"fire-perf",[pL]:"fire-perf-compat",[gL]:"fire-rc",[yL]:"fire-rc-compat",[vL]:"fire-gcs",[xL]:"fire-gcs-compat",[_L]:"fire-fst",[bL]:"fire-fst-compat",[wL]:"fire-vertex","fire-js":"fire-js",[kL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=new Map,IL=new Map,ov=new Map;function Ik(n,e){try{n.container.addComponent(e)}catch(t){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function To(n){const e=n.name;if(ov.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;ov.set(e,n);for(const t of $m.values())Ik(t,n);for(const t of IL.values())Ik(t,n);return!0}function ih(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function oi(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vo=new rh("app","Firebase",SL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=EL;function ZI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw vo.create("bad-app-name",{appName:String(i)});if(t||(t=$I()),!t)throw vo.create("no-options");const s=$m.get(i);if(s){if(qm(t,s.options)&&qm(r,s.config))return s;throw vo.create("duplicate-app",{appName:i})}const a=new D5(i);for(const d of ov.values())a.addComponent(d);const c=new CL(t,r,a);return $m.set(i,c),c}function Fp(n=sv){const e=$m.get(n);if(!e&&n===sv&&$I())return ZI();if(!e)throw vo.create("no-app",{appName:n});return e}function Vr(n,e,t){var r;let i=(r=TL[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(c.join(" "));return}To(new vs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL="firebase-heartbeat-database",AL=1,Ad="firebase-heartbeat-store";let xy=null;function eS(){return xy||(xy=K5(NL,AL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ad)}catch(t){console.warn(t)}}}}).catch(n=>{throw vo.create("idb-open",{originalErrorMessage:n.message})})),xy}async function PL(n){try{const t=(await eS()).transaction(Ad),r=await t.objectStore(Ad).get(tS(n));return await t.done,r}catch(e){if(e instanceof Mi)xs.warn(e.message);else{const t=vo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(t.message)}}}async function Sk(n,e){try{const r=(await eS()).transaction(Ad,"readwrite");await r.objectStore(Ad).put(e,tS(n)),await r.done}catch(t){if(t instanceof Mi)xs.warn(t.message);else{const r=vo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xs.warn(r.message)}}}function tS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=1024,jL=30*24*60*60*1e3;class DL{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ML(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ck();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=jL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){xs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ck(),{heartbeatsToSend:r,unsentEntries:i}=LL(this._heartbeatsCache.heartbeats),s=Bm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return xs.warn(t),""}}}function Ck(){return new Date().toISOString().substring(0,10)}function LL(n,e=RL){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Nk(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Nk(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ML{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QI()?_5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await PL(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sk(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sk(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Nk(n){return Bm(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(n){To(new vs("platform-logger",e=>new J5(e),"PRIVATE")),To(new vs("heartbeat",e=>new DL(e),"PRIVATE")),Vr(iv,Tk,n),Vr(iv,Tk,"esm2017"),Vr("fire-js","")}VL("");function Cx(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function nS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OL=nS,rS=new rh("auth","Firebase",nS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=new Op("@firebase/auth");function FL(n,...e){Wm.logLevel<=He.WARN&&Wm.warn(`Auth (${jo}): ${n}`,...e)}function vm(n,...e){Wm.logLevel<=He.ERROR&&Wm.error(`Auth (${jo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(n,...e){throw Ax(n,...e)}function ci(n,...e){return Ax(n,...e)}function Nx(n,e,t){const r=Object.assign(Object.assign({},OL()),{[e]:t});return new rh("auth","Firebase",r).create(e,{appName:n.name})}function us(n){return Nx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BL(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Br(n,"argument-error"),Nx(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ax(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return rS.create(n,...e)}function De(n,e,...t){if(!n)throw Ax(e,...t)}function rs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw vm(e),new Error(e)}function _s(n,e){n||rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function UL(){return Ak()==="http:"||Ak()==="https:"}function Ak(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UL()||v5()||"connection"in navigator)?navigator.onLine:!0}function qL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t){this.shortDelay=e,this.longDelay=t,_s(t>e,"Short delay should be less than long delay!"),this.isMobile=Ix()||HI()}get(){return zL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n,e){_s(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=new sh(3e4,6e4);function Do(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Lo(n,e,t,r,i={}){return sS(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=Lc(Object.assign({key:n.config.apiKey},a)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:d},s);return y5()||(f.referrerPolicy="no-referrer"),iS.fetch()(oS(n,n.config.apiHost,t,c),f)})}async function sS(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},$L),e);try{const i=new KL(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Yf(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yf(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Yf(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw Yf(n,"user-disabled",a);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Nx(n,g,f);Br(n,g)}}catch(i){if(i instanceof Mi)throw i;Br(n,"network-request-failed",{message:String(i)})}}async function oh(n,e,t,r,i={}){const s=await Lo(n,e,t,r,i);return"mfaPendingCredential"in s&&Br(n,"multi-factor-auth-required",{_serverResponse:s}),s}function oS(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Px(n.config,i):`${n.config.apiScheme}://${i}`}function HL(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ci(this.auth,"network-request-failed")),WL.get())})}}function Yf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ci(n,e,r);return i.customData._tokenResponse=t,i}function Pk(n){return n!==void 0&&n.enterprise!==void 0}class GL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return HL(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function QL(n,e){return Lo(n,"GET","/v2/recaptchaConfig",Do(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JL(n,e){return Lo(n,"POST","/v1/accounts:delete",e)}async function aS(n,e){return Lo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YL(n,e=!1){const t=ot(n),r=await t.getIdToken(e),i=Rx(r);De(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:cd(_y(i.auth_time)),issuedAtTime:cd(_y(i.iat)),expirationTime:cd(_y(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function _y(n){return Number(n)*1e3}function Rx(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return vm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Um(t);return i?JSON.parse(i):(vm("Failed to decode base64 JWT payload"),null)}catch(i){return vm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Rk(n){const e=Rx(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Mi&&XL(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function XL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cd(this.lastLoginAt),this.creationTime=cd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hm(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Pd(n,aS(t,{idToken:r}));De(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?lS(s.providerUserInfo):[],c=t3(n.providerData,a),d=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),g=d?f:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new lv(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function e3(n){const e=ot(n);await Hm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function t3(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lS(n){return n.map(e=>{var{providerId:t}=e,r=Cx(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n3(n,e){const t=await sS(n,{},async()=>{const r=Lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=oS(n,i,"/v1/token",`key=${s}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",iS.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function r3(n,e){return Lo(n,"POST","/v2/accounts:revokeToken",Do(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=Rk(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await n3(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new sc;return r&&(De(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(De(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(De(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sc,this.toJSON())}_performRefresh(){return rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class is{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Cx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Pd(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YL(this,e)}reload(){return e3(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Hm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oi(this.auth.app))return Promise.reject(us(this.auth));const e=await this.getIdToken();return await Pd(this,JL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,d,f,g;const y=(r=t.displayName)!==null&&r!==void 0?r:void 0,x=(i=t.email)!==null&&i!==void 0?i:void 0,k=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,E=(a=t.photoURL)!==null&&a!==void 0?a:void 0,P=(c=t.tenantId)!==null&&c!==void 0?c:void 0,S=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,N=(f=t.createdAt)!==null&&f!==void 0?f:void 0,L=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:O,emailVerified:Q,isAnonymous:W,providerData:U,stsTokenManager:C}=t;De(O&&C,e,"internal-error");const I=sc.fromJSON(this.name,C);De(typeof O=="string",e,"internal-error"),no(y,e.name),no(x,e.name),De(typeof Q=="boolean",e,"internal-error"),De(typeof W=="boolean",e,"internal-error"),no(k,e.name),no(E,e.name),no(P,e.name),no(S,e.name),no(N,e.name),no(L,e.name);const j=new is({uid:O,auth:e,email:x,emailVerified:Q,displayName:y,isAnonymous:W,photoURL:E,phoneNumber:k,tenantId:P,stsTokenManager:I,createdAt:N,lastLoginAt:L});return U&&Array.isArray(U)&&(j.providerData=U.map(D=>Object.assign({},D))),S&&(j._redirectEventId=S),j}static async _fromIdTokenResponse(e,t,r=!1){const i=new sc;i.updateFromServerResponse(t);const s=new is({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hm(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];De(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?lS(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new sc;c.updateFromIdToken(r);const d=new is({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new lv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new Map;function ss(n){_s(n instanceof Function,"Expected a class definition");let e=jk.get(n);return e?(_s(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jk.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}cS.type="NONE";const Dk=cS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(n,e,t){return`firebase:${n}:${e}:${t}`}class oc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=xm(this.userKey,i.apiKey,s),this.fullPersistenceKey=xm("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?is._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new oc(ss(Dk),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=i[0]||ss(Dk);const a=xm(r,e.config.apiKey,e.name);let c=null;for(const f of t)try{const g=await f._get(a);if(g){const y=is._fromJSON(e,g);f!==s&&(c=y),s=f;break}}catch{}const d=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new oc(s,e,r):(s=d[0],c&&await s._set(a,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==s)try{await f._remove(a)}catch{}})),new oc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pS(e))return"Blackberry";if(gS(e))return"Webos";if(dS(e))return"Safari";if((e.includes("chrome/")||hS(e))&&!e.includes("edge/"))return"Chrome";if(mS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uS(n=sn()){return/firefox\//i.test(n)}function dS(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hS(n=sn()){return/crios\//i.test(n)}function fS(n=sn()){return/iemobile/i.test(n)}function mS(n=sn()){return/android/i.test(n)}function pS(n=sn()){return/blackberry/i.test(n)}function gS(n=sn()){return/webos/i.test(n)}function jx(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function i3(n=sn()){var e;return jx(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function s3(){return x5()&&document.documentMode===10}function yS(n=sn()){return jx(n)||mS(n)||gS(n)||pS(n)||/windows phone/i.test(n)||fS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(n,e=[]){let t;switch(n){case"Browser":t=Lk(sn());break;case"Worker":t=`${Lk(sn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${jo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,c)=>{try{const d=e(s);a(d)}catch(d){c(d)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a3(n,e={}){return Lo(n,"GET","/v2/passwordPolicy",Do(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=6;class c3{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:l3,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsUppercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mk(this),this.idTokenSubscription=new Mk(this),this.beforeStateQueue=new o3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ss(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await oc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await aS(this,{idToken:e}),r=await is._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(oi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===c)&&(d!=null&&d.user)&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oi(this.app))return Promise.reject(us(this));const t=e?ot(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oi(this.app)?Promise.reject(us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oi(this.app)?Promise.reject(us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await a3(this),t=new c3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await r3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ss(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await oc.create(this,[ss(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,i);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&FL(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Mo(n){return ot(n)}class Mk{constructor(e){this.auth=e,this.observer=null,this.addObserver=S5(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function d3(n){Bp=n}function xS(n){return Bp.loadJS(n)}function h3(){return Bp.recaptchaEnterpriseScript}function f3(){return Bp.gapiScript}function m3(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class p3{constructor(){this.enterprise=new g3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class g3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const y3="recaptcha-enterprise",_S="NO_RECAPTCHA";class v3{constructor(e){this.type=y3,this.auth=Mo(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,c)=>{QL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new GL(d);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,a(f.siteKey)}}).catch(d=>{c(d)})})}function i(s,a,c){const d=window.grecaptcha;Pk(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(f=>{a(f)}).catch(()=>{a(_S)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new p3().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(c=>{if(!t&&Pk(window.grecaptcha))i(c,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=h3();d.length!==0&&(d+=c),xS(d).then(()=>{i(c,s,a)}).catch(f=>{a(f)})}}).catch(c=>{a(c)})})}}async function Vk(n,e,t,r=!1,i=!1){const s=new v3(n);let a;if(i)a=_S;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function cv(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Vk(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Vk(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(n,e){const t=ih(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(qm(s,e??{}))return i;Br(i,"already-initialized")}return t.initialize({options:e})}function _3(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ss);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function w3(n,e,t){const r=Mo(n);De(r._canInitEmulator,r,"emulator-config-failed"),De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=wS(e),{host:a,port:c}=b3(e),d=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),k3()}function wS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function b3(n){const e=wS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ok(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Ok(a)}}}function Ok(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function k3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rs("not implemented")}_getIdTokenResponse(e){return rs("not implemented")}_linkToIdToken(e,t){return rs("not implemented")}_getReauthenticationResolver(e){return rs("not implemented")}}async function E3(n,e){return Lo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T3(n,e){return oh(n,"POST","/v1/accounts:signInWithPassword",Do(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I3(n,e){return oh(n,"POST","/v1/accounts:signInWithEmailLink",Do(n,e))}async function S3(n,e){return oh(n,"POST","/v1/accounts:signInWithEmailLink",Do(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends Dx{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Rd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Rd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cv(e,t,"signInWithPassword",T3);case"emailLink":return I3(e,{email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cv(e,r,"signUpPassword",E3);case"emailLink":return S3(e,{idToken:t,email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(n,e){return oh(n,"POST","/v1/accounts:signInWithIdp",Do(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="http://localhost";class Ma extends Dx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Cx(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Ma(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return ac(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ac(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ac(e,t)}buildRequest(){const e={requestUri:C3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Lc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function A3(n){const e=Zu(ed(n)).link,t=e?Zu(ed(e)).deep_link_id:null,r=Zu(ed(n)).deep_link_id;return(r?Zu(ed(r)).link:null)||r||t||e||n}class Lx{constructor(e){var t,r,i,s,a,c;const d=Zu(ed(e)),f=(t=d.apiKey)!==null&&t!==void 0?t:null,g=(r=d.oobCode)!==null&&r!==void 0?r:null,y=N3((i=d.mode)!==null&&i!==void 0?i:null);De(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(s=d.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=d.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=A3(e);try{return new Lx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this.providerId=Mc.PROVIDER_ID}static credential(e,t){return Rd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Lx.parseLink(t);return De(r,"argument-error"),Rd._fromEmailAndCode(e,r.code,r.tenantId)}}Mc.PROVIDER_ID="password";Mc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends Mx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends ah{constructor(){super("facebook.com")}static credential(e){return Ma._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.FACEBOOK_SIGN_IN_METHOD="facebook.com";ao.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends ah{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ma._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ns.credential(t,r)}catch{return null}}}ns.GOOGLE_SIGN_IN_METHOD="google.com";ns.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends ah{constructor(){super("github.com")}static credential(e){return Ma._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lo.credential(e.oauthAccessToken)}catch{return null}}}lo.GITHUB_SIGN_IN_METHOD="github.com";lo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends ah{constructor(){super("twitter.com")}static credential(e,t){return Ma._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return co.credential(t,r)}catch{return null}}}co.TWITTER_SIGN_IN_METHOD="twitter.com";co.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P3(n,e){return oh(n,"POST","/v1/accounts:signUp",Do(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await is._fromIdTokenResponse(e,r,i),a=Fk(r);return new Va({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Fk(r);return new Va({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Fk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends Mi{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Km.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Km(e,t,r,i)}}function bS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Km._fromErrorAndOperation(n,s,e,r):s})}async function R3(n,e,t=!1){const r=await Pd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Va._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j3(n,e,t=!1){const{auth:r}=n;if(oi(r.app))return Promise.reject(us(r));const i="reauthenticate";try{const s=await Pd(n,bS(r,i,e,n),t);De(s.idToken,r,"internal-error");const a=Rx(s.idToken);De(a,r,"internal-error");const{sub:c}=a;return De(n.uid===c,r,"user-mismatch"),Va._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Br(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(n,e,t=!1){if(oi(n.app))return Promise.reject(us(n));const r="signIn",i=await bS(n,r,e),s=await Va._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function D3(n,e){return kS(Mo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(n){const e=Mo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function L3(n,e,t){if(oi(n.app))return Promise.reject(us(n));const r=Mo(n),a=await cv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",P3).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&ES(n),d}),c=await Va._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function M3(n,e,t){return oi(n.app)?Promise.reject(us(n)):D3(ot(n),Mc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ES(n),r})}function V3(n,e,t,r){return ot(n).onIdTokenChanged(e,t,r)}function O3(n,e,t){return ot(n).beforeAuthStateChanged(e,t)}function F3(n,e,t,r){return ot(n).onAuthStateChanged(e,t,r)}function B3(n){return ot(n).signOut()}const Gm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gm,"1"),this.storage.removeItem(Gm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=1e3,z3=10;class IS extends TS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);s3()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,z3):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},U3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}IS.type="LOCAL";const q3=IS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS extends TS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}SS.type="SESSION";const CS=SS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Up(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async f=>f(t.origin,s)),d=await $3(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Up.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,d)=>{const f=Vx("",20);i.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){const x=y;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(g),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(x.data.response);break;default:clearTimeout(g),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return window}function H3(n){Pi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function K3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G3(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Q3(){return NS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="firebaseLocalStorageDb",J3=1,Qm="firebaseLocalStorage",PS="fbase_key";class lh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zp(n,e){return n.transaction([Qm],e?"readwrite":"readonly").objectStore(Qm)}function Y3(){const n=indexedDB.deleteDatabase(AS);return new lh(n).toPromise()}function uv(){const n=indexedDB.open(AS,J3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Qm,{keyPath:PS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Qm)?e(r):(r.close(),await Y3(),e(await uv()))})})}async function Bk(n,e,t){const r=zp(n,!0).put({[PS]:e,value:t});return new lh(r).toPromise()}async function X3(n,e){const t=zp(n,!1).get(e),r=await new lh(t).toPromise();return r===void 0?null:r.value}function Uk(n,e){const t=zp(n,!0).delete(e);return new lh(t).toPromise()}const Z3=800,eM=3;class RS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>eM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Up._getInstance(Q3()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await K3(),!this.activeServiceWorker)return;this.sender=new W3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||G3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uv();return await Bk(e,Gm,"1"),await Uk(e,Gm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Bk(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>X3(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Uk(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=zp(i,!1).getAll();return new lh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RS.type="LOCAL";const tM=RS;new sh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(n,e){return e?ss(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox extends Dx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ac(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ac(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ac(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nM(n){return kS(n.auth,new Ox(n),n.bypassAuthState)}function rM(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),j3(t,new Ox(n),n.bypassAuthState)}async function iM(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),R3(t,new Ox(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nM;case"linkViaPopup":case"linkViaRedirect":return iM;case"reauthViaPopup":case"reauthViaRedirect":return rM;default:Br(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=new sh(2e3,1e4);async function oM(n,e,t){if(oi(n.app))return Promise.reject(ci(n,"operation-not-supported-in-this-environment"));const r=Mo(n);BL(n,e,Mx);const i=jS(r,t);return new Ca(r,"signInViaPopup",e,i).executeNotNull()}class Ca extends DS{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ca.currentPopupAction&&Ca.currentPopupAction.cancel(),Ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=Vx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sM.get())};e()}}Ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="pendingRedirect",_m=new Map;class lM extends DS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=_m.get(this.auth._key());if(!e){try{const r=await cM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}_m.set(this.auth._key(),e)}return this.bypassAuthState||_m.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cM(n,e){const t=hM(e),r=dM(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function uM(n,e){_m.set(n._key(),e)}function dM(n){return ss(n._redirectPersistence)}function hM(n){return xm(aM,n.config.apiKey,n.name)}async function fM(n,e,t=!1){if(oi(n.app))return Promise.reject(us(n));const r=Mo(n),i=jS(r,e),a=await new lM(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=10*60*1e3;class pM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!LS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ci(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mM&&this.cachedEventUids.clear(),this.cachedEventUids.has(zk(e))}saveEventToCache(e){this.cachedEventUids.add(zk(e)),this.lastProcessedEventTime=Date.now()}}function zk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function LS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM(n,e={}){return Lo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xM=/^https?/;async function _M(n){if(n.config.emulator)return;const{authorizedDomains:e}=await yM(n);for(const t of e)try{if(wM(t))return}catch{}Br(n,"unauthorized-domain")}function wM(n){const e=av(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!xM.test(t))return!1;if(vM.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=new sh(3e4,6e4);function qk(){const n=Pi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function kM(n){return new Promise((e,t)=>{var r,i,s;function a(){qk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qk(),t(ci(n,"network-request-failed"))},timeout:bM.get()})}if(!((i=(r=Pi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Pi().gapi)===null||s===void 0)&&s.load)a();else{const c=m3("iframefcb");return Pi()[c]=()=>{gapi.load?a():t(ci(n,"network-request-failed"))},xS(`${f3()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw wm=null,e})}let wm=null;function EM(n){return wm=wm||kM(n),wm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=new sh(5e3,15e3),IM="__/auth/iframe",SM="emulator/auth/iframe",CM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AM(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Px(e,SM):`https://${n.config.authDomain}/${IM}`,r={apiKey:e.apiKey,appName:n.name,v:jo},i=NM.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Lc(r).slice(1)}`}async function PM(n){const e=await EM(n),t=Pi().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:AM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=ci(n,"network-request-failed"),c=Pi().setTimeout(()=>{s(a)},TM.get());function d(){Pi().clearTimeout(c),i(r)}r.ping(d).then(d,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jM=500,DM=600,LM="_blank",MM="http://localhost";class $k{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VM(n,e,t,r=jM,i=DM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},RM),{width:r.toString(),height:i.toString(),top:s,left:a}),f=sn().toLowerCase();t&&(c=hS(f)?LM:t),uS(f)&&(e=e||MM,d.scrollbars="yes");const g=Object.entries(d).reduce((x,[k,E])=>`${x}${k}=${E},`,"");if(i3(f)&&c!=="_self")return OM(e||"",c),new $k(null);const y=window.open(e||"",c,g);De(y,n,"popup-blocked");try{y.focus()}catch{}return new $k(y)}function OM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM="__/auth/handler",BM="emulator/auth/handler",UM=encodeURIComponent("fac");async function Wk(n,e,t,r,i,s){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:jo,eventId:i};if(e instanceof Mx){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",tv(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))a[g]=y}if(e instanceof ah){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(a.scopes=g.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const d=await n._getAppCheckToken(),f=d?`#${UM}=${encodeURIComponent(d)}`:"";return`${zM(n)}?${Lc(c).slice(1)}${f}`}function zM({config:n}){return n.emulator?Px(n,BM):`https://${n.authDomain}/${FM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="webStorageSupport";class qM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CS,this._completeRedirectFn=fM,this._overrideRedirectResult=uM}async _openPopup(e,t,r,i){var s;_s((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Wk(e,t,r,av(),i);return VM(e,a,Vx())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Wk(e,t,r,av(),i);return H3(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(_s(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await PM(e),r=new pM(e);return t.register("authEvent",i=>(De(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wy,{type:wy},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[wy];a!==void 0&&t(!!a),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_M(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yS()||dS()||jx()}}const $M=qM;var Hk="@firebase/auth",Kk="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KM(n){To(new vs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;De(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vS(n)},f=new u3(r,i,s,d);return _3(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),To(new vs("auth-internal",e=>{const t=Mo(e.getProvider("auth").getImmediate());return(r=>new WM(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(Hk,Kk,HM(n)),Vr(Hk,Kk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=5*60,QM=WI("authIdTokenMaxAge")||GM;let Gk=null;const JM=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>QM)return;const i=t==null?void 0:t.token;Gk!==i&&(Gk=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function MS(n=Fp()){const e=ih(n,"auth");if(e.isInitialized())return e.getImmediate();const t=x3(n,{popupRedirectResolver:$M,persistence:[tM,q3,CS]}),r=WI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=JM(s.toString());O3(t,a,()=>a(t.currentUser)),V3(t,c=>a(c))}}const i=qI("auth");return i&&w3(t,`http://${i}`),t}function YM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}d3({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ci("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",YM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KM("Browser");var Qk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ra,VS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function j(){}j.prototype=I.prototype,C.D=I.prototype,C.prototype=new j,C.prototype.constructor=C,C.C=function(D,F,q){for(var V=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)V[ge-2]=arguments[ge];return I.prototype[F].apply(D,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,I,j){j||(j=0);var D=Array(16);if(typeof I=="string")for(var F=0;16>F;++F)D[F]=I.charCodeAt(j++)|I.charCodeAt(j++)<<8|I.charCodeAt(j++)<<16|I.charCodeAt(j++)<<24;else for(F=0;16>F;++F)D[F]=I[j++]|I[j++]<<8|I[j++]<<16|I[j++]<<24;I=C.g[0],j=C.g[1],F=C.g[2];var q=C.g[3],V=I+(q^j&(F^q))+D[0]+3614090360&4294967295;I=j+(V<<7&4294967295|V>>>25),V=q+(F^I&(j^F))+D[1]+3905402710&4294967295,q=I+(V<<12&4294967295|V>>>20),V=F+(j^q&(I^j))+D[2]+606105819&4294967295,F=q+(V<<17&4294967295|V>>>15),V=j+(I^F&(q^I))+D[3]+3250441966&4294967295,j=F+(V<<22&4294967295|V>>>10),V=I+(q^j&(F^q))+D[4]+4118548399&4294967295,I=j+(V<<7&4294967295|V>>>25),V=q+(F^I&(j^F))+D[5]+1200080426&4294967295,q=I+(V<<12&4294967295|V>>>20),V=F+(j^q&(I^j))+D[6]+2821735955&4294967295,F=q+(V<<17&4294967295|V>>>15),V=j+(I^F&(q^I))+D[7]+4249261313&4294967295,j=F+(V<<22&4294967295|V>>>10),V=I+(q^j&(F^q))+D[8]+1770035416&4294967295,I=j+(V<<7&4294967295|V>>>25),V=q+(F^I&(j^F))+D[9]+2336552879&4294967295,q=I+(V<<12&4294967295|V>>>20),V=F+(j^q&(I^j))+D[10]+4294925233&4294967295,F=q+(V<<17&4294967295|V>>>15),V=j+(I^F&(q^I))+D[11]+2304563134&4294967295,j=F+(V<<22&4294967295|V>>>10),V=I+(q^j&(F^q))+D[12]+1804603682&4294967295,I=j+(V<<7&4294967295|V>>>25),V=q+(F^I&(j^F))+D[13]+4254626195&4294967295,q=I+(V<<12&4294967295|V>>>20),V=F+(j^q&(I^j))+D[14]+2792965006&4294967295,F=q+(V<<17&4294967295|V>>>15),V=j+(I^F&(q^I))+D[15]+1236535329&4294967295,j=F+(V<<22&4294967295|V>>>10),V=I+(F^q&(j^F))+D[1]+4129170786&4294967295,I=j+(V<<5&4294967295|V>>>27),V=q+(j^F&(I^j))+D[6]+3225465664&4294967295,q=I+(V<<9&4294967295|V>>>23),V=F+(I^j&(q^I))+D[11]+643717713&4294967295,F=q+(V<<14&4294967295|V>>>18),V=j+(q^I&(F^q))+D[0]+3921069994&4294967295,j=F+(V<<20&4294967295|V>>>12),V=I+(F^q&(j^F))+D[5]+3593408605&4294967295,I=j+(V<<5&4294967295|V>>>27),V=q+(j^F&(I^j))+D[10]+38016083&4294967295,q=I+(V<<9&4294967295|V>>>23),V=F+(I^j&(q^I))+D[15]+3634488961&4294967295,F=q+(V<<14&4294967295|V>>>18),V=j+(q^I&(F^q))+D[4]+3889429448&4294967295,j=F+(V<<20&4294967295|V>>>12),V=I+(F^q&(j^F))+D[9]+568446438&4294967295,I=j+(V<<5&4294967295|V>>>27),V=q+(j^F&(I^j))+D[14]+3275163606&4294967295,q=I+(V<<9&4294967295|V>>>23),V=F+(I^j&(q^I))+D[3]+4107603335&4294967295,F=q+(V<<14&4294967295|V>>>18),V=j+(q^I&(F^q))+D[8]+1163531501&4294967295,j=F+(V<<20&4294967295|V>>>12),V=I+(F^q&(j^F))+D[13]+2850285829&4294967295,I=j+(V<<5&4294967295|V>>>27),V=q+(j^F&(I^j))+D[2]+4243563512&4294967295,q=I+(V<<9&4294967295|V>>>23),V=F+(I^j&(q^I))+D[7]+1735328473&4294967295,F=q+(V<<14&4294967295|V>>>18),V=j+(q^I&(F^q))+D[12]+2368359562&4294967295,j=F+(V<<20&4294967295|V>>>12),V=I+(j^F^q)+D[5]+4294588738&4294967295,I=j+(V<<4&4294967295|V>>>28),V=q+(I^j^F)+D[8]+2272392833&4294967295,q=I+(V<<11&4294967295|V>>>21),V=F+(q^I^j)+D[11]+1839030562&4294967295,F=q+(V<<16&4294967295|V>>>16),V=j+(F^q^I)+D[14]+4259657740&4294967295,j=F+(V<<23&4294967295|V>>>9),V=I+(j^F^q)+D[1]+2763975236&4294967295,I=j+(V<<4&4294967295|V>>>28),V=q+(I^j^F)+D[4]+1272893353&4294967295,q=I+(V<<11&4294967295|V>>>21),V=F+(q^I^j)+D[7]+4139469664&4294967295,F=q+(V<<16&4294967295|V>>>16),V=j+(F^q^I)+D[10]+3200236656&4294967295,j=F+(V<<23&4294967295|V>>>9),V=I+(j^F^q)+D[13]+681279174&4294967295,I=j+(V<<4&4294967295|V>>>28),V=q+(I^j^F)+D[0]+3936430074&4294967295,q=I+(V<<11&4294967295|V>>>21),V=F+(q^I^j)+D[3]+3572445317&4294967295,F=q+(V<<16&4294967295|V>>>16),V=j+(F^q^I)+D[6]+76029189&4294967295,j=F+(V<<23&4294967295|V>>>9),V=I+(j^F^q)+D[9]+3654602809&4294967295,I=j+(V<<4&4294967295|V>>>28),V=q+(I^j^F)+D[12]+3873151461&4294967295,q=I+(V<<11&4294967295|V>>>21),V=F+(q^I^j)+D[15]+530742520&4294967295,F=q+(V<<16&4294967295|V>>>16),V=j+(F^q^I)+D[2]+3299628645&4294967295,j=F+(V<<23&4294967295|V>>>9),V=I+(F^(j|~q))+D[0]+4096336452&4294967295,I=j+(V<<6&4294967295|V>>>26),V=q+(j^(I|~F))+D[7]+1126891415&4294967295,q=I+(V<<10&4294967295|V>>>22),V=F+(I^(q|~j))+D[14]+2878612391&4294967295,F=q+(V<<15&4294967295|V>>>17),V=j+(q^(F|~I))+D[5]+4237533241&4294967295,j=F+(V<<21&4294967295|V>>>11),V=I+(F^(j|~q))+D[12]+1700485571&4294967295,I=j+(V<<6&4294967295|V>>>26),V=q+(j^(I|~F))+D[3]+2399980690&4294967295,q=I+(V<<10&4294967295|V>>>22),V=F+(I^(q|~j))+D[10]+4293915773&4294967295,F=q+(V<<15&4294967295|V>>>17),V=j+(q^(F|~I))+D[1]+2240044497&4294967295,j=F+(V<<21&4294967295|V>>>11),V=I+(F^(j|~q))+D[8]+1873313359&4294967295,I=j+(V<<6&4294967295|V>>>26),V=q+(j^(I|~F))+D[15]+4264355552&4294967295,q=I+(V<<10&4294967295|V>>>22),V=F+(I^(q|~j))+D[6]+2734768916&4294967295,F=q+(V<<15&4294967295|V>>>17),V=j+(q^(F|~I))+D[13]+1309151649&4294967295,j=F+(V<<21&4294967295|V>>>11),V=I+(F^(j|~q))+D[4]+4149444226&4294967295,I=j+(V<<6&4294967295|V>>>26),V=q+(j^(I|~F))+D[11]+3174756917&4294967295,q=I+(V<<10&4294967295|V>>>22),V=F+(I^(q|~j))+D[2]+718787259&4294967295,F=q+(V<<15&4294967295|V>>>17),V=j+(q^(F|~I))+D[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(F+(V<<21&4294967295|V>>>11))&4294967295,C.g[2]=C.g[2]+F&4294967295,C.g[3]=C.g[3]+q&4294967295}r.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var j=I-this.blockSize,D=this.B,F=this.h,q=0;q<I;){if(F==0)for(;q<=j;)i(this,C,q),q+=this.blockSize;if(typeof C=="string"){for(;q<I;)if(D[F++]=C.charCodeAt(q++),F==this.blockSize){i(this,D),F=0;break}}else for(;q<I;)if(D[F++]=C[q++],F==this.blockSize){i(this,D),F=0;break}}this.h=F,this.o+=I},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var j=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=j&255,j/=256;for(this.u(C),C=Array(16),I=j=0;4>I;++I)for(var D=0;32>D;D+=8)C[j++]=this.g[I]>>>D&255;return C};function s(C,I){var j=c;return Object.prototype.hasOwnProperty.call(j,C)?j[C]:j[C]=I(C)}function a(C,I){this.h=I;for(var j=[],D=!0,F=C.length-1;0<=F;F--){var q=C[F]|0;D&&q==I||(j[F]=q,D=!1)}this.g=j}var c={};function d(C){return-128<=C&&128>C?s(C,function(I){return new a([I|0],0>I?-1:0)}):new a([C|0],0>C?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return y;if(0>C)return S(f(-C));for(var I=[],j=1,D=0;C>=j;D++)I[D]=C/j|0,j*=4294967296;return new a(I,0)}function g(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return S(g(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=f(Math.pow(I,8)),D=y,F=0;F<C.length;F+=8){var q=Math.min(8,C.length-F),V=parseInt(C.substring(F,F+q),I);8>q?(q=f(Math.pow(I,q)),D=D.j(q).add(f(V))):(D=D.j(j),D=D.add(f(V)))}return D}var y=d(0),x=d(1),k=d(16777216);n=a.prototype,n.m=function(){if(P(this))return-S(this).m();for(var C=0,I=1,j=0;j<this.g.length;j++){var D=this.i(j);C+=(0<=D?D:4294967296+D)*I,I*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(E(this))return"0";if(P(this))return"-"+S(this).toString(C);for(var I=f(Math.pow(C,6)),j=this,D="";;){var F=Q(j,I).g;j=N(j,F.j(I));var q=((0<j.g.length?j.g[0]:j.h)>>>0).toString(C);if(j=F,E(j))return q+D;for(;6>q.length;)q="0"+q;D=q+D}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function E(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function P(C){return C.h==-1}n.l=function(C){return C=N(this,C),P(C)?-1:E(C)?0:1};function S(C){for(var I=C.g.length,j=[],D=0;D<I;D++)j[D]=~C.g[D];return new a(j,~C.h).add(x)}n.abs=function(){return P(this)?S(this):this},n.add=function(C){for(var I=Math.max(this.g.length,C.g.length),j=[],D=0,F=0;F<=I;F++){var q=D+(this.i(F)&65535)+(C.i(F)&65535),V=(q>>>16)+(this.i(F)>>>16)+(C.i(F)>>>16);D=V>>>16,q&=65535,V&=65535,j[F]=V<<16|q}return new a(j,j[j.length-1]&-2147483648?-1:0)};function N(C,I){return C.add(S(I))}n.j=function(C){if(E(this)||E(C))return y;if(P(this))return P(C)?S(this).j(S(C)):S(S(this).j(C));if(P(C))return S(this.j(S(C)));if(0>this.l(k)&&0>C.l(k))return f(this.m()*C.m());for(var I=this.g.length+C.g.length,j=[],D=0;D<2*I;D++)j[D]=0;for(D=0;D<this.g.length;D++)for(var F=0;F<C.g.length;F++){var q=this.i(D)>>>16,V=this.i(D)&65535,ge=C.i(F)>>>16,Pe=C.i(F)&65535;j[2*D+2*F]+=V*Pe,L(j,2*D+2*F),j[2*D+2*F+1]+=q*Pe,L(j,2*D+2*F+1),j[2*D+2*F+1]+=V*ge,L(j,2*D+2*F+1),j[2*D+2*F+2]+=q*ge,L(j,2*D+2*F+2)}for(D=0;D<I;D++)j[D]=j[2*D+1]<<16|j[2*D];for(D=I;D<2*I;D++)j[D]=0;return new a(j,0)};function L(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function O(C,I){this.g=C,this.h=I}function Q(C,I){if(E(I))throw Error("division by zero");if(E(C))return new O(y,y);if(P(C))return I=Q(S(C),I),new O(S(I.g),S(I.h));if(P(I))return I=Q(C,S(I)),new O(S(I.g),I.h);if(30<C.g.length){if(P(C)||P(I))throw Error("slowDivide_ only works with positive integers.");for(var j=x,D=I;0>=D.l(C);)j=W(j),D=W(D);var F=U(j,1),q=U(D,1);for(D=U(D,2),j=U(j,2);!E(D);){var V=q.add(D);0>=V.l(C)&&(F=F.add(j),q=V),D=U(D,1),j=U(j,1)}return I=N(C,F.j(I)),new O(F,I)}for(F=y;0<=C.l(I);){for(j=Math.max(1,Math.floor(C.m()/I.m())),D=Math.ceil(Math.log(j)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),q=f(j),V=q.j(I);P(V)||0<V.l(C);)j-=D,q=f(j),V=q.j(I);E(q)&&(q=x),F=F.add(q),C=N(C,V)}return new O(F,C)}n.A=function(C){return Q(this,C).h},n.and=function(C){for(var I=Math.max(this.g.length,C.g.length),j=[],D=0;D<I;D++)j[D]=this.i(D)&C.i(D);return new a(j,this.h&C.h)},n.or=function(C){for(var I=Math.max(this.g.length,C.g.length),j=[],D=0;D<I;D++)j[D]=this.i(D)|C.i(D);return new a(j,this.h|C.h)},n.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),j=[],D=0;D<I;D++)j[D]=this.i(D)^C.i(D);return new a(j,this.h^C.h)};function W(C){for(var I=C.g.length+1,j=[],D=0;D<I;D++)j[D]=C.i(D)<<1|C.i(D-1)>>>31;return new a(j,C.h)}function U(C,I){var j=I>>5;I%=32;for(var D=C.g.length-j,F=[],q=0;q<D;q++)F[q]=0<I?C.i(q+j)>>>I|C.i(q+j+1)<<32-I:C.i(q+j);return new a(F,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VS=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,Ra=a}).apply(typeof Qk<"u"?Qk:typeof self<"u"?self:typeof window<"u"?window:{});var Xf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OS,td,FS,bm,dv,BS,US,zS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,_,b){return m==Array.prototype||m==Object.prototype||(m[_]=b.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xf=="object"&&Xf];for(var _=0;_<m.length;++_){var b=m[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function i(m,_){if(_)e:{var b=r;m=m.split(".");for(var R=0;R<m.length-1;R++){var H=m[R];if(!(H in b))break e;b=b[H]}m=m[m.length-1],R=b[m],_=_(R),_!=R&&_!=null&&e(b,m,{configurable:!0,writable:!0,value:_})}}function s(m,_){m instanceof String&&(m+="");var b=0,R=!1,H={next:function(){if(!R&&b<m.length){var X=b++;return{value:_(X,m[X]),done:!1}}return R=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(m){return m||function(){return s(this,function(_,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function d(m){var _=typeof m;return _=_!="object"?_:m?Array.isArray(m)?"array":_:"null",_=="array"||_=="object"&&typeof m.length=="number"}function f(m){var _=typeof m;return _=="object"&&m!=null||_=="function"}function g(m,_,b){return m.call.apply(m.bind,arguments)}function y(m,_,b){if(!m)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,R),m.apply(_,H)}}return function(){return m.apply(_,arguments)}}function x(m,_,b){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,x.apply(null,arguments)}function k(m,_){var b=Array.prototype.slice.call(arguments,1);return function(){var R=b.slice();return R.push.apply(R,arguments),m.apply(this,R)}}function E(m,_){function b(){}b.prototype=_.prototype,m.aa=_.prototype,m.prototype=new b,m.prototype.constructor=m,m.Qb=function(R,H,X){for(var ue=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)ue[lt-2]=arguments[lt];return _.prototype[H].apply(R,ue)}}function P(m){const _=m.length;if(0<_){const b=Array(_);for(let R=0;R<_;R++)b[R]=m[R];return b}return[]}function S(m,_){for(let b=1;b<arguments.length;b++){const R=arguments[b];if(d(R)){const H=m.length||0,X=R.length||0;m.length=H+X;for(let ue=0;ue<X;ue++)m[H+ue]=R[ue]}else m.push(R)}}class N{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function L(m){return/^[\s\xa0]*$/.test(m)}function O(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function Q(m){return Q[" "](m),m}Q[" "]=function(){};var W=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function U(m,_,b){for(const R in m)_.call(b,m[R],R,m)}function C(m,_){for(const b in m)_.call(void 0,m[b],b,m)}function I(m){const _={};for(const b in m)_[b]=m[b];return _}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(m,_){let b,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(b in R)m[b]=R[b];for(let X=0;X<j.length;X++)b=j[X],Object.prototype.hasOwnProperty.call(R,b)&&(m[b]=R[b])}}function F(m){var _=1;m=m.split(":");const b=[];for(;0<_&&m.length;)b.push(m.shift()),_--;return m.length&&b.push(m.join(":")),b}function q(m){c.setTimeout(()=>{throw m},0)}function V(){var m=ve;let _=null;return m.g&&(_=m.g,m.g=m.g.next,m.g||(m.h=null),_.next=null),_}class ge{constructor(){this.h=this.g=null}add(_,b){const R=Pe.get();R.set(_,b),this.h?this.h.next=R:this.g=R,this.h=R}}var Pe=new N(()=>new Me,m=>m.reset());class Me{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,re=!1,ve=new ge,he=()=>{const m=c.Promise.resolve(void 0);fe=()=>{m.then($)}};var $=()=>{for(var m;m=V();){try{m.h.call(m.g)}catch(b){q(b)}var _=Pe;_.j(m),100>_.h&&(_.h++,m.next=_.g,_.g=m)}re=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(m,_){this.type=m,this.g=this.target=_,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,_=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const b=()=>{};c.addEventListener("test",b,_),c.removeEventListener("test",b,_)}catch{}return m}();function Oe(m,_){if(xe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var b=this.type=m.type,R=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=_,_=m.relatedTarget){if(W){e:{try{Q(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else b=="mouseover"?_=m.fromElement:b=="mouseout"&&(_=m.toElement);this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ve[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Oe.aa.h.call(this)}}E(Oe,xe);var Ve={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function Z(m,_,b,R,H){this.listener=m,this.proxy=null,this.src=_,this.type=b,this.capture=!!R,this.ha=H,this.key=++Ge,this.da=this.fa=!1}function Ee(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Je(m){this.src=m,this.g={},this.h=0}Je.prototype.add=function(m,_,b,R,H){var X=m.toString();m=this.g[X],m||(m=this.g[X]=[],this.h++);var ue=an(m,_,R,H);return-1<ue?(_=m[ue],b||(_.fa=!1)):(_=new Z(_,this.src,X,!!R,H),_.fa=b,m.push(_)),_};function Xe(m,_){var b=_.type;if(b in m.g){var R=m.g[b],H=Array.prototype.indexOf.call(R,_,void 0),X;(X=0<=H)&&Array.prototype.splice.call(R,H,1),X&&(Ee(_),m.g[b].length==0&&(delete m.g[b],m.h--))}}function an(m,_,b,R){for(var H=0;H<m.length;++H){var X=m[H];if(!X.da&&X.listener==_&&X.capture==!!b&&X.ha==R)return H}return-1}var Ft="closure_lm_"+(1e6*Math.random()|0),Sn={};function Fn(m,_,b,R,H){if(Array.isArray(_)){for(var X=0;X<_.length;X++)Fn(m,_[X],b,R,H);return null}return b=Hc(b),m&&m[Ue]?m.K(_,b,f(R)?!!R.capture:!!R,H):mi(m,_,b,!1,R,H)}function mi(m,_,b,R,H,X){if(!_)throw Error("Invalid event type");var ue=f(H)?!!H.capture:!!H,lt=Ps(m);if(lt||(m[Ft]=lt=new Je(m)),b=lt.add(_,b,R,ue,X),b.proxy)return b;if(R=Oi(),b.proxy=R,R.src=m,R.listener=b,m.addEventListener)Re||(H=ue),H===void 0&&(H=!1),m.addEventListener(_.toString(),R,H);else if(m.attachEvent)m.attachEvent(Cn(_.toString()),R);else if(m.addListener&&m.removeListener)m.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Oi(){function m(b){return _.call(m.src,m.listener,b)}const _=wr;return m}function ht(m,_,b,R,H){if(Array.isArray(_))for(var X=0;X<_.length;X++)ht(m,_[X],b,R,H);else R=f(R)?!!R.capture:!!R,b=Hc(b),m&&m[Ue]?(m=m.i,_=String(_).toString(),_ in m.g&&(X=m.g[_],b=an(X,b,R,H),-1<b&&(Ee(X[b]),Array.prototype.splice.call(X,b,1),X.length==0&&(delete m.g[_],m.h--)))):m&&(m=Ps(m))&&(_=m.g[_.toString()],m=-1,_&&(m=an(_,b,R,H)),(b=-1<m?_[m]:null)&&xn(b))}function xn(m){if(typeof m!="number"&&m&&!m.da){var _=m.src;if(_&&_[Ue])Xe(_.i,m);else{var b=m.type,R=m.proxy;_.removeEventListener?_.removeEventListener(b,R,m.capture):_.detachEvent?_.detachEvent(Cn(b),R):_.addListener&&_.removeListener&&_.removeListener(R),(b=Ps(_))?(Xe(b,m),b.h==0&&(b.src=null,_[Ft]=null)):Ee(m)}}}function Cn(m){return m in Sn?Sn[m]:Sn[m]="on"+m}function wr(m,_){if(m.da)m=!0;else{_=new Oe(_,this);var b=m.listener,R=m.ha||m.src;m.fa&&xn(m),m=b.call(R,_)}return m}function Ps(m){return m=m[Ft],m instanceof Je?m:null}var tl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hc(m){return typeof m=="function"?m:(m[tl]||(m[tl]=function(_){return m.handleEvent(_)}),m[tl])}function Jt(){ne.call(this),this.i=new Je(this),this.M=this,this.F=null}E(Jt,ne),Jt.prototype[Ue]=!0,Jt.prototype.removeEventListener=function(m,_,b,R){ht(this,m,_,b,R)};function Yt(m,_){var b,R=m.F;if(R)for(b=[];R;R=R.F)b.push(R);if(m=m.M,R=_.type||_,typeof _=="string")_=new xe(_,m);else if(_ instanceof xe)_.target=_.target||m;else{var H=_;_=new xe(R,m),D(_,H)}if(H=!0,b)for(var X=b.length-1;0<=X;X--){var ue=_.g=b[X];H=Fi(ue,R,!0,_)&&H}if(ue=_.g=m,H=Fi(ue,R,!0,_)&&H,H=Fi(ue,R,!1,_)&&H,b)for(X=0;X<b.length;X++)ue=_.g=b[X],H=Fi(ue,R,!1,_)&&H}Jt.prototype.N=function(){if(Jt.aa.N.call(this),this.i){var m=this.i,_;for(_ in m.g){for(var b=m.g[_],R=0;R<b.length;R++)Ee(b[R]);delete m.g[_],m.h--}}this.F=null},Jt.prototype.K=function(m,_,b,R){return this.i.add(String(m),_,!1,b,R)},Jt.prototype.L=function(m,_,b,R){return this.i.add(String(m),_,!0,b,R)};function Fi(m,_,b,R){if(_=m.i.g[String(_)],!_)return!0;_=_.concat();for(var H=!0,X=0;X<_.length;++X){var ue=_[X];if(ue&&!ue.da&&ue.capture==b){var lt=ue.listener,Xt=ue.ha||ue.src;ue.fa&&Xe(m.i,ue),H=lt.call(Xt,R)!==!1&&H}}return H&&!R.defaultPrevented}function Kc(m,_,b){if(typeof m=="function")b&&(m=x(m,b));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:c.setTimeout(m,_||0)}function Rs(m){m.g=Kc(()=>{m.g=null,m.i&&(m.i=!1,Rs(m))},m.l);const _=m.h;m.h=null,m.m.apply(null,_)}class zo extends ne{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Rs(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qo(m){ne.call(this),this.h=m,this.g={}}E(qo,ne);var Gc=[];function Qc(m){U(m.g,function(_,b){this.g.hasOwnProperty(b)&&xn(_)},m),m.g={}}qo.prototype.N=function(){qo.aa.N.call(this),Qc(this)},qo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jc=c.JSON.stringify,Yc=c.JSON.parse,Xc=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function $o(){}$o.prototype.h=null;function nl(m){return m.h||(m.h=m.i())}function rl(){}var br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pi(){xe.call(this,"d")}E(pi,xe);function il(){xe.call(this,"c")}E(il,xe);var gi={},Zc=null;function Wo(){return Zc=Zc||new Jt}gi.La="serverreachability";function eu(m){xe.call(this,gi.La,m)}E(eu,xe);function Bi(m){const _=Wo();Yt(_,new eu(_))}gi.STAT_EVENT="statevent";function tu(m,_){xe.call(this,gi.STAT_EVENT,m),this.stat=_}E(tu,xe);function Bt(m){const _=Wo();Yt(_,new tu(_,m))}gi.Ma="timingevent";function sl(m,_){xe.call(this,gi.Ma,m),this.size=_}E(sl,xe);function $r(m,_){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},_)}function Ho(){this.g=!0}Ho.prototype.xa=function(){this.g=!1};function Ko(m,_,b,R,H,X){m.info(function(){if(m.g)if(X)for(var ue="",lt=X.split("&"),Xt=0;Xt<lt.length;Xt++){var Ze=lt[Xt].split("=");if(1<Ze.length){var ln=Ze[0];Ze=Ze[1];var $t=ln.split("_");ue=2<=$t.length&&$t[1]=="type"?ue+(ln+"="+Ze+"&"):ue+(ln+"=redacted&")}}else ue=null;else ue=X;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+_+`
`+b+`
`+ue})}function ol(m,_,b,R,H,X,ue){m.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+_+`
`+b+`
`+X+" "+ue})}function Wr(m,_,b,R){m.info(function(){return"XMLHTTP TEXT ("+_+"): "+jg(m,b)+(R?" "+R:"")})}function nu(m,_){m.info(function(){return"TIMEOUT: "+_})}Ho.prototype.info=function(){};function jg(m,_){if(!m.g)return _;if(!_)return null;try{var b=JSON.parse(_);if(b){for(m=0;m<b.length;m++)if(Array.isArray(b[m])){var R=b[m];if(!(2>R.length)){var H=R[1];if(Array.isArray(H)&&!(1>H.length)){var X=H[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ue=1;ue<H.length;ue++)H[ue]=""}}}}return Jc(b)}catch{return _}}var al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hr;function Go(){}E(Go,$o),Go.prototype.g=function(){return new XMLHttpRequest},Go.prototype.i=function(){return{}},Hr=new Go;function Kr(m,_,b,R){this.j=m,this.i=_,this.l=b,this.R=R||1,this.U=new qo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lh}function Lh(){this.i=null,this.g="",this.h=!1}var ru={},ll={};function cl(m,_,b){m.L=1,m.v=Vs(lr(_)),m.m=b,m.P=!0,iu(m,null)}function iu(m,_){m.F=Date.now(),mt(m),m.A=lr(m.v);var b=m.A,R=m.R;Array.isArray(R)||(R=[String(R)]),Fs(b.i,"t",R),m.C=0,b=m.j.J,m.h=new Lh,m.g=Zh(m.j,b?_:null,!m.m),0<m.O&&(m.M=new zo(x(m.Y,m,m.g),m.O)),_=m.U,b=m.g,R=m.ca;var H="readystatechange";Array.isArray(H)||(H&&(Gc[0]=H.toString()),H=Gc);for(var X=0;X<H.length;X++){var ue=Fn(b,H[X],R||_.handleEvent,!1,_.h||_);if(!ue)break;_.g[ue.key]=ue}_=m.H?I(m.H):{},m.m?(m.u||(m.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,_)):(m.u="GET",m.g.ea(m.A,m.u,null,_)),Bi(),Ko(m.i,m.u,m.A,m.l,m.R,m.m)}Kr.prototype.ca=function(m){m=m.target;const _=this.M;_&&Xn(m)==3?_.j():this.Y(m)},Kr.prototype.Y=function(m){try{if(m==this.g)e:{const $t=Xn(this.g);var _=this.g.Ba();const Tr=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||uu(this.g)))){this.J||$t!=4||_==7||(_==8||0>=Tr?Bi(3):Bi(2)),Qo(this);var b=this.g.Z();this.X=b;t:if(Mh(this)){var R=uu(this.g);m="";var H=R.length,X=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),js(this);var ue="";break t}this.h.i=new c.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,m+=this.h.i.decode(R[_],{stream:!(X&&_==H-1)});R.length=0,this.h.g+=m,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=b==200,ol(this.i,this.u,this.A,this.l,this.R,$t,b),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,Xt=this.g;if((lt=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(lt)){var Ze=lt;break t}}Ze=null}if(b=Ze)Wr(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,su(this,b);else{this.o=!1,this.s=3,Bt(12),kr(this),js(this);break e}}if(this.P){b=!0;let ur;for(;!this.J&&this.C<ue.length;)if(ur=Dg(this,ue),ur==ll){$t==4&&(this.s=4,Bt(14),b=!1),Wr(this.i,this.l,null,"[Incomplete Response]");break}else if(ur==ru){this.s=4,Bt(15),Wr(this.i,this.l,ue,"[Invalid Chunk]"),b=!1;break}else Wr(this.i,this.l,ur,null),su(this,ur);if(Mh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||ue.length!=0||this.h.h||(this.s=1,Bt(16),b=!1),this.o=this.o&&b,!b)Wr(this.i,this.l,ue,"[Invalid Chunked Response]"),kr(this),js(this);else if(0<ue.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),hu(ln),ln.M=!0,Bt(11))}}else Wr(this.i,this.l,ue,null),su(this,ue);$t==4&&kr(this),this.o&&!this.J&&($t==4?_l(this.j,this):(this.o=!1,mt(this)))}else pl(this.g),b==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),kr(this),js(this)}}}catch{}finally{}};function Mh(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Dg(m,_){var b=m.C,R=_.indexOf(`
`,b);return R==-1?ll:(b=Number(_.substring(b,R)),isNaN(b)?ru:(R+=1,R+b>_.length?ll:(_=_.slice(R,R+b),m.C=R+b,_)))}Kr.prototype.cancel=function(){this.J=!0,kr(this)};function mt(m){m.S=Date.now()+m.I,Vh(m,m.I)}function Vh(m,_){if(m.B!=null)throw Error("WatchDog timer not null");m.B=$r(x(m.ba,m),_)}function Qo(m){m.B&&(c.clearTimeout(m.B),m.B=null)}Kr.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(nu(this.i,this.A),this.L!=2&&(Bi(),Bt(17)),kr(this),this.s=2,js(this)):Vh(this,this.S-m)};function js(m){m.j.G==0||m.J||_l(m.j,m)}function kr(m){Qo(m);var _=m.M;_&&typeof _.ma=="function"&&_.ma(),m.M=null,Qc(m.U),m.g&&(_=m.g,m.g=null,_.abort(),_.ma())}function su(m,_){try{var b=m.j;if(b.G!=0&&(b.g==m||Bn(b.h,m))){if(!m.K&&Bn(b.h,m)&&b.G==3){try{var R=b.Da.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<m.F)xl(b),Xr(b);else break e;vl(b),Bt(18)}}else b.za=H[1],0<b.za-b.T&&37500>H[2]&&b.F&&b.v==0&&!b.C&&(b.C=$r(x(b.Za,b),6e3));if(1>=Fh(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Wi(b,11)}else if((m.K||b.g==m)&&xl(b),!L(_))for(H=b.Da.g.parse(_),_=0;_<H.length;_++){let Ze=H[_];if(b.T=Ze[0],Ze=Ze[1],b.G==2)if(Ze[0]=="c"){b.K=Ze[1],b.ia=Ze[2];const ln=Ze[3];ln!=null&&(b.la=ln,b.j.info("VER="+b.la));const $t=Ze[4];$t!=null&&(b.Aa=$t,b.j.info("SVER="+b.Aa));const Tr=Ze[5];Tr!=null&&typeof Tr=="number"&&0<Tr&&(R=1.5*Tr,b.L=R,b.j.info("backChannelRequestTimeoutMs_="+R)),R=b;const ur=m.g;if(ur){const na=ur.g?ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var X=R.h;X.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ou(X,X.h),X.h=null))}if(R.D){const bl=ur.g?ur.g.getResponseHeader("X-HTTP-Session-Id"):null;bl&&(R.ya=bl,ft(R.I,R.D,bl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-m.F,b.j.info("Handshake RTT: "+b.R+"ms")),R=b;var ue=m;if(R.qa=Xh(R,R.J?R.ia:null,R.W),ue.K){Bh(R.h,ue);var lt=ue,Xt=R.L;Xt&&(lt.I=Xt),lt.B&&(Qo(lt),mt(lt)),R.g=ue}else ta(R);0<b.i.length&&_i(b)}else Ze[0]!="stop"&&Ze[0]!="close"||Wi(b,7);else b.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Wi(b,7):wn(b):Ze[0]!="noop"&&b.l&&b.l.ta(Ze),b.v=0)}}Bi(4)}catch{}}var Oh=class{constructor(m,_){this.g=m,this.map=_}};function Jo(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ar(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Fh(m){return m.h?1:m.g?m.g.size:0}function Bn(m,_){return m.h?m.h==_:m.g?m.g.has(_):!1}function ou(m,_){m.g?m.g.add(_):m.h=_}function Bh(m,_){m.h&&m.h==_?m.h=null:m.g&&m.g.has(_)&&m.g.delete(_)}Jo.prototype.cancel=function(){if(this.i=Uh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Uh(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let _=m.i;for(const b of m.g.values())_=_.concat(b.D);return _}return P(m.i)}function ul(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var _=[],b=m.length,R=0;R<b;R++)_.push(m[R]);return _}_=[],b=0;for(R in m)_[b++]=m[R];return _}function dl(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var _=[];m=m.length;for(var b=0;b<m;b++)_.push(b);return _}_=[],b=0;for(const R in m)_[b++]=R;return _}}}function Ds(m,_){if(m.forEach&&typeof m.forEach=="function")m.forEach(_,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,_,void 0);else for(var b=dl(m),R=ul(m),H=R.length,X=0;X<H;X++)_.call(void 0,R[X],b&&b[X],m)}var Yo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lg(m,_){if(m){m=m.split("&");for(var b=0;b<m.length;b++){var R=m[b].indexOf("="),H=null;if(0<=R){var X=m[b].substring(0,R);H=m[b].substring(R+1)}else X=m[b];_(X,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Ui(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Ui){this.h=m.h,Xo(this,m.j),this.o=m.o,this.g=m.g,Ls(this,m.s),this.l=m.l;var _=m.i,b=new yi;b.i=_.i,_.g&&(b.g=new Map(_.g),b.h=_.h),Ms(this,b),this.m=m.m}else m&&(_=String(m).match(Yo))?(this.h=!1,Xo(this,_[1]||"",!0),this.o=Ye(_[2]||""),this.g=Ye(_[3]||"",!0),Ls(this,_[4]),this.l=Ye(_[5]||"",!0),Ms(this,_[6]||"",!0),this.m=Ye(_[7]||"")):(this.h=!1,this.i=new yi(null,this.h))}Ui.prototype.toString=function(){var m=[],_=this.j;_&&m.push(Os(_,hl,!0),":");var b=this.g;return(b||_=="file")&&(m.push("//"),(_=this.o)&&m.push(Os(_,hl,!0),"@"),m.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&m.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&m.push("/"),m.push(Os(b,b.charAt(0)=="/"?$h:qh,!0))),(b=this.i.toString())&&m.push("?",b),(b=this.m)&&m.push("#",Os(b,au)),m.join("")};function lr(m){return new Ui(m)}function Xo(m,_,b){m.j=b?Ye(_,!0):_,m.j&&(m.j=m.j.replace(/:$/,""))}function Ls(m,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);m.s=_}else m.s=null}function Ms(m,_,b){_ instanceof yi?(m.i=_,vi(m.i,m.h)):(b||(_=Os(_,Wh)),m.i=new yi(_,m.h))}function ft(m,_,b){m.i.set(_,b)}function Vs(m){return ft(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Ye(m,_){return m?_?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Os(m,_,b){return typeof m=="string"?(m=encodeURI(m).replace(_,zh),b&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function zh(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var hl=/[#\/\?@]/g,qh=/[#\?:]/g,$h=/[#\?]/g,Wh=/[#\?@]/g,au=/#/g;function yi(m,_){this.h=this.g=null,this.i=m||null,this.j=!!_}function _n(m){m.g||(m.g=new Map,m.h=0,m.i&&Lg(m.i,function(_,b){m.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=yi.prototype,n.add=function(m,_){_n(this),this.i=null,m=Er(this,m);var b=this.g.get(m);return b||this.g.set(m,b=[]),b.push(_),this.h+=1,this};function Gr(m,_){_n(m),_=Er(m,_),m.g.has(_)&&(m.i=null,m.h-=m.g.get(_).length,m.g.delete(_))}function Qr(m,_){return _n(m),_=Er(m,_),m.g.has(_)}n.forEach=function(m,_){_n(this),this.g.forEach(function(b,R){b.forEach(function(H){m.call(_,H,R,this)},this)},this)},n.na=function(){_n(this);const m=Array.from(this.g.values()),_=Array.from(this.g.keys()),b=[];for(let R=0;R<_.length;R++){const H=m[R];for(let X=0;X<H.length;X++)b.push(_[R])}return b},n.V=function(m){_n(this);let _=[];if(typeof m=="string")Qr(this,m)&&(_=_.concat(this.g.get(Er(this,m))));else{m=Array.from(this.g.values());for(let b=0;b<m.length;b++)_=_.concat(m[b])}return _},n.set=function(m,_){return _n(this),this.i=null,m=Er(this,m),Qr(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[_]),this.h+=1,this},n.get=function(m,_){return m?(m=this.V(m),0<m.length?String(m[0]):_):_};function Fs(m,_,b){Gr(m,_),0<b.length&&(m.i=null,m.g.set(Er(m,_),P(b)),m.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],_=Array.from(this.g.keys());for(var b=0;b<_.length;b++){var R=_[b];const X=encodeURIComponent(String(R)),ue=this.V(R);for(R=0;R<ue.length;R++){var H=X;ue[R]!==""&&(H+="="+encodeURIComponent(String(ue[R]))),m.push(H)}}return this.i=m.join("&")};function Er(m,_){return _=String(_),m.j&&(_=_.toLowerCase()),_}function vi(m,_){_&&!m.j&&(_n(m),m.i=null,m.g.forEach(function(b,R){var H=R.toLowerCase();R!=H&&(Gr(this,R),Fs(this,H,b))},m)),m.j=_}function Mg(m,_){const b=new Ho;if(c.Image){const R=new Image;R.onload=k(Yn,b,"TestLoadImage: loaded",!0,_,R),R.onerror=k(Yn,b,"TestLoadImage: error",!1,_,R),R.onabort=k(Yn,b,"TestLoadImage: abort",!1,_,R),R.ontimeout=k(Yn,b,"TestLoadImage: timeout",!1,_,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=m}else _(!1)}function Hh(m,_){const b=new Ho,R=new AbortController,H=setTimeout(()=>{R.abort(),Yn(b,"TestPingServer: timeout",!1,_)},1e4);fetch(m,{signal:R.signal}).then(X=>{clearTimeout(H),X.ok?Yn(b,"TestPingServer: ok",!0,_):Yn(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),Yn(b,"TestPingServer: error",!1,_)})}function Yn(m,_,b,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(b)}catch{}}function Vg(){this.g=new Xc}function Kh(m,_,b){const R=b||"";try{Ds(m,function(H,X){let ue=H;f(H)&&(ue=Jc(H)),_.push(R+X+"="+encodeURIComponent(ue))})}catch(H){throw _.push(R+"type="+encodeURIComponent("_badmap")),H}}function zi(m){this.l=m.Ub||null,this.j=m.eb||!1}E(zi,$o),zi.prototype.g=function(){return new Zo(this.l,this.j)},zi.prototype.i=function(m){return function(){return m}}({});function Zo(m,_){Jt.call(this),this.D=m,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Zo,Jt),n=Zo.prototype,n.open=function(m,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=_,this.readyState=1,Yr(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(_.body=m),(this.D||c).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jr(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Yr(this)),this.g&&(this.readyState=3,Yr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gh(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gh(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var _=m.value?m.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!m.done}))&&(this.response=this.responseText+=_)}m.done?Jr(this):Yr(this),this.readyState==3&&Gh(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,Jr(this))},n.Qa=function(m){this.g&&(this.response=m,Jr(this))},n.ga=function(){this.g&&Jr(this)};function Jr(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Yr(m)}n.setRequestHeader=function(m,_){this.u.append(m,_)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,m.push(b[0]+": "+b[1]),b=_.next();return m.join(`\r
`)};function Yr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function qi(m){let _="";return U(m,function(b,R){_+=R,_+=":",_+=b,_+=`\r
`}),_}function Bs(m,_,b){e:{for(R in b){var R=!1;break e}R=!0}R||(b=qi(b),typeof m=="string"?b!=null&&encodeURIComponent(String(b)):ft(m,_,b))}function wt(m){Jt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(wt,Jt);var Og=/^https?$/i,lu=["POST","PUT"];n=wt.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,_,b,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);_=_?_.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hr.g(),this.v=this.o?nl(this.o):nl(Hr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(_,String(m),!0),this.B=!1}catch(X){ea(this,X);return}if(m=b||"",b=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)b.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())b.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),H=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(lu,_,void 0))||R||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ue]of b)this.g.setRequestHeader(X,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ml(this),this.u=!0,this.g.send(m),this.u=!1}catch(X){ea(this,X)}};function ea(m,_){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=_,m.m=5,fl(m),cr(m)}function fl(m){m.A||(m.A=!0,Yt(m,"complete"),Yt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Yt(this,"complete"),Yt(this,"abort"),cr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cr(this,!0)),wt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cu(this):this.bb())},n.bb=function(){cu(this)};function cu(m){if(m.h&&typeof a<"u"&&(!m.v[1]||Xn(m)!=4||m.Z()!=2)){if(m.u&&Xn(m)==4)Kc(m.Ea,0,m);else if(Yt(m,"readystatechange"),Xn(m)==4){m.h=!1;try{const ue=m.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var R;if(R=ue===0){var H=String(m.D).match(Yo)[1]||null;!H&&c.self&&c.self.location&&(H=c.self.location.protocol.slice(0,-1)),R=!Og.test(H?H.toLowerCase():"")}b=R}if(b)Yt(m,"complete"),Yt(m,"success");else{m.m=6;try{var X=2<Xn(m)?m.g.statusText:""}catch{X=""}m.l=X+" ["+m.Z()+"]",fl(m)}}finally{cr(m)}}}}function cr(m,_){if(m.g){ml(m);const b=m.g,R=m.v[0]?()=>{}:null;m.g=null,m.v=null,_||Yt(m,"ready");try{b.onreadystatechange=R}catch{}}}function ml(m){m.I&&(c.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Xn(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var _=this.g.responseText;return m&&_.indexOf(m)==0&&(_=_.substring(m.length)),Yc(_)}};function uu(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function pl(m){const _={};m=(m.g&&2<=Xn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<m.length;R++){if(L(m[R]))continue;var b=F(m[R]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=_[H]||[];_[H]=X,X.push(b)}C(_,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(m,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[m]||_}function du(m){this.Aa=0,this.i=[],this.j=new Ho,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xi("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xi("baseRetryDelayMs",5e3,m),this.cb=xi("retryDelaySeedMs",1e4,m),this.Wa=xi("forwardChannelMaxRetries",2,m),this.wa=xi("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Jo(m&&m.concurrentRequestLimit),this.Da=new Vg,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=du.prototype,n.la=8,n.G=1,n.connect=function(m,_,b,R){Bt(0),this.W=m,this.H=_||{},b&&R!==void 0&&(this.H.OSID=b,this.H.OAID=R),this.F=this.X,this.I=Xh(this,null,this.W),_i(this)};function wn(m){if(gl(m),m.G==3){var _=m.U++,b=lr(m.I);if(ft(b,"SID",m.K),ft(b,"RID",_),ft(b,"TYPE","terminate"),$i(m,b),_=new Kr(m,m.j,_),_.L=2,_.v=Vs(lr(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(_.v.toString(),"")}catch{}!b&&c.Image&&(new Image().src=_.v,b=!0),b||(_.g=Zh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),mt(_)}Yh(m)}function Xr(m){m.g&&(hu(m),m.g.cancel(),m.g=null)}function gl(m){Xr(m),m.u&&(c.clearTimeout(m.u),m.u=null),xl(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function _i(m){if(!ar(m.h)&&!m.s){m.s=!0;var _=m.Ga;fe||he(),re||(fe(),re=!0),ve.add(_,m),m.B=0}}function Fg(m,_){return Fh(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=_.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=$r(x(m.Ga,m,_),Jh(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const H=new Kr(this,this.j,m);let X=this.o;if(this.S&&(X?(X=I(X),D(X,this.S)):X=this.S),this.m!==null||this.O||(H.H=X,X=null),this.P)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var R=this.i[b];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,4096<_){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=Us(this,H,_),b=lr(this.I),ft(b,"RID",m),ft(b,"CVER",22),this.D&&ft(b,"X-HTTP-Session-Id",this.D),$i(this,b),X&&(this.O?_="headers="+encodeURIComponent(String(qi(X)))+"&"+_:this.m&&Bs(b,this.m,X)),ou(this.h,H),this.Ua&&ft(b,"TYPE","init"),this.P?(ft(b,"$req",_),ft(b,"SID","null"),H.T=!0,cl(H,b,null)):cl(H,b,_),this.G=2}}else this.G==3&&(m?yl(this,m):this.i.length==0||ar(this.h)||yl(this))};function yl(m,_){var b;_?b=_.l:b=m.U++;const R=lr(m.I);ft(R,"SID",m.K),ft(R,"RID",b),ft(R,"AID",m.T),$i(m,R),m.m&&m.o&&Bs(R,m.m,m.o),b=new Kr(m,m.j,b,m.B+1),m.m===null&&(b.H=m.o),_&&(m.i=_.D.concat(m.i)),_=Us(m,b,1e3),b.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),ou(m.h,b),cl(b,R,_)}function $i(m,_){m.H&&U(m.H,function(b,R){ft(_,R,b)}),m.l&&Ds({},function(b,R){ft(_,R,b)})}function Us(m,_,b){b=Math.min(m.i.length,b);var R=m.l?x(m.l.Na,m.l,m):null;e:{var H=m.i;let X=-1;for(;;){const ue=["count="+b];X==-1?0<b?(X=H[0].g,ue.push("ofs="+X)):X=0:ue.push("ofs="+X);let lt=!0;for(let Xt=0;Xt<b;Xt++){let Ze=H[Xt].g;const ln=H[Xt].map;if(Ze-=X,0>Ze)X=Math.max(0,H[Xt].g-100),lt=!1;else try{Kh(ln,ue,"req"+Ze+"_")}catch{R&&R(ln)}}if(lt){R=ue.join("&");break e}}}return m=m.i.splice(0,b),_.D=m,R}function ta(m){if(!m.g&&!m.u){m.Y=1;var _=m.Fa;fe||he(),re||(fe(),re=!0),ve.add(_,m),m.v=0}}function vl(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=$r(x(m.Fa,m),Jh(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Qh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=$r(x(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),Xr(this),Qh(this))};function hu(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function Qh(m){m.g=new Kr(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var _=lr(m.qa);ft(_,"RID","rpc"),ft(_,"SID",m.K),ft(_,"AID",m.T),ft(_,"CI",m.F?"0":"1"),!m.F&&m.ja&&ft(_,"TO",m.ja),ft(_,"TYPE","xmlhttp"),$i(m,_),m.m&&m.o&&Bs(_,m.m,m.o),m.L&&(m.g.I=m.L);var b=m.g;m=m.ia,b.L=1,b.v=Vs(lr(_)),b.m=null,b.P=!0,iu(b,m)}n.Za=function(){this.C!=null&&(this.C=null,Xr(this),vl(this),Bt(19))};function xl(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function _l(m,_){var b=null;if(m.g==_){xl(m),hu(m),m.g=null;var R=2}else if(Bn(m.h,_))b=_.D,Bh(m.h,_),R=1;else return;if(m.G!=0){if(_.o)if(R==1){b=_.m?_.m.length:0,_=Date.now()-_.F;var H=m.B;R=Wo(),Yt(R,new sl(R,b)),_i(m)}else ta(m);else if(H=_.s,H==3||H==0&&0<_.X||!(R==1&&Fg(m,_)||R==2&&vl(m)))switch(b&&0<b.length&&(_=m.h,_.i=_.i.concat(b)),H){case 1:Wi(m,5);break;case 4:Wi(m,10);break;case 3:Wi(m,6);break;default:Wi(m,2)}}}function Jh(m,_){let b=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(b*=2),b*_}function Wi(m,_){if(m.j.info("Error code "+_),_==2){var b=x(m.fb,m),R=m.Xa;const H=!R;R=new Ui(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Xo(R,"https"),Vs(R),H?Mg(R.toString(),b):Hh(R.toString(),b)}else Bt(2);m.G=0,m.l&&m.l.sa(_),Yh(m),gl(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function Yh(m){if(m.G=0,m.ka=[],m.l){const _=Uh(m.h);(_.length!=0||m.i.length!=0)&&(S(m.ka,_),S(m.ka,m.i),m.h.i.length=0,P(m.i),m.i.length=0),m.l.ra()}}function Xh(m,_,b){var R=b instanceof Ui?lr(b):new Ui(b);if(R.g!="")_&&(R.g=_+"."+R.g),Ls(R,R.s);else{var H=c.location;R=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var X=new Ui(null);R&&Xo(X,R),_&&(X.g=_),H&&Ls(X,H),b&&(X.l=b),R=X}return b=m.D,_=m.ya,b&&_&&ft(R,b,_),ft(R,"VER",m.la),$i(m,R),R}function Zh(m,_,b){if(_&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=m.Ca&&!m.pa?new wt(new zi({eb:b})):new wt(m.pa),_.Ha(m.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fu(){}n=fu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function wl(){}wl.prototype.g=function(m,_){return new Un(m,_)};function Un(m,_){Jt.call(this),this.g=new du(_),this.l=m,this.h=_&&_.messageUrlParams||null,m=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(m?m["X-WebChannel-Content-Type"]=_.messageContentType:m={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(m?m["X-WebChannel-Client-Profile"]=_.va:m={"X-WebChannel-Client-Profile":_.va}),this.g.S=m,(m=_&&_.Sb)&&!L(m)&&(this.g.m=m),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!L(_)&&(this.g.D=_,m=this.h,m!==null&&_ in m&&(m=this.h,_ in m&&delete m[_])),this.j=new wi(this)}E(Un,Jt),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){wn(this.g)},Un.prototype.o=function(m){var _=this.g;if(typeof m=="string"){var b={};b.__data__=m,m=b}else this.u&&(b={},b.__data__=Jc(m),m=b);_.i.push(new Oh(_.Ya++,m)),_.G==3&&_i(_)},Un.prototype.N=function(){this.g.l=null,delete this.j,wn(this.g),delete this.g,Un.aa.N.call(this)};function ef(m){pi.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var _=m.__sm__;if(_){e:{for(const b in _){m=b;break e}m=void 0}(this.i=m)&&(m=this.i,_=_!==null&&m in _?_[m]:void 0),this.data=_}else this.data=m}E(ef,pi);function tf(){il.call(this),this.status=1}E(tf,il);function wi(m){this.g=m}E(wi,fu),wi.prototype.ua=function(){Yt(this.g,"a")},wi.prototype.ta=function(m){Yt(this.g,new ef(m))},wi.prototype.sa=function(m){Yt(this.g,new tf)},wi.prototype.ra=function(){Yt(this.g,"b")},wl.prototype.createWebChannel=wl.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,zS=function(){return new wl},US=function(){return Wo()},BS=gi,dv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},al.NO_ERROR=0,al.TIMEOUT=8,al.HTTP_ERROR=6,bm=al,Dh.COMPLETE="complete",FS=Dh,rl.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",Jt.prototype.listen=Jt.prototype.K,td=rl,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,OS=wt}).apply(typeof Xf<"u"?Xf:typeof self<"u"?self:typeof window<"u"?window:{});const Jk="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new Op("@firebase/firestore");function Gl(){return Oa.logLevel}function ae(n,...e){if(Oa.logLevel<=He.DEBUG){const t=e.map(Fx);Oa.debug(`Firestore (${Vc}): ${n}`,...t)}}function Wn(n,...e){if(Oa.logLevel<=He.ERROR){const t=e.map(Fx);Oa.error(`Firestore (${Vc}): ${n}`,...t)}}function Fa(n,...e){if(Oa.logLevel<=He.WARN){const t=e.map(Fx);Oa.warn(`Firestore (${Vc}): ${n}`,...t)}}function Fx(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(n="Unexpected state"){const e=`FIRESTORE (${Vc}) INTERNAL ASSERTION FAILED: `+n;throw Wn(e),new Error(e)}function Te(n,e){n||be()}function Fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Mi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(En.UNAUTHENTICATED))}shutdown(){}}class ZM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class e6{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0);let r=this.i;const i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let s=new Ri;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ri,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const d=s;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ri)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new qS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new En(e)}}class t6{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class n6{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new t6(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class r6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Te(this.o===void 0);const r=s=>{s.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,ae("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Te(typeof t.token=="string"),this.R=t.token,new r6(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=s6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Be(n,e){return n<e?-1:n>e?1:0}function hc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function WS(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Pt(0,0))}static max(){return new Se(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t,r){t===void 0?t=0:t>e.length&&be(),r===void 0?r=e.length-t:r>e.length-t&&be(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return jd.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class at extends jd{construct(e,t,r){return new at(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new at(t)}static emptyPath(){return new at([])}}const o6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends jd{construct(e,t,r){return new Nt(e,t,r)}static isValidIdentifier(e){return o6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new de(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new de(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new de(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(t)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(at.fromString(e))}static fromName(e){return new me(at.fromString(e).popFirst(5))}static empty(){return new me(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new at(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function hv(n){return n.fields.find(e=>e.kind===2)}function va(n){return n.fields.filter(e=>e.kind!==2)}Jm.UNKNOWN_ID=-1;class km{constructor(e,t){this.fieldPath=e,this.kind=t}}class Dd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Dd(0,yr.min())}}function a6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(r===1e9?new Pt(t+1,0):new Pt(t,r));return new yr(i,me.empty(),e)}function HS(n){return new yr(n.readTime,n.key,-1)}class yr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new yr(Se.min(),me.empty(),-1)}static max(){return new yr(Se.max(),me.empty(),-1)}}function Bx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==KS)throw n;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,r)=>{t(e)})}static reject(e){return new K((t,r)=>{r(e)})}static waitFor(e){return new K((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},d=>r(d))}),a=!0,s===i&&t()})}static or(e){let t=K.resolve(!1);for(const r of e)t=t.next(i=>i?K.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new K((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let d=0;d<s;d++){const f=d;t(e[f]).next(g=>{a[f]=g,++c,c===s&&r(a)},g=>i(g))}})}static doWhile(e,t){return new K((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{static open(e,t,r,i){try{return new qp(t,e.transaction(i,r))}catch(s){throw new ud(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ri,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ud(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Ux(r.target.error);this.V.reject(new ud(e,i))}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new c6(t)}}class xo{static delete(e){return ae("SimpleDb","Removing database:",e),ka(window.indexedDB.deleteDatabase(e)).toPromise()}static p(){if(!QI())return!1;if(xo.S())return!0;const e=sn(),t=xo.D(e),r=0<t&&t<10,i=QS(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static C(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.F=r,xo.D(sn())===12.2&&Wn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(e){return this.db||(ae("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new ud(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new de(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new de(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new ud(e,a))},i.onupgradeneeded=s=>{ae("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.F.O(a,i.transaction,s.oldVersion,this.version).next(()=>{ae("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const c=qp.open(this.db,e,s?"readonly":"readwrite",r),d=i(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),K.reject(f))).toPromise();return d.catch(()=>{}),await c.m,d}catch(c){const d=c,f=d.name!=="FirebaseError"&&a<3;if(ae("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function QS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class l6{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ka(this.B.delete())}}class ud extends de{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vo(n){return n.name==="IndexedDbTransactionError"}class c6{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ae("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ka(r)}add(e){return ae("SimpleDb","ADD",this.store.name,e,e),ka(this.store.add(e))}get(e){return ka(this.store.get(e)).next(t=>(t===void 0&&(t=null),ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ae("SimpleDb","DELETE",this.store.name,e),ka(this.store.delete(e))}count(){return ae("SimpleDb","COUNT",this.store.name),ka(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new K((a,c)=>{s.onerror=d=>{c(d.target.error)},s.onsuccess=d=>{a(d.target.result)}})}{const s=this.cursor(r),a=[];return this.W(s,(c,d)=>{a.push(d)}).next(()=>a)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new K((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}j(e,t){ae("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,a,c)=>c.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new K((r,i)=>{t.onerror=s=>{const a=Ux(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():r()}):r()}})}W(e,t){const r=[];return new K((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void i();const d=new l6(c),f=t(c.primaryKey,c.value,d);if(f instanceof K){const g=f.catch(y=>(d.done(),K.reject(y)));r.push(g)}d.isDone?i():d.K===null?c.continue():c.continue(d.K)}}).next(()=>K.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ka(n){return new K((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Ux(r.target.error);t(i)}})}let Yk=!1;function Ux(n){const e=xo.D(sn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yk||(Yk=!0,setTimeout(()=>{throw r},0)),r}}return n}class u6{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ae("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ae("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Vo(t)?ae("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Ja(t)}await this.X(6e4)})}}class d6{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return K.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return ae("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next(c=>{i-=c,r.add(a)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(i,s)).next(c=>(ae("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>a.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const a=HS(s);Bx(a,r)>0&&(r=a)}),new yr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Dr.oe=-1;function $p(n){return n==null}function Ld(n){return n===0&&1/n==-1/0}function h6(n){return typeof n=="number"&&Number.isInteger(n)&&!Ld(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Xk(e)),e=f6(n.get(t),e);return Xk(e)}function f6(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function Xk(n){return n+""}function Si(n){const e=n.length;if(Te(e>=2),e===2)return Te(n.charAt(0)===""&&n.charAt(1)===""),at.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf("",s);switch((a<0||a>t)&&be(),n.charAt(a+1)){case"":const c=n.substring(s,a);let d;i.length===0?d=c:(i+=c,d=i,i=""),r.push(d);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:be()}s=a+2}return new at(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(n,e){return[n,On(e)]}function JS(n,e,t){return[n,On(e),t]}const m6={},p6=["prefixPath","collectionGroup","readTime","documentId"],g6=["prefixPath","collectionGroup","documentId"],y6=["collectionGroup","readTime","prefixPath","documentId"],v6=["canonicalId","targetId"],x6=["targetId","path"],_6=["path","targetId"],w6=["collectionId","parent"],b6=["indexId","uid"],k6=["uid","sequenceNumber"],E6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],T6=["indexId","uid","orderedDocumentKey"],I6=["userId","collectionPath","documentId"],S6=["userId","collectionPath","largestBatchId"],C6=["userId","collectionGroup","largestBatchId"],YS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],N6=[...YS,"documentOverlays"],XS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ZS=XS,zx=[...ZS,"indexConfiguration","indexState","indexEntries"],A6=zx,P6=[...zx,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv extends GS{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function on(n,e){const t=Fe(n);return xo.C(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Oo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qt=class mv{constructor(e,t){this.comparator=e,this.root=t||_o.EMPTY}insert(e,t){return new mv(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_o.BLACK,null,null))}remove(e){return new mv(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_o.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zf(this.root,e,this.comparator,!0)}},Zf=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},_o=class ts{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ts.RED,this.left=i??ts.EMPTY,this.right=s??ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ts(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ts.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}};_o.EMPTY=null,_o.RED=!0,_o.BLACK=!1;_o.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,t,r,i,s){return this}insert(e,t,r){return new _o(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new t2(this.data.getIterator())}getIteratorFrom(e){return new t2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ut(this.comparator);return t.data=e,t}}class t2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ql(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new sr([])}unionWith(e){let t=new ut(Nt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tC("Invalid base64 string: "+s):s}}(e);return new Qt(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const R6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(n){if(Te(!!n),typeof n=="string"){let e=0;const t=R6.exec(n);if(Te(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kt(n.seconds),nanos:kt(n.nanos)}}function kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function bs(n){return typeof n=="string"?Qt.fromBase64String(n):Qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Wp(n){const e=n.mapValue.fields.__previous_value__;return qx(e)?Wp(e):e}function Md(n){const e=ws(n.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,t,r,i,s,a,c,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f}}class Ba{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ba("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Tm={nullValue:"NULL_VALUE"};function Io(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qx(n)?4:nC(n)?9007199254740991:Hp(n)?10:11:be()}function Li(n,e){if(n===e)return!0;const t=Io(n);if(t!==Io(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Md(n).isEqual(Md(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ws(i.timestampValue),c=ws(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return bs(i.bytesValue).isEqual(bs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return kt(i.geoPointValue.latitude)===kt(s.geoPointValue.latitude)&&kt(i.geoPointValue.longitude)===kt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return kt(i.integerValue)===kt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=kt(i.doubleValue),c=kt(s.doubleValue);return a===c?Ld(a)===Ld(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return hc(n.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(e2(a)!==e2(c))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(c[d]===void 0||!Li(a[d],c[d])))return!1;return!0}(n,e);default:return be()}}function Vd(n,e){return(n.values||[]).find(t=>Li(t,e))!==void 0}function So(n,e){if(n===e)return 0;const t=Io(n),r=Io(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return function(s,a){const c=kt(s.integerValue||s.doubleValue),d=kt(a.integerValue||a.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return n2(n.timestampValue,e.timestampValue);case 4:return n2(Md(n),Md(e));case 5:return Be(n.stringValue,e.stringValue);case 6:return function(s,a){const c=bs(s),d=bs(a);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const c=s.split("/"),d=a.split("/");for(let f=0;f<c.length&&f<d.length;f++){const g=Be(c[f],d[f]);if(g!==0)return g}return Be(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const c=Be(kt(s.latitude),kt(a.latitude));return c!==0?c:Be(kt(s.longitude),kt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return r2(n.arrayValue,e.arrayValue);case 10:return function(s,a){var c,d,f,g;const y=s.fields||{},x=a.fields||{},k=(c=y.value)===null||c===void 0?void 0:c.arrayValue,E=(d=x.value)===null||d===void 0?void 0:d.arrayValue,P=Be(((f=k==null?void 0:k.values)===null||f===void 0?void 0:f.length)||0,((g=E==null?void 0:E.values)===null||g===void 0?void 0:g.length)||0);return P!==0?P:r2(k,E)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===mo.mapValue&&a===mo.mapValue)return 0;if(s===mo.mapValue)return 1;if(a===mo.mapValue)return-1;const c=s.fields||{},d=Object.keys(c),f=a.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const x=Be(d[y],g[y]);if(x!==0)return x;const k=So(c[d[y]],f[g[y]]);if(k!==0)return k}return Be(d.length,g.length)}(n.mapValue,e.mapValue);default:throw be()}}function n2(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=ws(n),r=ws(e),i=Be(t.seconds,r.seconds);return i!==0?i:Be(t.nanos,r.nanos)}function r2(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=So(t[i],r[i]);if(s)return s}return Be(t.length,r.length)}function fc(n){return pv(n)}function pv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ws(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return bs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return me.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=pv(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${pv(t.fields[a])}`;return i+"}"}(n.mapValue):be()}function Im(n){switch(Io(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wp(n);return e?16+Im(e):16;case 5:return 2*n.stringValue.length;case 6:return bs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Im(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Oo(r.fields,(s,a)=>{i+=s.length+Im(a)}),i}(n.mapValue);default:throw be()}}function Od(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gv(n){return!!n&&"integerValue"in n}function Fd(n){return!!n&&"arrayValue"in n}function i2(n){return!!n&&"nullValue"in n}function s2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sm(n){return!!n&&"mapValue"in n}function Hp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function dd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Oo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const rC={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function D6(n){return"nullValue"in n?Tm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Od(Ba.empty(),me.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Hp(n)?rC:{mapValue:{}}:be()}function L6(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Od(Ba.empty(),me.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?rC:"mapValue"in n?Hp(n)?{mapValue:{}}:mo:be()}function o2(n,e){const t=So(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function a2(n,e){const t=So(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dd(t)}setAll(e){let t=Nt.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=dd(a):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Sm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Oo(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mn(dd(this.value))}}function iC(n){const e=[];return Oo(n.fields,(t,r)=>{const i=new Nt([t]);if(Sm(r)){const s=iC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Dt(e,0,Se.min(),Se.min(),Se.min(),Mn.empty(),0)}static newFoundDocument(e,t,r,i){return new Dt(e,1,t,Se.min(),r,i,0)}static newNoDocument(e,t){return new Dt(e,2,t,Se.min(),Se.min(),Mn.empty(),0)}static newUnknownDocument(e,t){return new Dt(e,3,t,Se.min(),Se.min(),Mn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.position=e,this.inclusive=t}}function l2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=me.comparator(me.fromName(a.referenceValue),t.key):r=So(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function c2(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Li(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t="asc"){this.field=e,this.dir=t}}function M6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{}class Qe extends sC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new V6(e,t,r):t==="array-contains"?new B6(e,r):t==="in"?new dC(e,r):t==="not-in"?new U6(e,r):t==="array-contains-any"?new z6(e,r):new Qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new O6(e,r):new F6(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(So(t,this.value)):t!==null&&Io(this.value)===Io(t)&&this.matchesComparison(So(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ct extends sC{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ct(e,t)}matches(e){return pc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function pc(n){return n.op==="and"}function yv(n){return n.op==="or"}function $x(n){return oC(n)&&pc(n)}function oC(n){for(const e of n.filters)if(e instanceof ct)return!1;return!0}function vv(n){if(n instanceof Qe)return n.field.canonicalString()+n.op.toString()+fc(n.value);if($x(n))return n.filters.map(e=>vv(e)).join(",");{const e=n.filters.map(t=>vv(t)).join(",");return`${n.op}(${e})`}}function aC(n,e){return n instanceof Qe?function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&Li(r.value,i.value)}(n,e):n instanceof ct?function(r,i){return i instanceof ct&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&aC(a,i.filters[c]),!0):!1}(n,e):void be()}function lC(n,e){const t=n.filters.concat(e);return ct.create(t,n.op)}function cC(n){return n instanceof Qe?function(t){return`${t.field.canonicalString()} ${t.op} ${fc(t.value)}`}(n):n instanceof ct?function(t){return t.op.toString()+" {"+t.getFilters().map(cC).join(" ,")+"}"}(n):"Filter"}class V6 extends Qe{constructor(e,t,r){super(e,t,r),this.key=me.fromName(r.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class O6 extends Qe{constructor(e,t){super(e,"in",t),this.keys=uC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class F6 extends Qe{constructor(e,t){super(e,"not-in",t),this.keys=uC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>me.fromName(r.referenceValue))}class B6 extends Qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fd(t)&&Vd(t.arrayValue,this.value)}}class dC extends Qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vd(this.value.arrayValue,t)}}class U6 extends Qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Vd(this.value.arrayValue,t)}}class z6 extends Qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}}function xv(n,e=null,t=[],r=[],i=null,s=null,a=null){return new q6(n,e,t,r,i,s,a)}function Ua(n){const e=Fe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>vv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$p(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fc(r)).join(",")),e.ue=t}return e.ue}function ch(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!M6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!aC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!c2(n.startAt,e.startAt)&&c2(n.endAt,e.endAt)}function Ym(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Xm(n,e){return n.filters.filter(t=>t instanceof Qe&&t.field.isEqual(e))}function u2(n,e,t){let r=Tm,i=!0;for(const s of Xm(n,e)){let a=Tm,c=!0;switch(s.op){case"<":case"<=":a=D6(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,c=!1;break;case"!=":case"not-in":a=Tm}o2({value:r,inclusive:i},{value:a,inclusive:c})<0&&(r=a,i=c)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];o2({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function d2(n,e,t){let r=mo,i=!0;for(const s of Xm(n,e)){let a=mo,c=!0;switch(s.op){case">=":case">":a=L6(s.value),c=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,c=!1;break;case"!=":case"not-in":a=mo}a2({value:r,inclusive:i},{value:a,inclusive:c})>0&&(r=a,i=c)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];a2({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $6(n,e,t,r,i,s,a,c){return new Oc(n,e,t,r,i,s,a,c)}function Kp(n){return new Oc(n)}function h2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function hC(n){return n.collectionGroup!==null}function hd(n){const e=Fe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new ut(Nt.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Bd(s,r))}),t.has(Nt.keyField().canonicalString())||e.ce.push(new Bd(Nt.keyField(),r))}return e.ce}function Or(n){const e=Fe(n);return e.le||(e.le=W6(e,hd(n))),e.le}function W6(n,e){if(n.limitType==="F")return xv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Bd(i.field,s)});const t=n.endAt?new mc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new mc(n.startAt.position,n.startAt.inclusive):null;return xv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function _v(n,e){const t=n.filters.concat([e]);return new Oc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zm(n,e,t){return new Oc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gp(n,e){return ch(Or(n),Or(e))&&n.limitType===e.limitType}function fC(n){return`${Ua(Or(n))}|lt:${n.limitType}`}function Ql(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>cC(i)).join(", ")}]`),$p(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>fc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>fc(i)).join(",")),`Target(${r})`}(Or(n))}; limitType=${n.limitType})`}function uh(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):me.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of hd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,c,d){const f=l2(a,c,d);return a.inclusive?f<=0:f<0}(r.startAt,hd(r),i)||r.endAt&&!function(a,c,d){const f=l2(a,c,d);return a.inclusive?f>=0:f>0}(r.endAt,hd(r),i))}(n,e)}function H6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mC(n){return(e,t)=>{let r=!1;for(const i of hd(n)){const s=K6(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function K6(n,e,t){const r=n.field.isKeyField()?me.comparator(e.key,t.key):function(s,a,c){const d=a.data.field(s),f=c.data.field(s);return d!==null&&f!==null?So(d,f):be()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return eC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=new qt(me.comparator);function pr(){return G6}const pC=new qt(me.comparator);function nd(...n){let e=pC;for(const t of n)e=e.insert(t.key,t);return e}function gC(n){let e=pC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ci(){return fd()}function yC(){return fd()}function fd(){return new Ss(n=>n.toString(),(n,e)=>n.isEqual(e))}const Q6=new qt(me.comparator),J6=new ut(me.comparator);function ze(...n){let e=J6;for(const t of n)e=e.add(t);return e}const Y6=new ut(Be);function X6(){return Y6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ld(e)?"-0":e}}function vC(n){return{integerValue:""+n}}function xC(n,e){return h6(e)?vC(e):Wx(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(){this._=void 0}}function Z6(n,e,t){return n instanceof gc?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qx(s)&&(s=Wp(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof yc?wC(n,e):n instanceof vc?bC(n,e):function(i,s){const a=_C(i,s),c=f2(a)+f2(i.Pe);return gv(a)&&gv(i.Pe)?vC(c):Wx(i.serializer,c)}(n,e)}function eV(n,e,t){return n instanceof yc?wC(n,e):n instanceof vc?bC(n,e):t}function _C(n,e){return n instanceof xc?function(r){return gv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class gc extends Qp{}class yc extends Qp{constructor(e){super(),this.elements=e}}function wC(n,e){const t=kC(e);for(const r of n.elements)t.some(i=>Li(i,r))||t.push(r);return{arrayValue:{values:t}}}class vc extends Qp{constructor(e){super(),this.elements=e}}function bC(n,e){let t=kC(e);for(const r of n.elements)t=t.filter(i=>!Li(i,r));return{arrayValue:{values:t}}}class xc extends Qp{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function f2(n){return kt(n.integerValue||n.doubleValue)}function kC(n){return Fd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,t){this.field=e,this.transform=t}}function tV(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof yc&&i instanceof yc||r instanceof vc&&i instanceof vc?hc(r.elements,i.elements,Li):r instanceof xc&&i instanceof xc?Li(r.Pe,i.Pe):r instanceof gc&&i instanceof gc}(n.transform,e.transform)}class nV{constructor(e,t){this.version=e,this.transformResults=t}}class rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Jp{}function EC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new dh(n.key,rn.none()):new Fc(n.key,n.data,rn.none());{const t=n.data,r=Mn.empty();let i=new ut(Nt.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Cs(n.key,r,new sr(i.toArray()),rn.none())}}function rV(n,e,t){n instanceof Fc?function(i,s,a){const c=i.value.clone(),d=p2(i.fieldTransforms,s,a.transformResults);c.setAll(d),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Cs?function(i,s,a){if(!Cm(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=p2(i.fieldTransforms,s,a.transformResults),d=s.data;d.setAll(TC(i)),d.setAll(c),s.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function md(n,e,t,r){return n instanceof Fc?function(s,a,c,d){if(!Cm(s.precondition,a))return c;const f=s.value.clone(),g=g2(s.fieldTransforms,d,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cs?function(s,a,c,d){if(!Cm(s.precondition,a))return c;const f=g2(s.fieldTransforms,d,a),g=a.data;return g.setAll(TC(s)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(s,a,c){return Cm(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function iV(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=_C(r.transform,i||null);s!=null&&(t===null&&(t=Mn.empty()),t.set(r.field,s))}return t||null}function m2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hc(r,i,(s,a)=>tV(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Fc extends Jp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cs extends Jp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function TC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function p2(n,e,t){const r=new Map;Te(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,eV(a,c,t[i]))}return r}function g2(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,Z6(s,a,e))}return r}class dh extends Jp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IC extends Jp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&rV(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=md(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=md(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yC();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;const d=EC(a,c);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ze())}isEqual(e){return this.batchId===e.batchId&&hc(this.mutations,e.mutations,(t,r)=>m2(t,r))&&hc(this.baseMutations,e.baseMutations,(t,r)=>m2(t,r))}}class Gx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Te(e.mutations.length===r.length);let i=function(){return Q6}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Gx(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,et;function oV(n){switch(n){default:return be();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function SC(n){if(n===void 0)return Wn("GRPC error has no .code"),te.UNKNOWN;switch(n){case Kt.OK:return te.OK;case Kt.CANCELLED:return te.CANCELLED;case Kt.UNKNOWN:return te.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return te.INTERNAL;case Kt.UNAVAILABLE:return te.UNAVAILABLE;case Kt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Kt.NOT_FOUND:return te.NOT_FOUND;case Kt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Kt.ABORTED:return te.ABORTED;case Kt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Kt.DATA_LOSS:return te.DATA_LOSS;default:return be()}}(et=Kt||(Kt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=new Ra([4294967295,4294967295],0);function y2(n){const e=aV().encode(n),t=new VS;return t.update(e),new Uint8Array(t.digest())}function v2(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ra([t,r],0),new Ra([i,s],0)]}class Jx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new rd(`Invalid padding: ${t}`);if(r<0)throw new rd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rd(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new rd(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Ra.fromNumber(this.Te)}Ee(e,t,r){let i=e.add(t.multiply(Ra.fromNumber(r)));return i.compare(lV)===1&&(i=new Ra([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=y2(e),[r,i]=v2(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Jx(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Te===0)return;const t=y2(e),[r,i]=v2(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class rd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,hh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Yp(Se.min(),i,new qt(Be),pr(),ze())}}class hh{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new hh(r,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class CC{constructor(e,t){this.targetId=e,this.me=t}}class NC{constructor(e,t,r=Qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class x2{constructor(){this.fe=0,this.ge=_2(),this.pe=Qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ze(),t=ze(),r=ze();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:be()}}),new hh(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=_2()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cV{constructor(e){this.Le=e,this.Be=new Map,this.ke=pr(),this.qe=em(),this.Qe=em(),this.Ke=new qt(Be)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:be()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){const s=i.target;if(Ym(s))if(r===0){const a=new me(s.path);this.We(t,a,Dt.newNoDocument(a,Se.min()))}else Te(r===1);else{const a=this.Ze(t);if(a!==r){const c=this.Xe(e),d=c?this.et(c,e,a):1;if(d!==0){this.He(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,f)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,c;try{a=bs(r).toUint8Array()}catch(d){if(d instanceof tC)return Fa("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Jx(a,i,s)}catch(d){return Fa(d instanceof rd?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Te===0?null:c}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.Le.nt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.Be.forEach((s,a)=>{const c=this.Ye(a);if(c){if(s.current&&Ym(c.target)){const d=new me(c.target.path);this.st(d).has(a)||this.ot(a,d)||this.We(a,d,Dt.newNoDocument(d,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=ze();this.Qe.forEach((s,a)=>{let c=!0;a.forEachWhile(d=>{const f=this.Ye(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new Yp(e,t,this.Ke,this.ke,r);return this.ke=pr(),this.qe=em(),this.Qe=em(),this.Ke=new qt(Be),i}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new x2,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new ut(Be),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ut(Be),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new x2),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function em(){return new qt(me.comparator)}function _2(){return new qt(me.comparator)}const uV={asc:"ASCENDING",desc:"DESCENDING"},dV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hV={and:"AND",or:"OR"};class fV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wv(n,e){return n.useProto3Json||$p(e)?e:{value:e}}function _c(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mV(n,e){return _c(n,e.toTimestamp())}function Gn(n){return Te(!!n),Se.fromTimestamp(function(t){const r=ws(t);return new Pt(r.seconds,r.nanos)}(n))}function Yx(n,e){return bv(n,e).canonicalString()}function bv(n,e){const t=function(i){return new at(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function PC(n){const e=at.fromString(n);return Te(BC(e)),e}function ep(n,e){return Yx(n.databaseId,e.path)}function ja(n,e){const t=PC(e);if(t.get(1)!==n.databaseId.projectId)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(DC(t))}function RC(n,e){return Yx(n.databaseId,e)}function jC(n){const e=PC(n);return e.length===4?at.emptyPath():DC(e)}function kv(n){return new at(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DC(n){return Te(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function w2(n,e,t){return{name:ep(n,e),fields:t.value.mapValue.fields}}function pV(n,e,t){const r=ja(n,e.name),i=Gn(e.updateTime),s=e.createTime?Gn(e.createTime):Se.min(),a=new Mn({mapValue:{fields:e.fields}}),c=Dt.newFoundDocument(r,i,s,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function gV(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(f,g){return f.useProto3Json?(Te(g===void 0||typeof g=="string"),Qt.fromBase64String(g||"")):(Te(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Qt.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(f){const g=f.code===void 0?te.UNKNOWN:SC(f.code);return new de(g,f.message||"")}(a);t=new NC(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ja(n,r.document.name),s=Gn(r.document.updateTime),a=r.document.createTime?Gn(r.document.createTime):Se.min(),c=new Mn({mapValue:{fields:r.document.fields}}),d=Dt.newFoundDocument(i,s,a,c),f=r.targetIds||[],g=r.removedTargetIds||[];t=new Nm(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ja(n,r.document),s=r.readTime?Gn(r.readTime):Se.min(),a=Dt.newNoDocument(i,s),c=r.removedTargetIds||[];t=new Nm([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ja(n,r.document),s=r.removedTargetIds||[];t=new Nm([],s,i,null)}else{if(!("filter"in e))return be();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new sV(i,s),c=r.targetId;t=new CC(c,a)}}return t}function tp(n,e){let t;if(e instanceof Fc)t={update:w2(n,e.key,e.value)};else if(e instanceof dh)t={delete:ep(n,e.key)};else if(e instanceof Cs)t={update:w2(n,e.key,e.data),updateMask:bV(e.fieldMask)};else{if(!(e instanceof IC))return be();t={verify:ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const c=a.transform;if(c instanceof gc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof yc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof vc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof xc)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw be()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:mV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:be()}(n,e.precondition)),t}function Ev(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?rn.updateTime(Gn(s.updateTime)):s.exists!==void 0?rn.exists(s.exists):rn.none()}(e.currentDocument):rn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let d=null;if("setToServerValue"in c)Te(c.setToServerValue==="REQUEST_TIME"),d=new gc;else if("appendMissingElements"in c){const g=c.appendMissingElements.values||[];d=new yc(g)}else if("removeAllFromArray"in c){const g=c.removeAllFromArray.values||[];d=new vc(g)}else"increment"in c?d=new xc(a,c.increment):be();const f=Nt.fromServerFormat(c.fieldPath);return new Hx(f,d)}(n,i)):[];if(e.update){e.update.name;const i=ja(n,e.update.name),s=new Mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(d){const f=d.fieldPaths||[];return new sr(f.map(g=>Nt.fromServerFormat(g)))}(e.updateMask);return new Cs(i,s,a,t,r)}return new Fc(i,s,t,r)}if(e.delete){const i=ja(n,e.delete);return new dh(i,t)}if(e.verify){const i=ja(n,e.verify);return new IC(i,t)}return be()}function yV(n,e){return n&&n.length>0?(Te(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?Gn(i.updateTime):Gn(s);return a.isEqual(Se.min())&&(a=Gn(s)),new nV(a,i.transformResults||[])}(t,e))):[]}function LC(n,e){return{documents:[RC(n,e.path)]}}function MC(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=RC(n,i);const s=function(f){if(f.length!==0)return FC(ct.create(f,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(f){if(f.length!==0)return f.map(g=>function(x){return{field:Jl(x.field),direction:xV(x.dir)}}(g))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=wv(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ct:t,parent:i}}function VC(n){let e=jC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Te(r===1);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(y){const x=OC(y);return x instanceof ct&&$x(x)?x.getFilters():[x]}(t.where));let a=[];t.orderBy&&(a=function(y){return y.map(x=>function(E){return new Bd(Yl(E.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(x))}(t.orderBy));let c=null;t.limit&&(c=function(y){let x;return x=typeof y=="object"?y.value:y,$p(x)?null:x}(t.limit));let d=null;t.startAt&&(d=function(y){const x=!!y.before,k=y.values||[];return new mc(k,x)}(t.startAt));let f=null;return t.endAt&&(f=function(y){const x=!y.before,k=y.values||[];return new mc(k,x)}(t.endAt)),$6(e,i,a,s,c,"F",d,f)}function vV(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function OC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Yl(t.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Yl(t.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Yl(t.unaryFilter.field);return Qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Yl(t.unaryFilter.field);return Qe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(n):n.fieldFilter!==void 0?function(t){return Qe.create(Yl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ct.create(t.compositeFilter.filters.map(r=>OC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return be()}}(t.compositeFilter.op))}(n):be()}function xV(n){return uV[n]}function _V(n){return dV[n]}function wV(n){return hV[n]}function Jl(n){return{fieldPath:n.canonicalString()}}function Yl(n){return Nt.fromServerFormat(n.fieldPath)}function FC(n){return n instanceof Qe?function(t){if(t.op==="=="){if(s2(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NAN"}};if(i2(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(s2(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NOT_NAN"}};if(i2(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jl(t.field),op:_V(t.op),value:t.value}}}(n):n instanceof ct?function(t){const r=t.getFilters().map(i=>FC(i));return r.length===1?r[0]:{compositeFilter:{op:wV(t.op),filters:r}}}(n):be()}function bV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t,r,i,s=Se.min(),a=Se.min(),c=Qt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.ht=e}}function kV(n,e){let t;if(e.document)t=pV(n.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=me.fromSegments(e.noDocument.path),i=qa(e.noDocument.readTime);t=Dt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return be();{const r=me.fromSegments(e.unknownDocument.path),i=qa(e.unknownDocument.version);t=Dt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Pt(i[0],i[1]);return Se.fromTimestamp(s)}(e.readTime)),t}function b2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:np(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,a){return{name:ep(s,a.key),fields:a.data.value.mapValue.fields,updateTime:_c(s,a.version.toTimestamp()),createTime:_c(s,a.createTime.toTimestamp())}}(n.ht,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:za(e.version)};else{if(!e.isUnknownDocument())return be();r.unknownDocument={path:t.path.toArray(),version:za(e.version)}}return r}function np(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function za(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qa(n){const e=new Pt(n.seconds,n.nanoseconds);return Se.fromTimestamp(e)}function Ea(n,e){const t=(e.baseMutations||[]).map(s=>Ev(n.ht,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const c=e.mutations[s+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Ev(n.ht,s)),i=Pt.fromMillis(e.localWriteTimeMs);return new Kx(e.batchId,i,t,r)}function id(n){const e=qa(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?qa(n.lastLimboFreeSnapshotVersion):Se.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Te(s.documents.length===1),Or(Kp(jC(s.documents[0])))}(n.query):function(s){return Or(VC(s))}(n.query),new os(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qt.fromBase64String(n.resumeToken))}function zC(n,e){const t=za(e.snapshotVersion),r=za(e.lastLimboFreeSnapshotVersion);let i;i=Ym(e.target)?LC(n.ht,e.target):MC(n.ht,e.target).ct;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ua(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qC(n){const e=VC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zm(e,e.limit,"L"):e}function by(n,e){return new Qx(e.largestBatchId,Ev(n.ht,e.overlayMutation))}function k2(n,e){const t=e.path.lastSegment();return[n,On(e.path.popLast()),t]}function E2(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:za(r.readTime),documentKey:On(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{getBundleMetadata(e,t){return T2(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:qa(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return T2(e).put(function(i){return{bundleId:i.id,createTime:za(Gn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return I2(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:qC(s.bundledQuery),readTime:qa(s.readTime)}}(r)})}saveNamedQuery(e,t){return I2(e).put(function(i){return{name:i.name,readTime:za(Gn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function T2(n){return on(n,"bundles")}function I2(n){return on(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t){this.serializer=e,this.userId=t}static Pt(e,t){const r=t.uid||"";return new Xp(e,r)}getOverlay(e,t){return Bu(e).get(k2(this.userId,t)).next(r=>r?by(this.serializer,r):null)}getOverlays(e,t){const r=Ci();return K.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,a)=>{const c=new Qx(t,a);i.push(this.Tt(e,c))}),K.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(a=>i.add(On(a.getCollectionPath())));const s=[];return i.forEach(a=>{const c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Bu(e).j("collectionPathOverlayIndex",c))}),K.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Ci(),s=On(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Bu(e).U("collectionPathOverlayIndex",a).next(c=>{for(const d of c){const f=by(this.serializer,d);i.set(f.getKey(),f)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Ci();let a;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Bu(e).J({index:"collectionGroupOverlayIndex",range:c},(d,f,g)=>{const y=by(this.serializer,f);s.size()<i||y.largestBatchId===a?(s.set(y.getKey(),y),a=y.largestBatchId):g.done()}).next(()=>s)}Tt(e,t){return Bu(e).put(function(i,s,a){const[c,d,f]=k2(s,a.mutation.key);return{userId:s,collectionPath:d,documentId:f,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:tp(i.ht,a.mutation)}}(this.serializer,this.userId,t))}}function Bu(n){return on(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{It(e){return on(e,"globals")}getSessionToken(e){return this.It(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Qt.fromUint8Array(r):Qt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.It(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){}Et(e,t){this.dt(e,t),t.At()}dt(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(kt(e.integerValue));else if("doubleValue"in e){const r=kt(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),Ld(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),typeof r=="string"&&(r=ws(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(bs(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?nC(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):Hp(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):be()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){const r=e.fields||{};this.Rt(t,55);for(const i of Object.keys(r))this.gt(i,t),this.dt(r[i],t)}bt(e,t){var r,i;const s=e.fields||{};this.Rt(t,53);const a="value",c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(t,15),t.Vt(kt(c)),this.gt(a,t),this.dt(s[a],t)}vt(e,t){const r=e.values||[];this.Rt(t,50);for(const i of r)this.dt(i,t)}St(e,t){this.Rt(t,37),me.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}}Ta.Ft=new Ta;function IV(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function S2(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const a=IV(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(e/8)}class SV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.xt(r.value),r=t.next();this.Ot()}Nt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Lt(r.value),r=t.next();this.Bt()}kt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{const i=t.codePointAt(0);this.xt(240|i>>>18),this.xt(128|63&i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i)}}this.Ot()}qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Lt(r);else if(r<2048)this.Lt(960|r>>>6),this.Lt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Lt(480|r>>>12),this.Lt(128|63&r>>>6),this.Lt(128|63&r);else{const i=t.codePointAt(0);this.Lt(240|i>>>18),this.Lt(128|63&i>>>12),this.Lt(128|63&i>>>6),this.Lt(128|63&i)}}this.Bt()}Qt(e){const t=this.Kt(e),r=S2(t);this.$t(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ut(e){const t=this.Kt(e),r=S2(t);this.$t(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(e){this.$t(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ht(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}xt(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Lt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===255?(this.jt(255),this.jt(0)):this.jt(e)}Ot(){this.Gt(0),this.Gt(1)}Bt(){this.jt(0),this.jt(1)}Gt(e){this.$t(1),this.buffer[this.position++]=e}jt(e){this.$t(1),this.buffer[this.position++]=~e}$t(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class CV{constructor(e){this.Jt=e}wt(e){this.Jt.Mt(e)}ft(e){this.Jt.kt(e)}Vt(e){this.Jt.Qt(e)}At(){this.Jt.Wt()}}class NV{constructor(e){this.Jt=e}wt(e){this.Jt.Nt(e)}ft(e){this.Jt.qt(e)}Vt(e){this.Jt.Ut(e)}At(){this.Jt.zt()}}class Uu{constructor(){this.Jt=new SV,this.Yt=new CV(this.Jt),this.Zt=new NV(this.Jt)}seed(e){this.Jt.seed(e)}Xt(e){return e===0?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}en(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ia(this.indexId,this.documentKey,this.arrayValue,r)}}function ro(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=C2(n.arrayValue,e.arrayValue),t!==0?t:(t=C2(n.directionalValue,e.directionalValue),t!==0?t:me.comparator(n.documentKey,e.documentKey)))}function C2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.tn=new ut((t,r)=>Nt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.nn=e.orderBy,this.rn=[];for(const t of e.filters){const r=t;r.isInequality()?this.tn=this.tn.add(r):this.rn.push(r)}}get sn(){return this.tn.size>1}on(e){if(Te(e.collectionGroup===this.collectionId),this.sn)return!1;const t=hv(e);if(t!==void 0&&!this._n(t))return!1;const r=va(e);let i=new Set,s=0,a=0;for(;s<r.length&&this._n(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.tn.size>0){const c=this.tn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const d=r[s];if(!this.an(c,d)||!this.un(this.nn[a++],d))return!1}++s}for(;s<r.length;++s){const c=r[s];if(a>=this.nn.length||!this.un(this.nn[a++],c))return!1}return!0}cn(){if(this.sn)return null;let e=new ut(Nt.comparator);const t=[];for(const r of this.rn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new km(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new km(r.field,0))}for(const r of this.nn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new km(r.field,r.dir==="asc"?0:1)));return new Jm(Jm.UNKNOWN_ID,this.collectionId,t,Dd.empty())}_n(e){for(const t of this.rn)if(this.an(t,e))return!0;return!1}an(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}un(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(n){var e,t;if(Te(n instanceof Qe||n instanceof ct),n instanceof Qe){if(n instanceof dC){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Qe.create(n.field,"==",s)))||[];return ct.create(i,"or")}return n}const r=n.filters.map(i=>$C(i));return ct.create(r,n.op)}function AV(n){if(n.getFilters().length===0)return[];const e=Sv($C(n));return Te(WC(e)),Tv(e)||Iv(e)?[e]:e.getFilters()}function Tv(n){return n instanceof Qe}function Iv(n){return n instanceof ct&&$x(n)}function WC(n){return Tv(n)||Iv(n)||function(t){if(t instanceof ct&&yv(t)){for(const r of t.getFilters())if(!Tv(r)&&!Iv(r))return!1;return!0}return!1}(n)}function Sv(n){if(Te(n instanceof Qe||n instanceof ct),n instanceof Qe)return n;if(n.filters.length===1)return Sv(n.filters[0]);const e=n.filters.map(r=>Sv(r));let t=ct.create(e,n.op);return t=rp(t),WC(t)?t:(Te(t instanceof ct),Te(pc(t)),Te(t.filters.length>1),t.filters.reduce((r,i)=>Xx(r,i)))}function Xx(n,e){let t;return Te(n instanceof Qe||n instanceof ct),Te(e instanceof Qe||e instanceof ct),t=n instanceof Qe?e instanceof Qe?function(i,s){return ct.create([i,s],"and")}(n,e):A2(n,e):e instanceof Qe?A2(e,n):function(i,s){if(Te(i.filters.length>0&&s.filters.length>0),pc(i)&&pc(s))return lC(i,s.getFilters());const a=yv(i)?i:s,c=yv(i)?s:i,d=a.filters.map(f=>Xx(f,c));return ct.create(d,"or")}(n,e),rp(t)}function A2(n,e){if(pc(e))return lC(e,n.getFilters());{const t=e.filters.map(r=>Xx(n,r));return ct.create(t,"or")}}function rp(n){if(Te(n instanceof Qe||n instanceof ct),n instanceof Qe)return n;const e=n.getFilters();if(e.length===1)return rp(e[0]);if(oC(n))return n;const t=e.map(i=>rp(i)),r=[];return t.forEach(i=>{i instanceof Qe?r.push(i):i instanceof ct&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ct.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.ln=new Zx}addToCollectionParentIndex(e,t){return this.ln.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(yr.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class Zx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ut(at.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm=new Uint8Array(0);class RV{constructor(e,t){this.databaseId=t,this.hn=new Zx,this.Pn=new Ss(r=>Ua(r),(r,i)=>ch(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.hn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.hn.add(t)});const s={collectionId:r,parent:On(i)};return P2(e).put(s)}return K.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[WS(t),""],!1,!0);return P2(e).U(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;r.push(Si(a.parent))}return r})}addFieldIndex(e,t){const r=zu(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=Wl(e);return s.next(c=>{a.put(E2(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=zu(e),i=Wl(e),s=$l(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=zu(e),r=$l(e),i=Wl(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return K.forEach(this.Tn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new N2(r).cn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=$l(e);let i=!0;const s=new Map;return K.forEach(this.Tn(t),a=>this.In(e,a).next(c=>{i&&(i=!!c),s.set(a,c)})).next(()=>{if(i){let a=ze();const c=[];return K.forEach(s,(d,f)=>{ae("IndexedDbIndexManager",`Using index ${function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(d)} to execute ${Ua(t)}`);const g=function(O,Q){const W=hv(Q);if(W===void 0)return null;for(const U of Xm(O,W.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null}(f,d),y=function(O,Q){const W=new Map;for(const U of va(Q))for(const C of Xm(O,U.fieldPath))switch(C.op){case"==":case"in":W.set(U.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return W.set(U.fieldPath.canonicalString(),C.value),Array.from(W.values())}return null}(f,d),x=function(O,Q){const W=[];let U=!0;for(const C of va(Q)){const I=C.kind===0?u2(O,C.fieldPath,O.startAt):d2(O,C.fieldPath,O.startAt);W.push(I.value),U&&(U=I.inclusive)}return new mc(W,U)}(f,d),k=function(O,Q){const W=[];let U=!0;for(const C of va(Q)){const I=C.kind===0?d2(O,C.fieldPath,O.endAt):u2(O,C.fieldPath,O.endAt);W.push(I.value),U&&(U=I.inclusive)}return new mc(W,U)}(f,d),E=this.En(d,f,x),P=this.En(d,f,k),S=this.dn(d,f,y),N=this.An(d.indexId,g,E,x.inclusive,P,k.inclusive,S);return K.forEach(N,L=>r.G(L,t.limit).next(O=>{O.forEach(Q=>{const W=me.fromSegments(Q.documentKey);a.has(W)||(a=a.add(W),c.push(W))})}))}).next(()=>c)}return K.resolve(null)})}Tn(e){let t=this.Pn.get(e);return t||(e.filters.length===0?t=[e]:t=AV(ct.create(e.filters,"and")).map(r=>xv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Pn.set(e,t),t)}An(e,t,r,i,s,a,c){const d=(t!=null?t.length:1)*Math.max(r.length,s.length),f=d/(t!=null?t.length:1),g=[];for(let y=0;y<d;++y){const x=t?this.Rn(t[y/f]):tm,k=this.Vn(e,x,r[y%f],i),E=this.mn(e,x,s[y%f],a),P=c.map(S=>this.Vn(e,x,S,!0));g.push(...this.createRange(k,E,P))}return g}Vn(e,t,r,i){const s=new Ia(e,me.empty(),t,r);return i?s:s.en()}mn(e,t,r,i){const s=new Ia(e,me.empty(),t,r);return i?s.en():s}In(e,t){const r=new N2(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const c of s)r.on(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,t){let r=2;const i=this.Tn(t);return K.forEach(i,s=>this.In(e,s).next(a=>{a?r!==0&&a.fields.length<function(d){let f=new ut(Nt.comparator),g=!1;for(const y of d.filters)for(const x of y.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?g=!0:f=f.add(x.field));for(const y of d.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(g?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(t)&&i.length>1&&r===2?1:r)}fn(e,t){const r=new Uu;for(const i of va(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Xt(i.kind);Ta.Ft.Et(s,a)}return r.Ht()}Rn(e){const t=new Uu;return Ta.Ft.Et(e,t.Xt(0)),t.Ht()}gn(e,t){const r=new Uu;return Ta.Ft.Et(Od(this.databaseId,t),r.Xt(function(s){const a=va(s);return a.length===0?0:a[a.length-1].kind}(e))),r.Ht()}dn(e,t,r){if(r===null)return[];let i=[];i.push(new Uu);let s=0;for(const a of va(e)){const c=r[s++];for(const d of i)if(this.pn(t,a.fieldPath)&&Fd(c))i=this.yn(i,a,c);else{const f=d.Xt(a.kind);Ta.Ft.Et(c,f)}}return this.wn(i)}En(e,t,r){return this.dn(e,t,r.position)}wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ht();return t}yn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const c of i){const d=new Uu;d.seed(c.Ht()),Ta.Ft.Et(a,d.Xt(t.kind)),s.push(d)}return s}pn(e,t){return!!e.filters.find(r=>r instanceof Qe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=zu(e),i=Wl(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const a=[];return K.forEach(s,c=>i.get([c.indexId,this.uid]).next(d=>{a.push(function(g,y){const x=y?new Dd(y.sequenceNumber,new yr(qa(y.readTime),new me(Si(y.documentKey)),y.largestBatchId)):Dd.empty(),k=g.fields.map(([E,P])=>new km(Nt.fromServerFormat(E),P));return new Jm(g.indexId,g.collectionGroup,k,x)}(c,d))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Be(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=zu(e),s=Wl(e);return this.Sn(e).next(a=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>K.forEach(c,d=>s.put(E2(d.indexId,this.uid,a,r)))))}updateIndexEntries(e,t){const r=new Map;return K.forEach(t,(i,s)=>{const a=r.get(i.collectionGroup);return(a?K.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),K.forEach(c,d=>this.bn(e,i,d).next(f=>{const g=this.Dn(s,d);return f.isEqual(g)?K.resolve():this.vn(e,s,d,f,g)}))))})}Cn(e,t,r,i){return $l(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Fn(e,t,r,i){return $l(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}bn(e,t,r){const i=$l(e);let s=new ut(ro);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(a,c)=>{s=s.add(new Ia(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>s)}Dn(e,t){let r=new ut(ro);const i=this.fn(t,e);if(i==null)return r;const s=hv(t);if(s!=null){const a=e.data.field(s.fieldPath);if(Fd(a))for(const c of a.arrayValue.values||[])r=r.add(new Ia(t.indexId,e.key,this.Rn(c),i))}else r=r.add(new Ia(t.indexId,e.key,tm,i));return r}vn(e,t,r,i,s){ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(d,f,g,y,x){const k=d.getIterator(),E=f.getIterator();let P=ql(k),S=ql(E);for(;P||S;){let N=!1,L=!1;if(P&&S){const O=g(P,S);O<0?L=!0:O>0&&(N=!0)}else P!=null?L=!0:N=!0;N?(y(S),S=ql(E)):L?(x(P),P=ql(k)):(P=ql(k),S=ql(E))}}(i,s,ro,c=>{a.push(this.Cn(e,t,r,c))},c=>{a.push(this.Fn(e,t,r,c))}),K.waitFor(a)}Sn(e){let t=1;return Wl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,c)=>ro(a,c)).filter((a,c,d)=>!c||ro(a,d[c-1])!==0);const i=[];i.push(e);for(const a of r){const c=ro(a,e),d=ro(a,t);if(c===0)i[0]=e.en();else if(c>0&&d<0)i.push(a),i.push(a.en());else if(d>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Mn(i[a],i[a+1]))return[];const c=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,tm,[]],d=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,tm,[]];s.push(IDBKeyRange.bound(c,d))}return s}Mn(e,t){return ro(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(R2)}getMinOffset(e,t){return K.mapArray(this.Tn(t),r=>this.In(e,r).next(i=>i||be())).next(R2)}}function P2(n){return on(n,"collectionParents")}function $l(n){return on(n,"indexEntries")}function zu(n){return on(n,"indexConfiguration")}function Wl(n){return on(n,"indexState")}function R2(n){Te(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Bx(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new yr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let c=0;const d=r.J({range:a},(g,y,x)=>(c++,x.delete()));s.push(d.next(()=>{Te(c===1)}));const f=[];for(const g of t.mutations){const y=JS(e,g.key.path,t.batchId);s.push(i.delete(y)),f.push(g.key)}return K.waitFor(s).next(()=>f)}function ip(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw be();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(41943040,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);class Zp{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.xn={}}static Pt(e,t,r,i){Te(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Zp(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return io(e).J({index:"userMutationsIndex",range:r},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Xl(e),a=io(e);return a.add({}).next(c=>{Te(typeof c=="number");const d=new Kx(c,t,r,i),f=function(k,E,P){const S=P.baseMutations.map(L=>tp(k.ht,L)),N=P.mutations.map(L=>tp(k.ht,L));return{userId:E,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:S,mutations:N}}(this.serializer,this.userId,d),g=[];let y=new ut((x,k)=>Be(x.canonicalString(),k.canonicalString()));for(const x of i){const k=JS(this.userId,x.key.path,c);y=y.add(x.key.path.popLast()),g.push(a.put(f)),g.push(s.put(k,m6))}return y.forEach(x=>{g.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.xn[c]=d.keys()}),K.waitFor(g).next(()=>d)})}lookupMutationBatch(e,t){return io(e).get(t).next(r=>r?(Te(r.userId===this.userId),Ea(this.serializer,r)):null)}On(e,t){return this.xn[t]?K.resolve(this.xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.xn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return io(e).J({index:"userMutationsIndex",range:i},(a,c,d)=>{c.userId===this.userId&&(Te(c.batchId>=r),s=Ea(this.serializer,c)),d.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return io(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return io(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ea(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Em(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Xl(e).J({range:i},(a,c,d)=>{const[f,g,y]=a,x=Si(g);if(f===this.userId&&t.path.isEqual(x))return io(e).get(y).next(k=>{if(!k)throw be();Te(k.userId===this.userId),s.push(Ea(this.serializer,k))});d.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ut(Be);const i=[];return t.forEach(s=>{const a=Em(this.userId,s.path),c=IDBKeyRange.lowerBound(a),d=Xl(e).J({range:c},(f,g,y)=>{const[x,k,E]=f,P=Si(k);x===this.userId&&s.path.isEqual(P)?r=r.add(E):y.done()});i.push(d)}),K.waitFor(i).next(()=>this.Nn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Em(this.userId,r),a=IDBKeyRange.lowerBound(s);let c=new ut(Be);return Xl(e).J({range:a},(d,f,g)=>{const[y,x,k]=d,E=Si(x);y===this.userId&&r.isPrefixOf(E)?E.length===i&&(c=c.add(k)):g.done()}).next(()=>this.Nn(e,c))}Nn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(io(e).get(s).next(a=>{if(a===null)throw be();Te(a.userId===this.userId),r.push(Ea(this.serializer,a))}))}),K.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return HC(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Ln(t.batchId)}),K.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Ln(e){delete this.xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return K.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return Xl(e).J({range:r},(s,a,c)=>{if(s[0]===this.userId){const d=Si(s[1]);i.push(d)}else c.done()}).next(()=>{Te(i.length===0)})})}containsKey(e,t){return KC(e,this.userId,t)}Bn(e){return GC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function KC(n,e,t){const r=Em(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Xl(n).J({range:s,H:!0},(c,d,f)=>{const[g,y,x]=c;g===e&&y===i&&(a=!0),f.done()}).next(()=>a)}function io(n){return on(n,"mutations")}function Xl(n){return on(n,"documentMutations")}function GC(n){return on(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new $a(0)}static Qn(){return new $a(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Kn(e).next(t=>{const r=new $a(t.highestTargetId);return t.highestTargetId=r.next(),this.$n(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Kn(e).next(t=>Se.fromTimestamp(new Pt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Kn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Kn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.$n(e,i)))}addTargetData(e,t){return this.Un(e,t).next(()=>this.Kn(e).next(r=>(r.targetCount+=1,this.Wn(t,r),this.$n(e,r))))}updateTargetData(e,t){return this.Un(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hl(e).delete(t.targetId)).next(()=>this.Kn(e)).next(r=>(Te(r.targetCount>0),r.targetCount-=1,this.$n(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Hl(e).J((a,c)=>{const d=id(c);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(i++,s.push(this.removeTargetData(e,d)))}).next(()=>K.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Hl(e).J((r,i)=>{const s=id(i);t(s)})}Kn(e){return D2(e).get("targetGlobalKey").next(t=>(Te(t!==null),t))}$n(e,t){return D2(e).put("targetGlobalKey",t)}Un(e,t){return Hl(e).put(zC(this.serializer,t))}Wn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Kn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ua(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Hl(e).J({range:i,index:"queryTargetsIndex"},(a,c,d)=>{const f=id(c);ch(t,f.target)&&(s=f,d.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=uo(e);return t.forEach(a=>{const c=On(a.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,a))}),K.waitFor(i)}removeMatchingKeys(e,t,r){const i=uo(e);return K.forEach(t,s=>{const a=On(s.path);return K.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=uo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=uo(e);let s=ze();return i.J({range:r,H:!0},(a,c,d)=>{const f=Si(a[1]),g=new me(f);s=s.add(g)}).next(()=>s)}containsKey(e,t){const r=On(t.path),i=IDBKeyRange.bound([r],[WS(r)],!1,!0);let s=0;return uo(e).J({index:"documentTargetsIndex",H:!0,range:i},([a,c],d,f)=>{a!==0&&(s++,f.done())}).next(()=>s>0)}ut(e,t){return Hl(e).get(t).next(r=>r?id(r):null)}}function Hl(n){return on(n,"targets")}function D2(n){return on(n,"targetGlobal")}function uo(n){return on(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2([n,e],[t,r]){const i=Be(n,t);return i===0?Be(e,r):i}class DV{constructor(e){this.Gn=e,this.buffer=new ut(L2),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();L2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vo(t)?ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ja(t)}await this.Yn(3e5)})}}class LV{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Dr.oe);const r=new DV(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(j2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j2):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,s,a,c,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,a=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,t))).next(y=>(s=y,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),Gl()<=He.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${s} targets in `+(d-c)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:y})))}}function JC(n,e){return new LV(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,t){this.db=e,this.garbageCollector=JC(this,t)}Xn(e){const t=this.nr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}er(e,t){return this.rr(e,(r,i)=>t(i))}addReference(e,t,r){return nm(e,r)}removeReference(e,t,r){return nm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nm(e,t)}ir(e,t){return function(i,s){let a=!1;return GC(i).Y(c=>KC(i,c,s).next(d=>(d&&(a=!0),K.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.rr(e,(a,c)=>{if(c<=t){const d=this.ir(e,a).next(f=>{if(!f)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,Se.min()),uo(e).delete(function(y){return[0,On(y.path)]}(a))))});i.push(d)}}).next(()=>K.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nm(e,t)}rr(e,t){const r=uo(e);let i,s=Dr.oe;return r.J({index:"documentTargetsIndex"},([a,c],{path:d,sequenceNumber:f})=>{a===0?(s!==Dr.oe&&t(new me(Si(i)),s),s=f,i=d):s=Dr.oe}).next(()=>{s!==Dr.oe&&t(new me(Si(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nm(n,e){return uo(n).put(function(r,i){return{targetId:0,path:On(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.changes=new Ss(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pa(e).put(r)}removeEntry(e,t,r){return pa(e).delete(function(s,a){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],np(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.sr(e,r)))}getEntry(e,t){let r=Dt.newInvalidDocument(t);return pa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(qu(t))},(i,s)=>{r=this._r(t,s)}).next(()=>r)}ar(e,t){let r={size:0,document:Dt.newInvalidDocument(t)};return pa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(qu(t))},(i,s)=>{r={document:this._r(t,s),size:ip(s)}}).next(()=>r)}getEntries(e,t){let r=pr();return this.ur(e,t,(i,s)=>{const a=this._r(i,s);r=r.insert(i,a)}).next(()=>r)}cr(e,t){let r=pr(),i=new qt(me.comparator);return this.ur(e,t,(s,a)=>{const c=this._r(s,a);r=r.insert(s,c),i=i.insert(s,ip(a))}).next(()=>({documents:r,lr:i}))}ur(e,t,r){if(t.isEmpty())return K.resolve();let i=new ut(O2);t.forEach(d=>i=i.add(d));const s=IDBKeyRange.bound(qu(i.first()),qu(i.last())),a=i.getIterator();let c=a.getNext();return pa(e).J({index:"documentKeyIndex",range:s},(d,f,g)=>{const y=me.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&O2(c,y)<0;)r(c,null),c=a.getNext();c&&c.isEqual(y)&&(r(c,f),c=a.hasNext()?a.getNext():null),c?g.$(qu(c)):g.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),np(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pa(e).U(IDBKeyRange.bound(c,d,!0)).next(f=>{s==null||s.incrementDocumentReadCount(f.length);let g=pr();for(const y of f){const x=this._r(me.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);x.isFoundDocument()&&(uh(t,x)||i.has(x.key))&&(g=g.insert(x.key,x))}return g})}getAllFromCollectionGroup(e,t,r,i){let s=pr();const a=V2(t,r),c=V2(t,yr.max());return pa(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(d,f,g)=>{const y=this._r(me.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);s=s.insert(y.key,y),s.size===i&&g.done()}).next(()=>s)}newChangeBuffer(e){return new OV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return M2(e).get("remoteDocumentGlobalKey").next(t=>(Te(!!t),t))}sr(e,t){return M2(e).put("remoteDocumentGlobalKey",t)}_r(e,t){if(t){const r=kV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Se.min())))return r}return Dt.newInvalidDocument(e)}}function XC(n){return new VV(n)}class OV extends YC{constructor(e,t){super(),this.hr=e,this.trackRemovals=t,this.Pr=new Ss(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ut((s,a)=>Be(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const c=this.Pr.get(s);if(t.push(this.hr.removeEntry(e,s,c.readTime)),a.isValidDocument()){const d=b2(this.hr.serializer,a);i=i.add(s.path.popLast());const f=ip(d);r+=f-c.size,t.push(this.hr.addEntry(e,s,d))}else if(r-=c.size,this.trackRemovals){const d=b2(this.hr.serializer,a.convertToNoDocument(Se.min()));t.push(this.hr.addEntry(e,s,d))}}),i.forEach(s=>{t.push(this.hr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.hr.updateMetadata(e,r)),K.waitFor(t)}getFromCache(e,t){return this.hr.ar(e,t).next(r=>(this.Pr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.hr.cr(e,t).next(({documents:r,lr:i})=>(i.forEach((s,a)=>{this.Pr.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function M2(n){return on(n,"remoteDocumentGlobal")}function pa(n){return on(n,"remoteDocumentsV14")}function qu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function V2(n,e){const t=e.documentKey.path.toArray();return[n,np(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function O2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Be(t[s],r[s]),i)return i;return i=Be(t.length,r.length),i||(i=Be(t[t.length-2],r[r.length-2]),i||Be(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&md(r.mutation,i,sr.empty(),Pt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ze()){const i=Ci();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=nd();return s.forEach((c,d)=>{a=a.insert(c,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=Ci();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ze()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=pr();const a=fd(),c=function(){return fd()}();return t.forEach((d,f)=>{const g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof Cs)?s=s.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),md(g.mutation,f,g.mutation.getFieldMask(),Pt.now())):a.set(f.key,sr.empty())}),this.recalculateAndSaveOverlays(e,s).next(d=>(d.forEach((f,g)=>a.set(f,g)),t.forEach((f,g)=>{var y;return c.set(f,new FV(g,(y=a.get(f))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,t){const r=fd();let i=new qt((a,c)=>a-c),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const c of a)c.keys().forEach(d=>{const f=t.get(d);if(f===null)return;let g=r.get(d)||sr.empty();g=c.applyToLocalView(f,g),r.set(d,g);const y=(i.get(c.batchId)||ze()).add(d);i=i.insert(c.batchId,y)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,g=d.value,y=yC();g.forEach(x=>{if(!s.has(x)){const k=EC(t.get(x),r.get(x));k!==null&&y.set(x,k),s=s.add(x)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return K.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return me.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):K.resolve(Ci());let c=-1,d=s;return a.next(f=>K.forEach(f,(g,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),s.get(g)?K.resolve():this.remoteDocumentCache.getEntry(e,g).next(x=>{d=d.insert(g,x)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,d,f,ze())).next(g=>({batchId:c,changes:gC(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next(r=>{let i=nd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=nd();return this.indexManager.getCollectionParents(e,s).next(c=>K.forEach(c,d=>{const f=function(y,x){return new Oc(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(g=>{g.forEach((y,x)=>{a=a.insert(y,x)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((d,f)=>{const g=f.getKey();a.get(g)===null&&(a=a.insert(g,Dt.newInvalidDocument(g)))});let c=nd();return a.forEach((d,f)=>{const g=s.get(d);g!==void 0&&md(g.mutation,f,sr.empty(),Pt.now()),uh(t,f)&&(c=c.insert(d,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return K.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Gn(i.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:qC(i.bundledQuery),readTime:Gn(i.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this.overlays=new qt(me.comparator),this.Er=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ci();return K.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Tt(e,t,s)}),K.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){const i=Ci(),s=t.length+1,a=new me(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return K.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new qt((f,g)=>f-g);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=s.get(f.largestBatchId);g===null&&(g=Ci(),s=s.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const c=Ci(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>c.set(f,g)),!(c.size()>=i)););return K.resolve(c)}Tt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Qx(t,r));let s=this.Er.get(t);s===void 0&&(s=ze(),this.Er.set(t,s)),this.Er.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.dr=new ut(mn.Ar),this.Rr=new ut(mn.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new mn(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new mn(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new me(new at([])),r=new mn(t,e),i=new mn(t,e+1),s=[];return this.Rr.forEachInRange([r,i],a=>{this.gr(a),s.push(a.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new me(new at([])),r=new mn(t,e),i=new mn(t,e+1);let s=ze();return this.Rr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new mn(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class mn{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return me.comparator(e.key,t.key)||Be(e.br,t.br)}static Vr(e,t){return Be(e.br,t.br)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new ut(mn.Ar)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Kx(s,t,r,i);this.mutationQueue.push(a);for(const c of i)this.vr=this.vr.add(new mn(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,t){return K.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Fr(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mn(t,0),i=new mn(t,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],a=>{const c=this.Cr(a.br);s.push(c)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ut(Be);return t.forEach(i=>{const s=new mn(i,0),a=new mn(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,a],c=>{r=r.add(c.br)})}),K.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;me.isDocumentKey(s)||(s=s.child(""));const a=new mn(new me(s),0);let c=new ut(Be);return this.vr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(c=c.add(d.br)),!0)},a),K.resolve(this.Mr(c))}Mr(e){const t=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Te(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return K.forEach(t.mutations,i=>{const s=new mn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new mn(t,0),i=this.vr.firstAfterOrEqual(r);return K.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.Nr=e,this.docs=function(){return new qt(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(t))}getEntries(e,t){let r=pr();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Dt.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=pr();const a=t.path,c=new me(a.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Bx(HS(g),r)<=0||(i.has(g.key)||uh(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,t,r,i){be()}Lr(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new WV(this)}getSize(e){return K.resolve(this.size)}}class WV extends YC{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.persistence=e,this.Br=new Ss(t=>Ua(t),ch),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.kr=0,this.qr=new e_,this.targetCount=0,this.Qr=$a.qn()}forEachTarget(e,t){return this.Br.forEach((r,i)=>t(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),K.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new $a(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Un(t),K.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Br.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Br.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),K.waitFor(s).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Dr(0),this.Ur=!1,this.Ur=!0,this.Wr=new zV,this.referenceDelegate=e(this),this.Gr=new HV(this),this.indexManager=new PV,this.remoteDocumentCache=function(i){return new $V(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new UC(t),this.jr=new BV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new qV(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){ae("MemoryPersistence","Starting transaction:",e);const i=new KV(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,t){return K.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class KV extends GS{constructor(e){super(),this.currentSequenceNumber=e}}class eg{constructor(e){this.persistence=e,this.Zr=new e_,this.Xr=null}static ei(e){return new eg(e)}get ti(){if(this.Xr)return this.Xr;throw be()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),K.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.ti,r=>{const i=me.fromPath(r);return this.ni(e,i).next(s=>{s||t.removeEntry(i,Se.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return K.or([()=>K.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class sp{constructor(e,t){this.persistence=e,this.ri=new Ss(r=>On(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=JC(this,t)}static ei(e,t){return new sp(e,t)}Hr(){}Jr(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return K.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?K.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,a=>this.ir(e,a,t).next(c=>{c||(r++,s.removeEntry(a,Se.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Im(e.data.value)),t}ir(e,t,r){return K.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.ri.get(t);return K.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e){this.serializer=e}O(e,t,r,i){const s=new qp("createOrUpgrade",t);r<1&&i>=1&&(function(d){d.createObjectStore("owner")}(e),function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zk,{unique:!0}),d.createObjectStore("documentMutations")}(e),F2(e),function(d){d.createObjectStore("remoteDocuments")}(e));let a=K.resolve();return r<3&&i>=3&&(r!==0&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),F2(e)),a=a.next(()=>function(d){const f=d.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",g)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(d,f){return f.store("mutations").U().next(g=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zk,{unique:!0});const y=f.store("mutations"),x=g.map(k=>y.put(k));return K.waitFor(x)})}(e,s))),a=a.next(()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(a=a.next(()=>this.ii(s))),r<6&&i>=6&&(a=a.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.si(s)))),r<7&&i>=7&&(a=a.next(()=>this.oi(s))),r<8&&i>=8&&(a=a.next(()=>this._i(e,s))),r<9&&i>=9&&(a=a.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(a=a.next(()=>this.ai(s))),r<11&&i>=11&&(a=a.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{(function(d){const f=d.createObjectStore("documentOverlays",{keyPath:I6});f.createIndex("collectionPathOverlayIndex",S6,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",C6,{unique:!1})})(e)})),r<13&&i>=13&&(a=a.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:p6});f.createIndex("documentKeyIndex",g6),f.createIndex("collectionGroupIndex",y6)}(e)).next(()=>this.ui(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.ci(e,s))),r<15&&i>=15&&(a=a.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:b6}).createIndex("sequenceNumberIndex",k6,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:E6}).createIndex("documentKeyIndex",T6,{unique:!1})}(e))),r<16&&i>=16&&(a=a.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)})),a}si(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=ip(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ii(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>K.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",a).next(c=>K.forEach(c,d=>{Te(d.userId===s.userId);const f=Ea(this.serializer,d);return HC(e,s.userId,f).next(()=>{})}))}))}oi(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((a,c)=>{const d=new at(a),f=function(y){return[0,On(y)]}(d);s.push(t.get(f).next(g=>g?K.resolve():(y=>t.put({targetId:0,path:On(y),sequenceNumber:i.highestListenSequenceNumber}))(d)))}).next(()=>K.waitFor(s))})}_i(e,t){e.createObjectStore("collectionParents",{keyPath:w6});const r=t.store("collectionParents"),i=new Zx,s=a=>{if(i.add(a)){const c=a.lastSegment(),d=a.popLast();return r.put({collectionId:c,parent:On(d)})}};return t.store("remoteDocuments").J({H:!0},(a,c)=>{const d=new at(a);return s(d.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([a,c,d],f)=>{const g=Si(c);return s(g.popLast())}))}ai(e){const t=e.store("targets");return t.J((r,i)=>{const s=id(i),a=zC(this.serializer,s);return t.put(a)})}ui(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,a)=>{const c=t.store("remoteDocumentsV14"),d=function(y){return y.document?new me(at.fromString(y.document.name).popFirst(5)):y.noDocument?me.fromSegments(y.noDocument.path):y.unknownDocument?me.fromSegments(y.unknownDocument.path):be()}(a).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(c.put(f))}).next(()=>K.waitFor(i))}ci(e,t){const r=t.store("mutations"),i=XC(this.serializer),s=new t_(eg.ei,this.serializer.ht);return r.U().next(a=>{const c=new Map;return a.forEach(d=>{var f;let g=(f=c.get(d.userId))!==null&&f!==void 0?f:ze();Ea(this.serializer,d).keys().forEach(y=>g=g.add(y)),c.set(d.userId,g)}),K.forEach(c,(d,f)=>{const g=new En(f),y=Xp.Pt(this.serializer,g),x=s.getIndexManager(g),k=Zp.Pt(g,this.serializer,x,s.referenceDelegate);return new ZC(i,k,y,x).recalculateAndSaveOverlaysForDocumentKeys(new fv(t,Dr.oe),d).next()})})}}function F2(n){n.createObjectStore("targetDocuments",{keyPath:x6}).createIndex("documentTargetsIndex",_6,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",v6,{unique:!0}),n.createObjectStore("targetGlobal")}const ky="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class n_{constructor(e,t,r,i,s,a,c,d,f,g,y=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.li=s,this.window=a,this.document=c,this.hi=f,this.Pi=g,this.Ti=y,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.Ei=null,this.di=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=x=>Promise.resolve(),!n_.p())throw new de(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new MV(this,i),this.Vi=t+"main",this.serializer=new UC(d),this.mi=new xo(this.Vi,this.Ti,new GV(this.serializer)),this.Wr=new TV,this.Gr=new jV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=XC(this.serializer),this.jr=new EV,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,g===!1&&Wn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(te.FAILED_PRECONDITION,ky);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Gr.getHighestSequenceNumber(e))}).then(e=>{this.$r=new Dr(e,this.hi)}).then(()=>{this.Ur=!0}).catch(e=>(this.mi&&this.mi.close(),Promise.reject(e)))}Si(e){return this.Ri=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.mi.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(e).next(t=>{t||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(e)).next(t=>this.isPrimary&&!t?this.vi(e).next(()=>!1):!!t&&this.Ci(e).next(()=>!0))).catch(e=>{if(Vo(e))return ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.li.enqueueRetryable(()=>this.Ri(e)),this.isPrimary=e})}bi(e){return $u(e).get("owner").next(t=>K.resolve(this.Fi(t)))}Mi(e){return rm(e).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=on(t,"clientMetadata");return r.U().next(i=>{const s=this.Ni(i,18e5),a=i.filter(c=>s.indexOf(c)===-1);return K.forEach(a,c=>r.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.fi)for(const t of e)this.fi.removeItem(this.Li(t.clientId))}}wi(){this.di=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(e){return!!e&&e.ownerId===this.clientId}Di(e){return this.Pi?K.resolve(!0):$u(e).get("owner").next(t=>{if(t!==null&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Bi(t.ownerId)){if(this.Fi(t)&&this.networkEnabled)return!0;if(!this.Fi(t)){if(!t.allowTabSynchronization)throw new de(te.FAILED_PRECONDITION,ky);return!1}}return!(!this.networkEnabled||!this.inForeground)||rm(e).U().next(r=>this.Ni(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(s||a&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Ur=!1,this.ki(),this.di&&(this.di.cancel(),this.di=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new fv(e,Dr.oe);return this.vi(t).next(()=>this.Mi(t))}),this.mi.close(),this.Ki()}Ni(e,t){return e.filter(r=>this.Oi(r.updateTimeMs,t)&&!this.Bi(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>rm(e).U().next(t=>this.Ni(t,18e5).map(r=>r.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(e,t){return Zp.Pt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RV(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return Xp.Pt(this.serializer,e)}getBundleCache(){return this.jr}runTransaction(e,t,r){ae("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(d){return d===17?P6:d===16?A6:d===15?zx:d===14?ZS:d===13?XS:d===12?N6:d===11?YS:void be()}(this.Ti);let a;return this.mi.runTransaction(e,i,s,c=>(a=new fv(c,this.$r?this.$r.next():Dr.oe),t==="readwrite-primary"?this.bi(a).next(d=>!!d||this.Di(a)).next(d=>{if(!d)throw Wn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new de(te.FAILED_PRECONDITION,KS);return r(a)}).next(d=>this.Ci(a).next(()=>d)):this.Ui(a).next(()=>r(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}Ui(e){return $u(e).get("owner").next(t=>{if(t!==null&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Bi(t.ownerId)&&!this.Fi(t)&&!(this.Pi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(te.FAILED_PRECONDITION,ky)})}Ci(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $u(e).put("owner",t)}static p(){return xo.p()}vi(e){const t=$u(e);return t.get("owner").next(r=>this.Fi(r)?(ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):K.resolve())}Oi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Wn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}pi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ei=()=>{this.li.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gi()))},this.document.addEventListener("visibilitychange",this.Ei),this.inForeground=this.document.visibilityState==="visible")}qi(){this.Ei&&(this.document.removeEventListener("visibilitychange",this.Ei),this.Ei=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ii=()=>{this.ki();const t=/(?:Version|Mobile)\/1[456]/;GI()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Bi(e){var t;try{const r=((t=this.fi)===null||t===void 0?void 0:t.getItem(this.Li(e)))!==null;return ae("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Wn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Li(this.clientId),String(Date.now()))}catch(e){Wn("Failed to set zombie client id.",e)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Li(this.clientId))}catch{}}Li(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $u(n){return on(n,"owner")}function rm(n){return on(n,"clientMetadata")}function QV(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=ze(),i=ze();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new r_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return GI()?8:QS(sn())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Xi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.es(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new JV;return this.ts(e,t,a).next(c=>{if(s.result=c,this.Hi)return this.ns(e,t,a,c.size)})}).next(()=>s.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(Gl()<=He.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Ql(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),K.resolve()):(Gl()<=He.DEBUG&&ae("QueryEngine","Query:",Ql(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Gl()<=He.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Ql(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(t))):K.resolve())}Xi(e,t){if(h2(t))return K.resolve(null);let r=Or(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Zm(t,null,"F"),r=Or(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=ze(...s);return this.Zi.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.rs(t,c);return this.ss(t,f,a,d.readTime)?this.Xi(e,Zm(t,null,"F")):this.os(e,f,t,d)}))})))}es(e,t,r,i){return h2(t)||i.isEqual(Se.min())?K.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const a=this.rs(t,s);return this.ss(t,a,r,i)?K.resolve(null):(Gl()<=He.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ql(t)),this.os(e,a,t,a6(i,-1)).next(c=>c))})}rs(e,t){let r=new ut(mC(e));return t.forEach((i,s)=>{uh(e,s)&&(r=r.add(s))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,t,r){return Gl()<=He.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Ql(t)),this.Zi.getDocumentsMatchingQuery(e,t,yr.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new qt(Be),this.cs=new Ss(s=>Ua(s),ch),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZC(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function tN(n,e,t,r){return new YV(n,e,t,r)}async function nN(n,e){const t=Fe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],c=[];let d=ze();for(const f of i){a.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of s){c.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next(f=>({Ts:f,removedBatchIds:a,addedBatchIds:c}))})})}function XV(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.hs.newChangeBuffer({trackRemovals:!0});return function(c,d,f,g){const y=f.batch,x=y.keys();let k=K.resolve();return x.forEach(E=>{k=k.next(()=>g.getEntry(d,E)).next(P=>{const S=f.docVersions.get(E);Te(S!==null),P.version.compareTo(S)<0&&(y.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),g.addEntry(P)))})}),k.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=ze();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function rN(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function ZV(n,e){const t=Fe(n),r=e.snapshotVersion;let i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;const c=[];e.targetChanges.forEach((g,y)=>{const x=i.get(y);if(!x)return;c.push(t.Gr.removeMatchingKeys(s,g.removedDocuments,y).next(()=>t.Gr.addMatchingKeys(s,g.addedDocuments,y)));let k=x.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?k=k.withResumeToken(Qt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):g.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(g.resumeToken,r)),i=i.insert(y,k),function(P,S,N){return P.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(x,k,g)&&c.push(t.Gr.updateTargetData(s,k))});let d=pr(),f=ze();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),c.push(eO(s,a,e.documentUpdates).next(g=>{d=g.Is,f=g.Es})),!r.isEqual(Se.min())){const g=t.Gr.getLastRemoteSnapshotVersion(s).next(y=>t.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(g)}return K.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,d,f)).next(()=>d)}).then(s=>(t.us=i,s))}function eO(n,e,t){let r=ze(),i=ze();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=pr();return t.forEach((c,d)=>{const f=s.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(Se.min())?(e.removeEntry(c,d.readTime),a=a.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(c,d)):ae("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{Is:a,Es:i}})}function tO(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nO(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(s=>s?(i=s,K.resolve(i)):t.Gr.allocateTargetId(r).next(a=>(i=new os(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function Cv(n,e,t){const r=Fe(n),i=r.us.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Vo(a))throw a;ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function B2(n,e,t){const r=Fe(n);let i=Se.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",a=>function(d,f,g){const y=Fe(d),x=y.cs.get(g);return x!==void 0?K.resolve(y.us.get(x)):y.Gr.getTargetData(f,g)}(r,a,Or(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(a,c.targetId).next(d=>{s=d})}).next(()=>r._s.getDocumentsMatchingQuery(a,e,t?i:Se.min(),t?s:ze())).next(c=>(rO(r,H6(e),c),{documents:c,ds:s})))}function rO(n,e,t){let r=n.ls.get(e)||Se.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ls.set(e,r)}class U2{constructor(){this.activeTargetIds=X6()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iN{constructor(){this._o=new U2,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new U2,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let im=null;function Ey(){return im===null?im=function(){return 268435456+Math.round(2147483648*Math.random())}():im++,"0x"+im.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class aO extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(t,r,i,s,a){const c=Ey(),d=this.No(t,r.toUriEncodedString());ae("RestConnection",`Sending RPC '${t}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(f,s,a),this.Bo(t,d,f,i).then(g=>(ae("RestConnection",`Received RPC '${t}' ${c}: `,g),g),g=>{throw Fa("RestConnection",`RPC '${t}' ${c} failed with error: `,g,"url: ",d,"request:",i),g})}ko(t,r,i,s,a,c){return this.Oo(t,r,i,s,a)}Lo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}No(t,r){const i=sO[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,i){const s=Ey();return new Promise((a,c)=>{const d=new OS;d.setWithCredentials(!0),d.listenOnce(FS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case bm.NO_ERROR:const g=d.getResponseJson();ae(jn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),a(g);break;case bm.TIMEOUT:ae(jn,`RPC '${e}' ${s} timed out`),c(new de(te.DEADLINE_EXCEEDED,"Request time out"));break;case bm.HTTP_ERROR:const y=d.getStatus();if(ae(jn,`RPC '${e}' ${s} failed with status:`,y,"response text:",d.getResponseText()),y>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const k=x==null?void 0:x.error;if(k&&k.status&&k.message){const E=function(S){const N=S.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(N)>=0?N:te.UNKNOWN}(k.status);c(new de(E,k.message))}else c(new de(te.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new de(te.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{ae(jn,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);ae(jn,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",f,r,15)})}qo(e,t,r){const i=Ey(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=zS(),c=US(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Lo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const g=s.join("");ae(jn,`Creating RPC '${e}' stream ${i}: ${g}`,d);const y=a.createWebChannel(g,d);let x=!1,k=!1;const E=new oO({Eo:S=>{k?ae(jn,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(x||(ae(jn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),x=!0),ae(jn,`RPC '${e}' stream ${i} sending:`,S),y.send(S))},Ao:()=>y.close()}),P=(S,N,L)=>{S.listen(N,O=>{try{L(O)}catch(Q){setTimeout(()=>{throw Q},0)}})};return P(y,td.EventType.OPEN,()=>{k||(ae(jn,`RPC '${e}' stream ${i} transport opened.`),E.So())}),P(y,td.EventType.CLOSE,()=>{k||(k=!0,ae(jn,`RPC '${e}' stream ${i} transport closed`),E.Do())}),P(y,td.EventType.ERROR,S=>{k||(k=!0,Fa(jn,`RPC '${e}' stream ${i} transport errored:`,S),E.Do(new de(te.UNAVAILABLE,"The operation could not be completed")))}),P(y,td.EventType.MESSAGE,S=>{var N;if(!k){const L=S.data[0];Te(!!L);const O=L,Q=(O==null?void 0:O.error)||((N=O[0])===null||N===void 0?void 0:N.error);if(Q){ae(jn,`RPC '${e}' stream ${i} received error:`,Q);const W=Q.status;let U=function(j){const D=Kt[j];if(D!==void 0)return SC(D)}(W),C=Q.message;U===void 0&&(U=te.INTERNAL,C="Unknown error status: "+W+" with message "+Q.message),k=!0,E.Do(new de(U,C)),y.close()}else ae(jn,`RPC '${e}' stream ${i} received:`,L),E.vo(L)}}),P(c,BS.STAT_EVENT,S=>{S.stat===dv.PROXY?ae(jn,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===dv.NOPROXY&&ae(jn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.bo()},0),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(){return typeof window<"u"?window:null}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(n){return new fV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,t,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,t,r,i,s,a,c,d){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new sN(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Wn(t.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{const i=new de(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cO extends oN{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=gV(this.serializer,e),r=function(s){if(!("targetChange"in s))return Se.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Se.min():a.readTime?Gn(a.readTime):Se.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=kv(this.serializer),t.addTarget=function(s,a){let c;const d=a.target;if(c=Ym(d)?{documents:LC(s,d)}:{query:MC(s,d).ct},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=AC(s,a.resumeToken);const f=wv(s,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(Se.min())>0){c.readTime=_c(s,a.snapshotVersion.toTimestamp());const f=wv(s,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=vV(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=kv(this.serializer),t.removeTarget=e,this.c_(t)}}class uO extends oN{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=yV(e.writeResults,e.commitTime),r=Gn(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=kv(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>tp(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Oo(e,bv(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(te.UNKNOWN,s.toString())})}ko(e,t,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.ko(e,bv(t,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(te.UNKNOWN,a.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class hO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Wn(t),this.C_=!1):ae("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(a=>{r.enqueueAndForget(async()=>{Ya(this)&&(ae("RemoteStore","Restarting streams for network reachability change."),await async function(d){const f=Fe(d);f.k_.add(4),await fh(f),f.K_.set("Unknown"),f.k_.delete(4),await ng(f)}(this))})}),this.K_=new hO(r,i)}}async function ng(n){if(Ya(n))for(const e of n.q_)await e(!0)}async function fh(n){for(const e of n.q_)await e(!1)}function aN(n,e){const t=Fe(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),a_(t)?o_(t):Bc(t).s_()&&s_(t,e))}function i_(n,e){const t=Fe(n),r=Bc(t);t.B_.delete(e),r.s_()&&lN(t,e),t.B_.size===0&&(r.s_()?r.a_():Ya(t)&&t.K_.set("Unknown"))}function s_(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bc(n).V_(e)}function lN(n,e){n.U_.xe(e),Bc(n).m_(e)}function o_(n){n.U_=new cV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Bc(n).start(),n.K_.F_()}function a_(n){return Ya(n)&&!Bc(n).i_()&&n.B_.size>0}function Ya(n){return Fe(n).k_.size===0}function cN(n){n.U_=void 0}async function mO(n){n.K_.set("Online")}async function pO(n){n.B_.forEach((e,t)=>{s_(n,e)})}async function gO(n,e){cN(n),a_(n)?(n.K_.O_(e),o_(n)):n.K_.set("Unknown")}async function yO(n,e,t){if(n.K_.set("Online"),e instanceof NC&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const c of s.targetIds)i.B_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.B_.delete(c),i.U_.removeTarget(c))}(n,e)}catch(r){ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await op(n,r)}else if(e instanceof Nm?n.U_.$e(e):e instanceof CC?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Se.min()))try{const r=await rN(n.localStore);t.compareTo(r)>=0&&await function(s,a){const c=s.U_.it(a);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=s.B_.get(f);g&&s.B_.set(f,g.withResumeToken(d.resumeToken,a))}}),c.targetMismatches.forEach((d,f)=>{const g=s.B_.get(d);if(!g)return;s.B_.set(d,g.withResumeToken(Qt.EMPTY_BYTE_STRING,g.snapshotVersion)),lN(s,d);const y=new os(g.target,d,f,g.sequenceNumber);s_(s,y)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){ae("RemoteStore","Failed to raise snapshot:",r),await op(n,r)}}async function op(n,e,t){if(!Vo(e))throw e;n.k_.add(1),await fh(n),n.K_.set("Offline"),t||(t=()=>rN(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ae("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await ng(n)})}function uN(n,e){return e().catch(t=>op(n,t,e))}async function mh(n){const e=Fe(n),t=Co(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;vO(e);)try{const i=await tO(e.localStore,r);if(i===null){e.L_.length===0&&t.a_();break}r=i.batchId,xO(e,i)}catch(i){await op(e,i)}dN(e)&&hN(e)}function vO(n){return Ya(n)&&n.L_.length<10}function xO(n,e){n.L_.push(e);const t=Co(n);t.s_()&&t.f_&&t.g_(e.mutations)}function dN(n){return Ya(n)&&!Co(n).i_()&&n.L_.length>0}function hN(n){Co(n).start()}async function _O(n){Co(n).w_()}async function wO(n){const e=Co(n);for(const t of n.L_)e.g_(t.mutations)}async function bO(n,e,t){const r=n.L_.shift(),i=Gx.from(r,e,t);await uN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await mh(n)}async function kO(n,e){e&&Co(n).f_&&await async function(r,i){if(function(a){return oV(a)&&a!==te.ABORTED}(i.code)){const s=r.L_.shift();Co(r).__(),await uN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await mh(r)}}(n,e),dN(n)&&hN(n)}async function q2(n,e){const t=Fe(n);t.asyncQueue.verifyOperationInProgress(),ae("RemoteStore","RemoteStore received new credentials");const r=Ya(t);t.k_.add(3),await fh(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await ng(t)}async function EO(n,e){const t=Fe(n);e?(t.k_.delete(2),await ng(t)):e||(t.k_.add(2),await fh(t),t.K_.set("Unknown"))}function Bc(n){return n.W_||(n.W_=function(t,r,i){const s=Fe(t);return s.b_(),new cO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:mO.bind(null,n),mo:pO.bind(null,n),po:gO.bind(null,n),R_:yO.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),a_(n)?o_(n):n.K_.set("Unknown")):(await n.W_.stop(),cN(n))})),n.W_}function Co(n){return n.G_||(n.G_=function(t,r,i){const s=Fe(t);return s.b_(),new uO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:_O.bind(null,n),po:kO.bind(null,n),p_:wO.bind(null,n),y_:bO.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await mh(n)):(await n.G_.stop(),n.L_.length>0&&(ae("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,c=new l_(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function c_(n,e){if(Wn("AsyncQueue",`${e}: ${n}`),Vo(n))return new de(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{static emptySet(e){return new lc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||me.comparator(t.key,r.key):(t,r)=>me.comparator(t.key,r.key),this.keyedMap=nd(),this.sortedSet=new qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new lc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.z_=new qt(me.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):be():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class wc{constructor(e,t,r,i,s,a,c,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new wc(e,t,lc.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class IO{constructor(){this.queries=W2(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const i=Fe(t),s=i.queries;i.queries=W2(),s.forEach((a,c)=>{for(const d of c.J_)d.onError(r)})})(this,new de(te.ABORTED,"Firestore shutting down"))}}function W2(){return new Ss(n=>fC(n),Gp)}async function fN(n,e){const t=Fe(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new TO,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await t.onListen(i,!0);break;case 1:s.H_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const c=c_(a,`Initialization of query '${Ql(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.J_.push(e),e.ea(t.onlineState),s.H_&&e.ta(s.H_)&&u_(t)}async function mN(n,e){const t=Fe(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.J_.indexOf(e);a>=0&&(s.J_.splice(a,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function SO(n,e){const t=Fe(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const c of a.J_)c.ta(i)&&(r=!0);a.H_=i}}r&&u_(t)}function CO(n,e,t){const r=Fe(n),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(t);r.queries.delete(e)}function u_(n){n.X_.forEach(e=>{e.next()})}var Nv,H2;(H2=Nv||(Nv={})).na="default",H2.Cache="cache";class pN{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new wc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=wc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Nv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.key=e}}class yN{constructor(e){this.key=e}}class NO{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ze(),this.mutatedKeys=ze(),this.Va=mC(e),this.ma=new lc(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new $2,i=t?t.ma:this.ma;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{const x=i.get(g),k=uh(this.query,y)?y:null,E=!!x&&this.mutatedKeys.has(x.key),P=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let S=!1;x&&k?x.data.isEqual(k.data)?E!==P&&(r.track({type:3,doc:k}),S=!0):this.ya(x,k)||(r.track({type:2,doc:k}),S=!0,(d&&this.Va(k,d)>0||f&&this.Va(k,f)<0)&&(c=!0)):!x&&k?(r.track({type:0,doc:k}),S=!0):x&&!k&&(r.track({type:1,doc:x}),S=!0,(d||f)&&(c=!0)),S&&(k?(a=a.add(k),s=P?s.add(g):s.delete(g)):(a=a.delete(g),s=s.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),s=s.delete(g.key),r.track({type:1,doc:g})}return{ma:a,pa:r,ss:c,mutatedKeys:s}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const a=e.pa.j_();a.sort((g,y)=>function(k,E){const P=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return P(k)-P(E)}(g.type,y.type)||this.Va(g.doc,y.doc)),this.wa(r),i=i!=null&&i;const c=t&&!i?this.Sa():[],d=this.Ra.size===0&&this.current&&!i?1:0,f=d!==this.Aa;return this.Aa=d,a.length!==0||f?{snapshot:new wc(this.query,e.ma,s,a,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:c}:{ba:c}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new $2,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=ze(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new yN(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new gN(r))}),t}va(e){this.da=e.ds,this.Ra=ze();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return wc.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class AO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class PO{constructor(e){this.key=e,this.Fa=!1}}class RO{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ma={},this.xa=new Ss(c=>fC(c),Gp),this.Oa=new Map,this.Na=new Set,this.La=new qt(me.comparator),this.Ba=new Map,this.ka=new e_,this.qa={},this.Qa=new Map,this.Ka=$a.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function jO(n,e,t=!0){const r=kN(n);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await vN(r,e,t,!0),i}async function DO(n,e){const t=kN(n);await vN(t,e,!0,!1)}async function vN(n,e,t,r){const i=await nO(n.localStore,Or(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let c;return r&&(c=await LO(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&aN(n.remoteStore,i),c}async function LO(n,e,t,r,i){n.Ua=(y,x,k)=>async function(P,S,N,L){let O=S.view.ga(N);O.ss&&(O=await B2(P.localStore,S.query,!1).then(({documents:C})=>S.view.ga(C,O)));const Q=L&&L.targetChanges.get(S.targetId),W=L&&L.targetMismatches.get(S.targetId)!=null,U=S.view.applyChanges(O,P.isPrimaryClient,Q,W);return G2(P,S.targetId,U.ba),U.snapshot}(n,y,x,k);const s=await B2(n.localStore,e,!0),a=new NO(e,s.ds),c=a.ga(s.documents),d=hh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=a.applyChanges(c,n.isPrimaryClient,d);G2(n,t,f.ba);const g=new AO(e,t,a);return n.xa.set(e,g),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),f.snapshot}async function MO(n,e,t){const r=Fe(n),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(a=>!Gp(a,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&i_(r.remoteStore,i.targetId),Av(r,i.targetId)}).catch(Ja)):(Av(r,i.targetId),await Cv(r.localStore,i.targetId,!0))}async function VO(n,e){const t=Fe(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),i_(t.remoteStore,r.targetId))}async function OO(n,e,t){const r=EN(n);try{const i=await function(a,c){const d=Fe(a),f=Pt.now(),g=c.reduce((k,E)=>k.add(E.key),ze());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",k=>{let E=pr(),P=ze();return d.hs.getEntries(k,g).next(S=>{E=S,E.forEach((N,L)=>{L.isValidDocument()||(P=P.add(N))})}).next(()=>d.localDocuments.getOverlayedDocuments(k,E)).next(S=>{y=S;const N=[];for(const L of c){const O=iV(L,y.get(L.key).overlayedDocument);O!=null&&N.push(new Cs(L.key,O,iC(O.value.mapValue),rn.exists(!0)))}return d.mutationQueue.addMutationBatch(k,f,N,c)}).next(S=>{x=S;const N=S.applyToLocalDocumentSet(y,P);return d.documentOverlayCache.saveOverlays(k,S.batchId,N)})}).then(()=>({batchId:x.batchId,changes:gC(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,d){let f=a.qa[a.currentUser.toKey()];f||(f=new qt(Be)),f=f.insert(c,d),a.qa[a.currentUser.toKey()]=f}(r,i.batchId,t),await ph(r,i.changes),await mh(r.remoteStore)}catch(i){const s=c_(i,"Failed to persist write");t.reject(s)}}async function xN(n,e){const t=Fe(n);try{const r=await ZV(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Ba.get(s);a&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Fa=!0:i.modifiedDocuments.size>0?Te(a.Fa):i.removedDocuments.size>0&&(Te(a.Fa),a.Fa=!1))}),await ph(t,r,e)}catch(r){await Ja(r)}}function K2(n,e,t){const r=Fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.xa.forEach((s,a)=>{const c=a.view.ea(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const d=Fe(a);d.onlineState=c;let f=!1;d.queries.forEach((g,y)=>{for(const x of y.J_)x.ea(c)&&(f=!0)}),f&&u_(d)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FO(n,e,t){const r=Fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ba.get(e),s=i&&i.key;if(s){let a=new qt(me.comparator);a=a.insert(s,Dt.newNoDocument(s,Se.min()));const c=ze().add(s),d=new Yp(Se.min(),new Map,new qt(Be),a,c);await xN(r,d),r.La=r.La.remove(s),r.Ba.delete(e),d_(r)}else await Cv(r.localStore,e,!1).then(()=>Av(r,e,t)).catch(Ja)}async function BO(n,e){const t=Fe(n),r=e.batch.batchId;try{const i=await XV(t.localStore,e);wN(t,r,null),_N(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ph(t,i)}catch(i){await Ja(i)}}async function UO(n,e,t){const r=Fe(n);try{const i=await function(a,c){const d=Fe(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,c).next(y=>(Te(y!==null),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(r.localStore,e);wN(r,e,t),_N(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ph(r,i)}catch(i){await Ja(i)}}function _N(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function wN(n,e,t){const r=Fe(n);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function Av(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||bN(n,r)})}function bN(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(i_(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),d_(n))}function G2(n,e,t){for(const r of t)r instanceof gN?(n.ka.addReference(r.key,e),zO(n,r)):r instanceof yN?(ae("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||bN(n,r.key)):be()}function zO(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(ae("SyncEngine","New document in limbo: "+t),n.Na.add(r),d_(n))}function d_(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new me(at.fromString(e)),r=n.Ka.next();n.Ba.set(r,new PO(t)),n.La=n.La.insert(t,r),aN(n.remoteStore,new os(Or(Kp(t.path)),r,"TargetPurposeLimboResolution",Dr.oe))}}async function ph(n,e,t){const r=Fe(n),i=[],s=[],a=[];r.xa.isEmpty()||(r.xa.forEach((c,d)=>{a.push(r.Ua(d,e,t).then(f=>{var g;if((f||t)&&r.isPrimaryClient){const y=f?!f.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){i.push(f);const y=r_.zi(d.targetId,f);s.push(y)}}))}),await Promise.all(a),r.Ma.R_(i),await async function(d,f){const g=Fe(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>K.forEach(f,x=>K.forEach(x.Wi,k=>g.persistence.referenceDelegate.addReference(y,x.targetId,k)).next(()=>K.forEach(x.Gi,k=>g.persistence.referenceDelegate.removeReference(y,x.targetId,k)))))}catch(y){if(!Vo(y))throw y;ae("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const x=y.targetId;if(!y.fromCache){const k=g.us.get(x),E=k.snapshotVersion,P=k.withLastLimboFreeSnapshotVersion(E);g.us=g.us.insert(x,P)}}}(r.localStore,s))}async function qO(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){ae("SyncEngine","User change. New user:",e.toKey());const r=await nN(t.localStore,e);t.currentUser=e,function(s,a){s.Qa.forEach(c=>{c.forEach(d=>{d.reject(new de(te.CANCELLED,a))})}),s.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ph(t,r.Ts)}}function $O(n,e){const t=Fe(n),r=t.Ba.get(e);if(r&&r.Fa)return ze().add(r.key);{let i=ze();const s=t.Oa.get(e);if(!s)return i;for(const a of s){const c=t.xa.get(a);i=i.unionWith(c.view.fa)}return i}}function kN(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$O.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FO.bind(null,e),e.Ma.R_=SO.bind(null,e.eventManager),e.Ma.Wa=CO.bind(null,e.eventManager),e}function EN(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UO.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tg(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return tN(this.persistence,new eN,e.initialUser,this.serializer)}ja(e){return new t_(eg.ei,this.serializer)}za(e){return new iN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class WO extends Ud{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Te(this.persistence.referenceDelegate instanceof sp);const r=this.persistence.referenceDelegate.garbageCollector;return new QC(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new t_(r=>sp.ei(r,t),this.serializer)}}class HO extends Ud{constructor(e,t,r){super(),this.Za=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Za.initialize(this,e),await EN(this.Za.syncEngine),await mh(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(e){return tN(this.persistence,new eN,e.initialUser,this.serializer)}Ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new QC(r,e.asyncQueue,t)}Ya(e,t){const r=new d6(t,this.persistence);return new u6(e.asyncQueue,r)}ja(e){const t=QV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new n_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,lO(),Am(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(e){return new iN}}class ap{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>K2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qO.bind(null,this.syncEngine),await EO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IO}()}createDatastore(e){const t=tg(e.databaseInfo.databaseId),r=function(s){return new aO(s)}(e.databaseInfo);return function(s,a,c,d){return new dO(s,a,c,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,c){return new fO(r,i,s,a,c)}(this.localStore,this.datastore,e.asyncQueue,t=>K2(this.syncEngine,t,0),function(){return z2.p()?new z2:new iO}())}createSyncEngine(e,t){return function(i,s,a,c,d,f,g){const y=new RO(i,s,a,c,d,f);return g&&(y.$a=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Fe(i);ae("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await fh(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ap.provider={build:()=>new ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Wn("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=En.UNAUTHENTICATED,this.clientId=$S.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{ae("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ae("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=c_(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ty(n,e){n.asyncQueue.verifyOperationInProgress(),ae("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Q2(n,e){n.asyncQueue.verifyOperationInProgress();const t=await GO(n);ae("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>q2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>q2(e.remoteStore,i)),n._onlineComponents=e}async function GO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ae("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ty(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Fa("Error using user provided cache. Falling back to memory cache: "+t),await Ty(n,new Ud)}}else ae("FirestoreClient","Using default OfflineComponentProvider"),await Ty(n,new WO(void 0));return n._offlineComponents}async function IN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ae("FirestoreClient","Using user provided OnlineComponentProvider"),await Q2(n,n._uninitializedComponentsProvider._online)):(ae("FirestoreClient","Using default OnlineComponentProvider"),await Q2(n,new ap))),n._onlineComponents}function QO(n){return IN(n).then(e=>e.syncEngine)}async function SN(n){const e=await IN(n),t=e.eventManager;return t.onListen=jO.bind(null,e.syncEngine),t.onUnlisten=MO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=VO.bind(null,e.syncEngine),t}function JO(n,e,t={}){const r=new Ri;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,c,d,f){const g=new TN({next:x=>{g.eu(),a.enqueueAndForget(()=>mN(s,y));const k=x.docs.has(c);!k&&x.fromCache?f.reject(new de(te.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&x.fromCache&&d&&d.source==="server"?f.reject(new de(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),y=new pN(Kp(c.path),g,{includeMetadataChanges:!0,ua:!0});return fN(s,y)}(await SN(n),n.asyncQueue,e,t,r)),r.promise}function YO(n,e,t={}){const r=new Ri;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,c,d,f){const g=new TN({next:x=>{g.eu(),a.enqueueAndForget(()=>mN(s,y)),x.fromCache&&d.source==="server"?f.reject(new de(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),y=new pN(c,g,{includeMetadataChanges:!0,ua:!0});return fN(s,y)}(await SN(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(n,e,t){if(!t)throw new de(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XO(n,e,t,r){if(e===!0&&r===!0)throw new de(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y2(n){if(!me.isDocumentKey(n))throw new de(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function X2(n){if(me.isDocumentKey(n))throw new de(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":be()}function vr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rg(n);throw new de(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new de(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ig{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z2({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z2(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XM;switch(r.type){case"firstParty":return new n6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=J2.get(t);r&&(ae("ComponentProvider","Removing Datastore"),J2.delete(t),r.terminate())}(this),Promise.resolve()}}function ZO(n,e,t,r={}){var i;const s=(n=vr(n,ig))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=En.MOCK_USER;else{c=Tx(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new de(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new En(f)}n._authCredentials=new ZM(new qS(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fo(this.firestore,e,this._query)}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class wo extends Fo{constructor(e,t,r){super(e,t,Kp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new me(e))}withConverter(e){return new wo(this.firestore,e,this._path)}}function Hn(n,e,...t){if(n=ot(n),NN("collection","path",e),n instanceof ig){const r=at.fromString(e,...t);return X2(r),new wo(n,null,r)}{if(!(n instanceof Qn||n instanceof wo))throw new de(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(at.fromString(e,...t));return X2(r),new wo(n.firestore,null,r)}}function Gt(n,e,...t){if(n=ot(n),arguments.length===1&&(e=$S.newId()),NN("doc","path",e),n instanceof ig){const r=at.fromString(e,...t);return Y2(r),new Qn(n,null,new me(r))}{if(!(n instanceof Qn||n instanceof wo))throw new de(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(at.fromString(e,...t));return Y2(r),new Qn(n.firestore,n instanceof wo?n.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new sN(this,"async_queue_retry"),this.fu=()=>{const r=Am();r&&ae("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Am();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Am();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Ri;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Vo(e))throw e;ae("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Wn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const i=l_.createAndSchedule(this,e,t,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&be()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Ns extends ig{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new eE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eE(e),this._firestoreClient=void 0,await e}}}function AN(n,e){const t=typeof n=="object"?n:Fp(),r=typeof n=="string"?n:"(default)",i=ih(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Ex("firestore");s&&ZO(i,...s)}return i}function sg(n){if(n._terminated)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PN(n),n._firestoreClient}function PN(n){var e,t,r;const i=n._freezeSettings(),s=function(c,d,f,g){return new j6(c,d,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,CN(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new KO(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(n._componentsProvider))}function eF(n,e){Fa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return tF(n,ap.provider,{build:r=>new HO(r,t.cacheSizeBytes,void 0)}),Promise.resolve()}function tF(n,e,t){if((n=vr(n,Ns))._firestoreClient||n._terminated)throw new de(te.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new de(te.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},PN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bc(Qt.fromBase64String(e))}catch(t){throw new de(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bc(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=/^__.*__$/;class rF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fc(e,this.data,t,this.fieldTransforms)}}class RN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class m_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new m_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return lp(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(jN(this.Mu)&&nF.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class iF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||tg(e)}$u(e,t,r,i=!1){return new m_({Mu:e,methodName:t,Ku:r,path:Nt.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vh(n){const e=n._freezeSettings(),t=tg(n._databaseId);return new iF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function p_(n,e,t,r,i,s={}){const a=n.$u(s.merge||s.mergeFields?2:0,e,t,i);v_("Data must be an object, but it was:",a,r);const c=MN(r,a);let d,f;if(s.merge)d=new sr(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){const g=[];for(const y of s.mergeFields){const x=Pv(e,y,t);if(!a.contains(x))throw new de(te.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);ON(g,x)||g.push(x)}d=new sr(g),f=a.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=a.fieldTransforms;return new rF(new Mn(c),d,f)}class og extends yh{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof og}}class g_ extends yh{_toFieldTransform(e){return new Hx(e.path,new gc)}isEqual(e){return e instanceof g_}}class y_ extends yh{constructor(e,t){super(e),this.Wu=t}_toFieldTransform(e){const t=new xc(e.serializer,xC(e.serializer,this.Wu));return new Hx(e.path,t)}isEqual(e){return e instanceof y_&&this.Wu===e.Wu}}function DN(n,e,t,r){const i=n.$u(1,e,t);v_("Data must be an object, but it was:",i,r);const s=[],a=Mn.empty();Oo(r,(d,f)=>{const g=x_(e,d,t);f=ot(f);const y=i.Bu(g);if(f instanceof og)s.push(g);else{const x=xh(f,y);x!=null&&(s.push(g),a.set(g,x))}});const c=new sr(s);return new RN(a,c,i.fieldTransforms)}function LN(n,e,t,r,i,s){const a=n.$u(1,e,t),c=[Pv(e,r,t)],d=[i];if(s.length%2!=0)throw new de(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)c.push(Pv(e,s[x])),d.push(s[x+1]);const f=[],g=Mn.empty();for(let x=c.length-1;x>=0;--x)if(!ON(f,c[x])){const k=c[x];let E=d[x];E=ot(E);const P=a.Bu(k);if(E instanceof og)f.push(k);else{const S=xh(E,P);S!=null&&(f.push(k),g.set(k,S))}}const y=new sr(f);return new RN(g,y,a.fieldTransforms)}function sF(n,e,t,r=!1){return xh(t,n.$u(r?4:3,e))}function xh(n,e){if(VN(n=ot(n)))return v_("Unsupported field value:",e,n),MN(n,e);if(n instanceof yh)return function(r,i){if(!jN(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const c of r){let d=xh(c,i.ku(a));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Pt.fromDate(r);return{timestampValue:_c(i.serializer,s)}}if(r instanceof Pt){const s=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_c(i.serializer,s)}}if(r instanceof h_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bc)return{bytesValue:AC(i.serializer,r._byteString)};if(r instanceof Qn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.qu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Yx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof f_)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.qu("VectorValues must only contain numeric values.");return Wx(c.serializer,d)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${rg(r)}`)}(n,e)}function MN(n,e){const t={};return eC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(n,(r,i)=>{const s=xh(i,e.Ou(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function VN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pt||n instanceof h_||n instanceof bc||n instanceof Qn||n instanceof yh||n instanceof f_)}function v_(n,e,t){if(!VN(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=rg(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function Pv(n,e,t){if((e=ot(e))instanceof gh)return e._internalPath;if(typeof e=="string")return x_(n,e);throw lp("Field path arguments must be of type string or ",n,!1,void 0,t)}const oF=new RegExp("[~\\*/\\[\\]]");function x_(n,e,t){if(e.search(oF)>=0)throw lp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gh(...e.split("."))._internalPath}catch{throw lp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lp(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(s||a)&&(d+=" (found",s&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new de(te.INVALID_ARGUMENT,c+n+d)}function ON(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ag("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aF extends FN{data(){return super.data()}}function ag(n,e){return typeof e=="string"?x_(n,e):e instanceof gh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class __{}class w_ extends __{}function ds(n,e,...t){let r=[];e instanceof __&&r.push(e),r=r.concat(t),function(s){const a=s.filter(d=>d instanceof b_).length,c=s.filter(d=>d instanceof lg).length;if(a>1||a>0&&c>0)throw new de(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class lg extends w_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new lg(e,t,r)}_apply(e){const t=this._parse(e);return BN(e._query,t),new Fo(e.firestore,e.converter,_v(e._query,t))}_parse(e){const t=vh(e.firestore);return function(s,a,c,d,f,g,y){let x;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new de(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){nE(y,g);const k=[];for(const E of y)k.push(tE(d,s,E));x={arrayValue:{values:k}}}else x=tE(d,s,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||nE(y,g),x=sF(c,a,y,g==="in"||g==="not-in");return Qe.create(f,g,x)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function hs(n,e,t){const r=e,i=ag("where",n);return lg._create(i,r,t)}class b_ extends __{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new b_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ct.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i;const c=s.getFlattenedFilters();for(const d of c)BN(a,d),a=_v(a,d)}(e._query,t),new Fo(e.firestore,e.converter,_v(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class k_ extends w_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new k_(e,t)}_apply(e){const t=function(i,s,a){if(i.startAt!==null)throw new de(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new de(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bd(s,a)}(e._query,this._field,this._direction);return new Fo(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new Oc(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function pd(n,e="asc"){const t=e,r=ag("orderBy",n);return k_._create(r,t)}class E_ extends w_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new E_(e,t,r)}_apply(e){return new Fo(e.firestore,e.converter,Zm(e._query,this._limit,this._limitType))}}function cF(n){return E_._create("limit",n,"F")}function tE(n,e,t){if(typeof(t=ot(t))=="string"){if(t==="")throw new de(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hC(e)&&t.indexOf("/")!==-1)throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(at.fromString(t));if(!me.isDocumentKey(r))throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Od(n,new me(r))}if(t instanceof Qn)return Od(n,t._key);throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rg(t)}.`)}function nE(n,e){if(!Array.isArray(n)||n.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BN(n,e){const t=function(i,s){for(const a of i)for(const c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class uF{convertValue(e,t="none"){switch(Io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Oo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>kt(a.doubleValue));return new f_(s)}convertGeoPoint(e){return new h_(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Wp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Md(e));default:return null}}convertTimestamp(e){const t=ws(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=at.fromString(e);Te(BC(r));const i=new Ba(r.get(1),r.get(3)),s=new me(r.popFirst(5));return i.isEqual(t)||Wn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class UN extends FN{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ag("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Pm extends UN{data(e={}){return super.data(e)}}class dF{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Pm(this._firestore,this._userDataWriter,r.key,r,new sd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const d=new Pm(i._firestore,i._userDataWriter,c.doc.key,c.doc,new sd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const d=new Pm(i._firestore,i._userDataWriter,c.doc.key,c.doc,new sd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),g=a.indexOf(c.doc.key)),{type:hF(c.type),doc:d,oldIndex:f,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(n){n=vr(n,Qn);const e=vr(n.firestore,Ns);return JO(sg(e),n._key).then(t=>mF(e,n,t))}class zN extends uF{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function Lr(n){n=vr(n,Fo);const e=vr(n.firestore,Ns),t=sg(e),r=new zN(e);return lF(n._query),YO(t,n._query).then(i=>new dF(e,r,n,i))}function _h(n,e,t){n=vr(n,Qn);const r=vr(n.firestore,Ns),i=T_(n.converter,e,t);return bh(r,[p_(vh(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,rn.none())])}function wh(n,e,t,...r){n=vr(n,Qn);const i=vr(n.firestore,Ns),s=vh(i);let a;return a=typeof(e=ot(e))=="string"||e instanceof gh?LN(s,"updateDoc",n._key,e,t,r):DN(s,"updateDoc",n._key,e),bh(i,[a.toMutation(n._key,rn.exists(!0))])}function fF(n){return bh(vr(n.firestore,Ns),[new dh(n._key,rn.none())])}function cg(n,e){const t=vr(n.firestore,Ns),r=Gt(n),i=T_(n.converter,e);return bh(t,[p_(vh(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,rn.exists(!1))]).then(()=>r)}function bh(n,e){return function(r,i){const s=new Ri;return r.asyncQueue.enqueueAndForget(async()=>OO(await QO(r),i,s)),s.promise}(sg(n),e)}function mF(n,e,t){const r=t.docs.get(e._key),i=new zN(n);return new UN(n,i,e._key,r,new sd(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vh(e)}set(e,t,r){this._verifyNotCommitted();const i=Iy(e,this._firestore),s=T_(i.converter,t,r),a=p_(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,rn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Iy(e,this._firestore);let a;return a=typeof(t=ot(t))=="string"||t instanceof gh?LN(this._dataReader,"WriteBatch.update",s._key,t,r,i):DN(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Iy(e,this._firestore);return this._mutations=this._mutations.concat(new dh(t._key,rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Iy(n,e){if((n=ot(n)).firestore!==e)throw new de(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function qN(){return new g_("serverTimestamp")}function $N(n){return new y_("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(n){return sg(n=vr(n,Ns)),new pF(n,e=>bh(n,e))}(function(e,t=!0){(function(i){Vc=i})(jo),To(new vs("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new Ns(new e6(r.getProvider("auth-internal")),new i6(r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ba(f.options.projectId,g)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Vr(Jk,"4.7.5",e),Vr(Jk,"4.7.5","esm2017")})();var yF="firebase",vF="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(yF,vF,"app");var rE={};const iE="@firebase/database",sE="1.0.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WN="";function xF(n){WN=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),nn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Nd(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Vi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _F(e)}}catch{}return new wF},Na=HN("localStorage"),bF=HN("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Op("@firebase/database"),kF=function(){let n=1;return function(){return n++}}(),KN=function(n){const e=A5(n),t=new I5;t.update(e);const r=t.digest();return kx.encodeByteArray(r)},kh=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=kh.apply(null,r):typeof r=="object"?e+=nn(r):e+=r,e+=" "}return e};let gd=null,oE=!0;const EF=function(n,e){ce(!e,"Can't turn on custom loggers persistently."),cc.logLevel=He.VERBOSE,gd=cc.log.bind(cc)},Tn=function(...n){if(oE===!0&&(oE=!1,gd===null&&bF.get("logging_enabled")===!0&&EF()),gd){const e=kh.apply(null,n);gd(e)}},Eh=function(n){return function(...e){Tn(n,...e)}},Rv=function(...n){const e="FIREBASE INTERNAL ERROR: "+kh(...n);cc.error(e)},ks=function(...n){const e=`FIREBASE FATAL ERROR: ${kh(...n)}`;throw cc.error(e),new Error(e)},Jn=function(...n){const e="FIREBASE WARNING: "+kh(...n);cc.warn(e)},TF=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Jn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},I_=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},IF=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},kc="[MIN_NAME]",Wa="[MAX_NAME]",Xa=function(n,e){if(n===e)return 0;if(n===kc||e===Wa)return-1;if(e===kc||n===Wa)return 1;{const t=aE(n),r=aE(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},SF=function(n,e){return n===e?0:n<e?-1:1},Wu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+nn(e))},S_=function(n){if(typeof n!="object"||n===null)return nn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=nn(e[r]),t+=":",t+=S_(n[e[r]]);return t+="}",t},GN=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function In(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const QN=function(n){ce(!I_(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let i,s,a,c,d;n===0?(s=0,a=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=c+r,a=Math.round(n*Math.pow(2,t-c)-Math.pow(2,t))):(s=0,a=Math.round(n/Math.pow(2,1-r-t))));const f=[];for(d=t;d;d-=1)f.push(a%2?1:0),a=Math.floor(a/2);for(d=e;d;d-=1)f.push(s%2?1:0),s=Math.floor(s/2);f.push(i?1:0),f.reverse();const g=f.join("");let y="";for(d=0;d<64;d+=8){let x=parseInt(g.substr(d,8),2).toString(16);x.length===1&&(x="0"+x),y=y+x}return y.toLowerCase()},CF=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},NF=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function AF(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}const PF=new RegExp("^-?(0*)\\d{1,10}$"),RF=-2147483648,jF=2147483647,aE=function(n){if(PF.test(n)){const e=Number(n);if(e>=RF&&e<=jF)return e}return null},Uc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Jn("Exception was thrown by user callback.",t),e},Math.floor(0))}},DF=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},yd=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Jn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Tn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Jn(e)}}class Rm{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Rm.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="5",JN="v",YN="s",XN="r",ZN="f",eA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tA="ls",nA="p",jv="ac",rA="websocket",iA="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,t,r,i,s=!1,a="",c=!1,d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Na.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Na.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function VF(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function oA(n,e,t){ce(typeof e=="string","typeof type must == string"),ce(typeof t=="object","typeof params must == object");let r;if(e===rA)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===iA)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);VF(n)&&(t.ns=n.namespace);const i=[];return In(t,(s,a)=>{i.push(s+"="+a)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(){this.counters_={}}incrementCounter(e,t=1){Vi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return u5(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy={},Cy={};function N_(n){const e=n.toString();return Sy[e]||(Sy[e]=new OF),Sy[e]}function FF(n,e){const t=n.toString();return Cy[t]||(Cy[t]=e()),Cy[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Uc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="start",UF="close",zF="pLPCommand",qF="pRTLPCB",aA="id",lA="pw",cA="ser",$F="cb",WF="seg",HF="ts",KF="d",GF="dframe",uA=1870,dA=30,QF=uA-dA,JF=25e3,YF=3e4;class Zl{constructor(e,t,r,i,s,a,c){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Eh(e),this.stats_=N_(t),this.urlFn=d=>(this.appCheckToken&&(d[jv]=this.appCheckToken),oA(t,iA,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new BF(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(YF)),IF(()=>{if(this.isClosed_)return;this.scriptTagHolder=new A_((...s)=>{const[a,c,d,f,g]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===lE)this.id=c,this.password=d;else if(a===UF)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{const[a,c]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[lE]="t",r[cA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$F]=this.scriptTagHolder.uniqueCallbackIdentifier),r[JN]=C_,this.transportSessionId&&(r[YN]=this.transportSessionId),this.lastSessionId&&(r[tA]=this.lastSessionId),this.applicationId&&(r[nA]=this.applicationId),this.appCheckToken&&(r[jv]=this.appCheckToken),typeof location<"u"&&location.hostname&&eA.test(location.hostname)&&(r[XN]=ZN);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Zl.forceAllow_=!0}static forceDisallow(){Zl.forceDisallow_=!0}static isAvailable(){return Zl.forceAllow_?!0:!Zl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!CF()&&!NF()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=nn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=UI(t),i=GN(r,QF);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[GF]="t",r[aA]=e,r[lA]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=nn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class A_{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=kF(),window[zF+this.uniqueCallbackIdentifier]=e,window[qF+this.uniqueCallbackIdentifier]=t,this.myIFrame=A_.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){Tn("frame writing exception"),c.stack&&Tn(c.stack),Tn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Tn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[aA]=this.myID,e[lA]=this.myPW,e[cA]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+dA+r.length<=uA;){const a=this.pendingSegs.shift();r=r+"&"+WF+i+"="+a.seg+"&"+HF+i+"="+a.ts+"&"+KF+i+"="+a.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(JF)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Tn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=16384,ZF=45e3;let cp=null;typeof MozWebSocket<"u"?cp=MozWebSocket:typeof WebSocket<"u"&&(cp=WebSocket);class si{constructor(e,t,r,i,s,a,c){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Eh(this.connId),this.stats_=N_(t),this.connURL=si.connectionURL_(t,a,c,i,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,i,s){const a={};return a[JN]=C_,typeof location<"u"&&location.hostname&&eA.test(location.hostname)&&(a[XN]=ZN),t&&(a[YN]=t),r&&(a[tA]=r),i&&(a[jv]=i),s&&(a[nA]=s),oA(e,rA,a)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Na.set("previous_websocket_failure",!0);try{let r;KI(),this.mySock=new cp(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){si.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&cp!==null&&!si.forceDisallow_}static previouslyFailed(){return Na.isInMemoryStorage||Na.get("previous_websocket_failure")===!0}markConnectionHealthy(){Na.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=Nd(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=nn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=GN(t,XF);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ZF))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}si.responsesRequiredToBeHealthy=2;si.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{static get ALL_TRANSPORTS(){return[Zl,si]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=si&&si.isAvailable();let r=t&&!si.previouslyFailed();if(e.webSocketOnly&&(t||Jn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[si];else{const i=this.transports_=[];for(const s of zd.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);zd.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}zd.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8=6e4,t8=5e3,n8=10*1024,r8=100*1024,Ny="t",cE="d",i8="s",uE="r",s8="e",dE="o",hE="a",fE="n",mE="p",o8="h";class a8{constructor(e,t,r,i,s,a,c,d,f,g){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=d,this.onKill_=f,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Eh("c:"+this.id+":"),this.transportManager_=new zd(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=yd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>r8?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>n8?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ny in e){const t=e[Ny];t===hE?this.upgradeIfSecondaryHealthy_():t===uE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===dE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Wu("t",e),r=Wu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:mE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:hE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:fE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Wu("t",e),r=Wu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Wu(Ny,e);if(cE in e){const r=e[cE];if(t===o8){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===fE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===i8?this.onConnectionShutdown_(r):t===uE?this.onReset_(r):t===s8?Rv("Server Error: "+r):t===dE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Rv("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),C_!==r&&Jn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),yd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(e8))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(t8))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:mE,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Na.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.allowedEvents_=e,this.listeners_={},ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ce(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up extends fA{static getInstance(){return new up}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ix()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=32,gE=768;class dt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function st(){return new dt("")}function $e(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function No(n){return n.pieces_.length-n.pieceNum_}function yt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new dt(n.pieces_,e)}function P_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function l8(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function qd(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function mA(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new dt(e,0)}function Lt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof dt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new dt(t,0)}function Ke(n){return n.pieceNum_>=n.pieces_.length}function Kn(n,e){const t=$e(n),r=$e(e);if(t===null)return e;if(t===r)return Kn(yt(n),yt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function c8(n,e){const t=qd(n,0),r=qd(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Xa(t[i],r[i]);if(s!==0)return s}return t.length===r.length?0:t.length<r.length?-1:1}function R_(n,e){if(No(n)!==No(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Mr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(No(n)>No(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class u8{constructor(e,t){this.errorPrefix_=t,this.parts_=qd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Vp(this.parts_[r]);pA(this)}}function d8(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Vp(e),pA(n)}function h8(n){const e=n.parts_.pop();n.byteLength_-=Vp(e),n.parts_.length>0&&(n.byteLength_-=1)}function pA(n){if(n.byteLength_>gE)throw new Error(n.errorPrefix_+"has a key path longer than "+gE+" bytes ("+n.byteLength_+").");if(n.parts_.length>pE)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+pE+") or object contains a cycle "+xa(n))}function xa(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_ extends fA{static getInstance(){return new j_}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ce(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=1e3,f8=60*5*1e3,yE=30*1e3,m8=1.3,p8=3e4,g8="server_kill",vE=3;class fs extends hA{constructor(e,t,r,i,s,a,c,d){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=fs.nextPersistentConnectionId_++,this.log_=Eh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hu,this.maxReconnectDelay_=f8,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!KI())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");j_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&up.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const i=++this.requestNumber_,s={r:i,a:e,b:t};this.log_(nn(s)),ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const t=new nh,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const c=a.d;a.s==="ok"?t.resolve(c):t.reject(c)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),t.promise}listen(e,t,r,i){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ce(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const c={onComplete:i,hashFn:t,query:e,tag:r};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},a="q";e.tag&&(s.q=t._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,c=>{const d=c.d,f=c.s;fs.warnOnListenWarnings_(d,t),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",c),f!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(f,d))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Vi(e,"w")){const r=dc(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+t._queryParams.getIndex().toString()+'"',s=t._path.toString();Jn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||T5(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=yE)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=E5(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,i=>{const s=i.s,a=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,t)}sendUnlisten_(e,t,r,i){this.log_("Unlisten on "+e+" for "+t);const s={p:e},a="n";i&&(s.q=r,s.t=i),this.sendRequest(a,s)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,i){const s={p:t,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{i&&setTimeout(()=>{i(a.s,a.d)},Math.floor(0))})}put(e,t,r,i){this.putInternal("p",e,t,r,i)}merge(e,t,r,i){this.putInternal("m",e,t,r,i)}putInternal(e,t,r,i,s){this.initConnection_();const a={p:t,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:i}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,s=>{this.log_(t+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+nn(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Rv("Unrecognized action received from server: "+nn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Hu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>p8&&(this.reconnectDelay_=Hu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*m8)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+fs.nextConnectionId_++,s=this.lastSessionId;let a=!1,c=null;const d=function(){c?c.close():(a=!0,r())},f=function(y){ce(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)};this.realtime_={close:d,sendRequest:f};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,x]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);a?Tn("getToken() completed but was canceled"):(Tn("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=x&&x.token,c=new a8(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,k=>{Jn(k+" ("+this.repoInfo_.toString()+")"),this.interrupt(g8)},s))}catch(y){this.log_("Failed to get token: "+y),a||(this.repoInfo_.nodeAdmin&&Jn(y),d())}}}interrupt(e){Tn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Tn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],tv(this.interruptReasons_)&&(this.reconnectDelay_=Hu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(s=>S_(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const r=new dt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(t),s.delete(t),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,t){Tn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=vE&&(this.reconnectDelay_=yE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Tn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=vE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+WN.replace(/\./g,"-")]=1,Ix()?e["framework.cordova"]=1:HI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=up.getInstance().currentlyOnline();return tv(this.interruptReasons_)&&e}}fs.nextPersistentConnectionId_=0;fs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new We(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new We(kc,e),i=new We(kc,t);return this.compare(r,i)!==0}minPost(){return We.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sm;class gA extends ug{static get __EMPTY_NODE(){return sm}static set __EMPTY_NODE(e){sm=e}compare(e,t){return Xa(e.name,t.name)}isDefinedOn(e){throw Dc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return We.MIN}maxPost(){return new We(Wa,sm)}makePost(e,t){return ce(typeof e=="string","KeyIndex indexValue must always be a string."),new We(e,sm)}toString(){return".key"}}const uc=new gA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=t?r(e.key,t):1,i&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class pn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??pn.RED,this.left=i??or.EMPTY_NODE,this.right=s??or.EMPTY_NODE}copy(e,t,r,i,s){return new pn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i=i.copy(null,t,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return or.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,i;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return or.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}pn.RED=!0;pn.BLACK=!1;class y8{copy(e,t,r,i,s){return this}insert(e,t,r){return new pn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class or{constructor(e,t=or.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new or(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,pn.BLACK,null,null))}remove(e){return new or(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,pn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new om(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new om(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new om(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new om(this.root_,null,this.comparator_,!0,e)}}or.EMPTY_NODE=new y8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(n,e){return Xa(n.name,e.name)}function D_(n,e){return Xa(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dv;function x8(n){Dv=n}const yA=function(n){return typeof n=="number"?"number:"+QN(n):"string:"+n},vA=function(n){if(n.isLeafNode()){const e=n.val();ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Vi(e,".sv"),"Priority must be a string or number.")}else ce(n===Dv||n.isEmpty(),"priority of unexpected type.");ce(n===Dv||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xE;class fn{static set __childrenNodeConstructor(e){xE=e}static get __childrenNodeConstructor(){return xE}constructor(e,t=fn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),vA(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new fn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:fn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ke(e)?this:$e(e)===".priority"?this.priorityNode_:fn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:fn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=$e(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(ce(r!==".priority"||No(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,fn.__childrenNodeConstructor.EMPTY_NODE.updateChild(yt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+yA(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=QN(this.value_):e+=this.value_,this.lazyHash_=KN(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===fn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof fn.__childrenNodeConstructor?-1:(ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,i=fn.VALUE_TYPE_ORDER.indexOf(t),s=fn.VALUE_TYPE_ORDER.indexOf(r);return ce(i>=0,"Unknown leaf type: "+t),ce(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}fn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xA,_A;function _8(n){xA=n}function w8(n){_A=n}class b8 extends ug{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?Xa(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return We.MIN}maxPost(){return new We(Wa,new fn("[PRIORITY-POST]",_A))}makePost(e,t){const r=xA(e);return new We(t,new fn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Mt=new b8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=Math.log(2);class E8{constructor(e){const t=s=>parseInt(Math.log(s)/k8,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const dp=function(n,e,t,r){n.sort(e);const i=function(d,f){const g=f-d;let y,x;if(g===0)return null;if(g===1)return y=n[d],x=t?t(y):y,new pn(x,y.node,pn.BLACK,null,null);{const k=parseInt(g/2,10)+d,E=i(d,k),P=i(k+1,f);return y=n[k],x=t?t(y):y,new pn(x,y.node,pn.BLACK,E,P)}},s=function(d){let f=null,g=null,y=n.length;const x=function(E,P){const S=y-E,N=y;y-=E;const L=i(S+1,N),O=n[S],Q=t?t(O):O;k(new pn(Q,O.node,P,null,L))},k=function(E){f?(f.left=E,f=E):(g=E,f=E)};for(let E=0;E<d.count;++E){const P=d.nextBitIsOne(),S=Math.pow(2,d.count-(E+1));P?x(S,pn.BLACK):(x(S,pn.BLACK),x(S,pn.RED))}return g},a=new E8(n.length),c=s(a);return new or(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ay;const Kl={};class as{static get Default(){return ce(Kl&&Mt,"ChildrenNode.ts has not been loaded"),Ay=Ay||new as({".priority":Kl},{".priority":Mt}),Ay}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=dc(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof or?t:null}hasIndex(e){return Vi(this.indexSet_,e.toString())}addIndex(e,t){ce(e!==uc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(We.Wrap);let a=s.getNext();for(;a;)i=i||e.isDefinedOn(a.node),r.push(a),a=s.getNext();let c;i?c=dp(r,e.getCompare()):c=Kl;const d=e.toString(),f=Object.assign({},this.indexSet_);f[d]=e;const g=Object.assign({},this.indexes_);return g[d]=c,new as(g,f)}addToIndexes(e,t){const r=zm(this.indexes_,(i,s)=>{const a=dc(this.indexSet_,s);if(ce(a,"Missing index implementation for "+s),i===Kl)if(a.isDefinedOn(e.node)){const c=[],d=t.getIterator(We.Wrap);let f=d.getNext();for(;f;)f.name!==e.name&&c.push(f),f=d.getNext();return c.push(e),dp(c,a.getCompare())}else return Kl;else{const c=t.get(e.name);let d=i;return c&&(d=d.remove(new We(e.name,c))),d.insert(e,e.node)}});return new as(r,this.indexSet_)}removeFromIndexes(e,t){const r=zm(this.indexes_,i=>{if(i===Kl)return i;{const s=t.get(e.name);return s?i.remove(new We(e.name,s)):i}});return new as(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku;class je{static get EMPTY_NODE(){return Ku||(Ku=new je(new or(D_),null,as.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&vA(this.priorityNode_),this.children_.isEmpty()&&ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ku}updatePriority(e){return this.children_.isEmpty()?this:new je(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Ku:t}}getChild(e){const t=$e(e);return t===null?this:this.getImmediateChild(t).getChild(yt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ce(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new We(e,t);let i,s;t.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(r,this.children_));const a=i.isEmpty()?Ku:this.priorityNode_;return new je(i,a,s)}}updateChild(e,t){const r=$e(e);if(r===null)return t;{ce($e(e)!==".priority"||No(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(yt(e),t);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,i=0,s=!0;if(this.forEachChild(Mt,(a,c)=>{t[a]=c.val(e),r++,s&&je.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):s=!1}),!e&&s&&i<2*r){const a=[];for(const c in t)a[c]=t[c];return a}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+yA(this.getPriority().val())+":"),this.forEachChild(Mt,(t,r)=>{const i=r.hash();i!==""&&(e+=":"+t+":"+i)}),this.lazyHash_=e===""?"":KN(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new We(e,t));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new We(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new We(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>t(i.name,i.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,We.Wrap);let s=i.peek();for(;s!=null&&t.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,We.Wrap);let s=i.peek();for(;s!=null&&t.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Th?-1:0}withIndex(e){if(e===uc||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new je(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===uc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(Mt),i=t.getIterator(Mt);let s=r.getNext(),a=i.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=i.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===uc?null:this.indexMap_.get(e.toString())}}je.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class T8 extends je{constructor(){super(new or(D_),je.EMPTY_NODE,as.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return je.EMPTY_NODE}isEmpty(){return!1}}const Th=new T8;Object.defineProperties(We,{MIN:{value:new We(kc,je.EMPTY_NODE)},MAX:{value:new We(Wa,Th)}});gA.__EMPTY_NODE=je.EMPTY_NODE;fn.__childrenNodeConstructor=je;x8(Th);w8(Th);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=!0;function tn(n,e=null){if(n===null)return je.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new fn(t,tn(e))}if(!(n instanceof Array)&&I8){const t=[];let r=!1;if(In(n,(a,c)=>{if(a.substring(0,1)!=="."){const d=tn(c);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),t.push(new We(a,d)))}}),t.length===0)return je.EMPTY_NODE;const s=dp(t,v8,a=>a.name,D_);if(r){const a=dp(t,Mt.getCompare());return new je(s,tn(e),new as({".priority":a},{".priority":Mt}))}else return new je(s,tn(e),as.Default)}else{let t=je.EMPTY_NODE;return In(n,(r,i)=>{if(Vi(n,r)&&r.substring(0,1)!=="."){const s=tn(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(tn(e))}}_8(tn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8 extends ug{constructor(e){super(),this.indexPath_=e,ce(!Ke(e)&&$e(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?Xa(e.name,t.name):s}makePost(e,t){const r=tn(e),i=je.EMPTY_NODE.updateChild(this.indexPath_,r);return new We(t,i)}maxPost(){const e=je.EMPTY_NODE.updateChild(this.indexPath_,Th);return new We(Wa,e)}toString(){return qd(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8 extends ug{compare(e,t){const r=e.node.compareTo(t.node);return r===0?Xa(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return We.MIN}maxPost(){return We.MAX}makePost(e,t){const r=tn(e);return new We(t,r)}toString(){return".value"}}const N8=new C8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(n){return{type:"value",snapshotNode:n}}function Ec(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function $d(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Wd(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function A8(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this.index_=e}updateChild(e,t,r,i,s,a){ce(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(t);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?e.hasChild(t)?a.trackChildChange($d(t,c)):ce(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?a.trackChildChange(Ec(t,r)):a.trackChildChange(Wd(t,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Mt,(i,s)=>{t.hasChild(i)||r.trackChildChange($d(i,s))}),t.isLeafNode()||t.forEachChild(Mt,(i,s)=>{if(e.hasChild(i)){const a=e.getImmediateChild(i);a.equals(s)||r.trackChildChange(Wd(i,s,a))}else r.trackChildChange(Ec(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?je.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e){this.indexedFilter_=new L_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Hd.getStartPost_(e),this.endPost_=Hd.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,a){return this.matches(new We(t,r))||(r=je.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,a)}updateFullNode(e,t,r){t.isLeafNode()&&(t=je.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(je.EMPTY_NODE);const s=this;return t.forEachChild(Mt,(a,c)=>{s.matches(new We(a,c))||(i=i.updateImmediateChild(a,je.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Hd(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,a){return this.rangedFilter_.matches(new We(t,r))||(r=je.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,a):this.fullLimitUpdateChild_(e,t,r,s,a)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=je.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=je.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;s.hasNext()&&a<this.limit_;){const c=s.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))i=i.updateImmediateChild(c.name,c.node),a++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(je.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let a=0;for(;s.hasNext();){const c=s.getNext();a<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?a++:i=i.updateImmediateChild(c.name,je.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let a;if(this.reverse_){const y=this.index_.getCompare();a=(x,k)=>y(k,x)}else a=this.index_.getCompare();const c=e;ce(c.numChildren()===this.limit_,"");const d=new We(t,r),f=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),g=this.rangedFilter_.matches(d);if(c.hasChild(t)){const y=c.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,f,this.reverse_);for(;x!=null&&(x.name===t||c.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const k=x==null?1:a(x,d);if(g&&!r.isEmpty()&&k>=0)return s!=null&&s.trackChildChange(Wd(t,r,y)),c.updateImmediateChild(t,r);{s!=null&&s.trackChildChange($d(t,y));const P=c.updateImmediateChild(t,je.EMPTY_NODE);return x!=null&&this.rangedFilter_.matches(x)?(s!=null&&s.trackChildChange(Ec(x.name,x.node)),P.updateImmediateChild(x.name,x.node)):P}}else return r.isEmpty()?e:g&&a(f,d)>=0?(s!=null&&(s.trackChildChange($d(f.name,f.node)),s.trackChildChange(Ec(t,r))),c.updateImmediateChild(t,r).updateImmediateChild(f.name,je.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:kc}hasEnd(){return this.endSet_}getIndexEndValue(){return ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mt}copy(){const e=new M_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function R8(n){return n.loadsAllData()?new L_(n.getIndex()):n.hasLimit()?new P8(n):new Hd(n)}function _E(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Mt?t="$priority":n.index_===N8?t="$value":n.index_===uc?t="$key":(ce(n.index_ instanceof S8,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=nn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=nn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+nn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=nn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+nn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function wE(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Mt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp extends hA{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Eh("p:rest:"),this.listens_={}}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=hp.getListenId_(e,r),c={};this.listens_[a]=c;const d=_E(e._queryParams);this.restRequest_(s+".json",d,(f,g)=>{let y=g;if(f===404&&(y=null,f=null),f===null&&this.onDataUpdate_(s,y,!1,r),dc(this.listens_,a)===c){let x;f?f===401?x="permission_denied":x="rest_error:"+f:x="ok",i(x,null)}})}unlisten(e,t){const r=hp.getListenId_(e,t);delete this.listens_[r]}get(e){const t=_E(e._queryParams),r=e._path.toString(),i=new nh;return this.restRequest_(r+".json",t,(s,a)=>{let c=a;s===404&&(c=null,s=null),s===null?(this.onDataUpdate_(r,c,!1,null),i.resolve(c)):i.reject(new Error(c))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Lc(t);this.log_("Sending REST request for "+a);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+a+" received. status:",c.status,"response:",c.responseText);let d=null;if(c.status>=200&&c.status<300){try{d=Nd(c.responseText)}catch{Jn("Failed to parse JSON response for "+a+": "+c.responseText)}r(null,d)}else c.status!==401&&c.status!==404&&Jn("Got unsuccessful REST response for "+a+" Status: "+c.status),r(c.status);r=null}},c.open("GET",a,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(){this.rootNode_=je.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(){return{value:null,children:new Map}}function bA(n,e,t){if(Ke(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=$e(e);n.children.has(r)||n.children.set(r,fp());const i=n.children.get(r);e=yt(e),bA(i,e,t)}}function Lv(n,e,t){n.value!==null?t(e,n.value):D8(n,(r,i)=>{const s=new dt(e.toString()+"/"+r);Lv(i,s,t)})}function D8(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&In(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=10*1e3,M8=30*1e3,V8=5*60*1e3;class O8{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new L8(e);const r=bE+(M8-bE)*Math.random();yd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;In(e,(i,s)=>{s>0&&Vi(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),yd(this.reportStats_.bind(this),Math.floor(Math.random()*2*V8))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ai;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ai||(ai={}));function V_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function O_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function F_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ai.ACK_USER_WRITE,this.source=V_()}operationForChild(e){if(Ke(this.path)){if(this.affectedTree.value!=null)return ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new dt(e));return new mp(st(),t,this.revert)}}else return ce($e(this.path)===e,"operationForChild called for unrelated child."),new mp(yt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t){this.source=e,this.path=t,this.type=ai.LISTEN_COMPLETE}operationForChild(e){return Ke(this.path)?new Kd(this.source,st()):new Kd(this.source,yt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ai.OVERWRITE}operationForChild(e){return Ke(this.path)?new Ha(this.source,st(),this.snap.getImmediateChild(e)):new Ha(this.source,yt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ai.MERGE}operationForChild(e){if(Ke(this.path)){const t=this.children.subtree(new dt(e));return t.isEmpty()?null:t.value?new Ha(this.source,st(),t.value):new Tc(this.source,st(),t)}else return ce($e(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Tc(this.source,yt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ke(e))return this.isFullyInitialized()&&!this.filtered_;const t=$e(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function B8(n,e,t,r){const i=[],s=[];return e.forEach(a=>{a.type==="child_changed"&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(A8(a.childName,a.snapshotNode))}),Gu(n,i,"child_removed",e,r,t),Gu(n,i,"child_added",e,r,t),Gu(n,i,"child_moved",s,r,t),Gu(n,i,"child_changed",e,r,t),Gu(n,i,"value",e,r,t),i}function Gu(n,e,t,r,i,s){const a=r.filter(c=>c.type===t);a.sort((c,d)=>z8(n,c,d)),a.forEach(c=>{const d=U8(n,c,s);i.forEach(f=>{f.respondsTo(c.type)&&e.push(f.createEvent(d,n.query_))})})}function U8(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function z8(n,e,t){if(e.childName==null||t.childName==null)throw Dc("Should only compare child_ events.");const r=new We(e.childName,e.snapshotNode),i=new We(t.childName,t.snapshotNode);return n.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(n,e){return{eventCache:n,serverCache:e}}function vd(n,e,t,r){return dg(new Ao(e,t,r),n.serverCache)}function kA(n,e,t,r){return dg(n.eventCache,new Ao(e,t,r))}function pp(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ka(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Py;const q8=()=>(Py||(Py=new or(SF)),Py);class gt{static fromObject(e){let t=new gt(null);return In(e,(r,i)=>{t=t.set(new dt(r),i)}),t}constructor(e,t=q8()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:st(),value:this.value};if(Ke(e))return null;{const r=$e(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(yt(e),t);return s!=null?{path:Lt(new dt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ke(e))return this;{const t=$e(e),r=this.children.get(t);return r!==null?r.subtree(yt(e)):new gt(null)}}set(e,t){if(Ke(e))return new gt(t,this.children);{const r=$e(e),s=(this.children.get(r)||new gt(null)).set(yt(e),t),a=this.children.insert(r,s);return new gt(this.value,a)}}remove(e){if(Ke(e))return this.children.isEmpty()?new gt(null):new gt(null,this.children);{const t=$e(e),r=this.children.get(t);if(r){const i=r.remove(yt(e));let s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new gt(null):new gt(this.value,s)}else return this}}get(e){if(Ke(e))return this.value;{const t=$e(e),r=this.children.get(t);return r?r.get(yt(e)):null}}setTree(e,t){if(Ke(e))return t;{const r=$e(e),s=(this.children.get(r)||new gt(null)).setTree(yt(e),t);let a;return s.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,s),new gt(this.value,a)}}fold(e){return this.fold_(st(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Lt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,st(),t)}findOnPath_(e,t,r){const i=this.value?r(t,this.value):!1;if(i)return i;if(Ke(e))return null;{const s=$e(e),a=this.children.get(s);return a?a.findOnPath_(yt(e),Lt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,st(),t)}foreachOnPath_(e,t,r){if(Ke(e))return this;{this.value&&r(t,this.value);const i=$e(e),s=this.children.get(i);return s?s.foreachOnPath_(yt(e),Lt(t,i),r):new gt(null)}}foreach(e){this.foreach_(st(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Lt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.writeTree_=e}static empty(){return new ui(new gt(null))}}function xd(n,e,t){if(Ke(e))return new ui(new gt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const a=Kn(i,e);return s=s.updateChild(a,t),new ui(n.writeTree_.set(i,s))}else{const i=new gt(t),s=n.writeTree_.setTree(e,i);return new ui(s)}}}function Mv(n,e,t){let r=n;return In(t,(i,s)=>{r=xd(r,Lt(e,i),s)}),r}function kE(n,e){if(Ke(e))return ui.empty();{const t=n.writeTree_.setTree(e,new gt(null));return new ui(t)}}function Vv(n,e){return Za(n,e)!=null}function Za(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Kn(t.path,e)):null}function EE(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Mt,(r,i)=>{e.push(new We(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new We(r,i.value))}),e}function bo(n,e){if(Ke(e))return n;{const t=Za(n,e);return t!=null?new ui(new gt(t)):new ui(n.writeTree_.subtree(e))}}function Ov(n){return n.writeTree_.isEmpty()}function Ic(n,e){return EA(st(),n.writeTree_,e)}function EA(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ce(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=EA(Lt(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Lt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(n,e){return CA(e,n)}function $8(n,e,t,r,i){ce(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=xd(n.visibleWrites,e,t)),n.lastWriteId=r}function W8(n,e,t,r){ce(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Mv(n.visibleWrites,e,t),n.lastWriteId=r}function H8(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function K8(n,e){const t=n.allWrites.findIndex(c=>c.writeId===e);ce(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,a=n.allWrites.length-1;for(;i&&a>=0;){const c=n.allWrites[a];c.visible&&(a>=t&&G8(c,r.path)?i=!1:Mr(r.path,c.path)&&(s=!0)),a--}if(i){if(s)return Q8(n),!0;if(r.snap)n.visibleWrites=kE(n.visibleWrites,r.path);else{const c=r.children;In(c,d=>{n.visibleWrites=kE(n.visibleWrites,Lt(r.path,d))})}return!0}else return!1}function G8(n,e){if(n.snap)return Mr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Mr(Lt(n.path,t),e))return!0;return!1}function Q8(n){n.visibleWrites=TA(n.allWrites,J8,st()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function J8(n){return n.visible}function TA(n,e,t){let r=ui.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const a=s.path;let c;if(s.snap)Mr(t,a)?(c=Kn(t,a),r=xd(r,c,s.snap)):Mr(a,t)&&(c=Kn(a,t),r=xd(r,st(),s.snap.getChild(c)));else if(s.children){if(Mr(t,a))c=Kn(t,a),r=Mv(r,c,s.children);else if(Mr(a,t))if(c=Kn(a,t),Ke(c))r=Mv(r,st(),s.children);else{const d=dc(s.children,$e(c));if(d){const f=d.getChild(yt(c));r=xd(r,st(),f)}}}else throw Dc("WriteRecord should have .snap or .children")}}return r}function IA(n,e,t,r,i){if(!r&&!i){const s=Za(n.visibleWrites,e);if(s!=null)return s;{const a=bo(n.visibleWrites,e);if(Ov(a))return t;if(t==null&&!Vv(a,st()))return null;{const c=t||je.EMPTY_NODE;return Ic(a,c)}}}else{const s=bo(n.visibleWrites,e);if(!i&&Ov(s))return t;if(!i&&t==null&&!Vv(s,st()))return null;{const a=function(f){return(f.visible||i)&&(!r||!~r.indexOf(f.writeId))&&(Mr(f.path,e)||Mr(e,f.path))},c=TA(n.allWrites,a,e),d=t||je.EMPTY_NODE;return Ic(c,d)}}}function Y8(n,e,t){let r=je.EMPTY_NODE;const i=Za(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Mt,(s,a)=>{r=r.updateImmediateChild(s,a)}),r;if(t){const s=bo(n.visibleWrites,e);return t.forEachChild(Mt,(a,c)=>{const d=Ic(bo(s,new dt(a)),c);r=r.updateImmediateChild(a,d)}),EE(s).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const s=bo(n.visibleWrites,e);return EE(s).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function X8(n,e,t,r,i){ce(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Lt(e,t);if(Vv(n.visibleWrites,s))return null;{const a=bo(n.visibleWrites,s);return Ov(a)?i.getChild(t):Ic(a,i.getChild(t))}}function Z8(n,e,t,r){const i=Lt(e,t),s=Za(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){const a=bo(n.visibleWrites,i);return Ic(a,r.getNode().getImmediateChild(t))}else return null}function e9(n,e){return Za(n.visibleWrites,e)}function t9(n,e,t,r,i,s,a){let c;const d=bo(n.visibleWrites,e),f=Za(d,st());if(f!=null)c=f;else if(t!=null)c=Ic(d,t);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){const g=[],y=a.getCompare(),x=s?c.getReverseIteratorFrom(r,a):c.getIteratorFrom(r,a);let k=x.getNext();for(;k&&g.length<i;)y(k,r)!==0&&g.push(k),k=x.getNext();return g}else return[]}function n9(){return{visibleWrites:ui.empty(),allWrites:[],lastWriteId:-1}}function gp(n,e,t,r){return IA(n.writeTree,n.treePath,e,t,r)}function B_(n,e){return Y8(n.writeTree,n.treePath,e)}function TE(n,e,t,r){return X8(n.writeTree,n.treePath,e,t,r)}function yp(n,e){return e9(n.writeTree,Lt(n.treePath,e))}function r9(n,e,t,r,i,s){return t9(n.writeTree,n.treePath,e,t,r,i,s)}function U_(n,e,t){return Z8(n.writeTree,n.treePath,e,t)}function SA(n,e){return CA(Lt(n.treePath,e),n.writeTree)}function CA(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;ce(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ce(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,Wd(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,$d(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,Ec(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,Wd(r,e.snapshotNode,i.oldSnap));else throw Dc("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const NA=new s9;class z_{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Ao(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return U_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ka(this.viewCache_),s=r9(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9(n){return{filter:n}}function a9(n,e){ce(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ce(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function l9(n,e,t,r,i){const s=new i9;let a,c;if(t.type===ai.OVERWRITE){const f=t;f.source.fromUser?a=Fv(n,e,f.path,f.snap,r,i,s):(ce(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.serverCache.isFiltered()&&!Ke(f.path),a=vp(n,e,f.path,f.snap,r,i,c,s))}else if(t.type===ai.MERGE){const f=t;f.source.fromUser?a=u9(n,e,f.path,f.children,r,i,s):(ce(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.serverCache.isFiltered(),a=Bv(n,e,f.path,f.children,r,i,c,s))}else if(t.type===ai.ACK_USER_WRITE){const f=t;f.revert?a=f9(n,e,f.path,r,i,s):a=d9(n,e,f.path,f.affectedTree,r,i,s)}else if(t.type===ai.LISTEN_COMPLETE)a=h9(n,e,t.path,r,s);else throw Dc("Unknown operation type: "+t.type);const d=s.getChanges();return c9(e,a,d),{viewCache:a,changes:d}}function c9(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=pp(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(wA(pp(e)))}}function AA(n,e,t,r,i,s){const a=e.eventCache;if(yp(r,t)!=null)return e;{let c,d;if(Ke(t))if(ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=Ka(e),g=f instanceof je?f:je.EMPTY_NODE,y=B_(r,g);c=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const f=gp(r,Ka(e));c=n.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const f=$e(t);if(f===".priority"){ce(No(t)===1,"Can't have a priority with additional path components");const g=a.getNode();d=e.serverCache.getNode();const y=TE(r,t,g,d);y!=null?c=n.filter.updatePriority(g,y):c=a.getNode()}else{const g=yt(t);let y;if(a.isCompleteForChild(f)){d=e.serverCache.getNode();const x=TE(r,t,a.getNode(),d);x!=null?y=a.getNode().getImmediateChild(f).updateChild(g,x):y=a.getNode().getImmediateChild(f)}else y=U_(r,f,e.serverCache);y!=null?c=n.filter.updateChild(a.getNode(),f,y,g,i,s):c=a.getNode()}}return vd(e,c,a.isFullyInitialized()||Ke(t),n.filter.filtersNodes())}}function vp(n,e,t,r,i,s,a,c){const d=e.serverCache;let f;const g=a?n.filter:n.filter.getIndexedFilter();if(Ke(t))f=g.updateFullNode(d.getNode(),r,null);else if(g.filtersNodes()&&!d.isFiltered()){const k=d.getNode().updateChild(t,r);f=g.updateFullNode(d.getNode(),k,null)}else{const k=$e(t);if(!d.isCompleteForPath(t)&&No(t)>1)return e;const E=yt(t),S=d.getNode().getImmediateChild(k).updateChild(E,r);k===".priority"?f=g.updatePriority(d.getNode(),S):f=g.updateChild(d.getNode(),k,S,E,NA,null)}const y=kA(e,f,d.isFullyInitialized()||Ke(t),g.filtersNodes()),x=new z_(i,y,s);return AA(n,y,t,i,x,c)}function Fv(n,e,t,r,i,s,a){const c=e.eventCache;let d,f;const g=new z_(i,e,s);if(Ke(t))f=n.filter.updateFullNode(e.eventCache.getNode(),r,a),d=vd(e,f,!0,n.filter.filtersNodes());else{const y=$e(t);if(y===".priority")f=n.filter.updatePriority(e.eventCache.getNode(),r),d=vd(e,f,c.isFullyInitialized(),c.isFiltered());else{const x=yt(t),k=c.getNode().getImmediateChild(y);let E;if(Ke(x))E=r;else{const P=g.getCompleteChild(y);P!=null?P_(x)===".priority"&&P.getChild(mA(x)).isEmpty()?E=P:E=P.updateChild(x,r):E=je.EMPTY_NODE}if(k.equals(E))d=e;else{const P=n.filter.updateChild(c.getNode(),y,E,x,g,a);d=vd(e,P,c.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function IE(n,e){return n.eventCache.isCompleteForChild(e)}function u9(n,e,t,r,i,s,a){let c=e;return r.foreach((d,f)=>{const g=Lt(t,d);IE(e,$e(g))&&(c=Fv(n,c,g,f,i,s,a))}),r.foreach((d,f)=>{const g=Lt(t,d);IE(e,$e(g))||(c=Fv(n,c,g,f,i,s,a))}),c}function SE(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Bv(n,e,t,r,i,s,a,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,f;Ke(t)?f=r:f=new gt(null).setTree(t,r);const g=e.serverCache.getNode();return f.children.inorderTraversal((y,x)=>{if(g.hasChild(y)){const k=e.serverCache.getNode().getImmediateChild(y),E=SE(n,k,x);d=vp(n,d,new dt(y),E,i,s,a,c)}}),f.children.inorderTraversal((y,x)=>{const k=!e.serverCache.isCompleteForChild(y)&&x.value===null;if(!g.hasChild(y)&&!k){const E=e.serverCache.getNode().getImmediateChild(y),P=SE(n,E,x);d=vp(n,d,new dt(y),P,i,s,a,c)}}),d}function d9(n,e,t,r,i,s,a){if(yp(i,t)!=null)return e;const c=e.serverCache.isFiltered(),d=e.serverCache;if(r.value!=null){if(Ke(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return vp(n,e,t,d.getNode().getChild(t),i,s,c,a);if(Ke(t)){let f=new gt(null);return d.getNode().forEachChild(uc,(g,y)=>{f=f.set(new dt(g),y)}),Bv(n,e,t,f,i,s,c,a)}else return e}else{let f=new gt(null);return r.foreach((g,y)=>{const x=Lt(t,g);d.isCompleteForPath(x)&&(f=f.set(g,d.getNode().getChild(x)))}),Bv(n,e,t,f,i,s,c,a)}}function h9(n,e,t,r,i){const s=e.serverCache,a=kA(e,s.getNode(),s.isFullyInitialized()||Ke(t),s.isFiltered());return AA(n,a,t,r,NA,i)}function f9(n,e,t,r,i,s){let a;if(yp(r,t)!=null)return e;{const c=new z_(r,e,i),d=e.eventCache.getNode();let f;if(Ke(t)||$e(t)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=gp(r,Ka(e));else{const y=e.serverCache.getNode();ce(y instanceof je,"serverChildren would be complete if leaf node"),g=B_(r,y)}g=g,f=n.filter.updateFullNode(d,g,s)}else{const g=$e(t);let y=U_(r,g,e.serverCache);y==null&&e.serverCache.isCompleteForChild(g)&&(y=d.getImmediateChild(g)),y!=null?f=n.filter.updateChild(d,g,y,yt(t),c,s):e.eventCache.getNode().hasChild(g)?f=n.filter.updateChild(d,g,je.EMPTY_NODE,yt(t),c,s):f=d,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=gp(r,Ka(e)),a.isLeafNode()&&(f=n.filter.updateFullNode(f,a,s)))}return a=e.serverCache.isFullyInitialized()||yp(r,st())!=null,vd(e,f,a,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new L_(r.getIndex()),s=R8(r);this.processor_=o9(s);const a=t.serverCache,c=t.eventCache,d=i.updateFullNode(je.EMPTY_NODE,a.getNode(),null),f=s.updateFullNode(je.EMPTY_NODE,c.getNode(),null),g=new Ao(d,a.isFullyInitialized(),i.filtersNodes()),y=new Ao(f,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=dg(y,g),this.eventGenerator_=new F8(this.query_)}get query(){return this.query_}}function p9(n){return n.viewCache_.serverCache.getNode()}function g9(n){return pp(n.viewCache_)}function y9(n,e){const t=Ka(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ke(e)&&!t.getImmediateChild($e(e)).isEmpty())?t.getChild(e):null}function CE(n){return n.eventRegistrations_.length===0}function v9(n,e){n.eventRegistrations_.push(e)}function NE(n,e,t){const r=[];if(t){ce(e==null,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const a=s.createCancelEvent(t,i);a&&r.push(a)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const a=n.eventRegistrations_[s];if(!a.matches(e))i.push(a);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function AE(n,e,t,r){e.type===ai.MERGE&&e.source.queryId!==null&&(ce(Ka(n.viewCache_),"We should always have a full cache before handling merges"),ce(pp(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=l9(n.processor_,i,e,t,r);return a9(n.processor_,s.viewCache),ce(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,PA(n,s.changes,s.viewCache.eventCache.getNode(),null)}function x9(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Mt,(s,a)=>{r.push(Ec(s,a))}),t.isFullyInitialized()&&r.push(wA(t.getNode())),PA(n,r,t.getNode(),e)}function PA(n,e,t,r){const i=r?[r]:n.eventRegistrations_;return B8(n.eventGenerator_,e,t,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xp;class RA{constructor(){this.views=new Map}}function _9(n){ce(!xp,"__referenceConstructor has already been defined"),xp=n}function w9(){return ce(xp,"Reference.ts has not been loaded"),xp}function b9(n){return n.views.size===0}function q_(n,e,t,r){const i=e.source.queryId;if(i!==null){const s=n.views.get(i);return ce(s!=null,"SyncTree gave us an op for an invalid query."),AE(s,e,t,r)}else{let s=[];for(const a of n.views.values())s=s.concat(AE(a,e,t,r));return s}}function jA(n,e,t,r,i){const s=e._queryIdentifier,a=n.views.get(s);if(!a){let c=gp(t,i?r:null),d=!1;c?d=!0:r instanceof je?(c=B_(t,r),d=!1):(c=je.EMPTY_NODE,d=!1);const f=dg(new Ao(c,d,!1),new Ao(r,i,!1));return new m9(e,f)}return a}function k9(n,e,t,r,i,s){const a=jA(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,a),v9(a,t),x9(a,t)}function E9(n,e,t,r){const i=e._queryIdentifier,s=[];let a=[];const c=Po(n);if(i==="default")for(const[d,f]of n.views.entries())a=a.concat(NE(f,t,r)),CE(f)&&(n.views.delete(d),f.query._queryParams.loadsAllData()||s.push(f.query));else{const d=n.views.get(i);d&&(a=a.concat(NE(d,t,r)),CE(d)&&(n.views.delete(i),d.query._queryParams.loadsAllData()||s.push(d.query)))}return c&&!Po(n)&&s.push(new(w9())(e._repo,e._path)),{removed:s,events:a}}function DA(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ko(n,e){let t=null;for(const r of n.views.values())t=t||y9(r,e);return t}function LA(n,e){if(e._queryParams.loadsAllData())return fg(n);{const r=e._queryIdentifier;return n.views.get(r)}}function MA(n,e){return LA(n,e)!=null}function Po(n){return fg(n)!=null}function fg(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _p;function T9(n){ce(!_p,"__referenceConstructor has already been defined"),_p=n}function I9(){return ce(_p,"Reference.ts has not been loaded"),_p}let S9=1;class PE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new gt(null),this.pendingWriteTree_=n9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function VA(n,e,t,r,i){return $8(n.pendingWriteTree_,e,t,r,i),i?zc(n,new Ha(V_(),e,t)):[]}function C9(n,e,t,r){W8(n.pendingWriteTree_,e,t,r);const i=gt.fromObject(t);return zc(n,new Tc(V_(),e,i))}function po(n,e,t=!1){const r=H8(n.pendingWriteTree_,e);if(K8(n.pendingWriteTree_,e)){let s=new gt(null);return r.snap!=null?s=s.set(st(),!0):In(r.children,a=>{s=s.set(new dt(a),!0)}),zc(n,new mp(r.path,s,t))}else return[]}function Ih(n,e,t){return zc(n,new Ha(O_(),e,t))}function N9(n,e,t){const r=gt.fromObject(t);return zc(n,new Tc(O_(),e,r))}function A9(n,e){return zc(n,new Kd(O_(),e))}function P9(n,e,t){const r=W_(n,t);if(r){const i=H_(r),s=i.path,a=i.queryId,c=Kn(s,e),d=new Kd(F_(a),c);return K_(n,s,d)}else return[]}function wp(n,e,t,r,i=!1){const s=e._path,a=n.syncPointTree_.get(s);let c=[];if(a&&(e._queryIdentifier==="default"||MA(a,e))){const d=E9(a,e,t,r);b9(a)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const f=d.removed;if(c=d.events,!i){const g=f.findIndex(x=>x._queryParams.loadsAllData())!==-1,y=n.syncPointTree_.findOnPath(s,(x,k)=>Po(k));if(g&&!y){const x=n.syncPointTree_.subtree(s);if(!x.isEmpty()){const k=D9(x);for(let E=0;E<k.length;++E){const P=k[E],S=P.query,N=UA(n,P);n.listenProvider_.startListening(_d(S),Gd(n,S),N.hashFn,N.onComplete)}}}!y&&f.length>0&&!r&&(g?n.listenProvider_.stopListening(_d(e),null):f.forEach(x=>{const k=n.queryToTagMap.get(mg(x));n.listenProvider_.stopListening(_d(x),k)}))}L9(n,f)}return c}function OA(n,e,t,r){const i=W_(n,r);if(i!=null){const s=H_(i),a=s.path,c=s.queryId,d=Kn(a,e),f=new Ha(F_(c),d,t);return K_(n,a,f)}else return[]}function R9(n,e,t,r){const i=W_(n,r);if(i){const s=H_(i),a=s.path,c=s.queryId,d=Kn(a,e),f=gt.fromObject(t),g=new Tc(F_(c),d,f);return K_(n,a,g)}else return[]}function Uv(n,e,t,r=!1){const i=e._path;let s=null,a=!1;n.syncPointTree_.foreachOnPath(i,(x,k)=>{const E=Kn(x,i);s=s||ko(k,E),a=a||Po(k)});let c=n.syncPointTree_.get(i);c?(a=a||Po(c),s=s||ko(c,st())):(c=new RA,n.syncPointTree_=n.syncPointTree_.set(i,c));let d;s!=null?d=!0:(d=!1,s=je.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((k,E)=>{const P=ko(E,st());P&&(s=s.updateImmediateChild(k,P))}));const f=MA(c,e);if(!f&&!e._queryParams.loadsAllData()){const x=mg(e);ce(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const k=M9();n.queryToTagMap.set(x,k),n.tagToQueryMap.set(k,x)}const g=hg(n.pendingWriteTree_,i);let y=k9(c,e,t,g,s,d);if(!f&&!a&&!r){const x=LA(c,e);y=y.concat(V9(n,e,x))}return y}function $_(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(a,c)=>{const d=Kn(a,e),f=ko(c,d);if(f)return f});return IA(i,e,s,t,!0)}function j9(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(f,g)=>{const y=Kn(f,t);r=r||ko(g,y)});let i=n.syncPointTree_.get(t);i?r=r||ko(i,st()):(i=new RA,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=r!=null,a=s?new Ao(r,!0,!1):null,c=hg(n.pendingWriteTree_,e._path),d=jA(i,e,c,s?a.getNode():je.EMPTY_NODE,s);return g9(d)}function zc(n,e){return FA(e,n.syncPointTree_,null,hg(n.pendingWriteTree_,st()))}function FA(n,e,t,r){if(Ke(n.path))return BA(n,e,t,r);{const i=e.get(st());t==null&&i!=null&&(t=ko(i,st()));let s=[];const a=$e(n.path),c=n.operationForChild(a),d=e.children.get(a);if(d&&c){const f=t?t.getImmediateChild(a):null,g=SA(r,a);s=s.concat(FA(c,d,f,g))}return i&&(s=s.concat(q_(i,n,r,t))),s}}function BA(n,e,t,r){const i=e.get(st());t==null&&i!=null&&(t=ko(i,st()));let s=[];return e.children.inorderTraversal((a,c)=>{const d=t?t.getImmediateChild(a):null,f=SA(r,a),g=n.operationForChild(a);g&&(s=s.concat(BA(g,c,d,f)))}),i&&(s=s.concat(q_(i,n,r,t))),s}function UA(n,e){const t=e.query,r=Gd(n,t);return{hashFn:()=>(p9(e)||je.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?P9(n,t._path,r):A9(n,t._path);{const s=AF(i,t);return wp(n,t,null,s)}}}}function Gd(n,e){const t=mg(e);return n.queryToTagMap.get(t)}function mg(n){return n._path.toString()+"$"+n._queryIdentifier}function W_(n,e){return n.tagToQueryMap.get(e)}function H_(n){const e=n.indexOf("$");return ce(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new dt(n.substr(0,e))}}function K_(n,e,t){const r=n.syncPointTree_.get(e);ce(r,"Missing sync point for query tag that we're tracking");const i=hg(n.pendingWriteTree_,e);return q_(r,t,i,null)}function D9(n){return n.fold((e,t,r)=>{if(t&&Po(t))return[fg(t)];{let i=[];return t&&(i=DA(t)),In(r,(s,a)=>{i=i.concat(a)}),i}})}function _d(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(I9())(n._repo,n._path):n}function L9(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=mg(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function M9(){return S9++}function V9(n,e,t){const r=e._path,i=Gd(n,e),s=UA(n,t),a=n.listenProvider_.startListening(_d(e),i,s.hashFn,s.onComplete),c=n.syncPointTree_.subtree(r);if(i)ce(!Po(c.value),"If we're adding a query, it shouldn't be shadowed");else{const d=c.fold((f,g,y)=>{if(!Ke(f)&&g&&Po(g))return[fg(g).query];{let x=[];return g&&(x=x.concat(DA(g).map(k=>k.query))),In(y,(k,E)=>{x=x.concat(E)}),x}});for(let f=0;f<d.length;++f){const g=d[f];n.listenProvider_.stopListening(_d(g),Gd(n,g))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new G_(t)}node(){return this.node_}}class Q_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Lt(this.path_,e);return new Q_(this.syncTree_,t)}node(){return $_(this.syncTree_,this.path_)}}const O9=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},RE=function(n,e,t){if(!n||typeof n!="object")return n;if(ce(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return F9(n[".sv"],e,t);if(typeof n[".sv"]=="object")return B9(n[".sv"],e);ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},F9=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ce(!1,"Unexpected server value: "+n)}},B9=function(n,e,t){n.hasOwnProperty("increment")||ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&ce(!1,"Unexpected increment value: "+r);const i=e.node();if(ce(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const a=i.getValue();return typeof a!="number"?r:a+r},zA=function(n,e,t,r){return J_(e,new Q_(t,n),r)},qA=function(n,e,t){return J_(n,new G_(e),t)};function J_(n,e,t){const r=n.getPriority().val(),i=RE(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const a=n,c=RE(a.getValue(),e,t);return c!==a.getValue()||i!==a.getPriority().val()?new fn(c,tn(i)):n}else{const a=n;return s=a,i!==a.getPriority().val()&&(s=s.updatePriority(new fn(i))),a.forEachChild(Mt,(c,d)=>{const f=J_(d,e.getImmediateChild(c),t);f!==d&&(s=s.updateImmediateChild(c,f))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function X_(n,e){let t=e instanceof dt?e:new dt(e),r=n,i=$e(t);for(;i!==null;){const s=dc(r.node.children,i)||{children:{},childCount:0};r=new Y_(i,r,s),t=yt(t),i=$e(t)}return r}function qc(n){return n.node.value}function $A(n,e){n.node.value=e,zv(n)}function WA(n){return n.node.childCount>0}function U9(n){return qc(n)===void 0&&!WA(n)}function pg(n,e){In(n.node.children,(t,r)=>{e(new Y_(t,n,r))})}function HA(n,e,t,r){t&&!r&&e(n),pg(n,i=>{HA(i,e,!0,r)}),t&&r&&e(n)}function z9(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Sh(n){return new dt(n.parent===null?n.name:Sh(n.parent)+"/"+n.name)}function zv(n){n.parent!==null&&q9(n.parent,n.name,n)}function q9(n,e,t){const r=U9(t),i=Vi(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,zv(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,zv(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=/[\[\].#$\/\u0000-\u001F\u007F]/,W9=/[\[\].#$\u0000-\u001F\u007F]/,Ry=10*1024*1024,Z_=function(n){return typeof n=="string"&&n.length!==0&&!$9.test(n)},KA=function(n){return typeof n=="string"&&n.length!==0&&!W9.test(n)},H9=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),KA(n)},K9=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!I_(n)||n&&typeof n=="object"&&Vi(n,".sv")},GA=function(n,e,t,r){r&&e===void 0||gg(Mp(n,"value"),e,t)},gg=function(n,e,t){const r=t instanceof dt?new u8(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+xa(r));if(typeof e=="function")throw new Error(n+"contains a function "+xa(r)+" with contents = "+e.toString());if(I_(e))throw new Error(n+"contains "+e.toString()+" "+xa(r));if(typeof e=="string"&&e.length>Ry/3&&Vp(e)>Ry)throw new Error(n+"contains a string greater than "+Ry+" utf8 bytes "+xa(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(In(e,(a,c)=>{if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!Z_(a)))throw new Error(n+" contains an invalid key ("+a+") "+xa(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);d8(r,a),gg(n,c,r),h8(r)}),i&&s)throw new Error(n+' contains ".value" child '+xa(r)+" in addition to actual children.")}},G9=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=qd(r);for(let a=0;a<s.length;a++)if(!(s[a]===".priority"&&a===s.length-1)){if(!Z_(s[a]))throw new Error(n+"contains an invalid key ("+s[a]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(c8);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&Mr(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Q9=function(n,e,t,r){const i=Mp(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];In(e,(a,c)=>{const d=new dt(a);if(gg(i,c,Lt(t,d)),P_(d)===".priority"&&!K9(c))throw new Error(i+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(d)}),G9(i,s)},QA=function(n,e,t,r){if(!KA(t))throw new Error(Mp(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},J9=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),QA(n,e,t)},ew=function(n,e){if($e(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Y9=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Z_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!H9(t))throw new Error(Mp(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yg(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();t!==null&&!R_(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function JA(n,e,t){yg(n,t),YA(n,r=>R_(r,e))}function Ur(n,e,t){yg(n,t),YA(n,r=>Mr(r,e)||Mr(e,r))}function YA(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];if(i){const s=i.path;e(s)?(Z9(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function Z9(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();gd&&Tn("event: "+t.toString()),Uc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7="repo_interrupt",t7=25;class n7{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new X9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fp(),this.transactionQueueTree_=new Y_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function r7(n,e,t){if(n.stats_=N_(n.repoInfo_),n.forceRestClient_||DF())n.server_=new hp(n.repoInfo_,(r,i,s,a)=>{jE(n,r,i,s,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>DE(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{nn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new fs(n.repoInfo_,e,(r,i,s,a)=>{jE(n,r,i,s,a)},r=>{DE(n,r)},r=>{i7(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=FF(n.repoInfo_,()=>new O8(n.stats_,n.server_)),n.infoData_=new j8,n.infoSyncTree_=new PE({startListening:(r,i,s,a)=>{let c=[];const d=n.infoData_.getNode(r._path);return d.isEmpty()||(c=Ih(n.infoSyncTree_,r._path,d),setTimeout(()=>{a("ok")},0)),c},stopListening:()=>{}}),tw(n,"connected",!1),n.serverSyncTree_=new PE({startListening:(r,i,s,a)=>(n.server_.listen(r,s,i,(c,d)=>{const f=a(c,d);Ur(n.eventQueue_,r._path,f)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function XA(n){const t=n.infoData_.getNode(new dt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function vg(n){return O9({timestamp:XA(n)})}function jE(n,e,t,r,i){n.dataUpdateCount++;const s=new dt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let a=[];if(i)if(r){const d=zm(t,f=>tn(f));a=R9(n.serverSyncTree_,s,d,i)}else{const d=tn(t);a=OA(n.serverSyncTree_,s,d,i)}else if(r){const d=zm(t,f=>tn(f));a=N9(n.serverSyncTree_,s,d)}else{const d=tn(t);a=Ih(n.serverSyncTree_,s,d)}let c=s;a.length>0&&(c=Sc(n,s)),Ur(n.eventQueue_,c,a)}function DE(n,e){tw(n,"connected",e),e===!1&&l7(n)}function i7(n,e){In(e,(t,r)=>{tw(n,t,r)})}function tw(n,e,t){const r=new dt("/.info/"+e),i=tn(t);n.infoData_.updateSnapshot(r,i);const s=Ih(n.infoSyncTree_,r,i);Ur(n.eventQueue_,r,s)}function nw(n){return n.nextWriteId_++}function s7(n,e,t){const r=j9(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{const s=tn(i).withIndex(e._queryParams.getIndex());Uv(n.serverSyncTree_,e,t,!0);let a;if(e._queryParams.loadsAllData())a=Ih(n.serverSyncTree_,e._path,s);else{const c=Gd(n.serverSyncTree_,e);a=OA(n.serverSyncTree_,e._path,s,c)}return Ur(n.eventQueue_,e._path,a),wp(n.serverSyncTree_,e,t,null,!0),s},i=>(Ch(n,"get for query "+nn(e)+" failed: "+i),Promise.reject(new Error(i))))}function o7(n,e,t,r,i){Ch(n,"set",{path:e.toString(),value:t,priority:r});const s=vg(n),a=tn(t,r),c=$_(n.serverSyncTree_,e),d=qA(a,c,s),f=nw(n),g=VA(n.serverSyncTree_,e,d,f,!0);yg(n.eventQueue_,g),n.server_.put(e.toString(),a.val(!0),(x,k)=>{const E=x==="ok";E||Jn("set at "+e+" failed: "+x);const P=po(n.serverSyncTree_,f,!E);Ur(n.eventQueue_,e,P),qv(n,i,x,k)});const y=iw(n,e);Sc(n,y),Ur(n.eventQueue_,y,[])}function a7(n,e,t,r){Ch(n,"update",{path:e.toString(),value:t});let i=!0;const s=vg(n),a={};if(In(t,(c,d)=>{i=!1,a[c]=zA(Lt(e,c),tn(d),n.serverSyncTree_,s)}),i)Tn("update() called with empty data.  Don't do anything."),qv(n,r,"ok",void 0);else{const c=nw(n),d=C9(n.serverSyncTree_,e,a,c);yg(n.eventQueue_,d),n.server_.merge(e.toString(),t,(f,g)=>{const y=f==="ok";y||Jn("update at "+e+" failed: "+f);const x=po(n.serverSyncTree_,c,!y),k=x.length>0?Sc(n,e):e;Ur(n.eventQueue_,k,x),qv(n,r,f,g)}),In(t,f=>{const g=iw(n,Lt(e,f));Sc(n,g)}),Ur(n.eventQueue_,e,[])}}function l7(n){Ch(n,"onDisconnectEvents");const e=vg(n),t=fp();Lv(n.onDisconnect_,st(),(i,s)=>{const a=zA(i,s,n.serverSyncTree_,e);bA(t,i,a)});let r=[];Lv(t,st(),(i,s)=>{r=r.concat(Ih(n.serverSyncTree_,i,s));const a=iw(n,i);Sc(n,a)}),n.onDisconnect_=fp(),Ur(n.eventQueue_,st(),r)}function c7(n,e,t){let r;$e(e._path)===".info"?r=Uv(n.infoSyncTree_,e,t):r=Uv(n.serverSyncTree_,e,t),JA(n.eventQueue_,e._path,r)}function ZA(n,e,t){let r;$e(e._path)===".info"?r=wp(n.infoSyncTree_,e,t):r=wp(n.serverSyncTree_,e,t),JA(n.eventQueue_,e._path,r)}function u7(n){n.persistentConnection_&&n.persistentConnection_.interrupt(e7)}function Ch(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Tn(t,...e)}function qv(n,e,t,r){e&&Uc(()=>{if(t==="ok")e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const a=new Error(s);a.code=i,e(a)}})}function eP(n,e,t){return $_(n.serverSyncTree_,e,t)||je.EMPTY_NODE}function rw(n,e=n.transactionQueueTree_){if(e||xg(n,e),qc(e)){const t=nP(n,e);ce(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&d7(n,Sh(e),t)}else WA(e)&&pg(e,t=>{rw(n,t)})}function d7(n,e,t){const r=t.map(f=>f.currentWriteId),i=eP(n,e,r);let s=i;const a=i.hash();for(let f=0;f<t.length;f++){const g=t[f];ce(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const y=Kn(e,g.path);s=s.updateChild(y,g.currentOutputSnapshotRaw)}const c=s.val(!0),d=e;n.server_.put(d.toString(),c,f=>{Ch(n,"transaction put response",{path:d.toString(),status:f});let g=[];if(f==="ok"){const y=[];for(let x=0;x<t.length;x++)t[x].status=2,g=g.concat(po(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&y.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();xg(n,X_(n.transactionQueueTree_,e)),rw(n,n.transactionQueueTree_),Ur(n.eventQueue_,e,g);for(let x=0;x<y.length;x++)Uc(y[x])}else{if(f==="datastale")for(let y=0;y<t.length;y++)t[y].status===3?t[y].status=4:t[y].status=0;else{Jn("transaction at "+d.toString()+" failed: "+f);for(let y=0;y<t.length;y++)t[y].status=4,t[y].abortReason=f}Sc(n,e)}},a)}function Sc(n,e){const t=tP(n,e),r=Sh(t),i=nP(n,t);return h7(n,i,r),r}function h7(n,e,t){if(e.length===0)return;const r=[];let i=[];const a=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const d=e[c],f=Kn(t,d.path);let g=!1,y;if(ce(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)g=!0,y=d.abortReason,i=i.concat(po(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=t7)g=!0,y="maxretry",i=i.concat(po(n.serverSyncTree_,d.currentWriteId,!0));else{const x=eP(n,d.path,a);d.currentInputSnapshot=x;const k=e[c].update(x.val());if(k!==void 0){gg("transaction failed: Data returned ",k,d.path);let E=tn(k);typeof k=="object"&&k!=null&&Vi(k,".priority")||(E=E.updatePriority(x.getPriority()));const S=d.currentWriteId,N=vg(n),L=qA(E,x,N);d.currentOutputSnapshotRaw=E,d.currentOutputSnapshotResolved=L,d.currentWriteId=nw(n),a.splice(a.indexOf(S),1),i=i.concat(VA(n.serverSyncTree_,d.path,L,d.currentWriteId,d.applyLocally)),i=i.concat(po(n.serverSyncTree_,S,!0))}else g=!0,y="nodata",i=i.concat(po(n.serverSyncTree_,d.currentWriteId,!0))}Ur(n.eventQueue_,t,i),i=[],g&&(e[c].status=2,function(x){setTimeout(x,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(y==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(y),!1,null))))}xg(n,n.transactionQueueTree_);for(let c=0;c<r.length;c++)Uc(r[c]);rw(n,n.transactionQueueTree_)}function tP(n,e){let t,r=n.transactionQueueTree_;for(t=$e(e);t!==null&&qc(r)===void 0;)r=X_(r,t),e=yt(e),t=$e(e);return r}function nP(n,e){const t=[];return rP(n,e,t),t.sort((r,i)=>r.order-i.order),t}function rP(n,e,t){const r=qc(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);pg(e,i=>{rP(n,i,t)})}function xg(n,e){const t=qc(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,$A(e,t.length>0?t:void 0)}pg(e,r=>{xg(n,r)})}function iw(n,e){const t=Sh(tP(n,e)),r=X_(n.transactionQueueTree_,e);return z9(r,i=>{jy(n,i)}),jy(n,r),HA(r,i=>{jy(n,i)}),t}function jy(n,e){const t=qc(e);if(t){const r=[];let i=[],s=-1;for(let a=0;a<t.length;a++)t[a].status===3||(t[a].status===1?(ce(s===a-1,"All SENT items should be at beginning of queue."),s=a,t[a].status=3,t[a].abortReason="set"):(ce(t[a].status===0,"Unexpected transaction status in abort"),t[a].unwatcher(),i=i.concat(po(n.serverSyncTree_,t[a].currentWriteId,!0)),t[a].onComplete&&r.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?$A(e,void 0):t.length=s+1,Ur(n.eventQueue_,Sh(e),i);for(let a=0;a<r.length;a++)Uc(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function m7(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Jn(`Invalid query segment '${t}' in query '${n}'`)}return e}const LE=function(n,e){const t=p7(n),r=t.namespace;t.domain==="firebase.com"&&ks(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&ks("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||TF();const i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new sA(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new dt(t.pathString)}},p7=function(n){let e="",t="",r="",i="",s="",a=!0,c="https",d=443;if(typeof n=="string"){let f=n.indexOf("//");f>=0&&(c=n.substring(0,f-1),n=n.substring(f+2));let g=n.indexOf("/");g===-1&&(g=n.length);let y=n.indexOf("?");y===-1&&(y=n.length),e=n.substring(0,Math.min(g,y)),g<y&&(i=f7(n.substring(g,y)));const x=m7(n.substring(Math.min(n.length,y)));f=e.indexOf(":"),f>=0?(a=c==="https"||c==="wss",d=parseInt(e.substring(f+1),10)):f=e.length;const k=e.slice(0,f);if(k.toLowerCase()==="localhost")t="localhost";else if(k.split(".").length<=2)t=k;else{const E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),t=e.substring(E+1),s=r}"ns"in x&&(s=x.ns)}return{host:e,port:d,domain:t,subdomain:r,secure:a,scheme:c,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",g7=function(){let n=0;const e=[];return function(t){const r=t===n;n=t;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=ME.charAt(t%64),t=Math.floor(t/64);ce(t===0,"Cannot push at time == 0");let a=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)a+=ME.charAt(e[i]);return ce(a.length===20,"nextPushId: Length should be 20."),a}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+nn(this.snapshot.exportVal())}}class v7{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ce(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ke(this._path)?null:P_(this._path)}get ref(){return new As(this._repo,this._path)}get _queryIdentifier(){const e=wE(this._queryParams),t=S_(e);return t==="{}"?"default":t}get _queryObject(){return wE(this._queryParams)}isEqual(e){if(e=ot(e),!(e instanceof sw))return!1;const t=this._repo===e._repo,r=R_(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+l8(this._path)}}class As extends sw{constructor(e,t){super(e,t,new M_,!1)}get parent(){const e=mA(this._path);return e===null?null:new As(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Qd{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new dt(e),r=Jd(this.ref,e);return new Qd(this._node.getChild(t),r,Mt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Qd(i,Jd(this.ref,r),Mt)))}hasChild(e){const t=new dt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function gn(n,e){return n=ot(n),n._checkNotDeleted("ref"),e!==void 0?Jd(n._root,e):n._root}function Jd(n,e){return n=ot(n),$e(n._path)===null?J9("child","path",e):QA("child","path",e),new As(n._repo,Lt(n._path,e))}function x7(n,e){n=ot(n),ew("push",n._path),GA("push",e,n._path,!0);const t=XA(n._repo),r=g7(t),i=Jd(n,r),s=Jd(n,r);let a;return a=Promise.resolve(s),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}function _7(n){return ew("remove",n._path),li(n,null)}function li(n,e){n=ot(n),ew("set",n._path),GA("set",e,n._path,!1);const t=new nh;return o7(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function w7(n,e){Q9("update",e,n._path);const t=new nh;return a7(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Nh(n){n=ot(n);const e=new iP(()=>{}),t=new _g(e);return s7(n._repo,n,t).then(r=>new Qd(r,new As(n._repo,n._path),n._queryParams.getIndex()))}class _g{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const r=t._queryParams.getIndex();return new y7("value",this,new Qd(e.snapshotNode,new As(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new v7(this,e,t):null}matches(e){return e instanceof _g?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function b7(n,e,t,r,i){const s=new iP(t,void 0),a=new _g(s);return c7(n._repo,n,a),()=>ZA(n._repo,n,a)}function od(n,e,t,r){return b7(n,"value",e)}function sP(n,e,t){ZA(n._repo,n,null)}_9(As);T9(As);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7="FIREBASE_DATABASE_EMULATOR_HOST",$v={};let E7=!1;function T7(n,e,t,r){n.repoInfo_=new sA(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function I7(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||ks("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let a=LE(s,i),c=a.repoInfo,d;typeof process<"u"&&rE&&(d=rE[k7]),d?(s=`http://${d}?ns=${c.namespace}`,a=LE(s,i),c=a.repoInfo):a.repoInfo.secure;const f=new MF(n.name,n.options,e);Y9("Invalid Firebase Database URL",a),Ke(a.path)||ks("Database URL must point to the root of a Firebase Database (not including a child path).");const g=C7(c,n,f,new LF(n.name,t));return new N7(g,n)}function S7(n,e){const t=$v[e];(!t||t[n.key]!==n)&&ks(`Database ${e}(${n.repoInfo_}) has already been deleted.`),u7(n),delete t[n.key]}function C7(n,e,t,r){let i=$v[e.name];i||(i={},$v[e.name]=i);let s=i[n.toURLString()];return s&&ks("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new n7(n,E7,t,r),i[n.toURLString()]=s,s}class N7{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(r7(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new As(this._repo,st())),this._rootInternal}_delete(){return this._rootInternal!==null&&(S7(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ks("Cannot call "+e+" on a deleted database.")}}function A7(n=Fp(),e){const t=ih(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=Ex("database");r&&P7(t,...r)}return t}function P7(n,e,t,r={}){n=ot(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&ks("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ks('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Rm(Rm.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:Tx(r.mockUserToken,n.app.options.projectId);s=new Rm(a)}T7(i,e,t,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(n){xF(jo),To(new vs("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return I7(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Vr(iE,sE,n),Vr(iE,sE,"esm2017")}fs.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};fs.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};R7();const j7={apiKey:"AIzaSyDYMQhSuyA_Tldogm10Kc0t4L1bX3omXDs",authDomain:"gencerdas-1018c.firebaseapp.com",projectId:"gencerdas-1018c",storageBucket:"gencerdas-1018c.firebasestorage.app",messagingSenderId:"822449069912",appId:"1:822449069912:web:79052cf8b13b5af1a54f2d",measurementId:"G-6MQ06GQBMK",databaseURL:"https://gencerdas-1018c-default-rtdb.asia-southeast1.firebasedatabase.app/"},ow=ZI(j7),Qu=MS(ow),it=AN(ow),yn=A7(ow);try{eF(it)}catch(n){console.error("Firestore persistence error:",n)}const wg=new ns;wg.addScope("profile");wg.addScope("email");wg.setCustomParameters({prompt:"select_account",display:"popup"});const D7=async(n,e)=>{try{await _h(Gt(it,"users",n),{...e,createdAt:qN()}),console.log("User progress initialized successfully")}catch(t){throw console.error("Error setting up user progress:",t),t}},L7=async n=>{try{const e=Gt(it,"podcast",n);await wh(e,{Played:$N(1)}),console.log("Play count updated")}catch(e){throw console.error("Error updating play count:",e),e}},M7=async n=>{try{if(!n)throw new Error("userId is required for Firestore setup");await V7(n);const e=Gt(it,"users",n);(await Fr(e)).exists()||await _h(e,{stats:{completedTasks:0,attendedMeetings:0,totalXP:0,level:1,streak:0,totalMinutesLearned:0,rank:"Pelajar Perunggu",nextRankXP:2e3,podcastsListened:0,totalPodcastMinutes:0},achievements:[],recentMilestones:[]}),console.log("Firestore setup completed successfully")}catch(e){throw console.error("Error during Firestore setup:",e),e}},V7=async n=>{try{if(!n)throw new Error("userId is required");const e=Gt(it,"users",n),t=await Fr(e),r=t.data();if(!t.exists()||!r||!r.podcastData){const i={listenedPodcasts:[],totalMinutesListened:0,favorites:[],lastListened:null,achievements:{totalPodcasts:0,totalTime:0,streaks:0,categories:[]}};return await _h(e,{podcastData:i},{merge:!0}),i}return r.podcastData}catch(e){throw console.error("Error initializing podcast data:",e),e}},oP=A.createContext();function qr(){const n=A.useContext(oP);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}aP.propTypes={children:Ie.node.isRequired};function aP({children:n}){const[e,t]=A.useState(null),[r,i]=A.useState(!0);async function s(g,y,x){try{const E=(await L3(Qu,g,y)).user;return await D7(E.uid,{name:x,email:E.email,photoURL:E.photoURL||null}),E}catch(k){throw k}}async function a(g,y){return M3(Qu,g,y)}async function c(){const g=await oM(Qu,wg);return(await Fr(Gt(it,"users",g.user.uid))).exists()||await _h(Gt(it,"users",g.user.uid),{name:g.user.displayName,email:g.user.email,createdAt:qN(),photoURL:g.user.photoURL}),g}function d(){return B3(Qu)}A.useEffect(()=>F3(Qu,y=>{t(y),i(!1)}),[]);const f={currentUser:e,signup:s,login:a,loginWithGoogle:c,logout:d};return u.jsx(oP.Provider,{value:f,children:!r&&n})}function O7(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}function bg(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Wv=n=>Array.isArray(n);function lP(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function Yd(n){return typeof n=="string"||Array.isArray(n)}function VE(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function aw(n,e,t,r){if(typeof e=="function"){const[i,s]=VE(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=VE(r);e=e(t!==void 0?t:n.custom,i,s)}return e}function kg(n,e,t){const r=n.getProps();return aw(r,e,t!==void 0?t:r.custom,n)}const lw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cw=["initial",...lw],Ah=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],el=new Set(Ah),ms=n=>n*1e3,ps=n=>n/1e3,F7={type:"spring",stiffness:500,damping:25,restSpeed:10},B7=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),U7={type:"keyframes",duration:.8},z7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},q7=(n,{keyframes:e})=>e.length>2?U7:el.has(n)?n.startsWith("scale")?B7(e[1]):F7:z7;function uw(n,e){return n?n[e]||n.default||n:void 0}const $7={skipAnimations:!1,useManualTiming:!1},W7=n=>n!==null;function Eg(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(W7),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const vn=n=>n;function H7(n){let e=new Set,t=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(d.schedule(f),n()),f(a)}const d={schedule:(f,g=!1,y=!1)=>{const k=y&&r?e:t;return g&&s.add(f),k.has(f)||k.add(f),f},cancel:f=>{t.delete(f),s.delete(f)},process:f=>{if(a=f,r){i=!0;return}r=!0,[e,t]=[t,e],t.clear(),e.forEach(c),r=!1,i&&(i=!1,d.process(f))}};return d}const am=["read","resolveKeyframes","update","preRender","render","postRender"],K7=40;function cP(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=am.reduce((N,L)=>(N[L]=H7(s),N),{}),{read:c,resolveKeyframes:d,update:f,preRender:g,render:y,postRender:x}=a,k=()=>{const N=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(N-i.timestamp,K7),1),i.timestamp=N,i.isProcessing=!0,c.process(i),d.process(i),f.process(i),g.process(i),y.process(i),x.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(k))},E=()=>{t=!0,r=!0,i.isProcessing||n(k)};return{schedule:am.reduce((N,L)=>{const O=a[L];return N[L]=(Q,W=!1,U=!1)=>(t||E(),O.schedule(Q,W,U)),N},{}),cancel:N=>{for(let L=0;L<am.length;L++)a[am[L]].cancel(N)},state:i,steps:a}}const{schedule:tt,cancel:di,state:hn,steps:Dy}=cP(typeof requestAnimationFrame<"u"?requestAnimationFrame:vn,!0),uP=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,G7=1e-7,Q7=12;function J7(n,e,t,r,i){let s,a,c=0;do a=e+(t-e)/2,s=uP(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>G7&&++c<Q7);return a}function Ph(n,e,t,r){if(n===e&&t===r)return vn;const i=s=>J7(s,0,1,n,t);return s=>s===0||s===1?s:uP(i(s),e,r)}const dP=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,hP=n=>e=>1-n(1-e),fP=Ph(.33,1.53,.69,.99),dw=hP(fP),mP=dP(dw),pP=n=>(n*=2)<1?.5*dw(n):.5*(2-Math.pow(2,-10*(n-1))),hw=n=>1-Math.sin(Math.acos(n)),gP=hP(hw),yP=dP(hw),vP=n=>/^0[^.\s]+$/u.test(n);function Y7(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||vP(n):!0}let X7=vn,Hv=vn;const xP=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),_P=n=>e=>typeof e=="string"&&e.startsWith(n),wP=_P("--"),Z7=_P("var(--"),fw=n=>Z7(n)?eB.test(n.split("/*")[0].trim()):!1,eB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function nB(n){const e=tB.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function bP(n,e,t=1){const[r,i]=nB(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return xP(a)?parseFloat(a):a}return fw(i)?bP(i,e,t+1):i}const Es=(n,e,t)=>t>e?e:t<n?n:t,$c={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Xd={...$c,transform:n=>Es(0,1,n)},lm={...$c,default:1},Rh=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),so=Rh("deg"),ji=Rh("%"),Ae=Rh("px"),rB=Rh("vh"),iB=Rh("vw"),OE={...ji,parse:n=>ji.parse(n)/100,transform:n=>ji.transform(n*100)},sB=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),FE=n=>n===$c||n===Ae,BE=(n,e)=>parseFloat(n.split(", ")[e]),UE=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return BE(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?BE(s[1],n):0}},oB=new Set(["x","y","z"]),aB=Ah.filter(n=>!oB.has(n));function lB(n){const e=[];return aB.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Cc={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:UE(4,13),y:UE(5,14)};Cc.translateX=Cc.x;Cc.translateY=Cc.y;const kP=n=>e=>e.test(n),cB={test:n=>n==="auto",parse:n=>n},EP=[$c,Ae,ji,so,iB,rB,cB],zE=n=>EP.find(kP(n)),Da=new Set;let Kv=!1,Gv=!1;function TP(){if(Gv){const n=Array.from(Da).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=lB(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,a])=>{var c;(c=r.getValue(s))===null||c===void 0||c.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gv=!1,Kv=!1,Da.forEach(n=>n.complete()),Da.clear()}function IP(){Da.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Gv=!0)})}function uB(){IP(),TP()}class mw{constructor(e,t,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Da.add(this),Kv||(Kv=!0,tt.read(IP),tt.resolveKeyframes(TP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i==null?void 0:i.get(),c=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const d=r.readValue(t,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Da.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Da.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const wd=n=>Math.round(n*1e5)/1e5,pw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dB(n){return n==null}const hB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gw=(n,e)=>t=>!!(typeof t=="string"&&hB.test(t)&&t.startsWith(n)||e&&!dB(t)&&Object.prototype.hasOwnProperty.call(t,e)),SP=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,a,c]=r.match(pw);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},fB=n=>Es(0,255,n),Ly={...$c,transform:n=>Math.round(fB(n))},Aa={test:gw("rgb","red"),parse:SP("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Ly.transform(n)+", "+Ly.transform(e)+", "+Ly.transform(t)+", "+wd(Xd.transform(r))+")"};function mB(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Qv={test:gw("#"),parse:mB,transform:Aa.transform},ec={test:gw("hsl","hue"),parse:SP("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+ji.transform(wd(e))+", "+ji.transform(wd(t))+", "+wd(Xd.transform(r))+")"},Dn={test:n=>Aa.test(n)||Qv.test(n)||ec.test(n),parse:n=>Aa.test(n)?Aa.parse(n):ec.test(n)?ec.parse(n):Qv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Aa.transform(n):ec.transform(n)},pB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gB(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(pw))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(pB))===null||t===void 0?void 0:t.length)||0)>0}const CP="number",NP="color",yB="var",vB="var(",qE="${}",xB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Zd(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const c=e.replace(xB,d=>(Dn.test(d)?(r.color.push(s),i.push(NP),t.push(Dn.parse(d))):d.startsWith(vB)?(r.var.push(s),i.push(yB),t.push(d)):(r.number.push(s),i.push(CP),t.push(parseFloat(d))),++s,qE)).split(qE);return{values:t,split:c,indexes:r,types:i}}function AP(n){return Zd(n).values}function PP(n){const{split:e,types:t}=Zd(n),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const c=t[a];c===CP?s+=wd(i[a]):c===NP?s+=Dn.transform(i[a]):s+=i[a]}return s}}const _B=n=>typeof n=="number"?0:n;function wB(n){const e=AP(n);return PP(n)(e.map(_B))}const Ro={test:gB,parse:AP,createTransformer:PP,getAnimatableNone:wB},bB=new Set(["brightness","contrast","saturate","opacity"]);function kB(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(pw)||[];if(!r)return n;const i=t.replace(r,"");let s=bB.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const EB=/\b([a-z-]*)\(.*?\)/gu,Jv={...Ro,getAnimatableNone:n=>{const e=n.match(EB);return e?e.map(kB).join(" "):n}},TB={borderWidth:Ae,borderTopWidth:Ae,borderRightWidth:Ae,borderBottomWidth:Ae,borderLeftWidth:Ae,borderRadius:Ae,radius:Ae,borderTopLeftRadius:Ae,borderTopRightRadius:Ae,borderBottomRightRadius:Ae,borderBottomLeftRadius:Ae,width:Ae,maxWidth:Ae,height:Ae,maxHeight:Ae,top:Ae,right:Ae,bottom:Ae,left:Ae,padding:Ae,paddingTop:Ae,paddingRight:Ae,paddingBottom:Ae,paddingLeft:Ae,margin:Ae,marginTop:Ae,marginRight:Ae,marginBottom:Ae,marginLeft:Ae,backgroundPositionX:Ae,backgroundPositionY:Ae},IB={rotate:so,rotateX:so,rotateY:so,rotateZ:so,scale:lm,scaleX:lm,scaleY:lm,scaleZ:lm,skew:so,skewX:so,skewY:so,distance:Ae,translateX:Ae,translateY:Ae,translateZ:Ae,x:Ae,y:Ae,z:Ae,perspective:Ae,transformPerspective:Ae,opacity:Xd,originX:OE,originY:OE,originZ:Ae},$E={...$c,transform:Math.round},yw={...TB,...IB,zIndex:$E,size:Ae,fillOpacity:Xd,strokeOpacity:Xd,numOctaves:$E},SB={...yw,color:Dn,backgroundColor:Dn,outlineColor:Dn,fill:Dn,stroke:Dn,borderColor:Dn,borderTopColor:Dn,borderRightColor:Dn,borderBottomColor:Dn,borderLeftColor:Dn,filter:Jv,WebkitFilter:Jv},vw=n=>SB[n];function RP(n,e){let t=vw(n);return t!==Jv&&(t=Ro),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const CB=new Set(["auto","none","0"]);function NB(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!CB.has(s)&&Zd(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=RP(t,i)}class jP extends mw{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),fw(f))){const g=bP(f,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!sB.has(r)||e.length!==2)return;const[i,s]=e,a=zE(i),c=zE(s);if(a!==c)if(FE(a)&&FE(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)Y7(e[i])&&r.push(i);r.length&&NB(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Cc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,c=i[a];i[a]=Cc[r](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,f])=>{t.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function xw(n){return typeof n=="function"}let jm;function AB(){jm=void 0}const Di={now:()=>(jm===void 0&&Di.set(hn.isProcessing||$7.useManualTiming?hn.timestamp:performance.now()),jm),set:n=>{jm=n,queueMicrotask(AB)}},WE=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ro.test(n)||n==="0")&&!n.startsWith("url("));function PB(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function RB(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=WE(i,e),c=WE(s,e);return!a||!c?!1:PB(n)||(t==="spring"||xw(t))&&r}const jB=40;class DP{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Di.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:a,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>jB?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&uB(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Di.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:c,onUpdate:d,isGenerator:f}=this.options;if(!f&&!RB(e,r,i,s))if(a)this.options.duration=0;else{d==null||d(Eg(e,this.options,t)),c==null||c(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,t);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...g},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ga=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},LP=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=n(Ga(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function _w(n,e){return e?n*(1e3/e):0}const DB=5;function MP(n,e,t){const r=Math.max(e-DB,0);return _w(t-n(r),e-r)}const jt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},My=.001;function LB({duration:n=jt.duration,bounce:e=jt.bounce,velocity:t=jt.velocity,mass:r=jt.mass}){let i,s,a=1-e;a=Es(jt.minDamping,jt.maxDamping,a),n=Es(jt.minDuration,jt.maxDuration,ps(n)),a<1?(i=f=>{const g=f*a,y=g*n,x=g-t,k=Yv(f,a),E=Math.exp(-y);return My-x/k*E},s=f=>{const y=f*a*n,x=y*t+t,k=Math.pow(a,2)*Math.pow(f,2)*n,E=Math.exp(-y),P=Yv(Math.pow(f,2),a);return(-i(f)+My>0?-1:1)*((x-k)*E)/P}):(i=f=>{const g=Math.exp(-f*n),y=(f-t)*n+1;return-My+g*y},s=f=>{const g=Math.exp(-f*n),y=(t-f)*(n*n);return g*y});const c=5/n,d=VB(i,s,c);if(n=ms(n),isNaN(d))return{stiffness:jt.stiffness,damping:jt.damping,duration:n};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:a*2*Math.sqrt(r*f),duration:n}}}const MB=12;function VB(n,e,t){let r=t;for(let i=1;i<MB;i++)r=r-n(r)/e(r);return r}function Yv(n,e){return n*Math.sqrt(1-e*e)}const Xv=2e4;function VP(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Xv;)e+=t,r=n.next(e);return e>=Xv?1/0:e}const OB=["duration","bounce"],FB=["stiffness","damping","mass"];function HE(n,e){return e.some(t=>n[t]!==void 0)}function BB(n){let e={velocity:jt.velocity,stiffness:jt.stiffness,damping:jt.damping,mass:jt.mass,isResolvedFromDuration:!1,...n};if(!HE(n,FB)&&HE(n,OB))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*Es(.05,1,1-n.bounce)*Math.sqrt(i);e={...e,mass:jt.mass,stiffness:i,damping:s}}else{const t=LB(n);e={...e,...t,mass:jt.mass},e.isResolvedFromDuration=!0}return e}function OP(n=jt.visualDuration,e=jt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],c={done:!1,value:s},{stiffness:d,damping:f,mass:g,duration:y,velocity:x,isResolvedFromDuration:k}=BB({...t,velocity:-ps(t.velocity||0)}),E=x||0,P=f/(2*Math.sqrt(d*g)),S=a-s,N=ps(Math.sqrt(d/g)),L=Math.abs(S)<5;r||(r=L?jt.restSpeed.granular:jt.restSpeed.default),i||(i=L?jt.restDelta.granular:jt.restDelta.default);let O;if(P<1){const W=Yv(N,P);O=U=>{const C=Math.exp(-P*N*U);return a-C*((E+P*N*S)/W*Math.sin(W*U)+S*Math.cos(W*U))}}else if(P===1)O=W=>a-Math.exp(-N*W)*(S+(E+N*S)*W);else{const W=N*Math.sqrt(P*P-1);O=U=>{const C=Math.exp(-P*N*U),I=Math.min(W*U,300);return a-C*((E+P*N*S)*Math.sinh(I)+W*S*Math.cosh(I))/W}}const Q={calculatedDuration:k&&y||null,next:W=>{const U=O(W);if(k)c.done=W>=y;else{let C=0;P<1&&(C=W===0?ms(E):MP(O,W,U));const I=Math.abs(C)<=r,j=Math.abs(a-U)<=i;c.done=I&&j}return c.value=c.done?a:U,c},toString:()=>{const W=Math.min(VP(Q),Xv),U=LP(C=>Q.next(W*C).value,W,30);return W+"ms "+U}};return Q}function KE({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:c,max:d,restDelta:f=.5,restSpeed:g}){const y=n[0],x={done:!1,value:y},k=I=>c!==void 0&&I<c||d!==void 0&&I>d,E=I=>c===void 0?d:d===void 0||Math.abs(c-I)<Math.abs(d-I)?c:d;let P=t*e;const S=y+P,N=a===void 0?S:a(S);N!==S&&(P=N-y);const L=I=>-P*Math.exp(-I/r),O=I=>N+L(I),Q=I=>{const j=L(I),D=O(I);x.done=Math.abs(j)<=f,x.value=x.done?N:D};let W,U;const C=I=>{k(x.value)&&(W=I,U=OP({keyframes:[x.value,E(x.value)],velocity:MP(O,I,x.value),damping:i,stiffness:s,restDelta:f,restSpeed:g}))};return C(0),{calculatedDuration:null,next:I=>{let j=!1;return!U&&W===void 0&&(j=!0,Q(I),C(I)),W!==void 0&&I>=W?U.next(I-W):(!j&&Q(I),x)}}}const UB=Ph(.42,0,1,1),zB=Ph(0,0,.58,1),FP=Ph(.42,0,.58,1),qB=n=>Array.isArray(n)&&typeof n[0]!="number",ww=n=>Array.isArray(n)&&typeof n[0]=="number",GE={linear:vn,easeIn:UB,easeInOut:FP,easeOut:zB,circIn:hw,circInOut:yP,circOut:gP,backIn:dw,backInOut:mP,backOut:fP,anticipate:pP},QE=n=>{if(ww(n)){Hv(n.length===4);const[e,t,r,i]=n;return Ph(e,t,r,i)}else if(typeof n=="string")return Hv(GE[n]!==void 0),GE[n];return n},$B=(n,e)=>t=>e(n(t)),gs=(...n)=>n.reduce($B),At=(n,e,t)=>n+(e-n)*t;function Vy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function WB({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;i=Vy(d,c,n+1/3),s=Vy(d,c,n),a=Vy(d,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function bp(n,e){return t=>t>0?e:n}const Oy=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},HB=[Qv,Aa,ec],KB=n=>HB.find(e=>e.test(n));function JE(n){const e=KB(n);if(!e)return!1;let t=e.parse(n);return e===ec&&(t=WB(t)),t}const YE=(n,e)=>{const t=JE(n),r=JE(e);if(!t||!r)return bp(n,e);const i={...t};return s=>(i.red=Oy(t.red,r.red,s),i.green=Oy(t.green,r.green,s),i.blue=Oy(t.blue,r.blue,s),i.alpha=At(t.alpha,r.alpha,s),Aa.transform(i))},Zv=new Set(["none","hidden"]);function GB(n,e){return Zv.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function QB(n,e){return t=>At(n,e,t)}function bw(n){return typeof n=="number"?QB:typeof n=="string"?fw(n)?bp:Dn.test(n)?YE:XB:Array.isArray(n)?BP:typeof n=="object"?Dn.test(n)?YE:JB:bp}function BP(n,e){const t=[...n],r=t.length,i=n.map((s,a)=>bw(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}}function JB(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=bw(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function YB(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],c=n.indexes[a][i[a]],d=(t=n.values[c])!==null&&t!==void 0?t:0;r[s]=d,i[a]++}return r}const XB=(n,e)=>{const t=Ro.createTransformer(e),r=Zd(n),i=Zd(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Zv.has(n)&&!i.values.length||Zv.has(e)&&!r.values.length?GB(n,e):gs(BP(YB(r,i),i.values),t):bp(n,e)};function UP(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?At(n,e,t):bw(n)(n,e)}function ZB(n,e,t){const r=[],i=t||UP,s=n.length-1;for(let a=0;a<s;a++){let c=i(n[a],n[a+1]);if(e){const d=Array.isArray(e)?e[a]||vn:e;c=gs(d,c)}r.push(c)}return r}function kw(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(Hv(s===e.length),s===1)return()=>e[0];if(s===2&&n[0]===n[1])return()=>e[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=ZB(e,r,i),c=a.length,d=f=>{let g=0;if(c>1)for(;g<n.length-2&&!(f<n[g+1]);g++);const y=Ga(n[g],n[g+1],f);return a[g](y)};return t?f=>d(Es(n[0],n[s-1],f)):d}function eU(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Ga(0,e,r);n.push(At(t,1,i))}}function zP(n){const e=[0];return eU(e,n.length-1),e}function tU(n,e){return n.map(t=>t*e)}function nU(n,e){return n.map(()=>e||FP).splice(0,n.length-1)}function kp({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=qB(r)?r.map(QE):QE(r),s={done:!1,value:e[0]},a=tU(t&&t.length===e.length?t:zP(e),n),c=kw(a,e,{ease:Array.isArray(i)?i:nU(e,i)});return{calculatedDuration:n,next:d=>(s.value=c(d),s.done=d>=n,s)}}const rU=n=>{const e=({timestamp:t})=>n(t);return{start:()=>tt.update(e,!0),stop:()=>di(e),now:()=>hn.isProcessing?hn.timestamp:Di.now()}},iU={decay:KE,inertia:KE,tween:kp,keyframes:kp,spring:OP},sU=n=>n/100;class Ew extends DP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:t,motionValue:r,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||mw,c=(d,f)=>this.onKeyframesResolved(d,f);this.resolver=new a(s,c,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,c=xw(t)?t:iU[t]||kp;let d,f;c!==kp&&typeof e[0]!="number"&&(d=gs(sU,UP(e[0],e[1])),e=[0,100]);const g=c({...this.options,keyframes:e});s==="mirror"&&(f=c({...this.options,keyframes:[...e].reverse(),velocity:-a})),g.calculatedDuration===null&&(g.calculatedDuration=VP(g));const{calculatedDuration:y}=g,x=y+i,k=x*(r+1)-i;return{generator:g,mirroredGenerator:f,mapPercentToKeyframes:d,calculatedDuration:y,resolvedDuration:x,totalDuration:k}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:c,keyframes:d,calculatedDuration:f,totalDuration:g,resolvedDuration:y}=r;if(this.startTime===null)return s.next(0);const{delay:x,repeat:k,repeatType:E,repeatDelay:P,onUpdate:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const N=this.currentTime-x*(this.speed>=0?1:-1),L=this.speed>=0?N<0:N>g;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let O=this.currentTime,Q=s;if(k){const I=Math.min(this.currentTime,g)/y;let j=Math.floor(I),D=I%1;!D&&I>=1&&(D=1),D===1&&j--,j=Math.min(j,k+1),!!(j%2)&&(E==="reverse"?(D=1-D,P&&(D-=P/y)):E==="mirror"&&(Q=a)),O=Es(0,1,D)*y}const W=L?{done:!1,value:d[0]}:Q.next(O);c&&(W.value=c(W.value));let{done:U}=W;!L&&f!==null&&(U=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&U);return C&&i!==void 0&&(W.value=Eg(d,this.options,i)),S&&S(W.value),C&&this.finish(),W}get duration(){const{resolved:e}=this;return e?ps(e.calculatedDuration):0}get time(){return ps(this.currentTime)}set time(e){e=ms(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ps(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=rU,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const oU=new Set(["opacity","clipPath","filter","transform"]);function Tw(n){let e;return()=>(e===void 0&&(e=n()),e)}const aU={linearEasing:void 0};function lU(n,e){const t=Tw(n);return()=>{var r;return(r=aU[e])!==null&&r!==void 0?r:t()}}const Ep=lU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function qP(n){return!!(typeof n=="function"&&Ep()||!n||typeof n=="string"&&(n in ex||Ep())||ww(n)||Array.isArray(n)&&n.every(qP))}const ad=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,ex={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ad([0,.65,.55,1]),circOut:ad([.55,0,1,.45]),backIn:ad([.31,.01,.66,-.59]),backOut:ad([.33,1.53,.69,.99])};function $P(n,e){if(n)return typeof n=="function"&&Ep()?LP(n,e):ww(n)?ad(n):Array.isArray(n)?n.map(t=>$P(t,e)||ex.easeOut):ex[n]}function cU(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:c="easeInOut",times:d}={}){const f={[e]:t};d&&(f.offset=d);const g=$P(c,i);return Array.isArray(g)&&(f.easing=g),n.animate(f,{delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function XE(n,e){n.timeline=e,n.onfinish=null}const uU=Tw(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Tp=10,dU=2e4;function hU(n){return xw(n.type)||n.type==="spring"||!qP(n.ease)}function fU(n,e){const t=new Ew({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let s=0;for(;!r.done&&s<dU;)r=t.sample(s),i.push(r.value),s+=Tp;return{times:void 0,keyframes:i,duration:s-Tp,ease:"linear"}}const WP={anticipate:pP,backInOut:mP,circInOut:yP};function mU(n){return n in WP}class ZE extends DP{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new jP(s,(a,c)=>this.onKeyframesResolved(a,c),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){var r;let{duration:i=300,times:s,ease:a,type:c,motionValue:d,name:f,startTime:g}=this.options;if(!(!((r=d.owner)===null||r===void 0)&&r.current))return!1;if(typeof a=="string"&&Ep()&&mU(a)&&(a=WP[a]),hU(this.options)){const{onComplete:x,onUpdate:k,motionValue:E,element:P,...S}=this.options,N=fU(e,S);e=N.keyframes,e.length===1&&(e[1]=e[0]),i=N.duration,s=N.times,a=N.ease,c="keyframes"}const y=cU(d.owner.current,f,e,{...this.options,duration:i,times:s,ease:a});return y.startTime=g??this.calcStartTime(),this.pendingTimeline?(XE(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:x}=this.options;d.set(Eg(e,this.options,t)),x&&x(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:i,times:s,type:c,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return ps(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return ps(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=ms(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return vn;const{animation:r}=t;XE(r,e)}return vn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:s,ease:a,times:c}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:g,onComplete:y,element:x,...k}=this.options,E=new Ew({...k,keyframes:r,duration:i,type:s,ease:a,times:c,isGenerator:!0}),P=ms(this.time);f.setWithVelocity(E.sample(P-Tp).value,E.sample(P).value,Tp)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:a,type:c}=e;return uU()&&r&&oU.has(r)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!i&&s!=="mirror"&&a!==0&&c!=="inertia"}}const HP=Tw(()=>window.ScrollTimeline!==void 0);class pU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>HP()&&i.attachTimeline?i.attachTimeline(e):t(i));return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function gU({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:c,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const Iw=(n,e,t,r={},i,s)=>a=>{const c=uw(r,n)||{},d=c.delay||r.delay||0;let{elapsed:f=0}=r;f=f-ms(d);let g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:x=>{e.set(x),c.onUpdate&&c.onUpdate(x)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:s?void 0:i};gU(c)||(g={...g,...q7(n,g)}),g.duration&&(g.duration=ms(g.duration)),g.repeatDelay&&(g.repeatDelay=ms(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(y=!0)),y&&!s&&e.get()!==void 0){const x=Eg(g.keyframes,c);if(x!==void 0)return tt.update(()=>{g.onUpdate(x),g.onComplete()}),new pU([])}return!s&&ZE.supports(g)?new ZE(g):new Ew(g)},yU=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),vU=n=>Wv(n)?n[n.length-1]||0:n;function Sw(n,e){n.indexOf(e)===-1&&n.push(e)}function Cw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Nw{constructor(){this.subscriptions=[]}add(e){return Sw(this.subscriptions,e),()=>Cw(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const eT=30,xU=n=>!isNaN(parseFloat(n)),bd={current:void 0};class _U{constructor(e,t={}){this.version="11.12.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Di.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Di.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=xU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Nw);const r=this.events[e].add(t);return e==="change"?()=>{r(),tt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return bd.current&&bd.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Di.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>eT)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,eT);return _w(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ni(n,e){return new _U(n,e)}function wU(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ni(t))}function bU(n,e){const t=kg(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const a in s){const c=vU(s[a]);wU(n,a,c)}}const Aw=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),kU="framerAppearId",KP="data-"+Aw(kU);function GP(n){return n.props[KP]}const Vn=n=>!!(n&&n.getVelocity);function EU(n){return!!(Vn(n)&&n.add)}function tx(n,e){const t=n.getValue("willChange");if(EU(t))return t.add(e)}function TU({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function QP(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var s;let{transition:a=n.getDefaultTransition(),transitionEnd:c,...d}=e;r&&(a=r);const f=[],g=i&&n.animationState&&n.animationState.getState()[i];for(const y in d){const x=n.getValue(y,(s=n.latestValues[y])!==null&&s!==void 0?s:null),k=d[y];if(k===void 0||g&&TU(g,y))continue;const E={delay:t,...uw(a||{},y)};let P=!1;if(window.MotionHandoffAnimation){const N=GP(n);if(N){const L=window.MotionHandoffAnimation(N,y,tt);L!==null&&(E.startTime=L,P=!0)}}tx(n,y),x.start(Iw(y,x,k,n.shouldReduceMotion&&el.has(y)?{type:!1}:E,n,P));const S=x.animation;S&&f.push(S)}return c&&Promise.all(f).then(()=>{tt.update(()=>{c&&bU(n,c)})}),f}function nx(n,e,t={}){var r;const i=kg(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const a=i?()=>Promise.all(QP(n,i,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=s;return IU(n,e,g+f,y,x,t)}:()=>Promise.resolve(),{when:d}=s;if(d){const[f,g]=d==="beforeChildren"?[a,c]:[c,a];return f().then(()=>g())}else return Promise.all([a(),c(t.delay)])}function IU(n,e,t=0,r=0,i=1,s){const a=[],c=(n.variantChildren.size-1)*r,d=i===1?(f=0)=>f*r:(f=0)=>c-f*r;return Array.from(n.variantChildren).sort(SU).forEach((f,g)=>{f.notify("AnimationStart",e),a.push(nx(f,e,{...s,delay:t+d(g)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function SU(n,e){return n.sortNodePosition(e)}function CU(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>nx(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=nx(n,e,t);else{const i=typeof e=="function"?kg(n,e,t.custom):e;r=Promise.all(QP(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const NU=cw.length;function JP(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?JP(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<NU;t++){const r=cw[t],i=n.props[r];(Yd(i)||i===!1)&&(e[r]=i)}return e}const AU=[...lw].reverse(),PU=lw.length;function RU(n){return e=>Promise.all(e.map(({animation:t,options:r})=>CU(n,t,r)))}function jU(n){let e=RU(n),t=tT(),r=!0;const i=d=>(f,g)=>{var y;const x=kg(n,g,d==="exit"?(y=n.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(x){const{transition:k,transitionEnd:E,...P}=x;f={...f,...P,...E}}return f};function s(d){e=d(n)}function a(d){const{props:f}=n,g=JP(n.parent)||{},y=[],x=new Set;let k={},E=1/0;for(let S=0;S<PU;S++){const N=AU[S],L=t[N],O=f[N]!==void 0?f[N]:g[N],Q=Yd(O),W=N===d?L.isActive:null;W===!1&&(E=S);let U=O===g[N]&&O!==f[N]&&Q;if(U&&r&&n.manuallyAnimateOnMount&&(U=!1),L.protectedKeys={...k},!L.isActive&&W===null||!O&&!L.prevProp||bg(O)||typeof O=="boolean")continue;const C=DU(L.prevProp,O);let I=C||N===d&&L.isActive&&!U&&Q||S>E&&Q,j=!1;const D=Array.isArray(O)?O:[O];let F=D.reduce(i(N),{});W===!1&&(F={});const{prevResolvedValues:q={}}=L,V={...q,...F},ge=fe=>{I=!0,x.has(fe)&&(j=!0,x.delete(fe)),L.needsAnimating[fe]=!0;const re=n.getValue(fe);re&&(re.liveStyle=!1)};for(const fe in V){const re=F[fe],ve=q[fe];if(k.hasOwnProperty(fe))continue;let he=!1;Wv(re)&&Wv(ve)?he=!lP(re,ve):he=re!==ve,he?re!=null?ge(fe):x.add(fe):re!==void 0&&x.has(fe)?ge(fe):L.protectedKeys[fe]=!0}L.prevProp=O,L.prevResolvedValues=F,L.isActive&&(k={...k,...F}),r&&n.blockInitialAnimation&&(I=!1),I&&(!(U&&C)||j)&&y.push(...D.map(fe=>({animation:fe,options:{type:N}})))}if(x.size){const S={};x.forEach(N=>{const L=n.getBaseTarget(N),O=n.getValue(N);O&&(O.liveStyle=!0),S[N]=L??null}),y.push({animation:S})}let P=!!y.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(y):Promise.resolve()}function c(d,f){var g;if(t[d].isActive===f)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(x=>{var k;return(k=x.animationState)===null||k===void 0?void 0:k.setActive(d,f)}),t[d].isActive=f;const y=a(d);for(const x in t)t[x].protectedKeys={};return y}return{animateChanges:a,setActive:c,setAnimateFunction:s,getState:()=>t,reset:()=>{t=tT(),r=!0}}}function DU(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!lP(e,n):!1}function ga(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tT(){return{animate:ga(!0),whileInView:ga(),whileHover:ga(),whileTap:ga(),whileDrag:ga(),whileFocus:ga(),exit:ga()}}class Bo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class LU extends Bo{constructor(e){super(e),e.animationState||(e.animationState=jU(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();bg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let MU=0;class VU extends Bo{constructor(){super(...arguments),this.id=MU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const OU={animation:{Feature:LU},exit:{Feature:VU}},YP=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Tg(n,e="page"){return{point:{x:n[`${e}X`],y:n[`${e}Y`]}}}const FU=n=>e=>YP(e)&&n(e,Tg(e));function ls(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function ys(n,e,t,r){return ls(n,e,FU(t),r)}const nT=(n,e)=>Math.abs(n-e);function BU(n,e){const t=nT(n.x,e.x),r=nT(n.y,e.y);return Math.sqrt(t**2+r**2)}class XP{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=By(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,k=BU(y.offset,{x:0,y:0})>=3;if(!x&&!k)return;const{point:E}=y,{timestamp:P}=hn;this.history.push({...E,timestamp:P});const{onStart:S,onMove:N}=this.handlers;x||(S&&S(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,y)},this.handlePointerMove=(y,x)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Fy(x,this.transformPagePoint),tt.update(this.updatePoint,!0)},this.handlePointerUp=(y,x)=>{this.end();const{onEnd:k,onSessionEnd:E,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=By(y.type==="pointercancel"?this.lastMoveEventInfo:Fy(x,this.transformPagePoint),this.history);this.startEvent&&k&&k(y,S),E&&E(y,S)},!YP(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=Tg(e),c=Fy(a,this.transformPagePoint),{point:d}=c,{timestamp:f}=hn;this.history=[{...d,timestamp:f}];const{onSessionStart:g}=t;g&&g(e,By(c,this.history)),this.removeListeners=gs(ys(this.contextWindow,"pointermove",this.handlePointerMove),ys(this.contextWindow,"pointerup",this.handlePointerUp),ys(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),di(this.updatePoint)}}function Fy(n,e){return e?{point:e(n.point)}:n}function rT(n,e){return{x:n.x-e.x,y:n.y-e.y}}function By({point:n},e){return{point:n,delta:rT(n,ZP(e)),offset:rT(n,UU(e)),velocity:zU(e,.1)}}function UU(n){return n[0]}function ZP(n){return n[n.length-1]}function zU(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=ZP(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>ms(e)));)t--;if(!r)return{x:0,y:0};const s=ps(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function eR(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const iT=eR("dragHorizontal"),sT=eR("dragVertical");function tR(n){let e=!1;if(n==="y")e=sT();else if(n==="x")e=iT();else{const t=iT(),r=sT();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function nR(){const n=tR(!0);return n?(n(),!1):!0}function tc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}const rR=1e-4,qU=1-rR,$U=1+rR,iR=.01,WU=0-iR,HU=0+iR;function xr(n){return n.max-n.min}function KU(n,e,t){return Math.abs(n-e)<=t}function oT(n,e,t,r=.5){n.origin=r,n.originPoint=At(e.min,e.max,n.origin),n.scale=xr(t)/xr(e),n.translate=At(t.min,t.max,n.origin)-n.originPoint,(n.scale>=qU&&n.scale<=$U||isNaN(n.scale))&&(n.scale=1),(n.translate>=WU&&n.translate<=HU||isNaN(n.translate))&&(n.translate=0)}function kd(n,e,t,r){oT(n.x,e.x,t.x,r?r.originX:void 0),oT(n.y,e.y,t.y,r?r.originY:void 0)}function aT(n,e,t){n.min=t.min+e.min,n.max=n.min+xr(e)}function GU(n,e,t){aT(n.x,e.x,t.x),aT(n.y,e.y,t.y)}function lT(n,e,t){n.min=e.min-t.min,n.max=n.min+xr(e)}function Ed(n,e,t){lT(n.x,e.x,t.x),lT(n.y,e.y,t.y)}function QU(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?At(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?At(t,n,r.max):Math.min(n,t)),n}function cT(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function JU(n,{top:e,left:t,bottom:r,right:i}){return{x:cT(n.x,t,i),y:cT(n.y,e,r)}}function uT(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function YU(n,e){return{x:uT(n.x,e.x),y:uT(n.y,e.y)}}function XU(n,e){let t=.5;const r=xr(n),i=xr(e);return i>r?t=Ga(e.min,e.max-r,n.min):r>i&&(t=Ga(n.min,n.max-i,e.min)),Es(0,1,t)}function ZU(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const rx=.35;function ez(n=rx){return n===!1?n=0:n===!0&&(n=rx),{x:dT(n,"left","right"),y:dT(n,"top","bottom")}}function dT(n,e,t){return{min:hT(n,e),max:hT(n,t)}}function hT(n,e){return typeof n=="number"?n:n[e]||0}const fT=()=>({translate:0,scale:1,origin:0,originPoint:0}),nc=()=>({x:fT(),y:fT()}),mT=()=>({min:0,max:0}),zt=()=>({x:mT(),y:mT()});function jr(n){return[n("x"),n("y")]}function sR({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function tz({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function nz(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Uy(n){return n===void 0||n===1}function ix({scale:n,scaleX:e,scaleY:t}){return!Uy(n)||!Uy(e)||!Uy(t)}function _a(n){return ix(n)||oR(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function oR(n){return pT(n.x)||pT(n.y)}function pT(n){return n&&n!=="0%"}function Ip(n,e,t){const r=n-t,i=e*r;return t+i}function gT(n,e,t,r,i){return i!==void 0&&(n=Ip(n,i,r)),Ip(n,t,r)+e}function sx(n,e=0,t=1,r,i){n.min=gT(n.min,e,t,r,i),n.max=gT(n.max,e,t,r,i)}function aR(n,{x:e,y:t}){sx(n.x,e.translate,e.scale,e.originPoint),sx(n.y,t.translate,t.scale,t.originPoint)}const yT=.999999999999,vT=1.0000000000001;function rz(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let c=0;c<i;c++){s=t[c],a=s.projectionDelta;const{visualElement:d}=s.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ic(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,aR(n,a)),r&&_a(s.latestValues)&&ic(n,s.latestValues))}e.x<vT&&e.x>yT&&(e.x=1),e.y<vT&&e.y>yT&&(e.y=1)}function rc(n,e){n.min=n.min+e,n.max=n.max+e}function xT(n,e,t,r,i=.5){const s=At(n.min,n.max,i);sx(n,e,t,s,r)}function ic(n,e){xT(n.x,e.x,e.scaleX,e.scale,e.originX),xT(n.y,e.y,e.scaleY,e.scale,e.originY)}function lR(n,e){return sR(nz(n.getBoundingClientRect(),e))}function iz(n,e,t){const r=lR(n,t),{scroll:i}=e;return i&&(rc(r.x,i.offset.x),rc(r.y,i.offset.y)),r}const cR=({current:n})=>n?n.ownerDocument.defaultView:null,sz=new WeakMap;class oz{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=zt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Tg(g,"page").point)},s=(g,y)=>{const{drag:x,dragPropagation:k,onDragStart:E}=this.getProps();if(x&&!k&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=tR(x),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jr(S=>{let N=this.getAxisMotionValue(S).get()||0;if(ji.test(N)){const{projection:L}=this.visualElement;if(L&&L.layout){const O=L.layout.layoutBox[S];O&&(N=xr(O)*(parseFloat(N)/100))}}this.originPoint[S]=N}),E&&tt.postRender(()=>E(g,y)),tx(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},a=(g,y)=>{const{dragPropagation:x,dragDirectionLock:k,onDirectionLock:E,onDrag:P}=this.getProps();if(!x&&!this.openGlobalLock)return;const{offset:S}=y;if(k&&this.currentDirection===null){this.currentDirection=az(S),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",y.point,S),this.updateAxis("y",y.point,S),this.visualElement.render(),P&&P(g,y)},c=(g,y)=>this.stop(g,y),d=()=>jr(g=>{var y;return this.getAnimationState(g)==="paused"&&((y=this.getAxisMotionValue(g).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new XP(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:cR(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&tt.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!cm(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=QU(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&tc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=JU(i.layoutBox,t):this.constraints=!1,this.elastic=ez(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&jr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=ZU(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!tc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=iz(r,i.root,this.visualElement.getTransformPagePoint());let a=YU(i.layout.layoutBox,s);if(t){const c=t(tz(a));this.hasMutatedConstraints=!!c,c&&(a=sR(c))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=jr(g=>{if(!cm(g,t,this.currentDirection))return;let y=d&&d[g]||{};a&&(y={min:0,max:0});const x=i?200:1e6,k=i?40:1e7,E={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10,...s,...y};return this.startAxisValueAnimation(g,E)});return Promise.all(f).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return tx(this.visualElement,e),r.start(Iw(e,r,0,t,this.visualElement,!1))}stopAnimation(){jr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){jr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){jr(t=>{const{drag:r}=this.getProps();if(!cm(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:c}=i.layout.layoutBox[t];s.set(e[t]-At(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!tc(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};jr(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const d=c.get();i[a]=XU({min:d,max:d},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),jr(a=>{if(!cm(a,e,null))return;const c=this.getAxisMotionValue(a),{min:d,max:f}=this.constraints[a];c.set(At(d,f,i[a]))})}addListeners(){if(!this.visualElement.current)return;sz.set(this.visualElement,this);const e=this.visualElement.current,t=ys(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();tc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),tt.read(r);const a=ls(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(jr(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())});return()=>{a(),t(),s(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=rx,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:c}}}function cm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function az(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class lz extends Bo{constructor(e){super(e),this.removeGroupControls=vn,this.removeListeners=vn,this.controls=new oz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vn}unmount(){this.removeGroupControls(),this.removeListeners()}}const _T=n=>(e,t)=>{n&&tt.postRender(()=>n(e,t))};class cz extends Bo{constructor(){super(...arguments),this.removePointerDownListener=vn}onPointerDown(e){this.session=new XP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:cR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:_T(e),onStart:_T(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&tt.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=ys(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ig=A.createContext(null);function uz(){const n=A.useContext(Ig);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=A.useId();A.useEffect(()=>r(i),[]);const s=A.useCallback(()=>t&&t(i),[i,t]);return!e&&t?[!1,s]:[!0]}const Pw=A.createContext({}),uR=A.createContext({}),Dm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function wT(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ju={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ae.test(n))n=parseFloat(n);else return n;const t=wT(n,e.target.x),r=wT(n,e.target.y);return`${t}% ${r}%`}},dz={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Ro.parse(n);if(i.length>5)return r;const s=Ro.createTransformer(n),a=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;i[0+a]/=c,i[1+a]/=d;const f=At(c,d,.5);return typeof i[2+a]=="number"&&(i[2+a]/=f),typeof i[3+a]=="number"&&(i[3+a]/=f),s(i)}},Sp={};function hz(n){Object.assign(Sp,n)}const{schedule:Rw,cancel:uG}=cP(queueMicrotask,!1);class fz extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;hz(mz),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Dm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||tt.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Rw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function dR(n){const[e,t]=uz(),r=A.useContext(Pw);return u.jsx(fz,{...n,layoutGroup:r,switchLayoutGroup:A.useContext(uR),isPresent:e,safeToRemove:t})}const mz={borderRadius:{...Ju,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ju,borderTopRightRadius:Ju,borderBottomLeftRadius:Ju,borderBottomRightRadius:Ju,boxShadow:dz},hR=["TopLeft","TopRight","BottomLeft","BottomRight"],pz=hR.length,bT=n=>typeof n=="string"?parseFloat(n):n,kT=n=>typeof n=="number"||Ae.test(n);function gz(n,e,t,r,i,s){i?(n.opacity=At(0,t.opacity!==void 0?t.opacity:1,yz(r)),n.opacityExit=At(e.opacity!==void 0?e.opacity:1,0,vz(r))):s&&(n.opacity=At(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<pz;a++){const c=`border${hR[a]}Radius`;let d=ET(e,c),f=ET(t,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||kT(d)===kT(f)?(n[c]=Math.max(At(bT(d),bT(f),r),0),(ji.test(f)||ji.test(d))&&(n[c]+="%")):n[c]=f}(e.rotate||t.rotate)&&(n.rotate=At(e.rotate||0,t.rotate||0,r))}function ET(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const yz=fR(0,.5,gP),vz=fR(.5,.95,vn);function fR(n,e,t){return r=>r<n?0:r>e?1:t(Ga(n,e,r))}function TT(n,e){n.min=e.min,n.max=e.max}function Rr(n,e){TT(n.x,e.x),TT(n.y,e.y)}function IT(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function ST(n,e,t,r,i){return n-=e,n=Ip(n,1/t,r),i!==void 0&&(n=Ip(n,1/i,r)),n}function xz(n,e=0,t=1,r=.5,i,s=n,a=n){if(ji.test(e)&&(e=parseFloat(e),e=At(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=At(s.min,s.max,r);n===s&&(c-=e),n.min=ST(n.min,e,t,c,i),n.max=ST(n.max,e,t,c,i)}function CT(n,e,[t,r,i],s,a){xz(n,e[t],e[r],e[i],e.scale,s,a)}const _z=["x","scaleX","originX"],wz=["y","scaleY","originY"];function NT(n,e,t,r){CT(n.x,e,_z,t?t.x:void 0,r?r.x:void 0),CT(n.y,e,wz,t?t.y:void 0,r?r.y:void 0)}function AT(n){return n.translate===0&&n.scale===1}function mR(n){return AT(n.x)&&AT(n.y)}function PT(n,e){return n.min===e.min&&n.max===e.max}function bz(n,e){return PT(n.x,e.x)&&PT(n.y,e.y)}function RT(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function pR(n,e){return RT(n.x,e.x)&&RT(n.y,e.y)}function jT(n){return xr(n.x)/xr(n.y)}function DT(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class kz{constructor(){this.members=[]}add(e){Sw(this.members,e),e.scheduleRender()}remove(e){if(Cw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ez(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:g,rotateX:y,rotateY:x,skewX:k,skewY:E}=t;f&&(r=`perspective(${f}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),k&&(r+=`skewX(${k}deg) `),E&&(r+=`skewY(${E}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const Tz=(n,e)=>n.depth-e.depth;class Iz{constructor(){this.children=[],this.isDirty=!1}add(e){Sw(this.children,e),this.isDirty=!0}remove(e){Cw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Tz),this.isDirty=!1,this.children.forEach(e)}}function Lm(n){const e=Vn(n)?n.get():n;return yU(e)?e.toValue():e}function Sz(n,e){const t=Di.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(di(r),n(s-e))};return tt.read(r,!0),()=>di(r)}function Cz(n){return n instanceof SVGElement&&n.tagName!=="svg"}function Nz(n,e,t){const r=Vn(n)?n:Ni(n);return r.start(Iw("",r,e,t)),r.animation}const wa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ld=typeof window<"u"&&window.MotionDebug!==void 0,zy=["","X","Y","Z"],Az={visibility:"hidden"},LT=1e3;let Pz=0;function qy(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function gR(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=GP(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",tt,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&gR(r)}function yR({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},c=e==null?void 0:e()){this.id=Pz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ld&&(wa.totalNodes=wa.resolvedTargetDeltas=wa.recalculatedProjection=0),this.nodes.forEach(Dz),this.nodes.forEach(Fz),this.nodes.forEach(Bz),this.nodes.forEach(Lz),ld&&window.MotionDebug.record(wa)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Iz)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Nw),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const d=this.eventHandlers.get(a);d&&d.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Cz(a),this.instance=a;const{layoutId:d,layout:f,visualElement:g}=this.options;if(g&&!g.current&&g.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(f||d)&&(this.isLayoutDirty=!0),n){let y;const x=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=Sz(x,250),Dm.hasAnimatedSinceResize&&(Dm.hasAnimatedSinceResize=!1,this.nodes.forEach(VT))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&g&&(d||f)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:x,hasRelativeTargetChanged:k,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||g.getDefaultTransition()||Wz,{onLayoutAnimationStart:S,onLayoutAnimationComplete:N}=g.getProps(),L=!this.targetLayout||!pR(this.targetLayout,E)||k,O=!x&&k;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||O||x&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,O);const Q={...uw(P,"layout"),onPlay:S,onComplete:N};(g.shouldReduceMotion||this.options.layoutRoot)&&(Q.delay=0,Q.type=!1),this.startAnimation(Q)}else x||VT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,di(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Uz),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(MT);return}this.isUpdating||this.nodes.forEach(Vz),this.isUpdating=!1,this.nodes.forEach(Oz),this.nodes.forEach(Rz),this.nodes.forEach(jz),this.clearAllSnapshots();const c=Di.now();hn.delta=Es(0,1e3/60,c-hn.timestamp),hn.timestamp=c,hn.isProcessing=!0,Dy.update.process(hn),Dy.preRender.process(hn),Dy.render.process(hn),hn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Rw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Mz),this.sharedNodes.forEach(zz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=zt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!mR(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;a&&(c||_a(this.latestValues)||g)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return a&&(d=this.removeTransform(d)),Hz(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:c}=this.options;if(!c)return zt();const d=c.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Kz))){const{scroll:g}=this.root;g&&(rc(d.x,g.offset.x),rc(d.y,g.offset.y))}return d}removeElementScroll(a){var c;const d=zt();if(Rr(d,a),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return d;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&Rr(d,a),rc(d.x,y.offset.x),rc(d.y,y.offset.y))}return d}applyTransform(a,c=!1){const d=zt();Rr(d,a);for(let f=0;f<this.path.length;f++){const g=this.path[f];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&ic(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),_a(g.latestValues)&&ic(d,g.latestValues)}return _a(this.latestValues)&&ic(d,this.latestValues),d}removeTransform(a){const c=zt();Rr(c,a);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!_a(f.latestValues))continue;ix(f.latestValues)&&f.updateSnapshot();const g=zt(),y=f.measurePageBox();Rr(g,y),NT(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return _a(this.latestValues)&&NT(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==hn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var c;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:x}=this.options;if(!(!this.layout||!(y||x))){if(this.resolvedRelativeTargetAt=hn.timestamp,!this.targetDelta&&!this.relativeTarget){const k=this.getClosestProjectingParent();k&&k.layout&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zt(),this.relativeTargetOrigin=zt(),Ed(this.relativeTargetOrigin,this.layout.layoutBox,k.layout.layoutBox),Rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=zt(),this.targetWithTransforms=zt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),GU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Rr(this.target,this.layout.layoutBox),aR(this.target,this.targetDelta)):Rr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const k=this.getClosestProjectingParent();k&&!!k.resumingFrom==!!this.resumingFrom&&!k.options.layoutScroll&&k.target&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zt(),this.relativeTargetOrigin=zt(),Ed(this.relativeTargetOrigin,this.target,k.target),Rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ld&&wa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ix(this.parent.latestValues)||oR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===hn.timestamp&&(f=!1),f)return;const{layout:g,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||y))return;Rr(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,k=this.treeScale.y;rz(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=zt());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(IT(this.prevProjectionDelta.x,this.projectionDelta.x),IT(this.prevProjectionDelta.y,this.projectionDelta.y)),kd(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==k||!DT(this.projectionDelta.x,this.prevProjectionDelta.x)||!DT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),ld&&wa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),a){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nc(),this.projectionDelta=nc(),this.projectionDeltaWithTransform=nc()}setAnimationOrigin(a,c=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},y=nc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const x=zt(),k=d?d.source:void 0,E=this.layout?this.layout.source:void 0,P=k!==E,S=this.getStack(),N=!S||S.members.length<=1,L=!!(P&&!N&&this.options.crossfade===!0&&!this.path.some($z));this.animationProgress=0;let O;this.mixTargetDelta=Q=>{const W=Q/1e3;OT(y.x,a.x,W),OT(y.y,a.y,W),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ed(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qz(this.relativeTarget,this.relativeTargetOrigin,x,W),O&&bz(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=zt()),Rr(O,this.relativeTarget)),P&&(this.animationValues=g,gz(g,f,this.latestValues,W,L,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=W},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(di(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tt.update(()=>{Dm.hasAnimatedSinceResize=!0,this.currentAnimation=Nz(0,LT,{...a,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(LT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:g}=a;if(!(!c||!d||!f)){if(this!==a&&this.layout&&f&&vR(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||zt();const y=xr(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+y;const x=xr(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+x}Rr(c,d),ic(c,g),kd(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new kz),this.sharedNodes.get(a).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:c}=this.options;return c?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:c}=this.options;return c?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:d}=a;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&qy("z",a,f,this.animationValues);for(let g=0;g<zy.length;g++)qy(`rotate${zy[g]}`,a,f,this.animationValues),qy(`skew${zy[g]}`,a,f,this.animationValues);a.render();for(const g in f)a.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);a.scheduleRender()}getProjectionStyles(a){var c,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Az;const f={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Lm(a==null?void 0:a.pointerEvents)||"",f.transform=g?g(this.latestValues,""):"none",f;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const P={};return this.options.layoutId&&(P.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,P.pointerEvents=Lm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!_a(this.latestValues)&&(P.transform=g?g({},""):"none",this.hasProjected=!1),P}const x=y.animationValues||y.latestValues;this.applyTransformsToTarget(),f.transform=Ez(this.projectionDeltaWithTransform,this.treeScale,x),g&&(f.transform=g(x,f.transform));const{x:k,y:E}=this.projectionDelta;f.transformOrigin=`${k.origin*100}% ${E.origin*100}% 0`,y.animationValues?f.opacity=y===this?(d=(c=x.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:f.opacity=y===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const P in Sp){if(x[P]===void 0)continue;const{correct:S,applyTo:N}=Sp[P],L=f.transform==="none"?x[P]:S(x[P],y);if(N){const O=N.length;for(let Q=0;Q<O;Q++)f[N[Q]]=L}else f[P]=L}return this.options.layoutId&&(f.pointerEvents=y===this?Lm(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var c;return(c=a.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(MT),this.root.sharedNodes.clear()}}}function Rz(n){n.updateLayout()}function jz(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?jr(y=>{const x=a?t.measuredBox[y]:t.layoutBox[y],k=xr(x);x.min=r[y].min,x.max=x.min+k}):vR(s,t.layoutBox,r)&&jr(y=>{const x=a?t.measuredBox[y]:t.layoutBox[y],k=xr(r[y]);x.max=x.min+k,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+k)});const c=nc();kd(c,r,t.layoutBox);const d=nc();a?kd(d,n.applyTransform(i,!0),t.measuredBox):kd(d,r,t.layoutBox);const f=!mR(c);let g=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:k}=y;if(x&&k){const E=zt();Ed(E,t.layoutBox,x.layoutBox);const P=zt();Ed(P,r,k.layoutBox),pR(E,P)||(g=!0),y.options.layoutRoot&&(n.relativeTarget=P,n.relativeTargetOrigin=E,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:c,hasLayoutChanged:f,hasRelativeTargetChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function Dz(n){ld&&wa.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Lz(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Mz(n){n.clearSnapshot()}function MT(n){n.clearMeasurements()}function Vz(n){n.isLayoutDirty=!1}function Oz(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function VT(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Fz(n){n.resolveTargetDelta()}function Bz(n){n.calcProjection()}function Uz(n){n.resetSkewAndRotation()}function zz(n){n.removeLeadSnapshot()}function OT(n,e,t){n.translate=At(e.translate,0,t),n.scale=At(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function FT(n,e,t,r){n.min=At(e.min,t.min,r),n.max=At(e.max,t.max,r)}function qz(n,e,t,r){FT(n.x,e.x,t.x,r),FT(n.y,e.y,t.y,r)}function $z(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Wz={duration:.45,ease:[.4,0,.1,1]},BT=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),UT=BT("applewebkit/")&&!BT("chrome/")?Math.round:vn;function zT(n){n.min=UT(n.min),n.max=UT(n.max)}function Hz(n){zT(n.x),zT(n.y)}function vR(n,e,t){return n==="position"||n==="preserve-aspect"&&!KU(jT(e),jT(t),.2)}function Kz(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const Gz=yR({attachResizeListener:(n,e)=>ls(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$y={current:void 0},xR=yR({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!$y.current){const n=new Gz({});n.mount(window),n.setOptions({layoutScroll:!0}),$y.current=n}return $y.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Qz={pan:{Feature:cz},drag:{Feature:lz,ProjectionNode:xR,MeasureLayout:dR}};function qT(n,e){const t=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,a)=>{if(s.pointerType==="touch"||nR())return;const c=n.getProps();n.animationState&&c.whileHover&&n.animationState.setActive("whileHover",e);const d=c[r];d&&tt.postRender(()=>d(s,a))};return ys(n.current,t,i,{passive:!n.getProps()[r]})}class Jz extends Bo{mount(){this.unmount=gs(qT(this.node,!0),qT(this.node,!1))}unmount(){}}class Yz extends Bo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gs(ls(this.node.current,"focus",()=>this.onFocus()),ls(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const _R=(n,e)=>e?n===e?!0:_R(n,e.parentElement):!1;function Wy(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Tg(t))}class Xz extends Bo{constructor(){super(...arguments),this.removeStartListeners=vn,this.removeEndListeners=vn,this.removeAccessibleListeners=vn,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=ys(window,"pointerup",(c,d)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:g,globalTapTarget:y}=this.node.getProps(),x=!y&&!_R(this.node.current,c.target)?g:f;x&&tt.update(()=>x(c,d))},{passive:!(r.onTap||r.onPointerUp)}),a=ys(window,"pointercancel",(c,d)=>this.cancelPress(c,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=gs(s,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=c=>{c.key!=="Enter"||!this.checkPressEnd()||Wy("up",(d,f)=>{const{onTap:g}=this.node.getProps();g&&tt.postRender(()=>g(d,f))})};this.removeEndListeners(),this.removeEndListeners=ls(this.node.current,"keyup",a),Wy("down",(c,d)=>{this.startPress(c,d)})},t=ls(this.node.current,"keydown",e),r=()=>{this.isPressing&&Wy("cancel",(s,a)=>this.cancelPress(s,a))},i=ls(this.node.current,"blur",r);this.removeAccessibleListeners=gs(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&tt.postRender(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!nR()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&tt.postRender(()=>r(e,t))}mount(){const e=this.node.getProps(),t=ys(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ls(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=gs(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ox=new WeakMap,Hy=new WeakMap,Zz=n=>{const e=ox.get(n.target);e&&e(n)},eq=n=>{n.forEach(Zz)};function tq({root:n,...e}){const t=n||document;Hy.has(t)||Hy.set(t,{});const r=Hy.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(eq,{root:n,...e})),r[i]}function nq(n,e,t){const r=tq(e);return ox.set(n,t),r.observe(n),()=>{ox.delete(n),r.unobserve(n)}}const rq={some:0,all:1};class iq extends Bo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:rq[i]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=f?g:y;x&&x(d)};return nq(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(sq(e,t))&&this.startObserver()}unmount(){}}function sq({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const oq={inView:{Feature:iq},tap:{Feature:Xz},focus:{Feature:Yz},hover:{Feature:Jz}},aq={layout:{ProjectionNode:xR,MeasureLayout:dR}},Sg=A.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Cg=A.createContext({}),jw=typeof window<"u",Ng=jw?A.useLayoutEffect:A.useEffect,wR=A.createContext({strict:!1});function lq(n,e,t,r,i){var s,a;const{visualElement:c}=A.useContext(Cg),d=A.useContext(wR),f=A.useContext(Ig),g=A.useContext(Sg).reducedMotion,y=A.useRef();r=r||d.renderer,!y.current&&r&&(y.current=r(n,{visualState:e,parent:c,props:t,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:g}));const x=y.current,k=A.useContext(uR);x&&!x.projection&&i&&(x.type==="html"||x.type==="svg")&&cq(y.current,t,i,k);const E=A.useRef(!1);A.useInsertionEffect(()=>{x&&E.current&&x.update(t,f)});const P=t[KP],S=A.useRef(!!P&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,P))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,P)));return Ng(()=>{x&&(E.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),Rw.render(x.render),S.current&&x.animationState&&x.animationState.animateChanges())}),A.useEffect(()=>{x&&(!S.current&&x.animationState&&x.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)===null||N===void 0||N.call(window,P)}),S.current=!1))}),x}function cq(n,e,t,r){const{layoutId:i,layout:s,drag:a,dragConstraints:c,layoutScroll:d,layoutRoot:f}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:bR(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||c&&tc(c),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:f})}function bR(n){if(n)return n.options.allowProjection!==!1?n.projection:bR(n.parent)}function uq(n,e,t){return A.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):tc(t)&&(t.current=r))},[e])}function Ag(n){return bg(n.animate)||cw.some(e=>Yd(n[e]))}function kR(n){return!!(Ag(n)||n.variants)}function dq(n,e){if(Ag(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Yd(t)?t:void 0,animate:Yd(r)?r:void 0}}return n.inherit!==!1?e:{}}function hq(n){const{initial:e,animate:t}=dq(n,A.useContext(Cg));return A.useMemo(()=>({initial:e,animate:t}),[$T(e),$T(t)])}function $T(n){return Array.isArray(n)?n.join(" "):n}const WT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Nc={};for(const n in WT)Nc[n]={isEnabled:e=>WT[n].some(t=>!!e[t])};function fq(n){for(const e in n)Nc[e]={...Nc[e],...n[e]}}const mq=Symbol.for("motionComponentSymbol");function pq({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&fq(n);function s(c,d){let f;const g={...A.useContext(Sg),...c,layoutId:gq(c)},{isStatic:y}=g,x=hq(c),k=r(c,y);if(!y&&jw){yq();const E=vq(g);f=E.MeasureLayout,x.visualElement=lq(i,k,g,e,E.ProjectionNode)}return u.jsxs(Cg.Provider,{value:x,children:[f&&x.visualElement?u.jsx(f,{visualElement:x.visualElement,...g}):null,t(i,c,uq(k,x.visualElement,d),k,y,x.visualElement)]})}const a=A.forwardRef(s);return a[mq]=i,a}function gq({layoutId:n}){const e=A.useContext(Pw).id;return e&&n!==void 0?e+"-"+n:n}function yq(n,e){A.useContext(wR).strict}function vq(n){const{drag:e,layout:t}=Nc;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const xq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Dw(n){return typeof n!="string"||n.includes("-")?!1:!!(xq.indexOf(n)>-1||/[A-Z]/u.test(n))}function ER(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const TR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IR(n,e,t,r){ER(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(TR.has(i)?i:Aw(i),e.attrs[i])}function SR(n,{layout:e,layoutId:t}){return el.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Sp[n]||n==="opacity")}function Lw(n,e,t){var r;const{style:i}=n,s={};for(const a in i)(Vn(i[a])||e.style&&Vn(e.style[a])||SR(a,n)||((r=t==null?void 0:t.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function CR(n,e,t){const r=Lw(n,e,t);for(const i in n)if(Vn(n[i])||Vn(e[i])){const s=Ah.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}function Wc(n){const e=A.useRef(null);return e.current===null&&(e.current=n()),e.current}function _q({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const a={latestValues:wq(r,i,s,n),renderState:e()};return t&&(a.mount=c=>t(r,c,a)),a}const NR=n=>(e,t)=>{const r=A.useContext(Cg),i=A.useContext(Ig),s=()=>_q(n,e,r,i);return t?s():Wc(s)};function wq(n,e,t,r){const i={},s=r(n,{});for(const x in s)i[x]=Lm(s[x]);let{initial:a,animate:c}=n;const d=Ag(n),f=kR(n);e&&f&&!d&&n.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let g=t?t.initial===!1:!1;g=g||a===!1;const y=g?c:a;if(y&&typeof y!="boolean"&&!bg(y)){const x=Array.isArray(y)?y:[y];for(let k=0;k<x.length;k++){const E=aw(n,x[k]);if(E){const{transitionEnd:P,transition:S,...N}=E;for(const L in N){let O=N[L];if(Array.isArray(O)){const Q=g?O.length-1:0;O=O[Q]}O!==null&&(i[L]=O)}for(const L in P)i[L]=P[L]}}}return i}const Mw=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),AR=()=>({...Mw(),attrs:{}}),PR=(n,e)=>e&&typeof n=="number"?e.transform(n):n,bq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kq=Ah.length;function Eq(n,e,t){let r="",i=!0;for(let s=0;s<kq;s++){const a=Ah[s],c=n[a];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(a.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||t){const f=PR(c,yw[a]);if(!d){i=!1;const g=bq[a]||a;r+=`${g}(${f}) `}t&&(e[a]=f)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function Vw(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,c=!1;for(const d in e){const f=e[d];if(el.has(d)){a=!0;continue}else if(wP(d)){i[d]=f;continue}else{const g=PR(f,yw[d]);d.startsWith("origin")?(c=!0,s[d]=g):r[d]=g}}if(e.transform||(a||t?r.transform=Eq(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:g=0}=s;r.transformOrigin=`${d} ${f} ${g}`}}function HT(n,e,t){return typeof n=="string"?n:Ae.transform(e+t*n)}function Tq(n,e,t){const r=HT(e,n.x,n.width),i=HT(t,n.y,n.height);return`${r} ${i}`}const Iq={offset:"stroke-dashoffset",array:"stroke-dasharray"},Sq={offset:"strokeDashoffset",array:"strokeDasharray"};function Cq(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?Iq:Sq;n[s.offset]=Ae.transform(-r);const a=Ae.transform(e),c=Ae.transform(t);n[s.array]=`${a} ${c}`}function Ow(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:c=1,pathOffset:d=0,...f},g,y){if(Vw(n,f,y),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:x,style:k,dimensions:E}=n;x.transform&&(E&&(k.transform=x.transform),delete x.transform),E&&(i!==void 0||s!==void 0||k.transform)&&(k.transformOrigin=Tq(E,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(x.x=e),t!==void 0&&(x.y=t),r!==void 0&&(x.scale=r),a!==void 0&&Cq(x,a,c,d,!1)}const Fw=n=>typeof n=="string"&&n.toLowerCase()==="svg",Nq={useVisualState:NR({scrapeMotionValuesFromProps:CR,createRenderState:AR,onMount:(n,e,{renderState:t,latestValues:r})=>{tt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),tt.render(()=>{Ow(t,r,Fw(e.tagName),n.transformTemplate),IR(e,t)})}})},Aq={useVisualState:NR({scrapeMotionValuesFromProps:Lw,createRenderState:Mw})};function RR(n,e,t){for(const r in e)!Vn(e[r])&&!SR(r,t)&&(n[r]=e[r])}function Pq({transformTemplate:n},e){return A.useMemo(()=>{const t=Mw();return Vw(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Rq(n,e){const t=n.style||{},r={};return RR(r,t,n),Object.assign(r,Pq(n,e)),r}function jq(n,e){const t={},r=Rq(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const Dq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Dq.has(n)}let jR=n=>!Cp(n);function Lq(n){n&&(jR=e=>e.startsWith("on")?!Cp(e):n(e))}try{Lq(require("@emotion/is-prop-valid").default)}catch{}function Mq(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(jR(i)||t===!0&&Cp(i)||!e&&!Cp(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function Vq(n,e,t,r){const i=A.useMemo(()=>{const s=AR();return Ow(s,e,Fw(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};RR(s,n.style,n),i.style={...s,...i.style}}return i}function Oq(n=!1){return(t,r,i,{latestValues:s},a)=>{const d=(Dw(t)?Vq:jq)(r,s,a,t),f=Mq(r,typeof t=="string",n),g=t!==A.Fragment?{...f,...d,ref:i}:{},{children:y}=r,x=A.useMemo(()=>Vn(y)?y.get():y,[y]);return A.createElement(t,{...g,children:x})}}function Fq(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...Dw(r)?Nq:Aq,preloadedFeatures:n,useRender:Oq(i),createVisualElement:e,Component:r};return pq(a)}}const ax={current:null},DR={current:!1};function Bq(){if(DR.current=!0,!!jw)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>ax.current=n.matches;n.addListener(e),e()}else ax.current=!1}function Uq(n,e,t){for(const r in e){const i=e[r],s=t[r];if(Vn(i))n.addValue(r,i);else if(Vn(s))n.addValue(r,Ni(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,Ni(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const KT=new WeakMap,zq=[...EP,Dn,Ro],qq=n=>zq.find(kP(n)),GT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $q{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=mw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Di.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,tt.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=a;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!s,this.isControllingVariants=Ag(t),this.isVariantNode=kR(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in y){const k=y[x];d[x]!==void 0&&Vn(k)&&k.set(d[x],!1)}}mount(e){this.current=e,KT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),DR.current||Bq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ax.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){KT.delete(this.current),this.projection&&this.projection.unmount(),di(this.notifyUpdate),di(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=el.has(e),i=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&tt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Nc){const t=Nc[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):zt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<GT.length;r++){const i=GT[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Uq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Ni(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(xP(i)||vP(i))?i=parseFloat(i):!qq(i)&&Ro.test(t)&&(i=RP(e,t)),this.setBaseTarget(e,Vn(i)?i.get():i)),Vn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=aw(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Vn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Nw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class LR extends $q{constructor(){super(...arguments),this.KeyframeResolver=jP}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}}function Wq(n){return window.getComputedStyle(n)}class Hq extends LR{constructor(){super(...arguments),this.type="html",this.renderInstance=ER}readValueFromInstance(e,t){if(el.has(t)){const r=vw(t);return r&&r.default||0}else{const r=Wq(e),i=(wP(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return lR(e,t)}build(e,t,r){Vw(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Lw(e,t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Kq extends LR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=zt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(el.has(t)){const r=vw(t);return r&&r.default||0}return t=TR.has(t)?t:Aw(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return CR(e,t,r)}build(e,t,r){Ow(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){IR(e,t,r,i)}mount(e){this.isSVGTag=Fw(e.tagName),super.mount(e)}}const Gq=(n,e)=>Dw(n)?new Kq(e):new Hq(e,{allowProjection:n!==A.Fragment}),Qq=Fq({...OU,...oq,...Qz,...aq},Gq),ee=O7(Qq);class Jq extends A.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Yq({children:n,isPresent:e}){const t=A.useId(),r=A.useRef(null),i=A.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=A.useContext(Sg);return A.useInsertionEffect(()=>{const{width:a,height:c,top:d,left:f}=i.current;if(e||!r.current||!a||!c)return;r.current.dataset.motionPopId=t;const g=document.createElement("style");return s&&(g.nonce=s),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${c}px !important;
            top: ${d}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(g)}},[e]),u.jsx(Jq,{isPresent:e,childRef:r,sizeRef:i,children:A.cloneElement(n,{ref:r})})}const Xq=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const c=Wc(Zq),d=A.useId(),f=A.useCallback(y=>{c.set(y,!0);for(const x of c.values())if(!x)return;r&&r()},[c,r]),g=A.useMemo(()=>({id:d,initial:e,isPresent:t,custom:i,onExitComplete:f,register:y=>(c.set(y,!1),()=>c.delete(y))}),s?[Math.random(),f]:[t,f]);return A.useMemo(()=>{c.forEach((y,x)=>c.set(x,!1))},[t]),A.useEffect(()=>{!t&&!c.size&&r&&r()},[t]),a==="popLayout"&&(n=u.jsx(Yq,{isPresent:t,children:n})),u.jsx(Ig.Provider,{value:g,children:n})};function Zq(){return new Map}const um=n=>n.key||"";function QT(n){const e=[];return A.Children.forEach(n,t=>{A.isValidElement(t)&&e.push(t)}),e}const Ac=({children:n,exitBeforeEnter:e,custom:t,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:a="sync"})=>{const c=A.useMemo(()=>QT(n),[n]),d=c.map(um),f=A.useRef(!0),g=A.useRef(c),y=Wc(()=>new Map),[x,k]=A.useState(c),[E,P]=A.useState(c);Ng(()=>{f.current=!1,g.current=c;for(let L=0;L<E.length;L++){const O=um(E[L]);d.includes(O)?y.delete(O):y.get(O)!==!0&&y.set(O,!1)}},[E,d.length,d.join("-")]);const S=[];if(c!==x){let L=[...c];for(let O=0;O<E.length;O++){const Q=E[O],W=um(Q);d.includes(W)||(L.splice(O,0,Q),S.push(Q))}a==="wait"&&S.length&&(L=S),P(QT(L)),k(c);return}const{forceRender:N}=A.useContext(Pw);return u.jsx(u.Fragment,{children:E.map(L=>{const O=um(L),Q=c===E||d.includes(O),W=()=>{if(y.has(O))y.set(O,!0);else return;let U=!0;y.forEach(C=>{C||(U=!1)}),U&&(N==null||N(),P(g.current),i&&i())};return u.jsx(Xq,{isPresent:Q,initial:!f.current||r?void 0:!1,custom:Q?void 0:t,presenceAffectsLayout:s,mode:a,onExitComplete:Q?void 0:W,children:L},O)})})};function e$(n){const e=Wc(()=>Ni(n)),{isStatic:t}=A.useContext(Sg);if(t){const[,r]=A.useState(n);A.useEffect(()=>e.on("change",r),[])}return e}function MR(n,e){const t=e$(e()),r=()=>t.set(e());return r(),Ng(()=>{const i=()=>tt.preRender(r,!1,!0),s=n.map(a=>a.on("change",i));return()=>{s.forEach(a=>a()),di(r)}}),t}const t$=n=>n&&typeof n=="object"&&n.mix,n$=n=>t$(n)?n.mix:void 0;function r$(...n){const e=!Array.isArray(n[0]),t=e?0:-1,r=n[0+t],i=n[1+t],s=n[2+t],a=n[3+t],c=kw(i,s,{mixer:n$(s[0]),...a});return e?c(r):c}function i$(n){bd.current=[],n();const e=MR(bd.current,n);return bd.current=void 0,e}function Ky(n,e,t,r){if(typeof n=="function")return i$(n);const i=typeof e=="function"?e:r$(e,t,r);return Array.isArray(n)?JT(n,i):JT([n],([s])=>i(s))}function JT(n,e){const t=Wc(()=>[]);return MR(n,()=>{t.length=0;const r=n.length;for(let i=0;i<r;i++)t[i]=n[i].get();return e(t)})}function s$(n,e,t){return typeof n=="string"?n=document.querySelectorAll(n):n instanceof Element&&(n=[n]),Array.from(n||[])}const Mm=new WeakMap;let oo;function o$(n,e){if(e){const{inlineSize:t,blockSize:r}=e[0];return{width:t,height:r}}else return n instanceof SVGElement&&"getBBox"in n?n.getBBox():{width:n.offsetWidth,height:n.offsetHeight}}function a$({target:n,contentRect:e,borderBoxSize:t}){var r;(r=Mm.get(n))===null||r===void 0||r.forEach(i=>{i({target:n,contentSize:e,get size(){return o$(n,t)}})})}function l$(n){n.forEach(a$)}function c$(){typeof ResizeObserver>"u"||(oo=new ResizeObserver(l$))}function u$(n,e){oo||c$();const t=s$(n);return t.forEach(r=>{let i=Mm.get(r);i||(i=new Set,Mm.set(r,i)),i.add(e),oo==null||oo.observe(r)}),()=>{t.forEach(r=>{const i=Mm.get(r);i==null||i.delete(e),i!=null&&i.size||oo==null||oo.unobserve(r)})}}const Vm=new Set;let Td;function d$(){Td=()=>{const n={width:window.innerWidth,height:window.innerHeight},e={target:window,size:n,contentSize:n};Vm.forEach(t=>t(e))},window.addEventListener("resize",Td)}function h$(n){return Vm.add(n),Td||d$(),()=>{Vm.delete(n),!Vm.size&&Td&&(Td=void 0)}}function f$(n,e){return typeof n=="function"?h$(n):u$(n,e)}const m$=50,YT=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),p$=()=>({time:0,x:YT(),y:YT()}),g$={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function XT(n,e,t,r){const i=t[e],{length:s,position:a}=g$[e],c=i.current,d=t.time;i.current=n[`scroll${a}`],i.scrollLength=n[`scroll${s}`]-n[`client${s}`],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=Ga(0,i.scrollLength,i.current);const f=r-d;i.velocity=f>m$?0:_w(i.current-c,f)}function y$(n,e,t){XT(n,"x",e,t),XT(n,"y",e,t),e.time=t}function v$(n,e){const t={x:0,y:0};let r=n;for(;r&&r!==e;)if(r instanceof HTMLElement)t.x+=r.offsetLeft,t.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const i=r.getBoundingClientRect();r=r.parentElement;const s=r.getBoundingClientRect();t.x+=i.left-s.left,t.y+=i.top-s.top}else if(r instanceof SVGGraphicsElement){const{x:i,y:s}=r.getBBox();t.x+=i,t.y+=s;let a=null,c=r.parentNode;for(;!a;)c.tagName==="svg"&&(a=c),c=r.parentNode;r=a}else break;return t}const x$={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},lx={start:0,center:.5,end:1};function ZT(n,e,t=0){let r=0;if(n in lx&&(n=lx[n]),typeof n=="string"){const i=parseFloat(n);n.endsWith("px")?r=i:n.endsWith("%")?n=i/100:n.endsWith("vw")?r=i/100*document.documentElement.clientWidth:n.endsWith("vh")?r=i/100*document.documentElement.clientHeight:n=i}return typeof n=="number"&&(r=e*n),t+r}const _$=[0,0];function w$(n,e,t,r){let i=Array.isArray(n)?n:_$,s=0,a=0;return typeof n=="number"?i=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?i=n.split(" "):i=[n,lx[n]?n:"0"]),s=ZT(i[0],t,r),a=ZT(i[1],e),s-a}const b$={x:0,y:0};function k$(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function E$(n,e,t){const{offset:r=x$.All}=t,{target:i=n,axis:s="y"}=t,a=s==="y"?"height":"width",c=i!==n?v$(i,n):b$,d=i===n?{width:n.scrollWidth,height:n.scrollHeight}:k$(i),f={width:n.clientWidth,height:n.clientHeight};e[s].offset.length=0;let g=!e[s].interpolate;const y=r.length;for(let x=0;x<y;x++){const k=w$(r[x],f[a],d[a],c[s]);!g&&k!==e[s].interpolatorOffsets[x]&&(g=!0),e[s].offset[x]=k}g&&(e[s].interpolate=kw(e[s].offset,zP(r)),e[s].interpolatorOffsets=[...e[s].offset]),e[s].progress=e[s].interpolate(e[s].current)}function T$(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let r=e;for(;r&&r!==n;)t.x.targetOffset+=r.offsetLeft,t.y.targetOffset+=r.offsetTop,r=r.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function I$(n,e,t,r={}){return{measure:()=>T$(n,r.target,t),update:i=>{y$(n,t,i),(r.offset||r.target)&&E$(n,t,r)},notify:()=>e(t)}}const Yu=new WeakMap,eI=new WeakMap,Gy=new WeakMap,tI=n=>n===document.documentElement?window:n;function Bw(n,{container:e=document.documentElement,...t}={}){let r=Gy.get(e);r||(r=new Set,Gy.set(e,r));const i=p$(),s=I$(e,n,i,t);if(r.add(s),!Yu.has(e)){const c=()=>{for(const x of r)x.measure()},d=()=>{for(const x of r)x.update(hn.timestamp)},f=()=>{for(const x of r)x.notify()},g=()=>{tt.read(c,!1,!0),tt.read(d,!1,!0),tt.update(f,!1,!0)};Yu.set(e,g);const y=tI(e);window.addEventListener("resize",g,{passive:!0}),e!==document.documentElement&&eI.set(e,f$(e,g)),y.addEventListener("scroll",g,{passive:!0})}const a=Yu.get(e);return tt.read(a,!1,!0),()=>{var c;di(a);const d=Gy.get(e);if(!d||(d.delete(s),d.size))return;const f=Yu.get(e);Yu.delete(e),f&&(tI(e).removeEventListener("scroll",f),(c=eI.get(e))===null||c===void 0||c(),window.removeEventListener("resize",f))}}function VR(n,e){let t;const r=()=>{const{currentTime:i}=e,a=(i===null?0:i.value)/100;t!==a&&n(a),t=a};return tt.update(r,!0),()=>di(r)}function S$({source:n,container:e,axis:t="y"}){n&&(e=n);const r={value:0},i=Bw(s=>{r.value=s[t].progress*100},{container:e,axis:t});return{currentTime:r,cancel:i}}const Qy=new Map;function OR({source:n,container:e=document.documentElement,axis:t="y"}={}){n&&(e=n),Qy.has(e)||Qy.set(e,{});const r=Qy.get(e);return r[t]||(r[t]=HP()?new ScrollTimeline({source:e,axis:t}):S$({source:e,axis:t})),r[t]}function C$(n){return n.length===2}function FR(n){return n&&(n.target||n.offset)}function N$(n,e){return C$(n)||FR(e)?Bw(t=>{n(t[e.axis].progress,t)},e):VR(n,OR(e))}function A$(n,e){if(n.flatten(),FR(e))return n.pause(),Bw(t=>{n.time=n.duration*t[e.axis].progress},e);{const t=OR(e);return n.attachTimeline?n.attachTimeline(t,r=>(r.pause(),VR(i=>{r.time=r.duration*i},t))):vn}}function P$(n,{axis:e="y",...t}={}){const r={axis:e,...t};return typeof n=="function"?N$(n,r):A$(n,r)}function nI(n,e){X7(!!(!e||e.current))}const R$=()=>({scrollX:Ni(0),scrollY:Ni(0),scrollXProgress:Ni(0),scrollYProgress:Ni(0)});function j$({container:n,target:e,layoutEffect:t=!0,...r}={}){const i=Wc(R$);return(t?Ng:A.useEffect)(()=>(nI("target",e),nI("container",n),P$((a,{x:c,y:d})=>{i.scrollX.set(c.current),i.scrollXProgress.set(c.progress),i.scrollY.set(d.current),i.scrollYProgress.set(d.progress)},{...r,container:(n==null?void 0:n.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[n,e,JSON.stringify(r.offset)]),i}function D$(){const[n,e]=A.useState(!1),[t,r]=A.useState(!1),i=zr(),{currentUser:s}=qr();A.useEffect(()=>{let c;const d=()=>{c||(c=setTimeout(()=>{r(window.scrollY>20),c=null},50))};return window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d),c&&clearTimeout(c)}},[]),A.useEffect(()=>{e(!1)},[i]);const a=c=>i.pathname===c;return u.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 px-4 pt-4 bg-transparent",children:u.jsx(ee.nav,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},className:`
          max-w-5xl mx-auto
          transition-all duration-300 ease-in-out
          ${t?"rounded-[24px] shadow-lg":"rounded-full"}
          overflow-hidden
          ${t?"bg-[#FAB12F]/85 backdrop-blur-md":"bg-transparent"}
          ${n&&!t?"bg-[#FAB12F]":""}
        `,children:u.jsxs("div",{className:"px-4 py-3",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx(mr,{to:"/",children:u.jsx(ee.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center",children:u.jsx("img",{src:"/src/assets/gencerdaslog.png",alt:"G'GON Logo",className:"h-10 object-contain"})})}),u.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[[{path:"/ai-chat",label:"G-Gon"},{path:"/komunitas",label:"Komunitas"},{path:"/courses",label:"Courses"}].map(c=>u.jsxs(mr,{to:c.path,className:"relative group",children:[u.jsx("span",{className:`text-white font-medium transition-colors ${a(c.path)?"text-orange-200":"hover:text-orange-200"}`,children:c.label}),u.jsx("span",{className:`absolute -bottom-1 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full ${a(c.path)?"w-full":""}`})]},c.path)),u.jsx(ee.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:s?u.jsxs(mr,{to:"/profile",className:`
                      px-6 py-2 rounded-full transition-all duration-300 font-semibold
                      flex items-center gap-2
                      ${t?"bg-white text-orange-500 hover:bg-orange-100 shadow-md hover:shadow-lg":"bg-[#FAB12F] text-white hover:bg-[#FAB12F]/90"}
                    `,children:[u.jsx("span",{children:s.displayName||"Profile"}),u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})]}):u.jsx(mr,{to:"/login",className:`
                      px-6 py-2 rounded-full transition-all duration-300 font-semibold
                      ${t?"bg-white text-orange-500 hover:bg-orange-100 shadow-md hover:shadow-lg":"bg-[#FAB12F] text-white hover:bg-[#FAB12F]/90"}
                    `,children:"Login"})})]}),u.jsx(ee.button,{whileTap:{scale:.95},className:"md:hidden p-2 hover:bg-[#FAB12F]/50 rounded-full transition-colors",onClick:()=>e(!n),children:u.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:n?u.jsx("path",{d:"M6 18L18 6M6 6l12 12"}):u.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})})]}),u.jsx(Ac,{children:n&&u.jsx(ee.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"md:hidden overflow-hidden",children:u.jsxs("div",{className:"py-4 border-t border-orange-400/30 space-y-4 mt-3",children:[[{path:"/ai-chat",label:"G-Gon"},{path:"/komunitas",label:"Komunitas"},{path:"/ruang-belajar",label:"Ruang Belajar"}].map(c=>u.jsx(ee.div,{whileHover:{x:4},className:"block",children:u.jsx(mr,{to:c.path,className:`text-white font-medium transition-colors block py-2 ${a(c.path)?"text-orange-200":"hover:text-orange-200"}`,children:c.label})},c.path)),u.jsx(ee.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:s?u.jsxs(mr,{to:"/profile",className:"bg-white text-orange-500 px-6 py-2 rounded-full hover:bg-orange-100 transition-colors inline-block text-center font-semibold w-full shadow-md flex items-center justify-center gap-2",children:[u.jsx("span",{children:s.displayName||"Profile"}),u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})]}):u.jsx(mr,{to:"/login",className:"bg-white text-orange-500 px-6 py-2 rounded-full hover:bg-orange-100 transition-colors inline-block text-center font-semibold w-full shadow-md",children:"Login"})})]})})})]})})})}var BR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rI=Pa.createContext&&Pa.createContext(BR),L$=["attr","size","title"];function M$(n,e){if(n==null)return{};var t=V$(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function V$(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Np(){return Np=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Np.apply(this,arguments)}function iI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ap(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iI(Object(t),!0).forEach(function(r){O$(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):iI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function O$(n,e,t){return e=F$(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function F$(n){var e=B$(n,"string");return typeof e=="symbol"?e:e+""}function B$(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function UR(n){return n&&n.map((e,t)=>Pa.createElement(e.tag,Ap({key:t},e.attr),UR(e.child)))}function vt(n){return e=>Pa.createElement(U$,Np({attr:Ap({},n.attr)},e),UR(n.child))}function U$(n){var e=t=>{var{attr:r,size:i,title:s}=n,a=M$(n,L$),c=i||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),Pa.createElement("svg",Np({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:d,style:Ap(Ap({color:n.color||t.color},t.style),n.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&Pa.createElement("title",null,s),n.children)};return rI!==void 0?Pa.createElement(rI.Consumer,null,t=>e(t)):e(BR)}function z$(n){return vt({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"},child:[]}]})(n)}function q$(n){return vt({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"},child:[]},{tag:"path",attr:{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"},child:[]}]})(n)}function $$(n){return vt({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"},child:[]}]})(n)}function W$(n){return vt({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M12 14l9-5-9-5-9 5 9 5z"},child:[]},{tag:"path",attr:{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"},child:[]},{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"},child:[]}]})(n)}function H$(n){return vt({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13l-3 3m0 0l-3-3m3 3V8m0 13a9 9 0 110-18 9 9 0 010 18z"},child:[]}]})(n)}function K$(n){return vt({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},child:[]}]})(n)}function G$(n){return vt({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},child:[]}]})(n)}function Q$(n){return vt({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"},child:[]}]})(n)}function J$(n){return vt({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},child:[]}]})(n)}function Y$(n){return vt({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},child:[]}]})(n)}function X$(n){return vt({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},child:[]}]})(n)}function Z$(n){return vt({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},child:[]}]})(n)}function eW(n){return vt({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},child:[]}]})(n)}const Uw=A.memo(({item:n,isActive:e,getLinkClass:t,getTooltipClass:r})=>(Uw.displayName="NavItem",u.jsx(ee.div,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:400,damping:17},children:u.jsxs(mr,{to:n.path,className:`group ${t(n.path)}`,children:[u.jsx("div",{className:"relative z-10",children:n.icon}),u.jsx(ee.span,{className:`hidden md:block ${r(n.path)}`,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.2},children:n.label}),e&&u.jsx(ee.div,{layoutId:"activeBackground",className:"absolute inset-0 bg-white/20 rounded-2xl pointer-events-none",transition:{type:"spring",stiffness:300,damping:30}})]})})));Uw.propTypes={item:Ie.shape({path:Ie.string.isRequired,label:Ie.string.isRequired,icon:Ie.node.isRequired}).isRequired,isActive:Ie.bool.isRequired,getLinkClass:Ie.func.isRequired,getTooltipClass:Ie.func.isRequired};const zw=A.memo(({isOpen:n,onClick:e})=>(zw.displayName="ToggleButton",u.jsx(ee.button,{onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},className:"fixed top-4 left-4 z-50 hidden md:flex items-center justify-center w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full backdrop-blur-lg",children:u.jsx(ee.svg,{animate:{rotate:n?180:0},transition:{type:"spring",stiffness:200,damping:20},className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:n?"M15 19l-7-7 7-7":"M9 5l7 7-7 7"})})})));zw.propTypes={isOpen:Ie.bool.isRequired,onClick:Ie.func.isRequired};const tW={light:{from:"[#FF9800]",to:"[#F57C00]",text:"text-gray-800"},dark:{from:"[#2196F3]",to:"[#1976D2]",text:"text-white"}};function zR({theme:n="light",initialIsOpen:e=!0,onToggle:t=()=>{}}){const[r,i]=A.useState(e),s=zr(),a=tW[n],c=A.useMemo(()=>[{path:"/",label:"Home",icon:u.jsx(Y$,{className:"w-6 h-6 text-white"})},{path:"/profile",label:"Profile",icon:u.jsx(eW,{className:"w-6 h-6 text-white"})},{path:"/courses",label:"Courses",icon:u.jsx(W$,{className:"w-6 h-6 text-white"})},{path:"/podcast",label:"Podcast",icon:u.jsx(K$,{className:"w-6 h-6 text-white"})},{path:"/document",label:"Document",icon:u.jsx(G$,{className:"w-6 h-6 text-white"})},{path:"/achievements",label:"Achievements",icon:u.jsx(X$,{className:"w-6 h-6 text-white"})},{path:"/beasiswa",label:"Beasiswa",icon:u.jsx(Q$,{className:"w-6 h-6 text-white"})}],[]),d=A.useCallback(y=>`relative flex items-center justify-center w-12 h-12 md:w-14 md:h-14 rounded-2xl transition-all duration-300 ${s.pathname===y?"bg-white/20 shadow-lg scale-110":"hover:bg-white/10 hover:scale-105"}`,[s.pathname]),f=A.useCallback(y=>`absolute left-full ml-4 px-3 py-1.5 bg-white/10 backdrop-blur-md rounded-lg text-white text-sm font-medium
            opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300
            pointer-events-none whitespace-nowrap
            ${s.pathname===y?"bg-white/20":""}`,[s.pathname]),g=A.useCallback(y=>{y.key==="Escape"&&i(!1)},[]);return A.useEffect(()=>(window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)),[g]),A.useEffect(()=>{t(r)},[r,t]),u.jsxs(u.Fragment,{children:[u.jsx(zw,{isOpen:r,onClick:()=>i(!r)}),u.jsx(Ac,{mode:"wait",children:u.jsx(ee.div,{initial:{x:-100,opacity:0},animate:{x:r?0:-100,opacity:r?1:0},exit:{x:-100,opacity:0},transition:{type:"spring",stiffness:300,damping:30,mass:1},className:`fixed bottom-0 left-0 md:top-0 w-full md:w-24 h-20 md:h-full 
                    bg-gradient-to-r md:bg-gradient-to-b from-${a.from} to-${a.to} ${a.text} 
                    backdrop-blur-lg z-40 border-t md:border-r border-white/10`,children:u.jsx(ee.nav,{className:"flex md:flex-col items-center justify-around md:justify-start h-full md:pt-20 md:space-y-6 px-4 md:px-0",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:c.map(y=>u.jsx(ee.div,{variants:{hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}},children:u.jsx(Uw,{item:y,isActive:s.pathname===y.path,getLinkClass:d,getTooltipClass:f})},y.path))})})}),u.jsx(Ac,{children:!r&&u.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-30 md:hidden",onClick:()=>i(!0)})})]})}zR.propTypes={theme:Ie.oneOf(["light","dark"]),initialIsOpen:Ie.bool,onToggle:Ie.func};function nW(n){return vt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(n)}function rW(n){return vt({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function iW(n){return vt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(n)}function sW(n){return vt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"},child:[]}]})(n)}function oW(n){return vt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(n)}function aW(n){return vt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M144.8 17c-11.3-17.8-37.2-22.8-54-9.4C35.3 51.9 0 118 0 192h256L144.8 17zM496 96h-48c-35.3 0-64 28.7-64 64v64H0c0 50.6 23 96.4 60.3 130.7C25.7 363.6 0 394.7 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-8.9-1.8-17.2-4.4-25.2 21.6 5.9 44.6 9.2 68.4 9.2s46.9-3.3 68.4-9.2c-2.7 8-4.4 16.3-4.4 25.2 0 44.2 35.8 80 80 80s80-35.8 80-80c0-37.3-25.7-68.4-60.3-77.3C425 320.4 448 274.6 448 224v-64h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM80 464c-17.6 0-32-14.4-32-32s14.4-32 32-32 32 14.4 32 32-14.4 32-32 32zm320-32c0 17.6-14.4 32-32 32s-32-14.4-32-32 14.4-32 32-32 32 14.4 32 32z"},child:[]}]})(n)}function lW(n){return vt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(n)}function cW(n){return vt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(n)}function uW(n){return vt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(n)}function dW(n){return vt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 32H48C21.5 32 0 53.5 0 80v16h576V80c0-26.5-21.5-48-48-48zM0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V128H0v304zm352-232c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zM176 192c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zM67.1 396.2C75.5 370.5 99.6 352 128 352h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.9-5.2 19.8-15.6 19.8H82.7c-10.4 0-18.8-10-15.6-19.8z"},child:[]}]})(n)}function hW(n){return vt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(n)}function fW(n){return vt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(n)}function mW(n){return vt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(n)}const pW="/assets/money-CAZgRUjg.png",Pp="/assets/G-Gon-D44VO5m-.png",gW="/assets/book-BAVWGKtw.png",yW="/assets/friend-DUx5BXAQ.png",qR="/assets/MEXT-DJmhsDYU.png",$R="/assets/LPDP-COE0Y-Al.png",WR="/assets/BI-vcAKmfVs.png",vW="/assets/Kampong-KNCao8Z3.png",xW="/assets/HutanRimba-DCfN-6Lf.jpg",_W="/assets/gencerdaslog-C6Pg9EKo.png";function wW(){var f,g;const n=_r(),[e,t]=A.useState(null),{scrollYProgress:r}=j$(),i=Ky(r,[0,1],["0%","20%"]),s=Ky(r,[.5,.8],[0,1]),a=Ky(r,[.5,.8],["50px","0px"]),c=[{title:"MEXT Scholarship",org:"Japanese Government",img:qR,description:"Program beasiswa dari pemerintah Jepang untuk mahasiswa internasional yang ingin melanjutkan studi S1/S2/S3 di Jepang. Program ini menawarkan kesempatan untuk belajar di universitas terbaik Jepang dengan dukungan penuh.",requirements:["Usia dibawah 35 tahun","IPK minimal 3.0 dari 4.0","Kemampuan Bahasa Jepang/Inggris yang baik","Sehat jasmani dan rohani","Belum pernah menerima beasiswa MEXT sebelumnya","Siap untuk mempelajari bahasa Jepang"],benefits:["Biaya kuliah penuh","Tunjangan bulanan ¥143,000-¥145,000","Tiket pesawat PP ke Jepang","Biaya persiapan keberangkatan ¥200,000","Kursus bahasa Jepang selama 6 bulan","Asuransi kesehatan"],deadline:"Mei 2024",link:"https://www.studyinjapan.go.jp/en/smap-stopj-applications-research.html"},{title:"Beasiswa LPDP",org:"Kemenkeu",img:$R,description:"LPDP (Lembaga Pengelola Dana Pendidikan) menyediakan beasiswa untuk pendidikan pascasarjana bagi putra-putri Indonesia yang ingin melanjutkan studi baik di dalam maupun luar negeri.",requirements:["WNI berusia maksimal 35 tahun (S2) atau 40 tahun (S3)","IPK minimal 3.0","Skor TOEFL ITP min. 550 / IELTS min. 6.0","Telah diterima di perguruan tinggi tujuan","Menandatangani kontrak ikatan dinas","Sehat jasmani dan rohani"],benefits:["Biaya pendidikan penuh","Biaya hidup bulanan","Asuransi kesehatan","Biaya transportasi","Biaya visa dan pembuatan passport","Tunjangan keluarga (untuk program tertentu)"],deadline:"Batch 1: 31 Januari 2024, Batch 2: 30 Juni 2024",link:"https://lpdp.kemenkeu.go.id/"},{title:"Beasiswa Bank Indonesia",org:"Bank Indonesia",img:WR,description:"Program Beasiswa Bank Indonesia ditujukan untuk mahasiswa berprestasi yang tertarik dalam bidang ekonomi, perbankan, dan keuangan. Program ini mendukung pengembangan SDM berkualitas di Indonesia.",requirements:["Mahasiswa S1 semester 4-6","IPK minimal 3.25","Aktif dalam kegiatan organisasi","Tidak sedang menerima beasiswa lain","Berasal dari jurusan ekonomi/manajemen/akuntansi","Lolos seleksi administrasi dan wawancara"],benefits:["Bantuan biaya pendidikan per semester","Tunjangan buku","Pelatihan dan workshop","Kesempatan magang di Bank Indonesia","Networking dengan penerima beasiswa lain"],deadline:"15 April 2024",link:"https://www.bi.go.id/id/institute/beasiswa/"}],d=y=>{n(y)};return u.jsxs("div",{className:"bg-[#FAB12F] font-['Plus_Jakarta_Sans']",children:[u.jsx("div",{className:"min-h-screen relative overflow-hidden  bg-[#FAB12F]",children:u.jsxs("div",{className:"relative z-10",children:[u.jsx("section",{className:"pt-32 lg:pt-64 pb-16 px-4 bg-[#FAB12F]",children:u.jsx("div",{className:"container mx-auto px-4 lg:px-0 lg:ml-72",children:u.jsx("div",{className:"w-full lg:w-[65%] ml-auto",children:u.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-[#FF8A4C] rounded-[32px] p-6 lg:p-10 shadow-xl relative mx-4 lg:mr-64",children:u.jsxs("div",{className:"min-h-[220px] flex flex-col lg:flex-row items-center",children:[u.jsxs(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},className:"flex flex-col items-center lg:items-start text-center lg:text-left w-full lg:max-w-[55%] mb-8 lg:mb-0",children:[u.jsx("h1",{className:"text-3xl lg:text-5xl font-bold mb-4 text-white",children:"Hai aku G'GON"}),u.jsx("p",{className:"text-base lg:text-lg mb-8 leading-relaxed text-white",children:"Kedepannya aku akan membantu kamu untuk belajar dan mencari beasiswa"}),u.jsx(ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white hover:bg-gray-50 text-[#FF8A4C] px-6 lg:px-8 py-2 lg:py-3 rounded-full font-semibold transition-colors text-base lg:text-lg",children:"Ayo berinteraksi!"})]}),u.jsx(ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.6},className:"w-[60%] lg:w-[50%] lg:absolute lg:right-3 lg:rotate-12",children:u.jsx("img",{src:Pp,alt:"G'GON Mascot",className:"w-full h-auto object-contain transform scale-90 lg:scale-110"})})]})})})})}),u.jsx("section",{className:"relative",children:u.jsxs("div",{className:"w-full bg-[#FAB12F]",children:[u.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 top-[40%] z-10 flex flex-col items-center",children:[u.jsx(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"text-white text-3xl font-bold mb-4",children:"Pelajari Lebih Lanjut"}),u.jsx(ee.div,{animate:{y:[0,10,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"hover:scale-110 transition-transform",children:u.jsx(H$,{className:"text-white text-5xl cursor-pointer"})})]}),u.jsxs("svg",{viewBox:"0 90 1450 700",className:"translate-y-[1px] relative z-1",preserveAspectRatio:"none",children:[u.jsx("path",{d:`M0,100 \r
                     C960,50 1100,1100 1500,400 \r
                     L1500,1000 \r
                     L0,400 \r
                     Z`,fill:"#F1A41A",opacity:"0.6"}),u.jsx("path",{d:`M0,190 \r
                     C800,80 1090,1150 1490,500 \r
                     L1450,1000  \r
                     L0 1000,400 \r
                     Z`,fill:"#FA812F"})]})]})}),u.jsx("section",{className:"bg-[#FA812F] pt-0 pb-16 relative z-10",children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsxs(ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[u.jsx("h2",{className:"text-white text-3xl font-bold mb-3",children:"Ayo cari beasiswa mu!"}),u.jsx("p",{className:"text-white text-xl mb-8",children:"Temukan beasiswa yang cocok untuk diri kamu!"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8 max-w-7xl mx-auto px-4 lg:px-0",children:c==null?void 0:c.map((y,x)=>u.jsxs(ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:x*.2},viewport:{once:!0},whileHover:{y:-8,scale:1.02},className:"relative rounded-[32px] shadow-lg hover:shadow-2xl transition-all cursor-pointer overflow-hidden group",onClick:()=>t((e==null?void 0:e.title)===y.title?null:y),children:[u.jsx("img",{src:y.img,alt:y.title,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-1 drop-shadow-lg",children:y.title}),u.jsx("p",{className:"text-white/90 font-medium mb-2 drop-shadow-lg",children:y.org}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"text-white hover:text-orange-200 text-sm font-semibold flex items-center gap-1 drop-shadow-lg",children:["Selengkapnya",u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]}),u.jsxs("span",{className:"text-white/80 text-sm font-medium drop-shadow-lg",children:["• Deadline: ",y.deadline]})]})]})]},y.title))}),e&&u.jsx(ee.div,{initial:{opacity:0,height:0},animate:{opacity:e?1:0,height:e?"auto":0},transition:{duration:.3},className:"overflow-hidden mt-8",children:u.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl",children:[u.jsxs("div",{className:"flex items-start justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-orange-800 mb-2",children:e.title}),u.jsx("p",{className:"text-orange-600 font-medium",children:e.org})]}),u.jsx(ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(null),className:"text-gray-500 hover:text-gray-700",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:e.description}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[u.jsxs("div",{className:"bg-orange-50 p-6 rounded-xl",children:[u.jsxs("h4",{className:"font-semibold text-orange-800 mb-3 flex items-center",children:[u.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Persyaratan"]}),u.jsx("ul",{className:"space-y-2 text-gray-700",children:(f=e.requirements)==null?void 0:f.map((y,x)=>u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"mr-2",children:"•"}),u.jsx("span",{children:y})]},x))})]}),u.jsxs("div",{className:"bg-orange-50 p-6 rounded-xl",children:[u.jsxs("h4",{className:"font-semibold text-orange-800 mb-3 flex items-center",children:[u.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Benefits"]}),u.jsx("ul",{className:"space-y-2 text-gray-700",children:(g=e.benefits)==null?void 0:g.map((y,x)=>u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"mr-2",children:"•"}),u.jsx("span",{children:y})]},x))})]})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-between pt-4 border-t border-gray-200",children:[u.jsx("div",{className:"mb-4 md:mb-0",children:u.jsxs("p",{className:"text-orange-800 font-semibold",children:["Deadline: ",u.jsx("span",{className:"text-gray-700",children:e.deadline})]})}),u.jsx(ee.a,{href:e.link,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-full font-semibold transition-colors",children:"Daftar Sekarang"})]})]})})]})}),u.jsx("section",{className:"bg-[#FA812F] py-16 relative z-10",children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsx(ee.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-4xl font-bold text-white text-center mb-16",children:"Inovasi Kami"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8",children:[u.jsxs(ee.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},whileHover:{y:-8,scale:1.02},transition:{duration:.6},viewport:{once:!0},className:"bg-[#FAB12F] rounded-[32px] p-6 lg:p-8 relative overflow-visible group shadow-xl hover:shadow-2xl transition-all",children:[u.jsx("img",{src:Pp,alt:"Chat AI",className:"absolute hidden lg:block pt-28 rotate-12 pl-12 right-0 w-48 h-auto transform translate-x-8 group-hover:scale-110 transition-transform duration-300 z-20"}),u.jsxs("div",{className:"relative z-10",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx("div",{className:"p-3 bg-white/20 rounded-2xl",children:u.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),u.jsx("h3",{className:"text-3xl font-bold text-white",children:"Chat AI"})]}),u.jsx("p",{className:"text-white/90 text-lg leading-relaxed mb-6",children:"Memudahkan siswa untuk melakukan tanya jawab dengan AI yang dapat membantu memberikan informasi seputar beasiswa"}),u.jsx(ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d("/chat"),className:"px-6 py-2 bg-white text-[#FAB12F] rounded-full font-semibold hover:bg-orange-50 transition-colors",children:"Mulai Chat"})]}),u.jsx("div",{className:"absolute top-4 right-4 w-24 h-24 bg-white/10 rounded-full blur-xl"}),u.jsx("div",{className:"absolute bottom-4 left-4 w-32 h-32 bg-white/10 rounded-full blur-xl"})]}),u.jsxs(ee.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},whileHover:{y:-8,scale:1.02},transition:{duration:.6},viewport:{once:!0},className:"bg-[#FAB12F] rounded-[32px] p-8 relative overflow-hidden group shadow-xl hover:shadow-2xl transition-all",children:[u.jsx("img",{src:gW,alt:"Pembelajaran",className:"absolute top-28 right-0 w-48 h-auto transform translate-x-8 translate-y-4 group-hover:scale-110 transition-transform duration-300"}),u.jsxs("div",{className:"relative z-10",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx("div",{className:"p-3 bg-white/20 rounded-2xl",children:u.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),u.jsx("h3",{className:"text-3xl font-bold text-white",children:"Pembelajaran"})]}),u.jsx("p",{className:"text-white/90 text-lg leading-relaxed mb-6",children:"Siswa dapat belajar mandiri mengenai materi beasiswa dengan konten yang telah kami sediakan"}),u.jsx(ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d("/courses"),className:"px-6 py-2 bg-white text-[#FAB12F] rounded-full font-semibold hover:bg-orange-50 transition-colors",children:"Mulai Belajar"})]}),u.jsx("div",{className:"absolute top-4 right-4 w-24 h-24 bg-white/10 rounded-full blur-xl"}),u.jsx("div",{className:"absolute bottom-4 left-4 w-32 h-32 bg-white/10 rounded-full blur-xl"})]}),u.jsxs(ee.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},whileHover:{y:-8,scale:1.02},transition:{duration:.6},viewport:{once:!0},className:"bg-[#FAB12F] rounded-[32px] p-8 relative overflow-hidden group shadow-xl hover:shadow-2xl transition-all",children:[u.jsxs("div",{className:"relative z-10",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx("div",{className:"p-3 bg-white/20 rounded-2xl",children:u.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),u.jsx("h3",{className:"text-3xl font-bold text-white",children:"Komunitas"})]}),u.jsx("p",{className:"text-white/90 text-lg leading-relaxed mb-6",children:"Siswa bisa saling berinteraksi dengan siswa lain untuk berbagi pengalaman dan informasi"}),u.jsx(ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d("/community"),className:"px-6 py-2 bg-white text-[#FAB12F] rounded-full font-semibold hover:bg-orange-50 transition-colors",children:"Gabung Komunitas"})]}),u.jsx("img",{src:yW,alt:"Komunitas",className:"absolute bottom-0 right-0 w-48 h-auto transform translate-x-8 translate-y-4 group-hover:scale-110 transition-transform duration-300"}),u.jsx("div",{className:"absolute top-4 right-4 w-24 h-24 bg-white/10 rounded-full blur-xl"}),u.jsx("div",{className:"absolute bottom-4 left-4 w-32 h-32 bg-white/10 rounded-full blur-xl"})]}),u.jsxs(ee.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},whileHover:{y:-8,scale:1.02},transition:{duration:.6},viewport:{once:!0},className:"bg-[#FAB12F] rounded-[32px] p-8 relative overflow-hidden group shadow-xl hover:shadow-2xl transition-all",children:[u.jsxs("div",{className:"relative z-10",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx("div",{className:"p-3 bg-white/20 rounded-2xl",children:u.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsx("h3",{className:"text-3xl font-bold text-white",children:"Bantuan"})]}),u.jsx("p",{className:"text-white/90 text-lg leading-relaxed mb-6",children:"Beasiswa khusus untuk masyarakat kurang mampu dengan berbagai kemudahan"}),u.jsx(ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d("/scholarships"),className:"px-6 py-2 bg-white text-[#FAB12F] rounded-full font-semibold hover:bg-orange-50 transition-colors",children:"Cari Bantuan"})]}),u.jsx("img",{src:pW,alt:"Bantuan",className:"absolute bottom-0 right-0 w-48 h-auto transform translate-x-8 translate-y-4 group-hover:scale-110 transition-transform duration-300"}),u.jsx("div",{className:"absolute top-4 right-4 w-24 h-24 bg-white/10 rounded-full blur-xl"}),u.jsx("div",{className:"absolute bottom-4 left-4 w-32 h-32 bg-white/10 rounded-full blur-xl"})]})]})]})}),u.jsx("section",{className:"relative bg-[#FA812F] pt-[200px] sm:pt-[300px] md:pt-[800px] lg:pt-[1500px] pb-16 sm:pb-32 md:pb-56 overflow-hidden",children:u.jsxs("div",{className:"relative h-[200px] sm:h-[300px] md:h-[400px] lg:h-[500px]",children:[u.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-0",children:u.jsx("img",{src:vW,alt:"Mountain Background",className:"w-full h-auto object-cover object-center transform scale-120 translate-y-1/5 md:translate-y-[30%] lg:translate-y-[40%]"})}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-10",children:u.jsxs("svg",{viewBox:"0 80 1500 700",className:"translate-y-[150px] md:translate-y-[200px] lg:translate-y-[300px] w-full",preserveAspectRatio:"none",children:[u.jsx("path",{d:"M0,150 C960,50 1100,1100 1590,400 L1500,1500 L0,400 Z",fill:"#FFC298",opacity:"1"}),u.jsx("path",{d:"M0,200 C900,80 1090,1150 1590,500 L1450,1500 L0,1000 Z",fill:"#FFFFFF"})]})})]})}),u.jsxs("section",{className:"relative bg-white",children:[u.jsxs("div",{className:"relative w-full",children:[u.jsxs(ee.div,{className:"relative h-[50vh] sm:h-[60vh] md:h-[70vh] lg:h-[80vh]",style:{y:i},children:[u.jsx("img",{src:xW,alt:"Mountain Forest Landscape",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent"})]}),u.jsx(ee.div,{className:"absolute top-1/2 left-0 transform -translate-y-1/2 w-full px-4 sm:px-8 md:px-12 lg:px-24",style:{opacity:s,y:a},children:u.jsx("div",{className:"max-w-xl backdrop-blur-sm rounded-3xl p-6 sm:p-8 md:p-10 lg:p-12",children:u.jsxs(ee.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{duration:.6},className:"space-y-6 md:space-y-8",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"p-2 md:p-3 bg-orange-500/20 rounded-xl",children:u.jsx(J$,{className:"w-6 h-6 md:w-8 md:h-8 text-orange-500"})}),u.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white",children:"Dukung Kami!"})]}),u.jsx("p",{className:"text-white/90 text-lg md:text-xl lg:text-2xl leading-relaxed",children:"Untuk membantu pendidikan pada daerah yang tertinggal dan membangun masa depan yang lebih baik."}),u.jsx("div",{className:"flex gap-4",children:u.jsxs(ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center justify-center space-x-2 bg-white text-gray-800 px-4 md:px-8 py-3 md:py-4 rounded-full font-semibold hover:bg-gray-100 transition-colors shadow-lg text-sm md:text-base",children:[u.jsx(Z$,{className:"w-4 h-4 md:w-5 md:h-5"}),u.jsx("span",{children:"Jadi Sukarelawan"})]})}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-8 pt-6 md:pt-8",children:[u.jsxs(ee.div,{className:"text-center",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[u.jsx("div",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-white",children:"500+"}),u.jsx("div",{className:"text-white/80 text-sm md:text-base lg:text-lg",children:"Sukarelawan"})]}),u.jsxs(ee.div,{className:"text-center",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[u.jsx("div",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-white",children:"50+"}),u.jsx("div",{className:"text-white/80 text-sm md:text-base lg:text-lg",children:"Daerah"})]}),u.jsxs(ee.div,{className:"text-center col-span-2 md:col-span-1",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[u.jsx("div",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-white",children:"1000+"}),u.jsx("div",{className:"text-white/80 text-sm md:text-base lg:text-lg",children:"Pelajar Terbantu"})]})]})]})})})]}),u.jsx("div",{className:"relative",children:u.jsx("svg",{viewBox:"0 0 1440 120",className:"w-full h-[60px] md:h-auto fill-white",preserveAspectRatio:"none",children:u.jsx("path",{d:"M0,32L60,42.7C120,53,240,75,360,80C480,85,600,75,720,58.7C840,43,960,21,1080,16C1200,11,1320,21,1380,26.7L1440,32L1440,120L1380,120C1320,120,1200,120,1080,120C960,120,840,120,720,120C600,120,480,120,360,120C240,120,120,120,60,120L0,120Z"})})})]})]})}),u.jsx("footer",{className:"bg-gradient-to-b from-white to-gray-50 py-12 md:py-16",children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 md:gap-12",children:[u.jsxs("div",{className:"space-y-4 md:space-y-6",children:[u.jsx(ee.img,{whileHover:{scale:1.05},src:_W,alt:"GenCerdas Logo",className:"h-10 md:h-12 w-auto"}),u.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Platform pembelajaran dan pencarian beasiswa yang membantu siswa Indonesia meraih pendidikan yang lebih baik."}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[u.jsx(z$,{className:"h-5 w-5 text-orange-500"}),u.jsx("span",{className:"text-sm",children:"Jakarta, Indonesia"})]}),u.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[u.jsx($$,{className:"h-5 w-5 text-orange-500"}),u.jsx("span",{className:"text-sm",children:"+62 123 456 789"})]}),u.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[u.jsx(q$,{className:"h-5 w-5 text-orange-500"}),u.jsx("span",{className:"text-sm",children:"info@gencerdas.id"})]})]})]}),u.jsxs("div",{className:"mt-8 sm:mt-0",children:[u.jsx("h4",{className:"text-gray-900 font-semibold mb-4 md:mb-6",children:"Perusahaan"}),u.jsxs("ul",{className:"space-y-4",children:[u.jsx(ee.li,{whileHover:{x:5},className:"transition-colors",children:u.jsxs("a",{href:"#",className:"text-gray-600 hover:text-orange-500 text-sm flex items-center space-x-2",children:[u.jsx("span",{children:"→"}),u.jsx("span",{children:"Tentang Kami"})]})}),u.jsx(ee.li,{whileHover:{x:5},className:"transition-colors",children:u.jsxs("a",{href:"#",className:"text-gray-600 hover:text-orange-500 text-sm flex items-center space-x-2",children:[u.jsx("span",{children:"→"}),u.jsx("span",{children:"Karir"})]})}),u.jsx(ee.li,{whileHover:{x:5},className:"transition-colors",children:u.jsxs("a",{href:"#",className:"text-gray-600 hover:text-orange-500 text-sm flex items-center space-x-2",children:[u.jsx("span",{children:"→"}),u.jsx("span",{children:"Hubungi Kami"})]})})]})]}),u.jsxs("div",{className:"mt-8 lg:mt-0",children:[u.jsx("h4",{className:"text-gray-900 font-semibold mb-4 md:mb-6",children:"Sumber Daya"}),u.jsxs("ul",{className:"space-y-4",children:[u.jsx(ee.li,{whileHover:{x:5},className:"transition-colors",children:u.jsxs("a",{href:"#",className:"text-gray-600 hover:text-orange-500 text-sm flex items-center space-x-2",children:[u.jsx("span",{children:"→"}),u.jsx("span",{children:"Blog"})]})}),u.jsx(ee.li,{whileHover:{x:5},className:"transition-colors",children:u.jsxs("a",{href:"#",className:"text-gray-600 hover:text-orange-500 text-sm flex items-center space-x-2",children:[u.jsx("span",{children:"→"}),u.jsx("span",{children:"Panduan"})]})}),u.jsx(ee.li,{whileHover:{x:5},className:"transition-colors",children:u.jsxs("a",{href:"#",className:"text-gray-600 hover:text-orange-500 text-sm flex items-center space-x-2",children:[u.jsx("span",{children:"→"}),u.jsx("span",{children:"FAQ"})]})})]})]}),u.jsxs("div",{className:"mt-8 lg:mt-0",children:[u.jsx("h4",{className:"text-gray-900 font-semibold mb-4 md:mb-6",children:"Berlangganan"}),u.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Dapatkan informasi terbaru tentang beasiswa dan pendidikan"}),u.jsxs("form",{className:"space-y-3",children:[u.jsx("div",{className:"relative",children:u.jsx("input",{type:"email",placeholder:"Email anda",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-orange-500/50"})}),u.jsx(ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Berlangganan"})]})]})]}),u.jsx("div",{className:"border-t border-gray-200 my-8 md:my-12"}),u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[u.jsx("p",{className:"text-gray-600 text-xs md:text-sm text-center md:text-left",children:"© 2024 GenCerdas. All rights reserved."}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-3 md:gap-4",children:[u.jsx(ee.a,{whileHover:{y:-3},href:"#",className:"bg-gray-100 p-2 rounded-full text-gray-600 hover:text-orange-500 hover:bg-orange-50 transition-colors",children:u.jsx(nW,{className:"h-5 w-5"})}),u.jsx(ee.a,{whileHover:{y:-3},href:"#",className:"bg-gray-100 p-2 rounded-full text-gray-600 hover:text-orange-500 hover:bg-orange-50 transition-colors",children:u.jsx(oW,{className:"h-5 w-5"})}),u.jsx(ee.a,{whileHover:{y:-3},href:"#",className:"bg-gray-100 p-2 rounded-full text-gray-600 hover:text-orange-500 hover:bg-orange-50 transition-colors",children:u.jsx(iW,{className:"h-5 w-5"})}),u.jsx(ee.a,{whileHover:{y:-3},href:"#",className:"bg-gray-100 p-2 rounded-full text-gray-600 hover:text-orange-500 hover:bg-orange-50 transition-colors",children:u.jsx(sW,{className:"h-5 w-5"})}),u.jsx(ee.a,{whileHover:{y:-3},href:"#",className:"bg-gray-100 p-2 rounded-full text-gray-600 hover:text-orange-500 hover:bg-orange-50 transition-colors",children:u.jsx(rW,{className:"h-5 w-5"})})]})]})]})})]})}const bW="/assets/Idle-BjMpwoZm.mp4",kW="/assets/Talk-DuwT07jj.mp4";function HR({message:n,isLatest:e,displayedContent:t}){const r=e?t:n.content,i=n.timestamp?new Date(n.timestamp).toLocaleTimeString():new Date().toLocaleTimeString();return u.jsxs("div",{className:`flex ${n.type==="user"?"justify-end":"justify-start"} animate-fadeIn transition-all duration-300 ease-in-out`,role:"listitem",children:[n.type==="ai"&&u.jsx("div",{className:"w-10 h-10 mr-3 flex-shrink-0 animate-bounce-slow",children:u.jsx("img",{src:Pp,alt:"AI Assistant",className:"w-full h-full object-contain rounded-full shadow-lg hover:scale-110 transition-transform duration-300 ring-2 ring-orange-300"})}),u.jsxs("div",{className:"flex flex-col max-w-[80%]",children:[u.jsx("div",{className:`rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-300 ${n.type==="user"?"bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-tr-none hover:scale-[1.02]":n.isError?"bg-red-50 text-red-600 rounded-tl-none hover:bg-red-100":"bg-white text-gray-800 rounded-tl-none hover:bg-gray-50 hover:scale-[1.02]"}`,children:u.jsx("p",{className:"text-sm md:text-base whitespace-pre-line leading-relaxed",children:r.split(`
`).map((s,a,c)=>u.jsxs("span",{className:"transition-all duration-200",children:[s.startsWith("-")||s.startsWith("•")?u.jsx("span",{className:"block ml-4 my-1 hover:ml-6 transition-all duration-200",children:s}):s,a<c.length-1&&u.jsx("br",{})]},`${a}-${s.slice(0,10)}`))})}),u.jsx("span",{className:`text-xs text-gray-600 mt-2 ${n.type==="user"?"text-right":"text-left"}`,children:i})]})]})}HR.propTypes={message:Ie.shape({type:Ie.oneOf(["user","ai"]).isRequired,content:Ie.string.isRequired,timestamp:Ie.string,isError:Ie.bool}).isRequired,isLatest:Ie.bool.isRequired,displayedContent:Ie.string.isRequired};const EW={smileys:["😊","😂","🥰","😎","🤔","😅","😍","🥺","😭","😤","😴","🤗","😇","🤩","😋","😜"],gestures:["👋","👍","👎","👏","🙌","🤝","✌️","🤞","🤟","🤙","👌","🫶","❤️","🔥","✨","💯"],animals:["🐶","🐱","🦁","🐯","🐻","🐨","🐼","🐸","🐵","🐔","🐧","🦄","🦋","🐙","🦈","🦖"],food:["🍎","🍕","🍔","🌮","🍜","🍣","🍪","🍩","🍦","🍫","🍿","🧃","🥤","🍷","🍺","🧋"]};function qw({onSendMessage:n,onTyping:e,isLoading:t,placeholder:r}){const[i,s]=A.useState(""),[a,c]=A.useState(!1),[d,f]=A.useState(!1),[g,y]=A.useState("smileys"),[x,k]=A.useState(null),E=A.useRef(null),P=A.useRef(null);A.useEffect(()=>{const W=U=>{P.current&&!P.current.contains(U.target)&&c(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]);const S=W=>{W.preventDefault(),(i.trim()||x)&&!t&&!d&&(x&&i.trim()?(n({type:"mixed",content:{image:x,text:i.trim()}}),k(null),s("")):x?(n({type:"image",content:x}),k(null)):i.trim()&&(n({type:"text",content:i.trim()}),s("")),c(!1))},N=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),S(W))},L=W=>{s(W.target.value),e()},O=async W=>{const U=W.target.files[0];if(U){if(!U.type.startsWith("image/")){alert("Please upload only image files.");return}if(U.size>5*1024*1024){alert("Please upload images smaller than 5MB.");return}try{f(!0);const C=new FileReader;C.onloadend=()=>{k(C.result),f(!1)},C.readAsDataURL(U)}catch(C){console.error("Error uploading image:",C),f(!1),alert("Failed to upload image. Please try again.")}}},Q=()=>{k(null),E.current.value=""};return u.jsxs("div",{className:"space-y-3",children:[x&&u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsxs("div",{className:"relative w-32 h-32 group flex-shrink-0",children:[u.jsx("img",{src:x,alt:"Preview",className:"w-full h-full object-cover rounded-lg border-2 border-orange-500"}),u.jsx("button",{onClick:Q,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:bg-red-600",title:"Remove image",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsx("div",{className:"flex-1",children:u.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Add a caption to your image (optional)"})})]}),u.jsxs("form",{onSubmit:S,className:"relative",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>c(!a),className:`p-2 hover:bg-gray-100 rounded-full transition-all text-gray-600 hover:text-orange-500 ${a?"bg-orange-50 text-orange-500":""}`,title:"Add emoji",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a&&u.jsxs("div",{ref:P,className:"absolute bottom-full left-0 mb-2 bg-white rounded-xl shadow-xl border p-3 w-72 z-50 animate-fadeIn",children:[u.jsxs("div",{className:"flex gap-2 mb-3 pb-2 border-b overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[u.jsx("button",{type:"button",onClick:()=>y("smileys"),className:`p-2 rounded-lg transition-colors ${g==="smileys"?"bg-orange-100 text-orange-500":"hover:bg-gray-100"}`,title:"Smileys",children:"😊"}),u.jsx("button",{type:"button",onClick:()=>y("gestures"),className:`p-2 rounded-lg transition-colors ${g==="gestures"?"bg-orange-100 text-orange-500":"hover:bg-gray-100"}`,title:"Gestures",children:"👋"}),u.jsx("button",{type:"button",onClick:()=>y("animals"),className:`p-2 rounded-lg transition-colors ${g==="animals"?"bg-orange-100 text-orange-500":"hover:bg-gray-100"}`,title:"Animals",children:"🐶"}),u.jsx("button",{type:"button",onClick:()=>y("food"),className:`p-2 rounded-lg transition-colors ${g==="food"?"bg-orange-100 text-orange-500":"hover:bg-gray-100"}`,title:"Food",children:"🍕"})]}),u.jsx("div",{className:"grid grid-cols-8 gap-1 max-h-48 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:EW[g].map(W=>u.jsx("button",{type:"button",onClick:()=>{s(U=>U+W)},className:"p-1 hover:bg-orange-50 rounded transition-all text-xl",children:W},W))})]})]}),u.jsx("div",{className:"relative",children:u.jsx("button",{type:"button",onClick:()=>{var W;return(W=E.current)==null?void 0:W.click()},className:`p-2 hover:bg-gray-100 rounded-full transition-all text-gray-600 hover:text-orange-500 relative ${x?"bg-orange-50 text-orange-500":""}`,title:"Attach image",disabled:d,children:d?u.jsxs("svg",{className:"w-6 h-6 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),u.jsx("input",{type:"text",value:i,onChange:L,onKeyPress:N,placeholder:x?"Add a caption...":r||"Type a message...",className:"flex-1 px-4 py-2 rounded-full border border-gray-200 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",disabled:t||d}),u.jsx("button",{type:"submit",disabled:!i.trim()&&!x||t||d,className:"p-2 bg-orange-500 text-white rounded-full hover:bg-orange-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed hover:scale-110 active:scale-95",title:"Send message",children:t||d?u.jsxs("svg",{className:"w-6 h-6 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),u.jsx("input",{type:"file",ref:E,className:"hidden",accept:"image/*",onChange:O,disabled:d})]})]})}qw.propTypes={onSendMessage:Ie.func.isRequired,onTyping:Ie.func.isRequired,isLoading:Ie.bool,placeholder:Ie.string};function KR({isAiTalking:n,IdleAnimation:e,TalkAnimation:t}){return u.jsxs("div",{className:"relative w-full h-full",children:[u.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[u.jsx("div",{className:"absolute w-[95%] h-[95%] bg-gradient-radial from-orange-300/30 via-orange-200/10 to-transparent rounded-full blur-2xl animate-pulse-slow"}),u.jsx("div",{className:"absolute w-[80%] h-[80%] bg-gradient-radial from-orange-400/20 via-orange-300/5 to-transparent rounded-full blur-xl animate-pulse-slow delay-150"}),u.jsx("div",{className:"absolute w-[90%] h-[90%] border-2 border-orange-300/20 rounded-full animate-ping-slow"}),u.jsx("div",{className:"absolute w-[85%] h-[85%] border-2 border-orange-300/15 rounded-full animate-ping-slow delay-300"})]}),u.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-2/3 h-6",children:u.jsx("div",{className:"w-full h-full bg-black/15 rounded-full blur-xl transform scale-y-50"})}),u.jsx("div",{className:"relative w-full h-full p-6",children:u.jsxs("div",{className:"relative w-full h-full",children:[u.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(5)].map((r,i)=>u.jsx("div",{className:`absolute w-2 h-2 bg-orange-300/30 rounded-full
                  animate-float-particle transform
                  ${i%2===0?"animate-spin-slow":"animate-reverse-spin-slow"}
                  ${i%3===0?"scale-150":"scale-75"}`,style:{left:`${20+i*15}%`,top:`${10+i*20}%`,animationDelay:`${i*.5}s`}},i))}),[{src:t,isVisible:n},{src:e,isVisible:!n}].map((r,i)=>u.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:`absolute inset-0 w-full h-full object-contain transition-all duration-500 ease-in-out mix-blend-normal 
                ${r.isVisible?"opacity-100 visible scale-100":"opacity-0 invisible scale-95"}
                [&::-webkit-media-controls]:hidden
                outline-none border-none`,style:{WebkitMaskImage:"-webkit-radial-gradient(white, black)",maskImage:"radial-gradient(white, black)"},children:u.jsx("source",{src:r.src,type:"video/mp4"})},i)),u.jsxs("div",{className:"absolute top-4 right-4 flex items-center space-x-2 bg-white/90 backdrop-blur-sm rounded-full px-4 py-2 shadow-lg border border-orange-100/50",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-green-500":"bg-gray-400"}`}),n&&u.jsx("div",{className:"absolute inset-0 w-3 h-3 rounded-full bg-green-500 animate-ping"})]}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:n?"Speaking":"Listening"})]})]})})]})}KR.propTypes={isAiTalking:Ie.bool.isRequired,IdleAnimation:Ie.string.isRequired,TalkAnimation:Ie.string.isRequired};function GR({message:n}){return u.jsxs("div",{className:"flex items-center p-4 bg-red-50 rounded-2xl shadow-lg w-fit animate-fadeIn",children:[u.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{className:"text-red-600",children:n})]})}GR.propTypes={message:Ie.string.isRequired};const TW={type:"ai",content:"Hai! Apa yang bisa aku bantu hari ini? Jika kamu membutuhkan bantuan mengenai beasiswa baik di dalam maupun luar negeri, aku siap membantu! 😊",timestamp:new Date().toISOString()};function IW(){const[n,e]=A.useState(""),[t,r]=A.useState([TW]),[i,s]=A.useState(!1),[a,c]=A.useState(!1),[d,f]=A.useState(""),[g,y]=A.useState(null);return A.useEffect(()=>{const k=t[t.length-1];if((k==null?void 0:k.type)==="ai"){c(!0);const E=k.content;let P=0;f(E.charAt(0)),P=1;const S=setInterval(()=>{P<E.length?(f(N=>N+E.charAt(P)),P++):(clearInterval(S),c(!1))},50);return()=>clearInterval(S)}},[t]),{message:n,setMessage:e,chatHistory:t,setChatHistory:r,isLoading:i,isAiTalking:a,displayedContent:d,error:g,sendMessage:async k=>{var E,P,S;try{s(!0),y(null);const N=t.slice(-5).map(Q=>({role:Q.type==="user"?"user":"assistant",content:Q.content})),L=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({model:"mixtral-8x7b-32768",messages:[{role:"system",content:"Kamu adalah G'Gon, asisten AI spesialis beasiswa yang ramah dan membantu..."},...N,{role:"user",content:k}],temperature:.7,max_tokens:500,top_p:.9,frequency_penalty:.3,presence_penalty:.3})});if(!L.ok)throw new Error(L.status===429?"Terlalu banyak permintaan. Mohon tunggu beberapa saat dan coba lagi.":`Error: ${L.status}`);const O=await L.json();if(!((S=(P=(E=O.choices)==null?void 0:E[0])==null?void 0:P.message)!=null&&S.content))throw new Error("Format respons tidak valid");return O.choices[0].message.content}catch(N){throw y(N.message),N}finally{s(!1)}}}}function SW(){return{playMessageSound:A.useCallback(e=>{const t=new Audio(e==="sent"?"/sounds/message-sent.mp3":"/sounds/message-received.mp3");t.volume=.3,t.play().catch(()=>{})},[])}}function QR(){const{message:n,setMessage:e,chatHistory:t,setChatHistory:r,isLoading:i,isAiTalking:s,displayedContent:a,error:c,sendMessage:d}=IW(),{playMessageSound:f}=SW(),g=A.useRef(null),y=A.useRef(!0);A.useEffect(()=>{y.current&&g.current&&requestAnimationFrame(()=>{g.current.scrollTo({top:g.current.scrollHeight,behavior:"smooth"})})},[t,a]);const x=E=>{const P=E.target,S=P.scrollHeight-P.scrollTop-P.clientHeight<100;y.current=S},k=async E=>{if(E.preventDefault(),!n.trim()||i)return;const P=n;e(""),r(S=>[...S,{type:"user",content:P,timestamp:new Date().toISOString()}]),f("sent");try{const S=await d(P);r(N=>[...N,{type:"ai",content:S,timestamp:new Date().toISOString()}]),f("received")}catch(S){r(N=>[...N,{type:"ai",content:S.message||"Maaf, terjadi kesalahan. Silakan coba lagi.",timestamp:new Date().toISOString(),isError:!0}])}};return u.jsxs("div",{className:"min-h-screen bg-[#FFB827] relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),u.jsx("div",{className:"container mx-auto px-4 min-h-screen flex flex-col justify-center relative z-10",children:u.jsxs("div",{className:"flex flex-col-reverse md:flex-row items-center justify-center gap-8 pt-12 md:pt-20",children:[u.jsx("div",{className:"w-full md:w-1/2 max-w-2xl md:sticky md:top-8",children:u.jsxs("div",{className:"bg-white/90 backdrop-blur-lg rounded-[32px] shadow-2xl p-6 h-[600px] flex flex-col relative overflow-hidden border border-white/20 transform hover:scale-[1.02] transition-all duration-300",role:"region","aria-label":"Chat conversation",children:[u.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-gradient-to-b from-white via-white to-transparent z-10 flex items-center px-6",children:u.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Chat with G'Gon"})}),u.jsxs("div",{ref:g,onScroll:x,className:"flex-1 overflow-y-auto space-y-6 p-4 pt-16 pb-4 scrollbar-thin scrollbar-thumb-orange-500/50 hover:scrollbar-thumb-orange-500 scrollbar-track-transparent",style:{maxHeight:"calc(100% - 80px)"},children:[t.map((E,P)=>u.jsx(HR,{message:E,isLatest:P===t.length-1,displayedContent:a},`${E.timestamp||P}-${E.type}`)),i&&u.jsx("div",{className:"flex items-center space-x-3 p-4 bg-white/80 rounded-2xl shadow-lg w-fit animate-pulse",children:[0,1,2].map(E=>u.jsx("div",{className:`w-2.5 h-2.5 bg-orange-500 rounded-full animate-bounce ${E>0?`delay-${E}00`:""}`,role:"presentation"},E))}),c&&u.jsx(GR,{message:c})]}),u.jsx("div",{className:"relative mt-4 bg-gradient-to-t from-white via-white to-transparent pt-6",children:u.jsx(qw,{message:n,setMessage:e,handleSubmit:k,isLoading:i})})]})}),u.jsx("div",{className:"w-full md:w-1/2 lg:w-[45%] flex justify-center items-center md:sticky md:top-8",children:u.jsx("div",{className:"relative w-full max-w-[500px] aspect-square p-8",children:u.jsx(KR,{isAiTalking:s,IdleAnimation:bW,TalkAnimation:kW})})})]})})]})}function CW(){const[n,e]=A.useState(""),[t,r]=A.useState(""),[i,s]=A.useState(""),[a,c]=A.useState(!1),[d,f]=A.useState(!1),{login:g,loginWithGoogle:y}=qr(),x=_r();async function k(P){P.preventDefault();try{s(""),c(!0),await g(n,t),x("/ai-chat")}catch(S){s("Failed to login: "+S.message)}c(!1)}async function E(){try{s(""),c(!0),await y(),x("/ai-chat")}catch(P){s("Failed to login with Google: "+P.message)}c(!1)}return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FAB12F] via-[#F7931E] to-[#FF6B00] flex flex-col items-center justify-center p-4",children:u.jsxs("div",{className:"w-full max-w-sm",children:[u.jsxs("div",{className:"mb-8 text-center",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back!"}),u.jsx("p",{className:"text-white/80",children:"Hai selamat datang di GenCerdas"})]}),i&&u.jsxs("div",{className:"mb-4 bg-red-100/90 backdrop-blur-sm border-l-4 border-red-500 text-red-700 p-3 rounded-lg shadow-lg animate-shake text-sm",children:[u.jsx("p",{className:"font-medium",children:"Oops!"}),u.jsx("p",{children:i})]}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-white/20",children:u.jsxs("form",{onSubmit:k,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white text-sm mb-1 block font-medium",children:"Email"}),u.jsx("input",{type:"email",required:!0,value:n,onChange:P=>e(P.target.value),className:"w-full px-4 py-2.5 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 transition-all duration-300 text-sm",placeholder:"Enter your email"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white text-sm mb-1 block font-medium",children:"Password"}),u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:d?"text":"password",required:!0,value:t,onChange:P=>r(P.target.value),className:"w-full px-4 py-2.5 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 transition-all duration-300 text-sm",placeholder:"Enter your password"}),u.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/70 hover:text-white transition-colors duration-200",children:d?u.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("button",{type:"submit",disabled:a,className:"w-full bg-white text-[#F7931E] px-4 py-2.5 rounded-lg font-medium text-sm hover:bg-opacity-90 transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:a?u.jsxs("div",{className:"flex items-center justify-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#F7931E] mr-2"}),"Logging in..."]}):"Login"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-white/20"})}),u.jsx("div",{className:"relative flex justify-center text-xs",children:u.jsx("span",{className:"px-3 text-white/80 bg-gradient-to-br from-[#FAB12F] via-[#F7931E] to-[#FF6B00] rounded-full py-0.5",children:"atau Login dengan"})})]}),u.jsxs("button",{type:"button",onClick:E,disabled:a,className:"w-full flex items-center justify-center gap-2 bg-white/90 backdrop-blur-sm text-gray-700 px-4 py-2.5 rounded-lg font-medium text-sm hover:bg-white transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[u.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",className:"w-5 h-5",alt:"Google"}),"Login with Google"]})]})]})}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("p",{className:"text-white text-sm",children:["Belum ada akun?"," ",u.jsx(mr,{to:"/signup",className:"font-medium hover:underline transition-all duration-200",children:"Daftar disini"})]})})]})})}function NW(){const[n,e]=A.useState(""),[t,r]=A.useState(""),[i,s]=A.useState(""),[a,c]=A.useState(""),[d,f]=A.useState(""),[g,y]=A.useState(!1),[x,k]=A.useState(!1),{signup:E,loginWithGoogle:P}=qr(),S=_r();async function N(O){if(O.preventDefault(),t!==i)return f("Passwords do not match");try{f(""),y(!0),await E(n,t,a),S("/ai-chat")}catch(Q){f("Failed to create an account: "+Q.message)}y(!1)}async function L(){try{f(""),y(!0),await P(),S("/ai-chat")}catch(O){f("Failed to sign up with Google: "+O.message)}y(!1)}return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FAB12F] via-[#F7931E] to-[#FF6B00] flex flex-col items-center justify-center p-4",children:u.jsxs("div",{className:"w-full max-w-sm",children:[u.jsxs("div",{className:"mt-20 mb-8 text-center",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Buat Akun"}),u.jsx("p",{className:"text-white/80",children:"Hai selamat datang di GenCerdas"})]}),d&&u.jsxs("div",{className:"mb-4 bg-red-100/90 backdrop-blur-sm border-l-4 border-red-500 text-red-700 p-3 rounded-lg shadow-lg animate-shake text-sm",children:[u.jsx("p",{className:"font-medium",children:"Oops!"}),u.jsx("p",{children:d})]}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-white/20",children:u.jsxs("form",{onSubmit:N,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white text-sm mb-1 block font-medium",children:"Nama"}),u.jsx("input",{type:"text",required:!0,value:a,onChange:O=>c(O.target.value),className:"w-full px-4 py-2.5 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 transition-all duration-300 text-sm",placeholder:"Enter your name"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white text-sm mb-1 block font-medium",children:"Email"}),u.jsx("input",{type:"email",required:!0,value:n,onChange:O=>e(O.target.value),className:"w-full px-4 py-2.5 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 transition-all duration-300 text-sm",placeholder:"Enter your email"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white text-sm mb-1 block font-medium",children:"Password"}),u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:x?"text":"password",required:!0,value:t,onChange:O=>r(O.target.value),className:"w-full px-4 py-2.5 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 transition-all duration-300 text-sm",placeholder:"Enter your password"}),u.jsx("button",{type:"button",onClick:()=>k(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/70 hover:text-white transition-colors duration-200",children:x?u.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white text-sm mb-1 block font-medium",children:"Confirm Password"}),u.jsx("div",{className:"relative group",children:u.jsx("input",{type:x?"text":"password",required:!0,value:i,onChange:O=>s(O.target.value),className:"w-full px-4 py-2.5 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 transition-all duration-300 text-sm",placeholder:"Confirm your password"})})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("button",{type:"submit",disabled:g,className:"w-full bg-white text-[#F7931E] px-4 py-2.5 rounded-lg font-medium text-sm hover:bg-opacity-90 transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:g?u.jsxs("div",{className:"flex items-center justify-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#F7931E] mr-2"}),"Signing up..."]}):"Sign up"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-white/20"})}),u.jsx("div",{className:"relative flex justify-center text-xs",children:u.jsx("span",{className:"px-3 text-white/80 bg-gradient-to-br from-[#FAB12F] via-[#F7931E] to-[#FF6B00] rounded-full py-0.5",children:"atau Daftar dengan"})})]}),u.jsxs("button",{type:"button",onClick:L,disabled:g,className:"w-full flex items-center justify-center gap-2 bg-white/90 backdrop-blur-sm text-gray-700 px-4 py-2.5 rounded-lg font-medium text-sm hover:bg-white transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[u.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",className:"w-5 h-5",alt:"Google"}),"Sign up with Google"]})]})]})}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("p",{className:"text-white text-sm",children:["Sudah ada akun?"," ",u.jsx(mr,{to:"/login",className:"font-medium hover:underline transition-all duration-200",children:"Login disini"})]})})]})})}let AW={data:""},PW=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||AW,RW=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,jW=/\/\*[^]*?\*\/|  +/g,sI=/\n+/g,ho=(n,e)=>{let t="",r="",i="";for(let s in n){let a=n[s];s[0]=="@"?s[1]=="i"?t=s+" "+a+";":r+=s[1]=="f"?ho(a,s):s+"{"+ho(a,s[1]=="k"?"":e)+"}":typeof a=="object"?r+=ho(a,e?e.replace(/([^,])+/g,c=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,c):c?c+" "+d:d)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=ho.p?ho.p(s,a):s+":"+a+";")}return t+(e&&i?e+"{"+i+"}":i)+r},es={},JR=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+JR(n[t]);return e}return n},DW=(n,e,t,r,i)=>{let s=JR(n),a=es[s]||(es[s]=(d=>{let f=0,g=11;for(;f<d.length;)g=101*g+d.charCodeAt(f++)>>>0;return"go"+g})(s));if(!es[a]){let d=s!==n?n:(f=>{let g,y,x=[{}];for(;g=RW.exec(f.replace(jW,""));)g[4]?x.shift():g[3]?(y=g[3].replace(sI," ").trim(),x.unshift(x[0][y]=x[0][y]||{})):x[0][g[1]]=g[2].replace(sI," ").trim();return x[0]})(n);es[a]=ho(i?{["@keyframes "+a]:d}:d,t?"":"."+a)}let c=t&&es.g?es.g:null;return t&&(es.g=es[a]),((d,f,g,y)=>{y?f.data=f.data.replace(y,d):f.data.indexOf(d)===-1&&(f.data=g?d+f.data:f.data+d)})(es[a],e,r,c),a},LW=(n,e,t)=>n.reduce((r,i,s)=>{let a=e[s];if(a&&a.call){let c=a(t),d=c&&c.props&&c.props.className||/^go/.test(c)&&c;a=d?"."+d:c&&typeof c=="object"?c.props?"":ho(c,""):c===!1?"":c}return r+i+(a??"")},"");function Pg(n){let e=this||{},t=n.call?n(e.p):n;return DW(t.unshift?t.raw?LW(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,PW(e.target),e.g,e.o,e.k)}let YR,cx,ux;Pg.bind({g:1});let Ts=Pg.bind({k:1});function MW(n,e,t,r){ho.p=e,YR=n,cx=t,ux=r}function Uo(n,e){let t=this||{};return function(){let r=arguments;function i(s,a){let c=Object.assign({},s),d=c.className||i.className;t.p=Object.assign({theme:cx&&cx()},c),t.o=/ *go\d+/.test(d),c.className=Pg.apply(t,r)+(d?" "+d:"");let f=n;return n[0]&&(f=c.as||n,delete c.as),ux&&f[0]&&ux(c),YR(f,c)}return i}}var VW=n=>typeof n=="function",dx=(n,e)=>VW(n)?n(e):n,OW=(()=>{let n=0;return()=>(++n).toString()})(),FW=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),BW=20,Om=new Map,UW=1e3,oI=n=>{if(Om.has(n))return;let e=setTimeout(()=>{Om.delete(n),Rg({type:4,toastId:n})},UW);Om.set(n,e)},zW=n=>{let e=Om.get(n);e&&clearTimeout(e)},hx=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,BW)};case 1:return e.toast.id&&zW(e.toast.id),{...n,toasts:n.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:t}=e;return n.toasts.find(s=>s.id===t.id)?hx(n,{type:1,toast:t}):hx(n,{type:0,toast:t});case 3:let{toastId:r}=e;return r?oI(r):n.toasts.forEach(s=>{oI(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let i=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},qW=[],Jy={toasts:[],pausedAt:void 0},Rg=n=>{Jy=hx(Jy,n),qW.forEach(e=>{e(Jy)})},$W=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||OW()}),jh=n=>(e,t)=>{let r=$W(e,n,t);return Rg({type:2,toast:r}),r.id},Et=(n,e)=>jh("blank")(n,e);Et.error=jh("error");Et.success=jh("success");Et.loading=jh("loading");Et.custom=jh("custom");Et.dismiss=n=>{Rg({type:3,toastId:n})};Et.remove=n=>Rg({type:4,toastId:n});Et.promise=(n,e,t)=>{let r=Et.loading(e.loading,{...t,...t==null?void 0:t.loading});return n.then(i=>(Et.success(dx(e.success,i),{id:r,...t,...t==null?void 0:t.success}),i)).catch(i=>{Et.error(dx(e.error,i),{id:r,...t,...t==null?void 0:t.error})}),n};var WW=Ts`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,HW=Ts`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,KW=Ts`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,GW=Uo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${WW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${HW} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${KW} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,QW=Ts`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,JW=Uo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${QW} 1s linear infinite;
`,YW=Ts`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,XW=Ts`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ZW=Uo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${YW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${XW} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,eH=Uo("div")`
  position: absolute;
`,tH=Uo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,nH=Ts`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rH=Uo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${nH} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,iH=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?A.createElement(rH,null,e):e:t==="blank"?null:A.createElement(tH,null,A.createElement(JW,{...r}),t!=="loading"&&A.createElement(eH,null,t==="error"?A.createElement(GW,{...r}):A.createElement(ZW,{...r})))},sH=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,oH=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,aH="0%{opacity:0;} 100%{opacity:1;}",lH="0%{opacity:1;} 100%{opacity:0;}",cH=Uo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,uH=Uo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,dH=(n,e)=>{let t=n.includes("top")?1:-1,[r,i]=FW()?[aH,lH]:[sH(t),oH(t)];return{animation:e?`${Ts(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ts(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};A.memo(({toast:n,position:e,style:t,children:r})=>{let i=n.height?dH(n.position||e||"top-center",n.visible):{opacity:0},s=A.createElement(iH,{toast:n}),a=A.createElement(uH,{...n.ariaProps},dx(n.message,n));return A.createElement(cH,{className:n.className,style:{...i,...t,...n.style}},typeof r=="function"?r({icon:s,message:a}):A.createElement(A.Fragment,null,s,a))});MW(A.createElement);Pg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const XR="/assets/mascot-CSkbsJH_.png",dm=MS(),hm=AN(),Ct={KARTU_KELUARGA:"kartu_keluarga",AKTA_KELAHIRAN:"akta_kelahiran",IJAZAH:"ijazah",PIAGAM:"piagam",KIP:"kip"};class aI{static async uploadDocument(e,t,r){try{const i=dm.currentUser;if(!i)throw new Error("User must be authenticated to upload documents");const s={userId:i.uid,type:t,url:e,fileName:r,createdAt:new Date().toISOString(),status:"submitted"};return{id:(await cg(Hn(hm,"documents"),s)).id,url:e}}catch(i){throw console.error(`Upload error for ${t}:`,i),i}}static async uploadDocuments(e){try{if(!dm.currentUser)throw new Error("User must be authenticated to upload documents");const r=Object.entries(e).filter(([,i])=>i&&i.url&&i.fileName).map(([i,s])=>this.uploadDocument(s.url,i,s.fileName));return await Promise.all(r)}catch(t){throw console.error("Documents upload failed:",t),t}}static async deleteDocument(e){try{const t=Gt(hm,"documents",e);return await fF(t),!0}catch(t){throw console.error("Document deletion error:",t),t}}static async getUserDocuments(){try{const e=dm.currentUser;if(!e)throw new Error("User must be authenticated to view documents");const t=ds(Hn(hm,"documents"),hs("userId","==",e.uid),pd("createdAt","desc")),r=await Lr(t),i=[];return r.forEach(s=>{i.push({id:s.id,...s.data()})}),i}catch(e){throw console.error("Error fetching user documents:",e),e}}static async getDocumentsByType(e){try{const t=dm.currentUser;if(!t)throw new Error("User must be authenticated to view documents");const r=ds(Hn(hm,"documents"),hs("userId","==",t.uid),hs("type","==",e),pd("createdAt","desc")),i=await Lr(r),s=[];return i.forEach(a=>{s.push({id:a.id,...a.data()})}),s}catch(t){throw console.error(`Error fetching ${e} documents:`,t),t}}}function hH(){const{currentUser:n,logout:e}=qr(),t=_r(),[r,i]=A.useState(!1),[s,a]=A.useState([]),[c,d]=A.useState({weeklyTargets:{completed:4,total:5},xpPoints:1240,level:3,streak:7,totalMinutesLearned:420,rank:"Pelajar Perunggu",nextRankXP:2e3,achievements:[{id:1,name:"Langkah Pertama",icon:"🎯",description:"Selesaikan kursus pertamamu",progress:100,reward:50,unlocked:!0,category:"courses",date:"2024-01-15"},{id:2,name:"Pembelajar Cepat",icon:"⚡",description:"Selesaikan 5 kursus",progress:60,reward:100,unlocked:!1,category:"courses",requirements:"3/5 kursus selesai"},{id:3,name:"Rajin Belajar",icon:"🔥",description:"7 hari berturut-turut belajar",progress:100,reward:150,unlocked:!0,category:"engagement",date:"2024-01-20"},{id:4,name:"Pencari Ilmu",icon:"📚",description:"Tonton 10 video pembelajaran",progress:30,reward:200,unlocked:!1,category:"learning",requirements:"3/10 video ditonton"}],recentMilestones:[{id:1,title:"Mencapai Level 3",date:"20 Jan 2024",xpGained:500},{id:2,title:"7 Hari Berturut-turut Belajar",date:"19 Jan 2024",xpGained:150}]}),[f,g]=A.useState({}),[y]=A.useState([{id:1,name:"Beasiswa Unggulan",deadline:"2024-04-30",provider:"Kemendikbud",coverage:"Full",eligibility:"IPK min. 3.5",status:"open",icon:"🎓"},{id:2,name:"Beasiswa LPDP",deadline:"2024-05-15",provider:"Kemenkeu",coverage:"Full",eligibility:"IPK min. 3.0",status:"open",icon:"🌟"}]),[x,k]=A.useState([]);A.useEffect(()=>{(async()=>{if(n!=null&&n.uid)try{const I=Gt(it,"users",n.uid),j=await Fr(I);if(j.exists()){const D=j.data(),F=D.completedCourses||[];F.map(fe=>{var re;return{id:fe.id,time:fe.completedAt?new Date(fe.completedAt):new Date,title:`Menyelesaikan ${fe.title}`,score:fe.score||0,totalQuestions:fe.totalQuestions||10,progress:fe.progress||100,streak:((re=D.stats)==null?void 0:re.streak)||0}}).sort((fe,re)=>re.time-fe.time),a(F),d(fe=>{var re,ve;return{...fe,...D.stats,achievements:D.achievements||fe.achievements,recentMilestones:D.recentMilestones||fe.recentMilestones,rank:((re=D.stats)==null?void 0:re.rank)||fe.rank,nextRankXP:((ve=D.stats)==null?void 0:ve.nextRankXP)||fe.nextRankXP}});const V=Hn(it,"documents"),ge=ds(V,hs("userId","==",n.uid)),Pe=await Lr(ge),Me={};Pe.forEach(fe=>{const re=fe.data();Me[re.type]={url:re.url,fileName:re.fileName,uploadedAt:re.uploadedAt}}),g(Me)}}catch(I){console.error("Error fetching user data:",I),Et.error("Failed to load user data")}})()},[n]),A.useEffect(()=>{(async()=>{if(n!=null&&n.uid)try{const I=Hn(it,"applications"),j=ds(I,hs("userId","==",n.uid)),F=(await Lr(j)).docs.map(q=>({id:q.id,...q.data()}));k(F)}catch(I){console.error("Error fetching applications:",I),Et.error("Failed to load scholarship applications")}})()},[n]);const E=16,P=Math.round(s.length/E*100);async function S(){try{i(!0),await e(),t("/login"),Et.success("Logged out successfully")}catch(C){console.error("Failed to log out:",C),Et.error("Failed to log out")}finally{i(!1)}}const N=()=>{t("/courses")},L=async()=>{if(n!=null&&n.uid)try{const C=Gt(it,"users",n.uid),I={...c.weeklyTargets,completed:Math.min(c.weeklyTargets.completed+1,c.weeklyTargets.total)};await wh(C,{"stats.weeklyTargets":I}),d(j=>({...j,weeklyTargets:I})),Et.success("Daily target updated!")}catch(C){console.error("Error updating daily target:",C),Et.error("Failed to update daily target")}},O=C=>{const I=new Date,j=new Date(C),D=Math.floor((I-j)/(1e3*60*60*24));return D===0?"Hari ini":D===1?"Kemarin":D<7?`${D} hari yang lalu`:j.toLocaleDateString()},Q=C=>u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:O(C.time)}),u.jsx("h3",{className:"font-semibold text-gray-800 mt-1",children:C.title}),C.score!==void 0&&u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[C.score!==void 0&&`Score: ${C.score}/${C.totalQuestions*2} • `,C.progress!==void 0&&`Progress: ${C.progress}% • `,C.streak!==void 0&&`Streak: ${C.streak}🔥`]})]}),W=({title:C,value:I,icon:j,change:D})=>(W.propTypes={title:Ie.string.isRequired,value:Ie.string.isRequired,icon:Ie.string.isRequired,change:Ie.number},u.jsx(ee.div,{whileHover:{scale:1.02},className:"bg-white rounded-xl p-4 shadow-lg",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-500 text-sm",children:C}),u.jsx("h3",{className:"text-2xl font-bold mt-1",children:I}),D&&u.jsxs("p",{className:`text-sm ${D>0?"text-green-500":"text-red-500"}`,children:[D>0?"↑":"↓"," ",Math.abs(D),"% vs last week"]})]}),u.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:j})]})})),U=({type:C,document:I})=>{U.propTypes={type:Ie.string.isRequired,document:Ie.shape({url:Ie.string.isRequired,fileName:Ie.string.isRequired,uploadedAt:Ie.any}).isRequired};const j=D=>{switch(D){case Ct.KARTU_KELUARGA:return"Kartu Keluarga";case Ct.AKTA_KELAHIRAN:return"Akta Kelahiran";case Ct.IJAZAH:return"Ijazah";case Ct.PIAGAM:return"Piagam";case Ct.KIP:return"KIP";default:return D}};return u.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md hover:shadow-lg transition-all",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h3",{className:"font-semibold text-gray-800",children:j(C)}),u.jsx("span",{className:"text-xs bg-green-100 text-green-600 px-2 py-1 rounded-full",children:"Verified"})]}),u.jsx("p",{className:"text-sm text-gray-500 truncate",children:I.fileName}),u.jsx("div",{className:"mt-2",children:u.jsxs("a",{href:I.url,target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:text-orange-600 text-sm flex items-center gap-1",children:["View Document",u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})};return s.length?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-4",children:u.jsxs("div",{className:"ml-0 md:ml-24 max-w-7xl mx-auto",children:[u.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-[#FF9800] to-[#FF7043] rounded-3xl p-4 md:p-8 flex flex-col md:flex-row justify-between items-center mb-6 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[u.jsxs("div",{className:"space-y-4 md:space-y-6 w-full md:w-auto",children:[u.jsx("div",{children:u.jsx("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-4 mb-3",children:u.jsxs("div",{children:[u.jsxs("h1",{className:"text-white text-2xl md:text-3xl font-bold",children:[(n==null?void 0:n.displayName)||"Username",u.jsxs("span",{className:"ml-2 text-sm bg-white/20 px-3 py-1 rounded-full",children:["Level ",c.level]})]}),u.jsxs("p",{className:"text-white/80",children:[c.streak," Day Streak"]})]})})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[u.jsx(W,{title:"Weekly Learning Hours",value:`${Math.round(c.totalMinutesLearned/60)}h`,icon:"⏱️",change:12}),u.jsx(W,{title:"Current Streak",value:`${c.streak} days`,icon:"🔥",change:5}),u.jsx(W,{title:"XP This Week",value:c.xpPoints,icon:"⭐",change:8}),u.jsx(W,{title:"Course Completion",value:`${P}%`,icon:"📚",change:15})]}),u.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-4",children:[u.jsxs("button",{onClick:N,className:"bg-white text-[#FF9800] px-6 py-3 rounded-xl text-sm font-medium hover:bg-opacity-90 transition-all flex items-center shadow-md hover:shadow-lg",children:[u.jsx("span",{className:"mr-2",children:"📚"})," Buka Kelas"]}),u.jsxs("button",{onClick:L,className:"bg-[#FF7043] text-white px-6 py-3 rounded-xl text-sm font-medium hover:bg-opacity-90 transition-all flex items-center shadow-md hover:shadow-lg",children:[u.jsx("span",{className:"mr-2",children:"🎯"})," Target Harian"]}),u.jsxs("button",{onClick:S,disabled:r,className:"bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-xl text-sm font-medium transition-all flex items-center gap-2 backdrop-blur-sm",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),r?"Logging out...":"Logout"]})]})]}),u.jsx(ee.img,{src:XR,alt:"Mascot",className:"h-[200px] md:h-[500px] drop-shadow-2xl mt-4 md:mt-0",animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white rounded-3xl p-4 md:p-6 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-6 h-6 text-[#FFA726]",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M12 15.4L8.24 17.67L9.24 13.39L5.92 10.51L10.3 10.13L12 6.1L13.71 10.14L18.09 10.52L14.77 13.4L15.77 17.68L12 15.4Z"})}),u.jsx("h2",{className:"text-[#FFA726] font-bold text-xl",children:"Achievements"})]}),u.jsxs(ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/achievements"),className:"text-sm text-orange-500 hover:text-orange-600 flex items-center gap-1",children:["View All",u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:c.achievements.slice(0,4).map(C=>u.jsxs(ee.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`rounded-xl p-4 flex items-start gap-3 ${C.unlocked?"bg-orange-50 border-2 border-orange-200":"bg-gray-50 border border-gray-200"}`,children:[u.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl shadow-lg ${C.unlocked?"bg-gradient-to-br from-orange-400 to-orange-600 text-white":"bg-gray-100 text-gray-400"}`,children:C.icon}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"font-semibold text-gray-800",children:C.name}),u.jsxs("span",{className:"text-xs font-medium text-orange-500 bg-orange-100 px-2 py-1 rounded-full",children:["+",C.reward," XP"]})]}),u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.description}),!C.unlocked&&u.jsxs("div",{className:"mt-2",children:[u.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:u.jsx(ee.div,{className:"h-full bg-gray-300",initial:{width:0},animate:{width:`${C.progress}%`},transition:{duration:1}})}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:C.requirements})]}),C.unlocked&&u.jsxs("span",{className:"text-xs text-green-500 flex items-center gap-1 mt-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Completed ",C.date]})]})]},C.id))})]}),u.jsxs(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-3xl p-4 md:p-6 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("svg",{className:"w-6 h-6 text-[#FFA726]",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M13.5,8H12V13L16.28,15.54L17,14.33L13.5,12.25V8M13,3A9,9 0 0,0 4,12H1L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,19.99 10.51,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3"})}),u.jsx("h2",{className:"text-[#FFA726] font-bold text-xl",children:"Aktivitas Terakhir"})]}),u.jsx("div",{className:"space-y-4",children:s.map(C=>u.jsxs("div",{className:"relative pl-8 pb-6 border-l-2 border-orange-100",children:[u.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 bg-[#FFA726] rounded-full"}),Q(C)]},C.id))})]})]}),u.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 bg-white rounded-3xl p-4 md:p-6 shadow-lg hover:shadow-xl transition-shadow duration-300",children:u.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[u.jsxs("div",{className:"w-full md:w-1/2 mb-6 md:mb-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("svg",{className:"w-6 h-6 text-[#FFA726]",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M13 3C8.03 3 4 7.03 4 12H1L4.89 15.89L4.96 16.03L9 12H6C6 8.13 9.13 5 13 5C16.87 5 20 8.13 20 12C20 15.87 16.87 19 13 19C11.07 19 9.32 18.21 8.06 16.94L6.64 18.36C8.27 19.99 10.51 21 13 21C17.97 21 22 16.97 22 12C22 7.03 17.97 3 13 3Z"})}),u.jsx("h2",{className:"text-[#FFA726] font-bold text-xl",children:"Progress"})]}),u.jsx("p",{className:"text-gray-400 text-sm ml-8",children:"Progress yang sudah anda capai"}),u.jsx("div",{className:"mt-8 ml-8",children:u.jsxs("span",{className:"text-[#FFA726] text-5xl font-bold",children:[P,"%"]})}),u.jsx("div",{className:"mt-4 flex justify-center md:justify-start",children:u.jsxs("svg",{className:"w-32 h-32 md:w-48 md:h-48",viewBox:"0 0 100 100",children:[u.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#FFA72633",strokeWidth:"10"}),u.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#FFA726",strokeWidth:"10",strokeDasharray:"282.7",strokeDashoffset:282.7*(1-P/100),transform:"rotate(-90 50 50)"})]})})]}),u.jsx("div",{className:"w-full md:w-1/2",children:u.jsxs("div",{className:"h-full bg-[#FFA726] rounded-3xl md:rounded-r-3xl p-4 md:p-6",children:[u.jsx("h3",{className:"text-white font-semibold mb-4",children:"Kelas Terselesaikan:"}),u.jsx("div",{className:"space-y-3",children:s.map(C=>u.jsxs("div",{className:"flex items-center gap-2 text-white/90",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u.jsx("span",{className:"text-sm",children:C.title})]},C.id))}),u.jsx("div",{className:"mt-4 pt-4 border-t border-white/20",children:u.jsxs("p",{className:"text-white/80 text-sm",children:[s.length," dari ",E," kelas selesai"]})})]})})]})}),u.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 bg-white rounded-3xl p-4 md:p-6 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[u.jsx("svg",{className:"w-6 h-6 text-[#FFA726]",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"})}),u.jsx("h2",{className:"text-[#FFA726] font-bold text-xl",children:"Documents"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(f).map(([C,I])=>u.jsx(U,{type:C,document:I},C))})]}),u.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 bg-white rounded-3xl p-4 md:p-6 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[u.jsx("svg",{className:"w-6 h-6 text-[#FFA726]",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z"})}),u.jsx("h2",{className:"text-[#FFA726] font-bold text-xl",children:"Applied Scholarships"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.map(C=>u.jsxs(ee.div,{whileHover:{scale:1.02},className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border border-orange-200",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-800",children:C.scholarshipTitle}),u.jsx("p",{className:"text-sm text-gray-600",children:C.provider})]}),u.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${C.status==="pending"?"bg-yellow-100 text-yellow-600":C.status==="approved"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})]}),u.jsxs("div",{className:"mt-2 space-y-1",children:[u.jsxs("p",{className:"text-sm text-gray-600",children:[u.jsx("span",{className:"font-medium",children:"Applied:"})," ",new Date(C.appliedAt).toLocaleDateString()]}),u.jsxs("p",{className:"text-sm text-gray-600",children:[u.jsx("span",{className:"font-medium",children:"Deadline:"})," ",C.deadline]}),u.jsxs("p",{className:"text-sm text-gray-600",children:[u.jsx("span",{className:"font-medium",children:"Value:"})," ",C.value]})]})]},C.id)),x.length===0&&u.jsx("div",{className:"col-span-2 text-center py-8 text-gray-500",children:"No scholarship applications yet"})]})]}),u.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 bg-white rounded-3xl p-4 md:p-6 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[u.jsx("svg",{className:"w-6 h-6 text-[#FFA726]",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z"})}),u.jsx("h2",{className:"text-[#FFA726] font-bold text-xl",children:"Upcoming Scholarships"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(C=>u.jsx(ee.div,{whileHover:{scale:1.02},className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border border-orange-200",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center text-2xl text-white",children:C.icon}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-800",children:C.name}),u.jsx("p",{className:"text-sm text-gray-600",children:C.provider})]}),u.jsx("span",{className:"text-xs bg-green-100 text-green-600 px-2 py-1 rounded-full",children:C.status})]}),u.jsxs("div",{className:"mt-2 space-y-1",children:[u.jsxs("p",{className:"text-sm text-gray-600",children:[u.jsx("span",{className:"font-medium",children:"Coverage:"})," ",C.coverage]}),u.jsxs("p",{className:"text-sm text-gray-600",children:[u.jsx("span",{className:"font-medium",children:"Eligibility:"})," ",C.eligibility]}),u.jsxs("p",{className:"text-sm text-gray-600",children:[u.jsx("span",{className:"font-medium",children:"Deadline:"})," ",new Date(C.deadline).toLocaleDateString()]})]}),u.jsx("button",{className:"mt-3 text-orange-500 hover:text-orange-600 text-sm font-medium",children:"Learn More →"})]})]})},C.id))})]})]})}):u.jsx("div",{className:"text-gray-500 text-center py-4",children:"No recent activities"})}const fH="/assets/Persiapan1--FRnT8n_.jpeg",mH="/assets/Persiapan2-CgsgWIL0.png",pH="/assets/Persiapan3-foTSzCm_.png",gH="/assets/Persiapan4-D7GY3njF.png",lI="/assets/English1-YzSb6xj4.png",cI="/assets/English2-C5qFO7_q.png",uI="/assets/English3-DN7ju5YR.png",yH="/assets/English4-DvbLqwAq.png",dI="/assets/Japan1-CiqJUaFX.png",hI="/assets/Japan2-BLVyUEzd.png",fI="/assets/Japan3-Cvn6BmLF.png",mI="/assets/Japan4-BBgU9DxR.png",pI="/assets/Lanjutan1-CpvR1ru7.png",gI="/assets/Lanjutan2-CxcnqxGX.png",vH="/assets/Lanjutan3-CBAp3IOq.png",xH="/assets/Lanjutan4-bV-J5Jcz.png",ba=[{id:1,title:"Persiapan Dokumen",description:"Panduan lengkap menyiapkan dokumen aplikasi beasiswa dengan benar",image:fH,longDescription:"Kursus ini akan membantu Anda memahami dan menyiapkan semua dokumen yang diperlukan untuk aplikasi beasiswa dengan benar dan efektif. Anda akan belajar tentang standar dokumen internasional dan cara memenuhi persyaratan dari berbagai institusi pemberi beasiswa.",learningPoints:["Memahami jenis-jenis dokumen yang diperlukan","Teknik menyusun dokumen yang baik","Tips mengorganisir berkas aplikasi","Checklist kelengkapan dokumen","Cara menghindari kesalahan umum","Strategi pengumpulan dokumen tepat waktu"],modules:[{title:"Pengenalan Dokumen Beasiswa",duration:"30 menit"},{title:"Menyusun Dokumen Administratif",duration:"45 menit"},{title:"Dokumen Akademik",duration:"1 jam"},{title:"Dokumen Pendukung",duration:"45 menit"}]},{id:2,title:"Essay Writing",description:"Tips dan trik menulis essay beasiswa yang menarik dan persuasif",image:lI,longDescription:"Pelajari cara menulis essay beasiswa yang memukau dan menonjolkan potensi diri Anda. Kursus ini mencakup teknik penulisan, struktur essay, dan strategi untuk membuat essay yang berkesan.",learningPoints:["Memahami struktur essay yang baik","Teknik storytelling yang efektif","Tips menulis pembuka yang menarik","Cara mengembangkan argumen yang kuat","Strategi editing dan proofreading","Contoh essay yang berhasil"],modules:[{title:"Dasar-dasar Essay Writing",duration:"45 menit"},{title:"Struktur dan Format Essay",duration:"1 jam"},{title:"Teknik Storytelling",duration:"45 menit"},{title:"Editing dan Finalisasi",duration:"30 menit"}]},{id:3,title:"Interview Skills",description:"Persiapan menghadapi wawancara beasiswa dengan percaya diri",image:pI,longDescription:"Kuasai teknik wawancara beasiswa dan tingkatkan kepercayaan diri Anda. Kursus ini memberikan panduan lengkap mulai dari persiapan hingga pelaksanaan wawancara.",learningPoints:["Teknik menjawab pertanyaan umum","Tips mengelola kecemasan","Bahasa tubuh yang tepat","Persiapan dokumen pendukung","Simulasi wawancara","Follow-up pasca wawancara"],modules:[{title:"Persiapan Wawancara",duration:"45 menit"},{title:"Teknik Menjawab Pertanyaan",duration:"1 jam"},{title:"Bahasa Tubuh dan Presentasi Diri",duration:"45 menit"},{title:"Simulasi dan Praktik",duration:"1.5 jam"}]},{id:4,title:"IELTS Preparation",description:"Persiapan tes IELTS untuk memenuhi syarat beasiswa luar negeri",image:cI,longDescription:"Persiapkan diri Anda untuk tes IELTS dengan materi komprehensif dan latihan intensif. Kursus ini mencakup semua komponen IELTS: Listening, Reading, Writing, dan Speaking.",learningPoints:["Strategi tes IELTS","Latihan soal Listening","Teknik Reading","Writing Task 1 & 2","Speaking Practice","Tips time management"],modules:[{title:"Overview IELTS",duration:"30 menit"},{title:"Listening & Reading",duration:"1.5 jam"},{title:"Writing Skills",duration:"1.5 jam"},{title:"Speaking Practice",duration:"1 jam"}]},{id:5,title:"TOEFL Preparation",description:"Strategi dan latihan untuk mencapai skor TOEFL yang tinggi",image:uI,longDescription:"Kuasai strategi dan teknik untuk mendapatkan skor TOEFL yang tinggi. Kursus ini menyediakan latihan intensif untuk semua seksi TOEFL.",learningPoints:["Strategi tes TOEFL","Listening Comprehension","Structure and Written Expression","Reading Comprehension","Integrated Tasks","Practice Tests"],modules:[{title:"TOEFL Overview",duration:"30 menit"},{title:"Listening Skills",duration:"1 jam"},{title:"Structure & Writing",duration:"1.5 jam"},{title:"Reading & Practice",duration:"1 jam"}]},{id:6,title:"Research Proposal",description:"Cara menyusun proposal penelitian untuk beasiswa S2 dan S3",image:gI,longDescription:"Pelajari cara menyusun proposal penelitian yang meyakinkan untuk aplikasi beasiswa pascasarjana. Kursus ini mencakup metodologi penelitian dan teknik penulisan akademik.",learningPoints:["Struktur proposal penelitian","Metodologi penelitian","Literature review","Teknik penulisan akademik","Analisis data","Presentasi hasil penelitian"],modules:[{title:"Dasar-dasar Proposal Penelitian",duration:"1 jam"},{title:"Metodologi Penelitian",duration:"1.5 jam"},{title:"Literature Review",duration:"1 jam"},{title:"Penulisan dan Presentasi",duration:"1 jam"}]},{id:7,title:"Statement of Purpose",description:"Panduan menulis Statement of Purpose yang meyakinkan",image:yH,longDescription:"Pelajari cara menulis Statement of Purpose yang efektif untuk aplikasi beasiswa. Kursus ini mencakup struktur, konten, dan teknik penulisan.",learningPoints:["Struktur SoP yang efektif","Teknik penulisan menarik","Tips menampilkan keunikan diri","Contoh SoP sukses","Editing dan revisi","Common mistakes to avoid"],modules:[{title:"Dasar-dasar SoP",duration:"45 menit"},{title:"Struktur dan Konten",duration:"1 jam"},{title:"Teknik Penulisan",duration:"45 menit"},{title:"Review dan Revisi",duration:"30 menit"}]},{id:8,title:"Motivation Letter",description:"Cara menulis motivation letter yang persuasif",image:mH,longDescription:"Kuasai teknik menulis motivation letter yang meyakinkan untuk aplikasi beasiswa. Kursus ini memberikan panduan lengkap dari persiapan hingga finalisasi.",learningPoints:["Struktur motivation letter","Teknik persuasif","Personal branding","Contoh sukses","Tips editing","Feedback dan revisi"],modules:[{title:"Dasar Motivation Letter",duration:"45 menit"},{title:"Teknik Penulisan",duration:"1 jam"},{title:"Personal Branding",duration:"45 menit"},{title:"Review dan Revisi",duration:"30 menit"}]},{id:9,title:"Basic Japanese",description:"Pengenalan dasar bahasa Jepang untuk pemula",image:dI,longDescription:"Pelajari dasar-dasar bahasa Jepang dari nol. Kursus ini mencakup hiragana, katakana, dan percakapan dasar.",learningPoints:["Hiragana dan Katakana","Kosakata dasar","Struktur kalimat dasar","Percakapan sehari-hari","Budaya Jepang","Latihan pengucapan"],modules:[{title:"Pengenalan Huruf",duration:"1 jam"},{title:"Kosakata Dasar",duration:"1 jam"},{title:"Struktur Kalimat",duration:"1 jam"},{title:"Percakapan Dasar",duration:"1 jam"}]},{id:10,title:"Intermediate Japanese",description:"Peningkatan kemampuan bahasa Jepang untuk level menengah",image:hI,longDescription:"Tingkatkan kemampuan bahasa Jepang Anda ke level menengah. Fokus pada grammar kompleks dan kanji dasar.",learningPoints:["Kanji dasar","Grammar menengah","Percakapan formal","Membaca dan menulis","Listening comprehension","Budaya bisnis Jepang"],modules:[{title:"Kanji Dasar",duration:"1.5 jam"},{title:"Grammar Menengah",duration:"1.5 jam"},{title:"Percakapan Formal",duration:"1 jam"},{title:"Praktik Menyeluruh",duration:"1 jam"}]},{id:11,title:"Advanced Japanese",description:"Penguasaan bahasa Jepang tingkat lanjut",image:fI,longDescription:"Kuasai bahasa Jepang tingkat lanjut untuk keperluan akademik dan profesional. Fokus pada keigo dan bahasa formal.",learningPoints:["Keigo (bahasa hormat)","Kanji lanjutan","Ekspresi formal","Presentasi akademik","Diskusi kompleks","Penulisan formal"],modules:[{title:"Keigo Master",duration:"1.5 jam"},{title:"Kanji Lanjutan",duration:"1.5 jam"},{title:"Presentasi Akademik",duration:"1 jam"},{title:"Diskusi Formal",duration:"1 jam"}]},{id:12,title:"Japanese Writing",description:"Teknik menulis dalam bahasa Jepang",image:mI,longDescription:"Pelajari teknik menulis dalam bahasa Jepang, dari email formal hingga laporan akademik.",learningPoints:["Format email formal","Penulisan laporan","Gaya bahasa formal","Struktur dokumen","Kanji dalam tulisan","Editing dan revisi"],modules:[{title:"Email Formal",duration:"1 jam"},{title:"Penulisan Laporan",duration:"1.5 jam"},{title:"Dokumen Formal",duration:"1 jam"},{title:"Praktik dan Review",duration:"30 menit"}]},{id:13,title:"Japanese Speaking",description:"Meningkatkan kemampuan berbicara bahasa Jepang",image:dI,longDescription:"Kembangkan kemampuan berbicara bahasa Jepang Anda dengan fokus pada percakapan praktis dan formal.",learningPoints:["Percakapan formal","Presentasi","Diskusi akademik","Pengucapan yang tepat","Ekspresi idiomatik","Situational speaking"],modules:[{title:"Dasar Percakapan Formal",duration:"1 jam"},{title:"Teknik Presentasi",duration:"1.5 jam"},{title:"Diskusi Akademik",duration:"1 jam"},{title:"Praktik Menyeluruh",duration:"1 jam"}]},{id:14,title:"Japanese Reading",description:"Meningkatkan kemampuan membaca teks Jepang",image:hI,longDescription:"Pelajari teknik membaca efektif untuk berbagai jenis teks bahasa Jepang.",learningPoints:["Strategi membaca","Pemahaman kanji","Skimming dan scanning","Analisis teks akademik","Speed reading","Komprehensif reading"],modules:[{title:"Teknik Membaca",duration:"1 jam"},{title:"Kanji dalam Konteks",duration:"1.5 jam"},{title:"Teks Akademik",duration:"1 jam"},{title:"Praktik Membaca",duration:"1 jam"}]},{id:15,title:"Japanese Research Writing",description:"Teknik menulis karya ilmiah dalam bahasa Jepang",image:fI,longDescription:"Pelajari cara menulis karya ilmiah dalam bahasa Jepang dengan standar akademik.",learningPoints:["Format paper akademik","Penulisan abstrak","Metodologi penelitian","Sitasi dan referensi","Gaya bahasa akademik","Review dan editing"],modules:[{title:"Dasar Penulisan Akademik",duration:"1.5 jam"},{title:"Struktur Paper",duration:"1 jam"},{title:"Referensi dan Sitasi",duration:"1 jam"},{title:"Editing dan Finalisasi",duration:"1 jam"}]},{id:16,title:"Japanese Interview Skills",description:"Persiapan wawancara dalam bahasa Jepang",image:mI,longDescription:"Persiapkan diri untuk wawancara dalam bahasa Jepang dengan teknik dan etika yang tepat.",learningPoints:["Etika wawancara Jepang","Keigo dalam wawancara","Body language","Jawaban efektif","Pertanyaan umum","Follow-up"],modules:[{title:"Etika Wawancara",duration:"1 jam"},{title:"Praktik Keigo",duration:"1.5 jam"},{title:"Simulasi Wawancara",duration:"1.5 jam"},{title:"Review dan Feedback",duration:"1 jam"}]},{id:17,title:"Persiapan Bahasa Mandarin",description:"Dasar-dasar bahasa Mandarin untuk beasiswa",image:pH,longDescription:"Pelajari dasar bahasa Mandarin yang diperlukan untuk aplikasi beasiswa ke Tiongkok.",learningPoints:["Pinyin dan tones","Karakter dasar","Percakapan dasar","Listening skills","Reading comprehension","Writing basics"],modules:[{title:"Pinyin dan Tones",duration:"1.5 jam"},{title:"Karakter Dasar",duration:"1.5 jam"},{title:"Percakapan Praktis",duration:"1 jam"},{title:"Integrated Practice",duration:"1 jam"}]},{id:18,title:"HSK Preparation",description:"Persiapan tes HSK untuk beasiswa ke Tiongkok",image:gH,longDescription:"Persiapkan diri untuk tes HSK dengan materi komprehensif dan latihan intensif.",learningPoints:["Strategi tes HSK","Vocabulary building","Grammar patterns","Reading skills","Listening practice","Mock tests"],modules:[{title:"Overview HSK",duration:"1 jam"},{title:"Vocabulary & Grammar",duration:"1.5 jam"},{title:"Reading & Listening",duration:"1.5 jam"},{title:"Practice Tests",duration:"1 jam"}]},{id:19,title:"Chinese Academic Writing",description:"Teknik menulis akademik dalam bahasa Mandarin",image:pI,longDescription:"Pelajari cara menulis karya ilmiah dalam bahasa Mandarin sesuai standar akademik.",learningPoints:["Format akademik","Gaya penulisan","Struktur paper","Referensi","Technical vocabulary","Editing"],modules:[{title:"Dasar Penulisan",duration:"1 jam"},{title:"Struktur Paper",duration:"1.5 jam"},{title:"Technical Writing",duration:"1 jam"},{title:"Review & Editing",duration:"1 jam"}]},{id:20,title:"Chinese Interview Skills",description:"Persiapan wawancara dalam bahasa Mandarin",image:gI,longDescription:"Kuasai teknik wawancara dalam bahasa Mandarin untuk beasiswa dan akademik.",learningPoints:["Etika wawancara","Formal Chinese","Common questions","Body language","Cultural aspects","Follow-up"],modules:[{title:"Interview Basics",duration:"1 jam"},{title:"Language Practice",duration:"1.5 jam"},{title:"Mock Interviews",duration:"1.5 jam"},{title:"Feedback Session",duration:"1 jam"}]},{id:21,title:"Persiapan Bahasa Korea",description:"Dasar-dasar bahasa Korea untuk beasiswa",image:vH,longDescription:"Pelajari dasar bahasa Korea yang diperlukan untuk aplikasi beasiswa ke Korea.",learningPoints:["Hangul basics","Grammar patterns","Basic conversation","Listening skills","Reading practice","Cultural aspects"],modules:[{title:"Hangul Basics",duration:"1 jam"},{title:"Grammar & Vocabulary",duration:"1.5 jam"},{title:"Conversation Practice",duration:"1 jam"},{title:"Integrated Skills",duration:"1 jam"}]},{id:22,title:"TOPIK Preparation",description:"Persiapan tes TOPIK untuk beasiswa ke Korea",image:xH,longDescription:"Persiapkan diri untuk tes TOPIK dengan materi komprehensif dan latihan intensif.",learningPoints:["TOPIK structure","Vocabulary building","Grammar patterns","Reading strategies","Listening practice","Writing skills"],modules:[{title:"TOPIK Overview",duration:"1 jam"},{title:"Language Skills",duration:"1.5 jam"},{title:"Practice Tests",duration:"1.5 jam"},{title:"Review Session",duration:"1 jam"}]},{id:23,title:"Korean Academic Writing",description:"Teknik menulis akademik dalam bahasa Korea",image:lI,longDescription:"Pelajari cara menulis karya ilmiah dalam bahasa Korea sesuai standar akademik.",learningPoints:["Academic format","Writing style","Paper structure","Citations","Technical terms","Editing process"],modules:[{title:"Writing Basics",duration:"1 jam"},{title:"Academic Style",duration:"1.5 jam"},{title:"Paper Writing",duration:"1.5 jam"},{title:"Review & Editing",duration:"1 jam"}]},{id:24,title:"Korean Interview Skills",description:"Persiapan wawancara dalam bahasa Korea",image:cI,longDescription:"Kuasai teknik wawancara dalam bahasa Korea untuk beasiswa dan akademik.",learningPoints:["Interview etiquette","Formal Korean","Common questions","Body language","Cultural aspects","Follow-up etiquette"],modules:[{title:"Interview Basics",duration:"1 jam"},{title:"Language Practice",duration:"1.5 jam"},{title:"Mock Interviews",duration:"1.5 jam"},{title:"Feedback Session",duration:"1 jam"}]},{id:25,title:"Scholarship Network Building",description:"Membangun jaringan untuk kesuksesan beasiswa",image:uI,longDescription:"Pelajari cara membangun dan memelihara jaringan profesional untuk mendukung kesuksesan beasiswa.",learningPoints:["Professional networking","Online presence","Communication skills","Relationship building","Follow-up strategies","Long-term networking"],modules:[{title:"Networking Basics",duration:"1 jam"},{title:"Communication Skills",duration:"1.5 jam"},{title:"Platform Strategy",duration:"1 jam"},{title:"Maintenance Tips",duration:"1 jam"}]}];function _H(){const n=_r(),e=[{title:"Persiapan Dokumen Dasar",icon:"📄",courses:ba.filter(i=>[1,2,3,6].includes(i.id))},{title:"Persiapan Bahasa Inggris",icon:"🇬🇧",courses:ba.filter(i=>[4,5,7,8,16].includes(i.id))},{title:"Persiapan Bahasa Jepang",icon:"🇯🇵",courses:ba.filter(i=>[9,10,11,12,13,14,15].includes(i.id))},{title:"Persiapan Bahasa Mandarin",icon:"🇨🇳",courses:ba.filter(i=>[17,18,19,20].includes(i.id))},{title:"Persiapan Bahasa Korea",icon:"🇰🇷",courses:ba.filter(i=>[21,22,23,24].includes(i.id))},{title:"Pengembangan Jaringan",icon:"🌐",courses:ba.filter(i=>[25].includes(i.id))}],t={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},r={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800]",children:[u.jsx(ee.div,{className:"bg-white/10 backdrop-blur-md shadow-lg",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx(ee.h1,{className:"text-4xl font-bold text-white",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:"Kursus Beasiswa"}),u.jsx(ee.p,{className:"mt-3 text-lg text-white/90",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:"Pilih kursus sesuai kebutuhan persiapan beasiswa Anda"})]})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:u.jsx(ee.div,{variants:t,initial:"hidden",animate:"visible",children:e.map((i,s)=>u.jsxs(ee.div,{className:"mb-16",variants:r,children:[u.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[u.jsx("span",{className:"text-3xl",children:i.icon}),u.jsx("h2",{className:"text-2xl font-bold text-white",children:i.title}),u.jsx("div",{className:"h-0.5 flex-grow bg-white/20 rounded-full"})]}),u.jsx(ee.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",variants:t,children:i.courses.map(a=>{var c,d;return u.jsxs(ee.div,{variants:r,whileHover:{y:-8,transition:{duration:.2}},className:"group relative bg-white rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300",onClick:()=>n(`/course/${a.id}`),children:[u.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[u.jsx(ee.img,{src:a.image,alt:a.title,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500",whileHover:{scale:1.1},transition:{duration:.3}}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),u.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex justify-between items-center",children:[u.jsxs(ee.div,{className:"flex items-center gap-2.5 bg-white/10 backdrop-blur-md px-3 py-1.5 rounded-full",whileHover:{scale:1.05},children:[u.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsxs("span",{className:"text-white text-sm font-medium",children:[(c=a.modules)==null?void 0:c.reduce((f,g)=>{const y=parseInt(g.duration);return f+(isNaN(y)?0:y)},0)," Menit"]})]}),u.jsxs(ee.div,{className:"flex items-center gap-2.5 bg-white/10 backdrop-blur-md px-3 py-1.5 rounded-full",whileHover:{scale:1.05},children:[u.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 4v12l-4-2-4 2V4M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsxs("span",{className:"text-white text-sm font-medium",children:[((d=a.modules)==null?void 0:d.length)||0," Modul"]})]})]})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsxs(ee.span,{className:"bg-orange-100/80 text-orange-600 text-xs px-3 py-1.5 rounded-full font-semibold tracking-wide",whileHover:{scale:1.05},children:["Level ",Math.floor(a.id/5)+1]}),u.jsx(ee.span,{className:"bg-blue-100/80 text-blue-600 text-xs px-3 py-1.5 rounded-full font-semibold tracking-wide",whileHover:{scale:1.05},children:"Sertifikat"}),a.id<=5&&u.jsx(ee.span,{className:"bg-green-100/80 text-green-600 text-xs px-3 py-1.5 rounded-full font-semibold tracking-wide",whileHover:{scale:1.05},children:"Populer"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 group-hover:text-orange-600 transition-colors line-clamp-2",children:a.title}),u.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:a.description})]}),u.jsxs(ee.button,{className:`w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white px-5 py-3.5 rounded-2xl text-sm font-semibold\r
                          hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2\r
                          active:from-orange-700 active:to-orange-800`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[u.jsx("span",{children:"Mulai Belajar"}),u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]},a.id)})})]},s))})})]})}const Id={getCategories:async()=>{try{const n=Hn(it,"CategoryID");return(await Lr(n)).docs.map(t=>({id:t.id,...t.data()}))}catch(n){throw console.error("Error fetching categories:",n),n}},async getAllPodcasts(){try{const n=Hn(it,"podcast"),e=ds(n,pd("CreatedAt","desc"));return(await Lr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(n){throw console.error("Error fetching all podcasts:",n),n}},getPopularPodcasts:async()=>{try{const n=Hn(it,"podcast"),e=ds(n,hs("played",">",2),pd("Played","desc"),cF(6));return(await Lr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(n){throw console.error("Error fetching popular podcasts:",n),n}},getPodcastById:async n=>{try{const e=Gt(it,"podcast",n),t=await Fr(e);if(!t.exists())throw new Error("Podcast not found");return{id:t.id,...t.data()}}catch(e){throw console.error("Error fetching podcast:",e),e}},getPodcastsByCategory:async n=>{try{const e=Hn(it,"podcast"),t=ds(e,hs("CategoryID","==",n),pd("createdAt","desc"));return(await Lr(t)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){throw console.error("Error fetching podcasts by category:",e),e}},getPodcastAudio:async n=>{try{const e=Gt(it,"podcast",n),t=await Fr(e);if(!t.exists())throw new Error("Podcast not found");const r=t.data();if(!r.SoundURL)throw new Error("Audio URL not found for this podcast");return r.SoundURL}catch(e){throw console.error("Error fetching podcast audio:",e),e}},updateListenCount:async n=>{try{const e=Gt(it,"podcasts",n);if(!(await Fr(e)).exists())throw new Error("Podcast not found");await wh(e,{listens:$N(1)})}catch(e){throw console.error("Error updating listen count:",e),e}},addPodcast:async()=>{try{await cg(Hn(it,"podcast"),{Title:"BasicToefl",Description:"Selamat datang di BasicTOEFL Podcast...",ImageURL:"https://ibb.co.com/yVsQcdp",SoundURL:"",CategoryID:"TOEFL",Played:0,createdAt:new Date})}catch(n){console.error("Error adding document: ",n)}},updatePlayCount:async n=>{try{await L7(n)}catch(e){throw console.error("Error updating play count:",e),e}}};function wH(){const[n,e]=A.useState([]),[t,r]=A.useState([]),[i,s]=A.useState([]),[a,c]=A.useState(!0),[d,f]=A.useState(null),[g,y]=A.useState(null),[x,k]=A.useState([]);A.useEffect(()=>{E()},[]),A.useEffect(()=>{g?P(g):k(t)},[g,t]);const E=async()=>{try{c(!0);const[S,N,L]=await Promise.all([Id.getCategories(),Id.getAllPodcasts(),Id.getPopularPodcasts()]);e(S),r(N),k(N),s(L)}catch(S){f("Failed to fetch podcast data"),console.error("Error:",S)}finally{c(!1)}},P=S=>{const N=t.filter(L=>L.CategoryID===S);k(N)};return a?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-4 flex items-center justify-center",children:u.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):d?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-4 flex items-center justify-center",children:u.jsx("div",{className:"text-white text-xl",children:d})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-4",children:u.jsxs("div",{className:"ml-0 md:ml-24",children:[u.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-6 md:mb-8",children:"Podcast"}),u.jsxs("div",{className:"mb-8 md:mb-12",children:[u.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white mb-6 md:mb-8",children:"Kategori"}),u.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[u.jsxs("div",{onClick:()=>y(null),className:`bg-[#FF7043] rounded-xl md:rounded-2xl p-4 md:p-8 cursor-pointer hover:bg-[#FF8A65] transition-all group relative overflow-hidden ${g===null?"ring-4 ring-white":""}`,children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"All Podcast"}),u.jsx("p",{className:"text-white/80",children:"Lihat semua podcast yang tersedia"})]}),u.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center group-hover:bg-white/30 transition-all",children:u.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})})]}),u.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-bl-full -mr-20 -mt-20"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-white/10 rounded-tl-full"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6",children:[u.jsxs("div",{onClick:()=>y("1"),className:`bg-[#FF7043] rounded-2xl p-8 cursor-pointer hover:bg-[#FF8A65] transition-all group relative overflow-hidden ${g==="1"?"ring-4 ring-white":""}`,children:[u.jsxs("div",{className:"flex flex-col h-full justify-between relative z-10",children:[u.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mb-4",children:u.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"TOEFL"}),u.jsx("p",{className:"text-white/80 text-sm",children:"Persiapan tes TOEFL"})]})]}),u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-bl-full -mr-16 -mt-16"})]}),u.jsxs("div",{onClick:()=>y("2"),className:`bg-[#FF7043] rounded-2xl p-8 cursor-pointer hover:bg-[#FF8A65] transition-all group relative overflow-hidden ${g==="2"?"ring-4 ring-white":""}`,children:[u.jsxs("div",{className:"flex flex-col h-full justify-between relative z-10",children:[u.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mb-4",children:u.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Wawancara Beasiswa"}),u.jsx("p",{className:"text-white/80 text-sm",children:"Tips interview beasiswa"})]})]}),u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-bl-full -mr-16 -mt-16"})]}),u.jsxs("div",{onClick:()=>y("3"),className:`bg-[#FF7043] rounded-2xl p-8 cursor-pointer hover:bg-[#FF8A65] transition-all group relative overflow-hidden ${g==="3"?"ring-4 ring-white":""}`,children:[u.jsxs("div",{className:"flex flex-col h-full justify-between relative z-10",children:[u.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mb-4",children:u.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Strategi Beasiswa"}),u.jsx("p",{className:"text-white/80 text-sm",children:"Panduan meraih beasiswa"})]})]}),u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-bl-full -mr-16 -mt-16"})]}),u.jsxs("div",{onClick:()=>y("4"),className:`bg-[#FF7043] rounded-2xl p-8 cursor-pointer hover:bg-[#FF8A65] transition-all group relative overflow-hidden ${g==="4"?"ring-4 ring-white":""}`,children:[u.jsxs("div",{className:"flex flex-col h-full justify-between relative z-10",children:[u.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mb-4",children:u.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Pembelajaran Bahasa"}),u.jsx("p",{className:"text-white/80 text-sm",children:"Tingkatkan kemampuan bahasa"})]})]}),u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-bl-full -mr-16 -mt-16"})]})]})]})]}),u.jsxs("div",{className:"mb-8 md:mb-12",children:[u.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4 md:mb-6",children:g?"Filtered Podcasts":"All Podcasts"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:x.map(S=>u.jsxs(mr,{to:`/podcast/${S.id}`,className:"group relative rounded-xl md:rounded-2xl overflow-hidden cursor-pointer transform transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl bg-white/5 backdrop-blur-sm",children:[u.jsxs("div",{className:"aspect-[4/3] relative",children:[u.jsx("div",{className:"animate-pulse bg-gradient-to-r from-gray-200 to-gray-300 absolute inset-0"}),u.jsx("img",{src:S.ImageURL,alt:S.Title,className:"w-full h-full object-cover transform transition-transform duration-500 group-hover:scale-110",onLoad:N=>N.target.previousSibling.remove()}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-80 group-hover:opacity-90 transition-opacity"}),u.jsx("div",{className:"absolute inset-0 bg-orange-500/20 opacity-0 group-hover:opacity-100 transition-opacity"}),u.jsx("button",{className:"absolute bottom-2 md:bottom-4 right-2 md:right-4 w-10 h-10 md:w-14 md:h-14 bg-orange-500 rounded-full flex items-center justify-center text-white shadow-lg transform transition-all duration-300 hover:scale-110 hover:bg-orange-600",onClick:N=>{N.stopPropagation()},children:u.jsx("svg",{className:"w-5 h-5 md:w-7 md:h-7",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M8 5v10l8-5-8-5z"})})}),u.jsxs("div",{className:"absolute top-4 left-4 flex space-x-2",children:[u.jsxs("span",{className:`bg-black/60 backdrop-blur-md text-white text-[10px] md:text-xs px-2 md:px-3 py-1 md:py-1.5 rounded-full font-medium flex items-center space-x-1\r
                                   transform transition-all duration-300 group-hover:translate-y-0 -translate-y-2 opacity-0 group-hover:opacity-100`,children:[u.jsx("svg",{className:"w-3.5 h-3.5 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"})}),S.Duration||"20 min"]}),u.jsxs("span",{className:`bg-orange-500/80 backdrop-blur-md text-white text-xs px-3 py-1.5 rounded-full font-medium\r
                                   transform transition-all duration-300 group-hover:translate-y-0 -translate-y-2 opacity-0 group-hover:opacity-100 delay-75`,children:[S.EpisodeCount||"1"," Episode"]})]})]}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3 md:p-6 bg-gradient-to-t from-black via-black/95 to-transparent",children:u.jsxs("div",{className:"space-y-2 md:space-y-3 transform transition-all duration-300 group-hover:translate-y-0 translate-y-2",children:[u.jsx("h3",{className:"text-white font-bold text-base md:text-xl line-clamp-1 group-hover:text-orange-400 transition-colors",children:S.Title}),u.jsx("p",{className:"text-white/80 text-xs md:text-sm line-clamp-2 font-medium leading-relaxed",children:S.Description}),u.jsxs("div",{className:"flex items-center justify-between pt-2 md:pt-3 border-t border-white/10",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center text-white/70 text-xs font-medium",children:[u.jsx("svg",{className:"w-4 h-4 mr-1.5 text-orange-400",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"})}),S.PublishedDate||"Jan 1, 2024"]}),u.jsxs("div",{className:"flex items-center text-white/70 text-xs font-medium",children:[u.jsxs("svg",{className:"w-4 h-4 mr-1.5 text-orange-400",fill:"currentColor",viewBox:"0 0 20 20",children:[u.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),u.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),S.Views||"1.2k"," views"]})]}),u.jsx("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-white/10 text-white/90",children:S.Category||"Education"})]})]})})]},S.id))})]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-white mb-6",children:"Podcast populer"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:i.map(S=>u.jsxs("div",{className:"group relative rounded-2xl overflow-hidden cursor-pointer transform transition-all duration-300 hover:scale-[1.02] hover:shadow-xl",children:[u.jsxs("div",{className:"aspect-[4/3] relative",children:[u.jsx("img",{src:S.ImageURL,alt:S.Title,className:"w-full h-full object-cover transform transition-transform duration-300 group-hover:scale-105"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),u.jsx("button",{className:"absolute bottom-4 right-4 w-12 h-12 bg-white rounded-full flex items-center justify-center text-orange-500 shadow-lg transform transition-all duration-300 hover:scale-110 hover:bg-orange-500 hover:text-white",onClick:()=>window.location.href=`/podcast/${S.id}`,children:u.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M8 5v10l8-5-8-5z"})})}),u.jsxs("div",{className:"absolute top-4 right-4 flex space-x-2",children:[u.jsx("span",{className:"bg-black/50 backdrop-blur-sm text-white text-xs px-2 py-1 rounded-full",children:S.Duration||"20 min"}),u.jsxs("span",{className:"bg-black/50 backdrop-blur-sm text-white text-xs px-2 py-1 rounded-full",children:[S.EpisodeCount||"1"," Episode"]})]})]}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black via-black/80 to-transparent",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"text-white font-bold text-lg line-clamp-1 group-hover:text-orange-400 transition-colors",children:S.Title}),u.jsx("p",{className:"text-white/80 text-sm line-clamp-2",children:S.Description}),u.jsxs("div",{className:"flex items-center space-x-4 pt-2",children:[u.jsxs("div",{className:"flex items-center text-white/60 text-xs",children:[u.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"})}),S.PublishedDate||"Jan 1, 2024"]}),u.jsxs("div",{className:"flex items-center text-white/60 text-xs",children:[u.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:[u.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),u.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),S.Views||"1.2k"," views"]})]})]})})]},S.id))})]})]})})}const yI=n=>({1:"TOEFL",2:"Wawancara",3:"Strategi",4:"Bahasa"})[n]||"Uncategorized",bH=n=>n>=1e6?`${(n/1e6).toFixed(1)}M`:n>=1e3?`${(n/1e3).toFixed(1)}K`:n.toString(),vI=n=>n?`${Math.floor(n/60)} min`:"5 min",kH=n=>{if(!n)return"Recently";const e=n.toDate();return new Intl.DateTimeFormat("id-ID",{day:"numeric",month:"short",year:"numeric"}).format(e)};function EH(){var f,g;const{id:n}=jp(),[e,t]=A.useState(null),[r,i]=A.useState(!0),[s,a]=A.useState(null),[c,d]=A.useState(null);return A.useRef(null),A.useEffect(()=>{(async()=>{try{i(!0);const[x,k]=await Promise.all([Id.getPodcastById(n),Id.getPodcastAudio(n)]);t(x),d(k)}catch(x){a("Failed to fetch podcast details or audio URL not found"),console.error("Error:",x)}finally{i(!1)}})()},[n]),r?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#ff9553] to-[#ab1f1f] p-4 flex items-center justify-center",children:u.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):s?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#ff9553] to-[#ab1f1f] p-4 flex items-center justify-center",children:u.jsx("div",{className:"text-white text-xl",children:s})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#ff9553] to-[#ab1f1f]",children:e&&u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mb-12",children:[u.jsx("div",{className:"w-full md:w-1/3",children:u.jsx("div",{className:"aspect-square rounded-2xl overflow-hidden shadow-2xl",children:u.jsx("img",{src:e.ImageURL,alt:e.Title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})})}),u.jsxs("div",{className:"w-full md:w-2/3 text-white",children:[u.jsx("div",{className:"mb-4",children:u.jsx("span",{className:"text-white text-sm font-medium",children:yI(e.CategoryID)})}),u.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-white",children:e.Title}),u.jsx("p",{className:"text-gray-400 text-xl mb-6",children:e.subtitle}),u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx("img",{src:Pp,alt:(f=e.author)==null?void 0:f.name,className:"w-12 h-12  border-orange-400"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white font-medium",children:((g=e.author)==null?void 0:g.name)||"GenCerdas Team"}),u.jsx("p",{className:"text-white text-sm",children:"Creator"})]})]}),u.jsxs("div",{className:"flex gap-6 text-white",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[u.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),u.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),u.jsxs("span",{children:[bH(e.Played||0)," plays"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"})}),u.jsx("span",{children:vI(e.Duration)})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"})}),u.jsx("span",{children:kH(e.CreatedAt)})]})]})]})]}),c&&u.jsx("div",{className:"bg-[#FF5733] rounded-xl p-6 mb-12 shadow-xl",children:u.jsx("iframe",{width:"100%",height:"166",scrolling:"no",frameBorder:"no",allow:"autoplay",src:`https://w.soundcloud.com/player/?url=${c}&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false`,className:"rounded-lg"})}),u.jsxs("div",{className:"bg-[#FF5733] rounded-xl p-8 mb-12",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"About this episode"}),u.jsx("p",{className:"text-white leading-relaxed whitespace-pre-line",children:e.Description})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[{title:"Episode",value:`Episode ${e.EpisodeNumber||"N/A"}`,icon:u.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M10 2a8 8 0 100 16 8 8 0 000-16zm0 14a6 6 0 100-12 6 6 0 000 12z"})})},{title:"Duration",value:vI(e.Duration),icon:u.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"})})},{title:"Category",value:yI(e.CategoryID),icon:u.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}].map((y,x)=>u.jsxs("div",{className:"bg-[#FF5733] rounded-xl p-6 flex items-center gap-4",children:[u.jsx("div",{className:"bg-orange-500 p-3 rounded-full text-white",children:y.icon}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white text-sm",children:y.title}),u.jsx("p",{className:"text-white font-semibold",children:y.value})]})]},x))})]})})}const ZR=({progress:n})=>u.jsx("div",{className:"w-full bg-orange-200 rounded-full h-4 mt-8",children:u.jsx(ee.div,{className:"bg-orange-500 h-4 rounded-full",initial:{width:0},animate:{width:`${n}%`},transition:{duration:.5}})});ZR.propTypes={progress:Ie.number.isRequired};const Sa=({title:n,icon:e,type:t,onFileUpload:r,uploadedFile:i,fullWidth:s})=>{const[a,c]=A.useState(!1),[d,f]=A.useState(null),g=async y=>{const x=y.target.files[0];if(x){c(!0),f(null);try{const k=URL.createObjectURL(x);await r(t,k,x.name)}catch(k){f(k.message)}finally{c(!1)}}};return u.jsxs(ee.div,{className:`rounded-2xl bg-gradient-to-br from-orange-500 to-orange-600 p-6 ${s?"col-span-full":""} relative overflow-hidden shadow-lg`,whileHover:{scale:1.02,boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},transition:{type:"spring",stiffness:300},children:[u.jsxs("div",{className:"text-white relative z-10",children:[u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("div",{className:"text-4xl mr-4 bg-orange-400 p-3 rounded-full",children:e}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium opacity-80",children:"Upload dokumen"}),u.jsx("h3",{className:"text-2xl font-bold",children:n})]})]}),u.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:g,className:"hidden",id:`file-upload-${t}`,disabled:a}),u.jsxs("label",{htmlFor:`file-upload-${t}`,className:`bg-amber-300 text-orange-700 rounded-lg px-4 py-2 text-sm font-semibold 
            hover:bg-amber-400 transition-colors flex items-center shadow-md cursor-pointer
            ${a?"opacity-50 cursor-not-allowed":""}`,children:[u.jsx(mW,{className:"mr-2"}),a?"Uploading...":(i==null?void 0:i.fileName)||"Upload"]}),d&&u.jsx("p",{className:"mt-2 text-red-200 text-sm",children:d}),(i==null?void 0:i.url)&&u.jsxs("div",{className:"mt-2",children:[u.jsxs("p",{className:"text-sm opacity-80 truncate",children:["File: ",i.fileName]}),u.jsx("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"text-amber-300 hover:text-amber-400 text-sm underline",children:"View Document"})]})]}),u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-orange-400 rounded-bl-full opacity-30"})]})};Sa.propTypes={title:Ie.string.isRequired,icon:Ie.element.isRequired,type:Ie.string.isRequired,onFileUpload:Ie.func.isRequired,uploadedFile:Ie.shape({url:Ie.string,fileName:Ie.string}),fullWidth:Ie.bool};Sa.defaultProps={uploadedFile:null,fullWidth:!1};const TH=()=>{var x,k,E,P,S,N,L,O,Q,W;const[n,e]=A.useState({}),[t,r]=A.useState(0),[i,s]=A.useState(!1),[a,c]=A.useState(null),[d,f]=A.useState(!1),g=async(U,C,I)=>{try{const j=await aI.uploadDocument(C,U,I);e(D=>({...D,[U]:{url:C,fileName:I,id:j.id}})),c(null)}catch(j){c(`Failed to upload ${U}: ${j.message}`),console.error("Upload error:",j)}},y=async()=>{s(!0),c(null),f(!1),r(0);try{if(![Ct.KARTU_KELUARGA,Ct.AKTA_KELAHIRAN,Ct.IJAZAH].every(I=>{var j;return(j=n[I])==null?void 0:j.url})){c("Please upload required documents (Kartu Keluarga, Akta Kelahiran, Ijazah)");return}const C={};Object.entries(n).forEach(([I,j])=>{j!=null&&j.url&&(C[I]={url:j.url,fileName:j.fileName})}),r(20),await aI.uploadDocuments(C),r(100),f(!0),e({})}catch(U){c(U.message||"Upload failed. Please try again."),console.error(U)}finally{s(!1)}};return u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-amber-400 to-amber-500 p-6",children:u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pt-20",children:[u.jsx(ee.h1,{className:"text-4xl font-bold text-white text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2},children:"Upload Dokumen"}),u.jsx(ZR,{progress:t}),a&&u.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:u.jsx("span",{className:"block sm:inline",children:a})}),d&&u.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:u.jsx("span",{className:"block sm:inline",children:"Documents uploaded successfully!"})}),u.jsxs(ee.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[u.jsx(Sa,{title:"Kartu Keluarga",icon:u.jsx(dW,{}),type:Ct.KARTU_KELUARGA,onFileUpload:g,uploadedFile:{url:(x=n[Ct.KARTU_KELUARGA])==null?void 0:x.url,fileName:(k=n[Ct.KARTU_KELUARGA])==null?void 0:k.fileName}}),u.jsx(Sa,{title:"Akta Kelahiran",icon:u.jsx(aW,{}),type:Ct.AKTA_KELAHIRAN,onFileUpload:g,uploadedFile:{url:(E=n[Ct.AKTA_KELAHIRAN])==null?void 0:E.url,fileName:(P=n[Ct.AKTA_KELAHIRAN])==null?void 0:P.fileName}}),u.jsx(Sa,{title:"Ijazah",icon:u.jsx(uW,{}),type:Ct.IJAZAH,onFileUpload:g,uploadedFile:{url:(S=n[Ct.IJAZAH])==null?void 0:S.url,fileName:(N=n[Ct.IJAZAH])==null?void 0:N.fileName}}),u.jsx(Sa,{title:"Piagam",icon:u.jsx(fW,{}),type:Ct.PIAGAM,onFileUpload:g,uploadedFile:{url:(L=n[Ct.PIAGAM])==null?void 0:L.url,fileName:(O=n[Ct.PIAGAM])==null?void 0:O.fileName}})]}),u.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:u.jsx(Sa,{title:"KIP",icon:u.jsx(lW,{}),type:Ct.KIP,onFileUpload:g,uploadedFile:{url:(Q=n[Ct.KIP])==null?void 0:Q.url,fileName:(W=n[Ct.KIP])==null?void 0:W.fileName},fullWidth:!0})}),u.jsxs(ee.div,{className:"bg-gradient-to-br from-orange-400 to-orange-500 rounded-2xl p-6 text-white relative overflow-hidden shadow-lg",whileHover:{scale:1.01},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center relative z-10",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(cW,{className:"text-3xl mr-3 text-amber-300"}),u.jsx("h2",{className:"text-3xl font-bold",children:"Perhatian!"})]}),u.jsx("p",{className:"max-w-md text-lg",children:"Jika tidak memiliki KIP atau piagam bisa diskip terlebih dahulu ya teman-teman"}),u.jsxs(ee.button,{className:`bg-amber-300 text-orange-700 rounded-lg px-8 py-3 text-lg font-semibold hover:bg-amber-400 transition-colors flex items-center shadow-md ${i?"opacity-50 cursor-not-allowed":""}`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:y,disabled:i,children:[u.jsx(hW,{className:"mr-2"}),i?"Mengirim...":"Kirim"]})]}),u.jsx("div",{className:"hidden md:block"})]}),u.jsx("div",{className:"absolute bottom-0 left-0 opacity-20 pointer-events-none",children:u.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("rect",{x:"10",y:"60",width:"8",height:"50",fill:"currentColor",transform:"rotate(-15)"}),u.jsx("rect",{x:"30",y:"65",width:"8",height:"45",fill:"currentColor",transform:"rotate(-5)"}),u.jsx("rect",{x:"50",y:"60",width:"8",height:"50",fill:"currentColor",transform:"rotate(10)"}),u.jsx("rect",{x:"70",y:"55",width:"8",height:"55",fill:"currentColor",transform:"rotate(-8)"})]})})]})]})})};function IH(){const{currentUser:n}=qr(),[e,t]=A.useState("all"),[r,i]=A.useState(!0),[s,a]=A.useState(null),[c,d]=A.useState({stats:{completedTasks:5,attendedMeetings:8,totalXP:1240,level:3,streak:7,totalMinutesLearned:420,rank:"Pelajar Perunggu",nextRankXP:2e3,podcastsListened:3,totalPodcastMinutes:45},achievements:[{id:1,name:"Langkah Pertama",icon:"🎯",description:"Selesaikan kursus pertamamu",progress:100,reward:50,unlocked:!0,category:"courses",date:"2024-01-15"},{id:2,name:"Pembelajar Cepat",icon:"⚡",description:"Selesaikan 5 kursus",progress:60,reward:100,unlocked:!1,category:"courses",requirements:"3/5 kursus selesai"},{id:3,name:"Rajin Belajar",icon:"🔥",description:"7 hari berturut-turut belajar",progress:100,reward:150,unlocked:!0,category:"engagement",date:"2024-01-20"},{id:4,name:"Pencari Ilmu",icon:"📚",description:"Tonton 10 video pembelajaran",progress:30,reward:200,unlocked:!1,category:"learning",requirements:"3/10 video ditonton"},{id:5,name:"Juara Kuis",icon:"🏆",description:"Dapatkan nilai 100% di 3 kuis",progress:66,reward:300,unlocked:!1,category:"quizzes",requirements:"2/3 nilai sempurna"},{id:6,name:"Kupu-kupu Sosial",icon:"🦋",description:"Berpartisipasi dalam 5 diskusi komunitas",progress:40,reward:150,unlocked:!1,category:"social",requirements:"2/5 diskusi"},{id:7,name:"Pendengar Setia",icon:"🎧",description:"Dengarkan 5 podcast sampai selesai",progress:60,reward:100,unlocked:!1,category:"podcast",requirements:"3/5 podcast selesai"},{id:8,name:"Pencinta Audio",icon:"🎙️",description:"Dengarkan total 2 jam podcast",progress:38,reward:200,unlocked:!1,category:"podcast",requirements:"45/120 menit"},{id:9,name:"Kolektor Podcast",icon:"📻",description:"Dengarkan podcast dari 5 kategori berbeda",progress:20,reward:250,unlocked:!1,category:"podcast",requirements:"1/5 kategori"}],recentMilestones:[{id:1,title:"Mencapai Level 3",date:"20 Jan 2024",xpGained:500},{id:2,title:"7 Hari Berturut-turut Belajar",date:"19 Jan 2024",xpGained:150},{id:3,title:"Menyelesaikan Podcast Pertama",date:"18 Jan 2024",xpGained:100}]});A.useEffect(()=>{(async()=>{if(n!=null&&n.uid){i(!0),a(null);try{const L=Gt(it,"users",n.uid),O=await Fr(L);if(O.exists()){const Q=O.data();d(W=>({...W,stats:{...W.stats,...Q.stats},achievements:Q.achievements||W.achievements,recentMilestones:Q.recentMilestones||W.recentMilestones}))}else await wh(L,{stats:c.stats,achievements:c.achievements,recentMilestones:c.recentMilestones})}catch(L){console.error("Error fetching user data:",L),a("Failed to load achievements"),Et.error("Failed to load achievements")}finally{i(!1)}}})()},[n]),A.useEffect(()=>{const N=setInterval(()=>{P()},6e4);return()=>clearInterval(N)},[c.stats]);const f=N=>Math.floor(N/1e3)+1,g=N=>N>=5e3?{rank:"Pelajar Emas",nextRankXP:1e4}:N>=2e3?{rank:"Pelajar Perak",nextRankXP:5e3}:{rank:"Pelajar Perunggu",nextRankXP:2e3},y=async(N,L)=>{if(n!=null&&n.uid)try{const O=Gt(it,"users",n.uid),Q=gF(it),W=c.achievements.map(C=>{if(C.id===N){const I=C.unlocked,j=L>=100;return{...C,progress:Math.min(L,100),unlocked:j,date:j&&!I?new Date().toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):C.date}}return C}),U=c.achievements.find(C=>C.id===N);if(U&&L>=100&&!U.unlocked){const I=[{id:Date.now(),title:`Membuka pencapaian "${U.name}"`,date:new Date().toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}),xpGained:U.reward},...c.recentMilestones].slice(0,5),j=c.stats.totalXP+U.reward,D=g(j);Q.update(O,{achievements:W,recentMilestones:I,"stats.totalXP":j,"stats.rank":D.rank,"stats.nextRankXP":D.nextRankXP,"stats.level":f(j)}),await Q.commit(),d(F=>({...F,achievements:W,recentMilestones:I,stats:{...F.stats,totalXP:j,rank:D.rank,nextRankXP:D.nextRankXP,level:f(j)}})),Et.custom(()=>u.jsxs(ee.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"bg-white rounded-lg shadow-lg p-4 flex items-center gap-3",children:[u.jsx("div",{className:"text-2xl",children:U.icon}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-gray-800",children:"Achievement Unlocked!"}),u.jsx("p",{className:"text-sm text-gray-600",children:U.name}),u.jsxs("p",{className:"text-xs text-orange-500",children:["+",U.reward," XP"]})]})]}))}else Q.update(O,{achievements:W}),await Q.commit(),d(C=>({...C,achievements:W}))}catch(O){console.error("Error updating achievement:",O),Et.error("Gagal memperbarui pencapaian")}},x=N=>{t(N)},k=N=>{},E=(N,L)=>{switch(N.id){case 1:return L.completedCourses>0?100:0;case 2:return L.completedCourses/5*100;case 3:return L.streak/7*100;case 4:return L.watchedVideos/10*100;case 5:return L.perfectQuizzes/3*100;case 6:return L.communityParticipation/5*100;case 7:return L.podcastsListened/5*100;case 8:return L.totalPodcastMinutes/120*100;case 9:return L.uniquePodcastCategories/5*100;default:return 0}},P=async()=>{if(!(n!=null&&n.uid)||!c.stats)return;const N=c.achievements;let L=!1;for(const O of N)if(!O.unlocked){const Q=E(O,c.stats);Q!==O.progress&&(await y(O.id,Q),L=!0)}return L};if(r)return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})});if(s)return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] flex items-center justify-center",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 text-center",children:[u.jsx("p",{className:"text-red-500 mb-4",children:s}),u.jsx("button",{onClick:()=>window.location.reload(),className:"bg-[#FF9800] text-white px-4 py-2 rounded-lg hover:bg-[#F57C00]",children:"Coba Lagi"})]})});const S=[{id:"all",name:"Semua"},{id:"courses",name:"Kursus"},{id:"quizzes",name:"Kuis"},{id:"learning",name:"Pembelajaran"},{id:"engagement",name:"Keaktifan"},{id:"social",name:"Sosial"},{id:"podcast",name:"Podcast"}];return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-4 pb-20",children:u.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[u.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/95 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-white/20",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center",children:u.jsx("span",{className:"text-2xl font-bold text-white",children:c.stats.level})}),u.jsx("div",{className:"absolute -bottom-1 -right-1 bg-yellow-400 rounded-full p-1",children:u.jsx("span",{className:"text-xs",children:"🏆"})})]}),u.jsxs("div",{children:[u.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:["Level ",c.stats.level]}),u.jsx("div",{className:"flex items-center gap-2 mt-1",children:u.jsx("span",{className:"px-4 py-1 bg-gradient-to-r from-[#CD7F32] to-[#B87333] text-white rounded-full text-sm font-medium shadow-lg",children:c.stats.rank})})]})]}),u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsxs("span",{children:[c.stats.totalXP," XP"]}),u.jsxs("span",{children:[c.stats.nextRankXP," XP"]})]}),u.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:u.jsx(ee.div,{initial:{width:0},animate:{width:`${c.stats.totalXP/c.stats.nextRankXP*100}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-orange-400 to-orange-600"})}),u.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[c.stats.nextRankXP-c.stats.totalXP," XP untuk naik peringkat"]})]})]}),u.jsx(ee.img,{src:XR,alt:"Maskot",className:"h-32 w-32 object-contain",animate:{y:[0,-10,0],rotate:[0,5,0,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:[{label:"Streak Belajar",value:`${c.stats.streak} Hari`,icon:"🔥",color:"from-red-400 to-orange-500"},{label:"Tugas Selesai",value:c.stats.completedTasks,icon:"✅",color:"from-green-400 to-emerald-500"},{label:"Waktu Belajar",value:`${Math.round(c.stats.totalMinutesLearned/60)}j`,icon:"⏱️",color:"from-blue-400 to-cyan-500"},{label:"Podcast Didengar",value:c.stats.podcastsListened,icon:"🎧",color:"from-purple-400 to-pink-500"}].map((N,L)=>u.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:L*.1},className:"relative group",children:u.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[u.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${N.color} opacity-0 group-hover:opacity-10 rounded-2xl transition-opacity duration-300`}),u.jsx("div",{className:"text-3xl mb-3",children:N.icon}),u.jsx("div",{className:"font-bold text-2xl text-gray-800",children:N.value}),u.jsx("div",{className:"text-sm text-gray-500 mt-1",children:N.label})]})},L))})]}),u.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/95 backdrop-blur-xl rounded-2xl p-6 shadow-xl border border-white/20",children:[u.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[u.jsx("span",{className:"text-orange-500",children:"🏆"}),"Pencapaian Terbaru"]}),u.jsx("div",{className:"space-y-4",children:c.recentMilestones.map((N,L)=>u.jsxs(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:L*.1},className:"flex items-center justify-between bg-orange-50 p-4 rounded-xl hover:bg-orange-100 transition-colors duration-300",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center text-white shadow-lg",children:"🎉"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-800",children:N.title}),u.jsx("p",{className:"text-sm text-gray-500",children:N.date})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-orange-500 font-bold",children:["+",N.xpGained]}),u.jsx("span",{className:"text-orange-400 text-sm",children:"XP"})]})]},N.id))})]}),u.jsx("div",{className:"sticky top-4 z-10 py-4 backdrop-blur-xl bg-white/20 rounded-2xl",children:u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 px-4 scrollbar-hide",children:S.map(N=>u.jsx(ee.button,{onClick:()=>x(N.id),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-6 py-2.5 rounded-full text-sm font-medium transition-all whitespace-nowrap ${e===N.id?"bg-white text-orange-500 shadow-lg":"bg-white/20 text-white hover:bg-white/30"}`,children:N.name},N.id))})}),u.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.achievements.filter(N=>e==="all"||N.category===e).map((N,L)=>u.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:L*.1},whileHover:{scale:1.02},className:`bg-white/95 backdrop-blur-xl rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all cursor-pointer
                  ${N.unlocked?"border-2 border-orange-400":"border border-white/20"}`,onClick:()=>k(),children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-16 h-16 rounded-xl flex items-center justify-center text-2xl shadow-lg
                    ${N.unlocked?"bg-gradient-to-br from-orange-400 to-orange-600 text-white":"bg-gray-100 text-gray-400"}`,children:N.icon}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:N.name}),u.jsxs("span",{className:"text-sm font-medium text-orange-500 bg-orange-100 px-3 py-1 rounded-full",children:["+",N.reward," XP"]})]}),u.jsx("p",{className:"text-sm text-gray-500 mt-2",children:N.description}),u.jsxs("div",{className:"mt-4",children:[u.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:u.jsx(ee.div,{className:`h-full ${N.unlocked?"bg-gradient-to-r from-orange-400 to-orange-600":"bg-gray-300"}`,initial:{width:0},animate:{width:`${N.progress}%`},transition:{duration:1}})}),u.jsxs("div",{className:"flex justify-between mt-2",children:[u.jsx("span",{className:"text-xs text-gray-500",children:N.requirements||`Progress: ${N.progress}%`}),N.unlocked&&u.jsxs("span",{className:"text-xs text-green-500 flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Completed ",N.date]})]})]})]})]})},N.id))})]})})}const go={1:"Persiapan Dokumen",2:"Essay Writing",3:"Interview Skills",4:"IELTS Preparation",5:"TOEFL Preparation",6:"Research Proposal",7:"Statement of Purpose",8:"Motivation Letter",9:"Basic Japanese",10:"Intermediate Japanese",11:"Advanced Japanese",12:"Japanese Writing",13:"Japanese Speaking",14:"Japanese Reading",15:"Japanese Research Writing",16:"Japanese Interview Skills",17:"Persiapan Bahasa Mandarin",18:"HSK Preparation",19:"Chinese Academic Writing",20:"Chinese Interview Skills",21:"Persiapan Bahasa Korea",22:"TOPIK Preparation",23:"Korean Academic Writing",24:"Korean Interview Skills",25:"Scholarship Network Building"},SH=async()=>{try{for(const[n,e]of Object.entries(CH)){const t=go[n];await _h(Gt(it,"quizzes",t),{courseId:parseInt(n),title:t,questions:e}),console.log(`Uploaded quiz data for ${t}`)}console.log("All quiz data uploaded successfully")}catch(n){throw console.error("Error uploading quiz data:",n),n}},CH={1:[{type:"multipleChoice",question:"Dokumen apa yang paling penting dalam aplikasi beasiswa?",options:["Ijazah dan Transkrip","Foto dan KTP","Surat Rekomendasi","Media Sosial"],correctAnswer:0,explanation:"Ijazah dan transkrip adalah dokumen fundamental yang menunjukkan kualifikasi akademik Anda."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Surat rekomendasi harus selalu dari profesor universitas",correctAnswer:!1,explanation:"Surat rekomendasi bisa dari berbagai sumber yang relevan, termasuk supervisor kerja atau mentor."},{type:"multipleChoice",question:"Berapa salinan dokumen yang sebaiknya disiapkan?",options:["1 salinan","2 salinan","3 salinan","4 salinan"],correctAnswer:2,explanation:"3 salinan direkomendasikan: 1 untuk arsip, 1 untuk aplikasi, 1 cadangan."},{type:"multipleChoice",question:"Apa format yang tepat untuk CV beasiswa?",options:["CV Kreatif dengan banyak gambar","CV Akademik dengan fokus prestasi","CV Kerja dengan pengalaman profesional","CV Singkat 1 halaman"],correctAnswer:1,explanation:"CV Akademik lebih sesuai untuk aplikasi beasiswa karena menekankan prestasi akademik dan penelitian."},{type:"multipleChoice",question:"Dokumen apa yang perlu diterjemahkan?",options:["Hanya ijazah","Hanya transkrip","Semua dokumen resmi","Tidak perlu terjemahan"],correctAnswer:2,explanation:"Semua dokumen resmi harus diterjemahkan ke bahasa yang diminta oleh institusi tujuan."}],2:[{type:"multipleChoice",question:"Apa yang harus ada di paragraf pembuka essay?",options:["Kesimpulan","Hook dan thesis statement","Data statistik saja","Daftar prestasi"],correctAnswer:1,explanation:"Hook menarik perhatian pembaca dan thesis statement menjelaskan inti essay."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Essay beasiswa harus selalu fokus pada prestasi akademik saja",correctAnswer:!1,explanation:"Essay yang baik mencakup berbagai aspek termasuk pengalaman personal dan aspirasi."},{type:"multipleChoice",question:"Berapa kata ideal untuk essay beasiswa?",options:["100-200 kata","300-500 kata","500-800 kata","1000+ kata"],correctAnswer:2,explanation:"500-800 kata memberikan ruang cukup untuk menjelaskan detail penting tanpa bertele-tele."},{type:"multipleChoice",question:"Apa yang sebaiknya dihindari dalam essay?",options:["Pengalaman pribadi","Data konkret","Kalimat klise","Rencana studi"],correctAnswer:2,explanation:"Kalimat klise membuat essay terkesan tidak original dan kurang menarik."},{type:"multipleChoice",question:"Bagaimana mengakhiri essay yang baik?",options:["Dengan ringkasan","Dengan quotes","Dengan doa","Dengan call to action"],correctAnswer:0,explanation:"Ringkasan yang kuat membantu pembaca mengingat poin-poin penting essay Anda."}],3:[{type:"multipleChoice",question:"Apa yang harus dilakukan sebelum wawancara?",options:["Riset tentang program","Tidur seharian","Bermain game","Menonton TV"],correctAnswer:0,explanation:"Riset mendalam tentang program beasiswa menunjukkan keseriusan dan persiapan yang baik."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Terlambat 5 menit masih dapat ditoleransi dalam wawancara beasiswa",correctAnswer:!1,explanation:"Ketepatan waktu sangat penting dan menunjukkan profesionalisme Anda."},{type:"multipleChoice",question:"Bagaimana menjawab pertanyaan sulit?",options:["Diam saja","Berbohong","Jujur dan terstruktur","Mengalihkan topik"],correctAnswer:2,explanation:"Kejujuran dan jawaban terstruktur menunjukkan integritas dan kemampuan berpikir."},{type:"multipleChoice",question:"Pakaian yang tepat untuk wawancara?",options:["Casual","Business formal","Business casual","Santai"],correctAnswer:1,explanation:"Business formal menunjukkan profesionalisme dan keseriusan Anda."},{type:"multipleChoice",question:"Apa yang harus dibawa saat wawancara?",options:["Hanya diri sendiri","Dokumen lengkap","Makanan dan minuman","Teman"],correctAnswer:1,explanation:"Membawa dokumen lengkap menunjukkan kesiapan dan organisasi yang baik."}],4:[{type:"multipleChoice",question:"Berapa skor minimum IELTS untuk kebanyakan beasiswa?",options:["5.0","6.0","6.5","7.0"],correctAnswer:2,explanation:"Kebanyakan beasiswa mensyaratkan minimal IELTS 6.5."},{type:"multipleChoice",question:"Bagian mana yang paling membutuhkan latihan intensif?",options:["Listening","Reading","Writing","Speaking"],correctAnswer:2,explanation:"Writing membutuhkan latihan paling intensif karena kompleksitas dan format spesifiknya."},{type:"multipleChoice",question:"Berapa lama waktu ideal persiapan IELTS?",options:["1 minggu","1 bulan","3 bulan","6 bulan"],correctAnswer:2,explanation:"3 bulan memberikan waktu cukup untuk persiapan menyeluruh."},{type:"trueFalse",question:"Benar atau Salah?",statement:"IELTS Academic dan General sama saja",correctAnswer:!1,explanation:"IELTS Academic lebih fokus pada kemampuan akademik dan diperlukan untuk studi."},{type:"multipleChoice",question:"Strategi terbaik untuk Reading section?",options:["Membaca kata per kata","Skimming dan Scanning","Menghafal vocabulary","Menebak semua jawaban"],correctAnswer:1,explanation:"Skimming untuk gambaran umum dan scanning untuk detail spesifik sangat efektif."}],5:[{type:"multipleChoice",question:"Berapa skor TOEFL minimum untuk S2?",options:["70","80","90","100"],correctAnswer:2,explanation:"Skor 90 adalah standar minimum umum untuk program S2."},{type:"multipleChoice",question:"Perbedaan utama TOEFL iBT dengan PBT?",options:["Harga tes","Lokasi tes","Format tes","Waktu tes"],correctAnswer:2,explanation:"Format tes berbeda signifikan: iBT berbasis internet dengan integrated tasks."},{type:"trueFalse",question:"Benar atau Salah?",statement:"TOEFL lebih mudah dari IELTS",correctAnswer:!1,explanation:"Keduanya memiliki tingkat kesulitan berbeda dan tidak bisa dibandingkan langsung."},{type:"multipleChoice",question:"Bagian tersulit dalam TOEFL?",options:["Reading","Listening","Speaking","Writing"],correctAnswer:2,explanation:"Speaking sering dianggap tersulit karena waktu terbatas dan format terintegrasi."},{type:"multipleChoice",question:"Strategi terbaik untuk Integrated Writing?",options:["Fokus pada reading saja","Fokus pada listening saja","Mengintegrasikan keduanya","Menulis opini pribadi"],correctAnswer:2,explanation:"Mengintegrasikan informasi dari reading dan listening adalah kunci."}],6:[{type:"multipleChoice",question:"Apa komponen penting dalam research proposal?",options:["Latar belakang saja","Metodologi saja","Background, Objectives, Methodology","Hanya hasil penelitian"],correctAnswer:2,explanation:"Proposal lengkap harus mencakup latar belakang, tujuan, dan metodologi."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Literature review tidak penting dalam proposal",correctAnswer:!1,explanation:"Literature review sangat penting untuk menunjukkan pemahaman bidang penelitian."},{type:"multipleChoice",question:"Berapa halaman ideal untuk proposal?",options:["1-2 halaman","3-5 halaman","10-15 halaman","20+ halaman"],correctAnswer:1,explanation:"3-5 halaman cukup untuk menjelaskan komponen penting proposal."},{type:"multipleChoice",question:"Bagaimana menulis research objectives?",options:["Sangat umum","Spesifik dan terukur","Abstrak","Tanpa target"],correctAnswer:1,explanation:"Objectives harus SMART: Specific, Measurable, Achievable, Relevant, Time-bound."},{type:"multipleChoice",question:"Apa yang harus ada di methodology?",options:["Hanya teori","Hanya data","Detailed research plan","Hasil yang diharapkan"],correctAnswer:2,explanation:"Methodology harus menjelaskan rencana penelitian secara detail dan sistematis."}],7:[{type:"multipleChoice",question:"Apa fokus utama SoP?",options:["Cerita masa kecil","Tujuan akademik","Hobi","Kehidupan sosial"],correctAnswer:1,explanation:"SoP harus fokus pada tujuan akademik dan rencana karir."},{type:"trueFalse",question:"Benar atau Salah?",statement:"SoP boleh menceritakan seluruh pengalaman hidup",correctAnswer:!1,explanation:"SoP harus fokus pada pengalaman relevan dengan program yang dituju."},{type:"multipleChoice",question:"Berapa panjang ideal SoP?",options:["1 paragraf","1-2 halaman","5 halaman","10 halaman"],correctAnswer:1,explanation:"1-2 halaman cukup untuk menjelaskan tujuan dan kualifikasi."},{type:"multipleChoice",question:"Bagaimana mengakhiri SoP?",options:["Dengan doa","Dengan quotes","Dengan future goals","Dengan ucapan terima kasih"],correctAnswer:2,explanation:"Future goals menunjukkan visi jelas dan komitmen."},{type:"multipleChoice",question:"Apa yang harus dihindari dalam SoP?",options:["Pengalaman relevan","Prestasi akademik","Informasi pribadi berlebihan","Rencana studi"],correctAnswer:2,explanation:"Hindari informasi pribadi yang tidak relevan dengan program."}],8:[{type:"multipleChoice",question:"Perbedaan Motivation Letter dengan SoP?",options:["Tidak ada perbedaan","Lebih personal","Lebih formal","Lebih panjang"],correctAnswer:1,explanation:"Motivation Letter lebih menekankan aspek personal dan motivasi."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Motivation Letter harus sangat formal",correctAnswer:!1,explanation:"Bisa lebih personal namun tetap profesional."},{type:"multipleChoice",question:"Apa yang harus ditonjolkan?",options:["Hanya prestasi","Hanya pengalaman","Motivasi dan passion","Hanya rencana"],correctAnswer:2,explanation:"Motivasi dan passion pribadi harus menjadi fokus utama."},{type:"multipleChoice",question:"Format penulisan yang tepat?",options:["Seperti diary","Seperti essay formal","Seperti surat profesional","Seperti artikel"],correctAnswer:2,explanation:"Gunakan format surat profesional dengan tone personal."},{type:"multipleChoice",question:"Cara membuka Motivation Letter?",options:["Dengan quotes","Dengan data statistik","Dengan cerita personal","Dengan definisi"],correctAnswer:2,explanation:"Cerita personal yang relevan membuat pembuka lebih menarik."}],9:[{type:"multipleChoice",question:"Kapan menggunakan です (desu)?",options:["Saat berbicara dengan teman","Saat berbicara formal","Saat marah","Tidak pernah"],correctAnswer:1,explanation:"です (desu) digunakan dalam situasi formal atau berbicara dengan orang yang dihormati."},{type:"multipleChoice",question:"Urutan kata dasar dalam kalimat bahasa Jepang?",options:["Subjek-Objek-Kata Kerja","Kata Kerja-Subjek-Objek","Subjek-Kata Kerja-Objek","Objek-Subjek-Kata Kerja"],correctAnswer:0,explanation:"Struktur dasar kalimat Jepang adalah Subjek-Objek-Kata Kerja (SOV)."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Hiragana dan Katakana memiliki bunyi yang berbeda",correctAnswer:!1,explanation:"Hiragana dan Katakana memiliki bunyi yang sama, hanya penggunaannya yang berbeda."},{type:"multipleChoice",question:"Partikel は (wa) digunakan untuk?",options:["Menunjukkan objek","Menunjukkan subjek","Menunjukkan lokasi","Menunjukkan waktu"],correctAnswer:1,explanation:"は (wa) adalah partikel penanda subjek dalam kalimat."},{type:"multipleChoice",question:"Apa fungsi partikel を (wo)?",options:["Menandai subjek","Menandai objek langsung","Menunjukkan lokasi","Menunjukkan kepemilikan"],correctAnswer:1,explanation:"を (wo) digunakan untuk menandai objek langsung dari kata kerja transitif."}],10:[{type:"multipleChoice",question:"Bentuk て (te) digunakan untuk?",options:["Menyatakan larangan","Menghubungkan kalimat","Menyatakan masa depan","Menyatakan masa lalu"],correctAnswer:1,explanation:"Bentuk て (te) digunakan untuk menghubungkan beberapa aksi atau keadaan."},{type:"multipleChoice",question:"Kapan menggunakan たい (tai)?",options:["Menyatakan keinginan diri sendiri","Menyatakan perintah","Menyatakan larangan","Menyatakan masa lalu"],correctAnswer:0,explanation:"たい (tai) digunakan untuk menyatakan keinginan pribadi."},{type:"multipleChoice",question:"Fungsi から (kara) adalah?",options:["Menyatakan waktu","Menyatakan alasan","Menyatakan tujuan","Menyatakan hasil"],correctAnswer:1,explanation:"から (kara) digunakan untuk menjelaskan alasan atau sebab."},{type:"trueFalse",question:"Benar atau Salah?",statement:"ない (nai) form selalu digunakan untuk membuat kalimat negatif",correctAnswer:!1,explanation:"Bentuk negatif bisa juga menggunakan ません (masen) untuk bahasa formal."},{type:"multipleChoice",question:"Perbedaan に (ni) dan で (de)?",options:["Tidak ada perbedaan","に untuk lokasi keberadaan, で untuk lokasi aktivitas","に untuk waktu, で untuk tempat","に untuk orang, で untuk benda"],correctAnswer:1,explanation:"に (ni) menunjukkan lokasi keberadaan, sedangkan で (de) menunjukkan lokasi aktivitas."}],11:[{type:"multipleChoice",question:"Penggunaan 敬語 (keigo) yang tepat?",options:["Dengan teman","Dengan atasan","Dengan adik","Dengan hewan"],correctAnswer:1,explanation:"敬語 digunakan untuk menunjukkan rasa hormat kepada atasan atau orang yang dihormati."},{type:"multipleChoice",question:"Bentuk potensial digunakan untuk?",options:["Menyatakan kemampuan","Menyatakan perintah","Menyatakan larangan","Menyatakan kewajiban"],correctAnswer:0,explanation:"Bentuk potensial (可能形) digunakan untuk menyatakan kemampuan melakukan sesuatu."},{type:"multipleChoice",question:"Kapan menggunakan 謙譲語 (kenjougo)?",options:["Merendahkan diri sendiri","Meninggikan orang lain","Berbicara netral","Berbicara dengan teman"],correctAnswer:0,explanation:"謙譲語 digunakan untuk merendahkan diri sendiri saat berbicara dengan orang yang dihormati."},{type:"trueFalse",question:"Benar atau Salah?",statement:"尊敬語 (sonkeigo) dan 謙譲語 (kenjougo) memiliki fungsi yang sama",correctAnswer:!1,explanation:"尊敬語 untuk meninggikan orang lain, 謙譲語 untuk merendahkan diri sendiri."},{type:"multipleChoice",question:"Penggunaan 〜させていただく yang tepat?",options:["Dengan teman dekat","Dalam situasi formal","Dengan anak kecil","Dalam situasi santai"],correctAnswer:1,explanation:"〜させていただく adalah bentuk sangat sopan untuk meminta izin atau menyatakan akan melakukan sesuatu."}],12:[{type:"multipleChoice",question:"Format email formal dalam bahasa Jepang?",options:["Langsung ke inti","Dimulai dengan salam dan perkenalan","Tanpa salam","Hanya isi pesan"],correctAnswer:1,explanation:"Email formal Jepang harus dimulai dengan salam dan perkenalan yang tepat."},{type:"multipleChoice",question:"Cara menulis tanggal yang benar?",options:["年月日","日月年","月日年","年日月"],correctAnswer:0,explanation:"Format tanggal Jepang adalah 年月日 (tahun-bulan-tanggal)."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Kanji tidak penting dalam penulisan formal",correctAnswer:!1,explanation:"Kanji sangat penting dalam penulisan formal untuk menunjukkan profesionalisme."},{type:"multipleChoice",question:"Penggunaan 丁寧語 (teineigo) yang tepat?",options:["Dalam diary","Dalam email formal","Dalam chat pribadi","Dalam memo"],correctAnswer:1,explanation:"丁寧語 wajib digunakan dalam komunikasi formal tertulis."},{type:"multipleChoice",question:"Cara mengakhiri email formal?",options:["よろしくお願いします","じゃあね","バイバイ","また会いましょう"],correctAnswer:0,explanation:"よろしくお願いします adalah penutup standar untuk email formal."}],13:[{type:"multipleChoice",question:"Salam yang tepat saat bertemu pertama kali?",options:["こんにちは","はじめまして","お久しぶり","また会いましょう"],correctAnswer:1,explanation:"はじめまして digunakan khusus saat pertemuan pertama."},{type:"multipleChoice",question:"Cara menyela pembicaraan yang sopan?",options:["ちょっと","すみません","待って","黙って"],correctAnswer:1,explanation:"すみません adalah cara sopan untuk menyela pembicaraan."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Intonasi tidak penting dalam bahasa Jepang",correctAnswer:!1,explanation:"Intonasi sangat penting dan dapat mengubah makna kata."},{type:"multipleChoice",question:"Penggunaan あいづち yang tepat?",options:["Saat berbicara","Saat mendengarkan","Saat menulis","Saat membaca"],correctAnswer:1,explanation:"あいづち (aizuchi) digunakan untuk menunjukkan bahwa Anda mendengarkan dengan aktif."},{type:"multipleChoice",question:"Cara menolak dengan sopan?",options:["いいえ","ちょっと難しいです","だめ","無理"],correctAnswer:1,explanation:"ちょっと難しいです adalah cara halus untuk menolak tanpa menyinggung."}],14:[{type:"multipleChoice",question:"Strategi membaca teks panjang?",options:["Baca kata per kata","Skimming untuk ide utama","Abaikan kanji","Terjemahkan semua"],correctAnswer:1,explanation:"Skimming efektif untuk mendapatkan ide utama teks panjang."},{type:"multipleChoice",question:"Cara memahami kanji baru?",options:["Abaikan saja","Lihat konteks","Selalu cek kamus","Tebak asal"],correctAnswer:1,explanation:"Memahami konteks dapat membantu menebak arti kanji baru."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Furigana selalu ada di semua teks Jepang",correctAnswer:!1,explanation:"Furigana tidak selalu tersedia, terutama di teks untuk pembaca dewasa."},{type:"multipleChoice",question:"Pendekatan terbaik untuk artikel berita?",options:["Baca detail","Baca headline dan paragraf pertama","Abaikan kanji","Terjemahkan semua"],correctAnswer:1,explanation:"Headline dan paragraf pertama biasanya berisi informasi penting."},{type:"multipleChoice",question:"Cara efektif membaca 漢字熟語?",options:["Baca per karakter","Pahami kombinasi","Abaikan","Tebak"],correctAnswer:1,explanation:"Memahami kombinasi kanji membantu mengerti makna 漢字熟語."}],15:[{type:"multipleChoice",question:"Format standar 研究計画書?",options:["自己紹介のみ","研究背景・目的・方法","趣味と特技","アルバイト経験"],correctAnswer:1,explanation:"研究計画書 harus mencakup latar belakang, tujuan, dan metodologi penelitian."},{type:"trueFalse",question:"Benar atau Salah?",statement:"研究計画書 bisa ditulis dalam bahasa informal",correctAnswer:!1,explanation:"研究計画書 harus ditulis dalam bahasa formal akademik."},{type:"multipleChoice",question:"Cara menulis hipotesis yang baik?",options:["...ではないかと考えられる","...かもしれない","...だと思う","...だろう"],correctAnswer:0,explanation:"Gunakan ekspresi formal dan objektif untuk hipotesis penelitian."},{type:"multipleChoice",question:"Cara mengutip penelitian sebelumnya?",options:["「」を使用","『』を使用","～によると","～と思われる"],correctAnswer:2,explanation:"～によると adalah cara formal untuk mengutip penelitian sebelumnya."},{type:"multipleChoice",question:"Struktur penelitian yang tepat?",options:["序論・本論・結論","始め・中・終わり","導入・展開・まとめ","開始・発展・終了"],correctAnswer:0,explanation:"序論(pendahuluan)・本論(isi)・結論(kesimpulan) adalah struktur standar."}],16:[{type:"multipleChoice",question:"Cara menjawab 自己紹介 yang tepat?",options:["Langsung ke prestasi","Mulai dengan nama dan asal","Cerita hobi","Bicara tentang kelemahan"],correctAnswer:1,explanation:"Mulai dengan informasi dasar (nama, asal) sebelum detail lain."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Boleh menggunakan bahasa informal jika pewawancara terlihat ramah",correctAnswer:!1,explanation:"Tetap gunakan bahasa formal dalam situasi wawancara apapun."},{type:"multipleChoice",question:"Cara menjawab pertanyaan tentang kelemahan?",options:["Mengatakan tidak punya kelemahan","Menyebutkan kelemahan dan usaha memperbaiki","Mengkritik sistem","Mengabaikan pertanyaan"],correctAnswer:1,explanation:"Jawab dengan jujur dan tunjukkan usaha perbaikan diri."},{type:"multipleChoice",question:"Bahasa tubuh yang tepat saat wawancara?",options:["Santai dan bebas","Tegak dan formal","Bersandar ke kursi","Menyilangkan tangan"],correctAnswer:1,explanation:"Postur tegak dan formal menunjukkan keseriusan dan rasa hormat."},{type:"multipleChoice",question:"Cara mengakhiri wawancara yang baik?",options:["ありがとうございました","失礼いたします","さようなら","じゃあね"],correctAnswer:1,explanation:"失礼いたします adalah ungkapan formal yang tepat untuk mengakhiri wawancara."}],17:[{type:"multipleChoice",question:"Apa yang paling penting dalam belajar bahasa Mandarin?",options:["Menghafal karakter","Menguasai tones","Menulis kaligrafi","Membaca pinyin"],correctAnswer:1,explanation:"Tones sangat penting dalam bahasa Mandarin karena dapat mengubah arti kata."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Pinyin tidak penting setelah menguasai karakter",correctAnswer:!1,explanation:"Pinyin tetap penting untuk mempelajari kata baru dan pengucapan yang tepat."},{type:"multipleChoice",question:"Berapa jumlah tone dalam bahasa Mandarin?",options:["2 tone","3 tone","4 tone","5 tone"],correctAnswer:3,explanation:"Bahasa Mandarin memiliki 4 tone dasar dan 1 neutral tone."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Karakter Mandarin selalu dibaca sama dalam konteks berbeda",correctAnswer:!1,explanation:"Satu karakter bisa memiliki beberapa cara baca tergantung konteks."},{type:"multipleChoice",question:"Metode belajar karakter yang efektif?",options:["Menghafal satu per satu","Belajar radikal dan komponen","Mengabaikan stroke order","Fokus pada pinyin saja"],correctAnswer:1,explanation:"Memahami radikal dan komponen membantu mengingat karakter baru."},{type:"multipleChoice",question:"Cara terbaik melatih pelafalan?",options:["Belajar sendiri","Praktik dengan native speaker","Menonton drama","Membaca teks"],correctAnswer:1,explanation:"Praktik dengan native speaker membantu memperbaiki pelafalan dengan cepat."}],18:[{type:"multipleChoice",question:"Berapa bagian dalam tes HSK?",options:["2 bagian","3 bagian","4 bagian","5 bagian"],correctAnswer:1,explanation:"HSK terdiri dari 3 bagian: Listening, Reading, dan Writing."},{type:"trueFalse",question:"Benar atau Salah?",statement:"HSK 4 cukup untuk semua program beasiswa",correctAnswer:!1,explanation:"Beberapa program mensyaratkan HSK 5 atau 6."},{type:"multipleChoice",question:"Strategi persiapan HSK yang efektif?",options:["Fokus reading saja","Latihan seimbang semua skill","Fokus listening saja","Hanya menulis"],correctAnswer:1,explanation:"Persiapan seimbang untuk semua skill penting untuk hasil optimal."},{type:"multipleChoice",question:"Waktu ideal persiapan HSK?",options:["1 bulan","3 bulan","6 bulan","1 tahun"],correctAnswer:2,explanation:"6 bulan memberikan waktu cukup untuk persiapan menyeluruh."}],19:[{type:"multipleChoice",question:"Format standar essay akademik Mandarin?",options:["Bebas","起承转合","Seperti bahasa Inggris","Tanpa struktur"],correctAnswer:1,explanation:"起承转合 adalah struktur standar penulisan akademik Mandarin."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Gaya bahasa informal bisa digunakan dalam tulisan akademik",correctAnswer:!1,explanation:"Tulisan akademik harus menggunakan bahasa formal dan standar."},{type:"multipleChoice",question:"Penggunaan referensi yang tepat?",options:["Tidak perlu referensi","Referensi dalam bahasa apapun","Referensi berbahasa Mandarin","Tanpa kutipan"],correctAnswer:2,explanation:"Gunakan referensi berbahasa Mandarin untuk tulisan akademik Mandarin."},{type:"multipleChoice",question:"Cara mengutip sumber?",options:["Bebas format","Format standar Tiongkok","Format APA","Tanpa format"],correctAnswer:1,explanation:"Gunakan format standar Tiongkok untuk kutipan akademik."}],20:[{type:"multipleChoice",question:"Sapaan yang tepat untuk interviewer?",options:["老师","同学","朋友","你好"],correctAnswer:0,explanation:"老师 adalah sapaan formal dan hormat yang tepat."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Boleh menggunakan bahasa gaul dalam wawancara",correctAnswer:!1,explanation:"Gunakan bahasa formal dan standar dalam wawancara."},{type:"multipleChoice",question:"Body language yang tepat?",options:["Santai","Formal dan sopan","Bebas","Tidak penting"],correctAnswer:1,explanation:"Body language formal dan sopan penting dalam budaya Tiongkok."},{type:"multipleChoice",question:"Cara menjawab pertanyaan sulit?",options:["Diam saja","Minta waktu berpikir dengan sopan","Mengalihkan topik","Menolak menjawab"],correctAnswer:1,explanation:"请让我想一想 adalah cara sopan meminta waktu berpikir."}],21:[{type:"multipleChoice",question:"Level bahasa minimum untuk beasiswa Korea?",options:["TOPIK 2","TOPIK 3","TOPIK 4","TOPIK 5"],correctAnswer:2,explanation:"Kebanyakan beasiswa mensyaratkan minimal TOPIK 4."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Honorifik hanya digunakan untuk orang tua",correctAnswer:!1,explanation:"Honorifik digunakan untuk semua orang yang lebih senior atau dihormati."},{type:"multipleChoice",question:"Aspek terpenting dalam belajar bahasa Korea?",options:["Kosakata","Grammar","Honorifik","Pengucapan"],correctAnswer:2,explanation:"Sistem honorifik sangat penting dalam budaya Korea."},{type:"multipleChoice",question:"Cara efektif belajar Hangul?",options:["Menghafal","Sistem kombinasi","Menulis berulang","Membaca saja"],correctAnswer:1,explanation:"Memahami sistem kombinasi Hangul lebih efektif daripada menghafal."}],22:[{type:"multipleChoice",question:"Bagian tersulit dalam TOPIK?",options:["Listening","Reading","Writing","Speaking"],correctAnswer:2,explanation:"Writing sering dianggap paling sulit karena memerlukan penguasaan grammar dan kosakata."},{type:"trueFalse",question:"Benar atau Salah?",statement:"TOPIK I cukup untuk beasiswa",correctAnswer:!1,explanation:"Kebanyakan beasiswa memerlukan TOPIK II."},{type:"multipleChoice",question:"Strategi persiapan TOPIK?",options:["Fokus satu skill","Latihan seimbang","Belajar mendadak","Tanpa persiapan"],correctAnswer:1,explanation:"Persiapan seimbang untuk semua skill penting untuk hasil optimal."},{type:"multipleChoice",question:"Waktu ideal persiapan TOPIK?",options:["1 bulan","3 bulan","6 bulan","1 tahun"],correctAnswer:2,explanation:"6 bulan memberikan waktu cukup untuk persiapan menyeluruh."}],23:[{type:"multipleChoice",question:"Format standar paper akademik Korea?",options:["Bebas","서론-본론-결론","Tanpa format","Seperti bahasa Inggris"],correctAnswer:1,explanation:"서론-본론-결론 adalah struktur standar paper akademik Korea."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Bahasa informal bisa digunakan dalam tulisan akademik",correctAnswer:!1,explanation:"Tulisan akademik harus menggunakan bahasa formal akademik."},{type:"multipleChoice",question:"Penggunaan honorifik dalam tulisan akademik?",options:["Tidak perlu","Wajib","Tergantung konteks","Bebas"],correctAnswer:2,explanation:"Penggunaan honorifik tergantung konteks dan jenis tulisan."},{type:"multipleChoice",question:"Cara mengutip sumber dalam bahasa Korea?",options:["Format bebas","Format Korea","Format APA","Tanpa format"],correctAnswer:1,explanation:"Gunakan format standar Korea untuk kutipan akademik."}],24:[{type:"multipleChoice",question:"Sapaan yang tepat untuk interviewer?",options:["선생님","친구","너","아저씨"],correctAnswer:0,explanation:"선생님 adalah sapaan formal dan hormat yang tepat."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Kontak mata langsung selalu baik",correctAnswer:!1,explanation:"Dalam budaya Korea, kontak mata berlebihan bisa dianggap tidak sopan."},{type:"multipleChoice",question:"Cara menjawab pertanyaan personal?",options:["Jujur langsung","Sopan dan diplomatis","Menghindar","Berbohong"],correctAnswer:1,explanation:"Jawab dengan sopan dan diplomatis sambil tetap jujur."},{type:"multipleChoice",question:"Body language yang tepat?",options:["Santai","Formal dan sopan","Bebas","Tidak penting"],correctAnswer:1,explanation:"Body language formal dan sopan sangat penting dalam budaya Korea."}],25:[{type:"multipleChoice",question:"Platform networking yang efektif?",options:["Social media pribadi","LinkedIn dan ResearchGate","Game online","Chat casual"],correctAnswer:1,explanation:"Platform profesional lebih efektif untuk networking akademik."},{type:"trueFalse",question:"Benar atau Salah?",statement:"Networking hanya penting saat mencari beasiswa",correctAnswer:!1,explanation:"Networking penting untuk jangka panjang, tidak hanya saat mencari beasiswa."},{type:"multipleChoice",question:"Cara approach profesor potensial?",options:["Email casual","Email formal dengan proposal","Direct message media sosial","Telepon langsung"],correctAnswer:1,explanation:"Email formal dengan proposal menunjukkan profesionalisme dan keseriusan."},{type:"multipleChoice",question:"Follow-up yang tepat?",options:["Setiap hari","Tidak perlu","1-2 minggu","6 bulan"],correctAnswer:2,explanation:"Follow-up setelah 1-2 minggu adalah waktu yang tepat dan profesional."}]};function NH(){const{id:n}=jp(),e=_r(),{currentUser:t}=qr(),r=ba.find(g=>g.id===parseInt(n)),[i,s]=A.useState(null),[a,c]=A.useState(!0),[d,f]=A.useState({completed:!1,progress:0,score:0});return A.useEffect(()=>{(async()=>{var y;try{c(!0);const x=Gt(it,"quizzes",go[n]),k=await Fr(x);if(k.exists()&&s(k.data()),t){const E=Gt(it,"users",t.uid),P=await Fr(E);if(P.exists()){const N=(y=P.data().completedCourses)==null?void 0:y.find(L=>L.id===n);N&&f({completed:!0,progress:N.progress||0,score:N.score||0})}}}catch(x){console.error("Error fetching data:",x)}finally{c(!1)}})()},[n,t]),r?a?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-4 flex items-center justify-center",children:u.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-8",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"}),u.jsx("p",{className:"mt-4 text-gray-600",children:"Loading course details..."})]})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-4",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:r.image,alt:r.title,className:"w-full h-48 md:h-64 lg:h-96 object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-black/20 flex items-end",children:u.jsxs("div",{className:"p-6 md:p-8",children:[u.jsx(ee.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-2xl md:text-4xl font-bold mb-3 text-white",children:r.title}),u.jsx(ee.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-sm md:text-base mb-4 text-white/90",children:r.description}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("span",{className:"bg-orange-500/90 backdrop-blur-sm px-4 py-1.5 rounded-full text-sm text-white font-medium",children:"⏱️ 4 Jam"}),u.jsx("span",{className:"bg-blue-500/90 backdrop-blur-sm px-4 py-1.5 rounded-full text-sm text-white font-medium",children:"📚 16 Modul"}),u.jsx("span",{className:"bg-green-500/90 backdrop-blur-sm px-4 py-1.5 rounded-full text-sm text-white font-medium",children:"🎓 Sertifikat"})]})]})})]}),u.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100/50 p-6 md:p-8",children:u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Progress Belajar"}),u.jsxs("span",{className:"text-orange-600 font-semibold text-lg",children:[d.progress,"%"]})]}),u.jsx("div",{className:"h-4 bg-white/50 rounded-full overflow-hidden shadow-inner",children:u.jsx(ee.div,{initial:{width:0},animate:{width:`${d.progress}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-orange-500 to-orange-400"})}),d.completed&&u.jsxs("div",{className:"mt-3 text-sm text-green-600 flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u.jsxs("span",{children:["Completed with score: ",d.score]})]})]})}),u.jsx("div",{className:"p-6 md:p-8",children:u.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("h2",{className:"text-xl font-bold mb-6 text-gray-800",children:"Level Pembelajaran"}),u.jsx("div",{className:"space-y-6",children:i&&u.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${d.completed?"bg-green-100 text-green-600":"bg-orange-100 text-orange-600"}`,children:d.completed?u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):u.jsx("span",{className:"text-lg font-semibold",children:"1"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-lg text-gray-800",children:go[n]}),u.jsx("span",{className:"text-sm text-gray-500",children:"5 Soal Quiz"})]})]})}),u.jsxs("div",{className:"mt-6 bg-gradient-to-br from-orange-50 to-orange-100/50 p-6 rounded-xl",children:[u.jsxs("h4",{className:"font-medium text-lg mb-3 text-gray-800",children:["Quiz ",go[n]]}),u.jsxs("p",{className:"text-gray-600 mb-4",children:["Uji pemahaman Anda tentang ",go[n]," melalui quiz interaktif"]}),u.jsx("button",{className:"w-full bg-orange-500 text-white py-3 rounded-lg hover:bg-orange-600 transition-all transform hover:scale-[1.02] active:scale-[0.98] font-medium shadow-sm hover:shadow-md",onClick:()=>e(`/quiz/${n}`),children:d.completed?"Ulangi Quiz":"Mulai Quiz"})]})]})})})]}),u.jsx("div",{className:"md:col-span-1",children:u.jsxs(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"bg-gradient-to-br from-orange-50 to-orange-100/50 rounded-xl p-6 sticky top-6 shadow-sm",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:"Gratis"}),u.jsx("p",{className:"text-gray-600",children:"Akses penuh ke semua materi"})]}),u.jsx("button",{className:"w-full bg-orange-500 text-white px-6 py-3 rounded-xl font-medium hover:bg-orange-600 transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-sm hover:shadow-md mb-6",onClick:()=>e(`/quiz/${n}`),children:"Mulai Belajar Sekarang"}),u.jsx("div",{className:"space-y-4",children:[{icon:"🔓",text:"Akses Seumur Hidup"},{icon:"🎓",text:"Sertifikat Kelulusan"},{icon:"👨‍🏫",text:"Konsultasi dengan Mentor"}].map((g,y)=>u.jsxs(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3+y*.1},className:"flex items-center gap-3 text-gray-600",children:[u.jsx("span",{className:"text-xl",children:g.icon}),u.jsx("span",{children:g.text})]},y))})]})})]})})]})})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-4 flex items-center justify-center",children:u.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-8 text-center",children:[u.jsx("div",{className:"text-red-500 text-xl mb-4",children:"⚠️"}),u.jsx("h2",{className:"text-xl font-bold mb-2",children:"Course Not Found"}),u.jsx("button",{onClick:()=>e("/courses"),className:"bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Back to Courses"})]})})}function AH(){const{courseId:n}=jp(),e=_r(),[t,r]=A.useState(0),[i,s]=A.useState(0),[a,c]=A.useState(!1),[d,f]=A.useState(null),[g,y]=A.useState(null),[x,k]=A.useState(3),[E,P]=A.useState(0),[S,N]=A.useState(!1),[L,O]=A.useState(null),[Q,W]=A.useState(!0),[U,C]=A.useState(null),{currentUser:I}=qr();if(A.useEffect(()=>{(async()=>{try{W(!0);const Pe=go[n];if(!Pe)throw new Error("Invalid course ID");const Me=Gt(it,"quizzes",Pe),fe=await Fr(Me);if(fe.exists())O(fe.data().questions);else throw new Error("Quiz not found")}catch(Pe){console.error("Error fetching quiz data:",Pe),C(Pe.message)}finally{W(!1)}})()},[n]),Q)return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-4 flex items-center justify-center",children:u.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-8",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"}),u.jsx("p",{className:"mt-4 text-gray-600",children:"Loading quiz..."})]})});if(U)return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-4 flex items-center justify-center",children:u.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-8 text-center",children:[u.jsx("div",{className:"text-red-500 text-xl mb-4",children:"⚠️"}),u.jsx("h2",{className:"text-xl font-bold mb-2",children:"Error Loading Quiz"}),u.jsx("p",{className:"text-gray-600 mb-4",children:U}),u.jsx("button",{onClick:()=>e(`/course/${n}`),className:"bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Back to Course"})]})});if(!L||L.length===0)return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-4 flex items-center justify-center",children:u.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-8 text-center",children:[u.jsx("div",{className:"text-orange-500 text-xl mb-4",children:"ℹ️"}),u.jsx("h2",{className:"text-xl font-bold mb-2",children:"No Quiz Available"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"This course doesn't have any quiz questions yet."}),u.jsx("button",{onClick:()=>e(`/course/${n}`),className:"bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Back to Course"})]})});const j=async()=>{var ge,Pe,Me,fe,re,ve,he,$,ne,xe;try{if(!I)return;const Re=Gt(it,"users",I.uid),Oe=await Fr(Re);if(Oe.exists()){const Ve=Oe.data(),Ue=Ve.completedCourses||[],Ge=go[n],Z=L.length,Ee=i,Je=Math.round(Ee/Z*100),Xe=Ue.findIndex(Fn=>Fn.id===n),an={id:n,title:Ge,completedAt:new Date().toISOString(),score:i,progress:Je,totalQuestions:Z,correctAnswers:Ee,streak:E};let Ft;Xe!==-1?i>Ue[Xe].score?(Ft=[...Ue],Ft[Xe]=an):Ft=Ue:Ft=[...Ue,an];const Sn={xpPoints:(((ge=Ve.stats)==null?void 0:ge.xpPoints)||0)+i,totalMinutesLearned:(((Pe=Ve.stats)==null?void 0:Pe.totalMinutesLearned)||0)+30,weeklyTargets:{completed:Math.min((((fe=(Me=Ve.stats)==null?void 0:Me.weeklyTargets)==null?void 0:fe.completed)||0)+1,((ve=(re=Ve.stats)==null?void 0:re.weeklyTargets)==null?void 0:ve.total)||5),total:(($=(he=Ve.stats)==null?void 0:he.weeklyTargets)==null?void 0:$.total)||5},level:Math.floor(((((ne=Ve.stats)==null?void 0:ne.xpPoints)||0)+i)/500)+1,streak:Math.max(((xe=Ve.stats)==null?void 0:xe.streak)||0,E)};await wh(Re,{completedCourses:Ft,stats:Sn,lastActivityAt:new Date().toISOString()})}c(!0)}catch(Re){console.error("Error completing quiz:",Re)}},D=ge=>{f(ge);const Pe=ge===L[t].correctAnswer;y(Pe),N(!0),Pe?(P(E+1),s(i+(E>=3?2:1))):(P(0),k(x-1)),setTimeout(()=>{F()},2e3)},F=()=>{if(N(!1),x===0){j();return}t+1<L.length?(r(t+1),f(null),y(null)):j()},q=()=>{e(`/course/${n}`)},V=()=>{const ge=L[t];switch(ge.type){case"multipleChoice":return u.jsx("div",{className:"space-y-4",children:ge.options.map((Pe,Me)=>u.jsx(ee.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Me*.1},className:`w-full p-5 text-left rounded-xl border-2 transition-all duration-300 hover:shadow-md ${d===Me?g?"border-green-500 bg-green-50 shadow-green-100":"border-red-500 bg-red-50 shadow-red-100":"border-gray-200 hover:border-orange-500 hover:bg-orange-50"}`,onClick:()=>D(Me),disabled:d!==null,children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 text-gray-600 font-medium",children:String.fromCharCode(65+Me)}),u.jsx("span",{className:"text-gray-700",children:Pe})]})},Me))});case"trueFalse":return u.jsxs("div",{className:"space-y-6",children:[u.jsx("p",{className:"text-lg font-medium text-gray-700 mb-6",children:ge.statement}),u.jsx("div",{className:"grid grid-cols-2 gap-6",children:["True","False"].map((Pe,Me)=>u.jsx(ee.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`p-6 rounded-xl border-2 font-medium transition-all duration-300 hover:shadow-md ${d===(Me===0)?g?"border-green-500 bg-green-50 shadow-green-100":"border-red-500 bg-red-50 shadow-red-100":"border-gray-200 hover:border-orange-500 hover:bg-orange-50"}`,onClick:()=>D(Me===0),disabled:d!==null,children:Pe},Me))})]});default:return null}};return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-4 md:p-8",children:u.jsx("div",{className:"max-w-3xl mx-auto",children:a?u.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-8 text-center",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-3xl font-bold mb-2 text-gray-800",children:x>0?"🎉 Quiz Completed!":"💔 Game Over"}),u.jsx("p",{className:"text-gray-500",children:x>0?"Great job! Here's your performance:":"Don't worry, you can try again!"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[u.jsxs("div",{className:"bg-orange-50 rounded-xl p-6",children:[u.jsx("p",{className:"text-4xl font-bold text-orange-500 mb-2",children:i}),u.jsx("p",{className:"text-gray-600",children:"Final Score"})]}),u.jsxs("div",{className:"bg-orange-50 rounded-xl p-6",children:[u.jsx("p",{className:"text-4xl font-bold text-orange-500 mb-2",children:E}),u.jsx("p",{className:"text-gray-600",children:"Highest Streak"})]})]}),u.jsxs("div",{className:"flex justify-center gap-4",children:[u.jsx("button",{className:"bg-orange-500 text-white px-8 py-3 rounded-xl font-medium hover:bg-orange-600 transition-all shadow-lg hover:shadow-xl",onClick:q,children:"Back to Course"}),u.jsx("button",{className:"bg-blue-500 text-white px-8 py-3 rounded-xl font-medium hover:bg-blue-600 transition-all shadow-lg hover:shadow-xl",onClick:()=>window.location.reload(),children:"Try Again"})]})]}):u.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-6 md:p-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-2",children:go[n]}),u.jsx("p",{className:"text-gray-500",children:"Complete the quiz to earn points and badges"})]}),u.jsxs("div",{className:"flex items-center justify-between mb-8 bg-orange-50 p-4 rounded-xl",children:[u.jsx("div",{className:"flex items-center gap-3",children:[...Array(x)].map((ge,Pe)=>u.jsx(ee.div,{initial:{scale:0},animate:{scale:1},className:"w-7 h-7 text-red-500 drop-shadow-md",children:"❤️"},Pe))}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-orange-100/50 px-4 py-2 rounded-full",children:[u.jsx("span",{className:"text-orange-500 text-lg",children:"🔥"}),u.jsx("span",{className:"font-semibold text-orange-600",children:E})]}),u.jsxs("div",{className:"bg-orange-500 text-white px-4 py-2 rounded-full font-medium",children:["Score: ",i]})]})]}),u.jsxs("div",{className:"mb-10",children:[u.jsxs("div",{className:"flex justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Progress"}),u.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Question ",t+1," of ",L.length]})]}),u.jsx("div",{className:"h-3 bg-gray-100 rounded-full overflow-hidden shadow-inner",children:u.jsx(ee.div,{className:"h-full bg-gradient-to-r from-orange-500 to-orange-400",initial:{width:0},animate:{width:`${(t+1)/L.length*100}%`},transition:{duration:.5}})})]}),u.jsx(Ac,{mode:"wait",children:u.jsxs(ee.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"mb-8",children:[u.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-8 text-gray-800",children:L[t].question}),V()]},t)}),u.jsx(Ac,{children:S&&u.jsx(ee.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`fixed bottom-0 left-0 right-0 p-6 text-white ${g?"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-red-500 to-red-600"} shadow-lg backdrop-blur-sm`,children:u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsx("p",{className:"font-bold text-lg mb-1",children:g?"🎉 Correct!":"❌ Incorrect"}),u.jsx("p",{className:"text-white/90",children:L[t].explanation})]})})})]})})})}const xI={"beasiswa-hub":{name:"Beasiswa Discussion Hub",description:"Grup diskusi utama untuk berbagi informasi beasiswa, tips aplikasi, dan pengalaman.",image:"https://images.unsplash.com/photo-1524178232363-1fb2b075b655?q=80&w=800",category:"Scholarship",memberCount:0,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString(),members:{},type:"featured"},"scholarship-tips":{name:"Tips & Trik Beasiswa",description:"Berbagi tips dan trik dalam mendapatkan beasiswa impian.",image:"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?q=80&w=500",category:"Scholarship",memberCount:0,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString(),members:{}},"study-abroad":{name:"Study Abroad Community",description:"Komunitas untuk yang ingin atau sedang menempuh pendidikan di luar negeri.",image:"https://images.unsplash.com/photo-1523240795612-9a054b0db644?q=80&w=500",category:"Study Abroad",memberCount:0,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString(),members:{}},"research-collab":{name:"Research Collaboration",description:"Tempat diskusi dan kolaborasi untuk penelitian akademik.",image:"https://images.unsplash.com/photo-1532619675605-1ede6c2ed2b0?q=80&w=500",category:"Research",memberCount:0,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString(),members:{}},"campus-life":{name:"Campus Life Stories",description:"Berbagi pengalaman dan cerita seru kehidupan kampus.",image:"https://images.unsplash.com/photo-1541339907198-e08756dedf3f?q=80&w=500",category:"Campus Life",memberCount:0,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString(),members:{}}},PH=async()=>{try{const n=gn(yn,"groups");await li(n,xI);for(const e of Object.keys(xI)){const t=gn(yn,`messages/${e}`),r={content:"👋 Welcome to the group! Feel free to start chatting!",user:{id:"system",name:"System",avatar:"/system-avatar.png"},type:"system",timestamp:new Date().toISOString()};await li(t,{welcome:r})}return console.log("Groups initialized successfully!"),!0}catch(n){throw console.error("Error initializing groups:",n),n}};function RH(){const[n,e]=A.useState(!1),[t,r]=A.useState(""),[i,s]=A.useState(!1),[a,c]=A.useState(""),d=async()=>{try{e(!0),r("Uploading data..."),await SH(),r("Data uploaded successfully!")}catch(g){console.error("Error uploading data:",g),r("Error uploading data. Please try again.")}finally{e(!1)}},f=async()=>{try{s(!0),c("Initializing community groups..."),await PH(),c("Community groups initialized successfully!")}catch(g){console.error("Error initializing groups:",g),c("Error initializing groups. Please try again.")}finally{s(!1)}};return u.jsx("div",{className:"min-h-screen bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:u.jsx("div",{className:"max-w-7xl mx-auto",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Admin Dashboard"}),u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"border-b pb-6",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Quiz Data Management"}),u.jsx("button",{onClick:d,disabled:n,className:`${n?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white px-4 py-2 rounded-md transition-colors duration-200`,children:n?"Uploading...":"Upload Quiz Data to Firestore"}),t&&u.jsx("p",{className:`mt-2 text-sm ${t.includes("successfully")?"text-green-600":t.includes("Error")?"text-red-600":"text-blue-600"}`,children:t})]}),u.jsxs("div",{className:"border-b pb-6",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Community Groups Management"}),u.jsx("button",{onClick:f,disabled:i,className:`${i?"bg-gray-400 cursor-not-allowed":"bg-orange-500 hover:bg-orange-600"} text-white px-4 py-2 rounded-md transition-colors duration-200`,children:i?"Initializing...":"Initialize Community Groups"}),a&&u.jsx("p",{className:`mt-2 text-sm ${a.includes("successfully")?"text-green-600":a.includes("Error")?"text-red-600":"text-blue-600"}`,children:a}),u.jsxs("div",{className:"mt-4",children:[u.jsx("h3",{className:"text-md font-medium text-gray-700 mb-2",children:"Groups to be initialized:"}),u.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2",children:[u.jsx("li",{children:"Beasiswa Discussion Hub (Featured Group)"}),u.jsx("li",{children:"Tips & Trik Beasiswa"}),u.jsx("li",{children:"Study Abroad Community"}),u.jsx("li",{children:"Research Collaboration"}),u.jsx("li",{children:"Campus Life Stories"})]})]})]}),u.jsxs("div",{className:"mt-6",children:[u.jsx("h3",{className:"text-md font-medium text-gray-700 mb-2",children:"Instructions:"}),u.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[u.jsx("li",{children:"Use the buttons above to manage application data"}),u.jsx("li",{children:"Quiz data upload will update the quiz content in Firestore"}),u.jsx("li",{children:"Group initialization will create community groups in Realtime Database"}),u.jsx("li",{children:"Wait for confirmation messages before leaving the page"}),u.jsx("li",{children:"These actions will overwrite existing data"})]})]})]})]})})})}const _I=async()=>{const n=gn(yn,"groups"),e=await Nh(n);return e.exists()?Object.entries(e.val()).map(([t,r])=>({id:t,...r})):[]},jH=async(n,e,t)=>{if(!n||!e)throw new Error("Group ID and User ID are required");const r=gn(yn,`groups/${n}`),i=gn(yn,`users/${e}/groups/${n}`);try{let a=(await Nh(r)).val();return a||(a={name:"New Group",createdAt:new Date().toISOString(),memberCount:0,members:{}}),await li(r,{...a,memberCount:(a.memberCount||0)+1,members:{...a.members||{},[e]:{joinedAt:new Date().toISOString(),...t}},lastUpdated:new Date().toISOString()}),await li(i,{joinedAt:new Date().toISOString(),name:a.name}),await fx(n,{content:`👋 ${t.name||"A new user"} has joined the group!`,user:{id:"system",name:"System",avatar:"/system-avatar.png"},type:"system"}),!0}catch(s){throw console.error("Error joining group:",s),new Error("Failed to join group")}},fx=async(n,e)=>{const t=gn(yn,`messages/${n}`),r=x7(t);try{return await li(r,{...e,timestamp:new Date().toISOString()}),r.key}catch(i){throw console.error("Error sending message:",i),new Error("Failed to send message")}},ej=async(n,e)=>{if(!n||!e)throw new Error("Group ID and User ID are required");try{const t=gn(yn,`groups/${n}/members/${e}`);return(await Nh(t)).exists()}catch(t){throw console.error("Error checking group membership:",t),new Error("Failed to check group membership")}},DH=async n=>{if(!n)throw new Error("Group ID is required");try{const e=gn(yn,`groups/${n}`),t=await Nh(e);return console.log("Group snapshot:",t.val()),t.exists()?{id:n,...t.val()}:null}catch(e){throw console.error("Error getting group details:",e),new Error("Failed to get group details")}},LH=async n=>{const e=gn(yn,`groups/${n}/members`),t=await Nh(e);return t.exists()?Object.entries(t.val()).map(([r,i])=>({id:r,...i})):[]},MH={group1:{name:"Web Development Community",description:"A community for web developers to share knowledge and collaborate on projects.",category:"Development",image:"https://source.unsplash.com/random/800x600/?coding",type:"featured",memberCount:150,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString(),status:"active"},group2:{name:"UI/UX Design Hub",description:"Connect with fellow designers, share your work, and get feedback from the community.",category:"Design",image:"https://source.unsplash.com/random/800x600/?design",memberCount:89,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString(),status:"active"},group3:{name:"Mobile App Developers",description:"Discussion forum for mobile app development across all platforms.",category:"Development",image:"https://source.unsplash.com/random/800x600/?mobile",memberCount:120,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString(),status:"active"},group4:{name:"Data Science Network",description:"Share insights, tools, and techniques in data science and machine learning.",category:"Data Science",image:"https://source.unsplash.com/random/800x600/?data",memberCount:95,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString(),status:"active"}},VH=async()=>{try{const n=gn(yn,"groups");return await li(n,MH),console.log("Sample groups initialized successfully"),!0}catch(n){return console.error("Error initializing sample groups:",n),!1}};function tj(){const[n,e]=A.useState([]),[t,r]=A.useState(!0),[i,s]=A.useState(null),[a,c]=A.useState(null),[d,f]=A.useState(""),[g,y]=A.useState("all"),{currentUser:x}=qr(),k=_r(),[E,P]=A.useState({});A.useEffect(()=>{(async()=>{try{r(!0);const C=await _I();e(C)}catch(C){console.error("Failed to load groups:",C),s("Failed to load community groups")}finally{r(!1)}})()},[]),A.useEffect(()=>{const U=gn(yn,"groups"),C=od(U,I=>{if(I.exists()){const j=I.val(),D={};Object.entries(j).forEach(([F,q])=>{D[F]=q.memberCount||0}),P(D)}});return()=>{C(),sP(U)}},[]);const S=["all",...new Set(n.map(U=>U.category))],N=n.filter(U=>{const C=U.name.toLowerCase().includes(d.toLowerCase())||U.description.toLowerCase().includes(d.toLowerCase()),I=g==="all"||U.category===g;return C&&I}),L=async U=>{if(!x){k("/login",{state:{from:"/komunitas"}});return}try{if(c(U.id),await ej(U.id,x.uid)){k(`/group/${U.id}`);return}await jH(U.id,x.uid,{name:x.displayName||"Anonymous User",email:x.email,avatar:x.photoURL||"/default-avatar.png"}),e(I=>I.map(j=>j.id===U.id?{...j,memberCount:(j.memberCount||0)+1}:j)),k(`/group/${U.id}`)}catch(C){console.error("Failed to join group:",C),s("Failed to join group. Please try again.")}finally{c(null)}},O=async()=>{try{r(!0),await VH();const U=await _I();e(U)}catch(U){console.error("Failed to initialize sample groups:",U),s("Failed to initialize sample groups")}finally{r(!1)}},Q=U=>u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 border border-white/20 group transform hover:scale-[1.02]",children:[u.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[u.jsx("img",{src:U.image,alt:U.name,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),u.jsx("div",{className:"absolute top-4 left-4",children:u.jsx("span",{className:"px-3 py-1 bg-white/90 backdrop-blur-sm text-orange-600 rounded-full text-sm font-medium shadow-lg",children:U.category})})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2 group-hover:text-orange-500 transition-colors",children:U.name}),u.jsx("p",{className:"text-gray-600 mb-6 line-clamp-2",children:U.description}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center text-orange-500 font-medium",children:E[U.id]||0}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-sm text-gray-800",children:"Members"}),u.jsx("span",{className:"text-xs text-gray-500",children:"Active"})]})]}),u.jsx("button",{onClick:()=>L(U),disabled:a===U.id,className:"relative inline-flex items-center px-4 py-2 bg-orange-100 text-orange-600 rounded-full overflow-hidden transition-all hover:bg-orange-200 disabled:opacity-50 disabled:cursor-not-allowed group",children:a===U.id?u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Joining..."]}):u.jsxs("span",{className:"flex items-center gap-2",children:["Gabung",u.jsx("svg",{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})]})]},U.id),W=U=>u.jsx("div",{className:"max-w-6xl mx-auto mb-16",children:u.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-300 border border-white/20 transform hover:scale-[1.01]",children:u.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[u.jsx("div",{className:"w-full md:w-1/3",children:u.jsxs("div",{className:"aspect-video rounded-2xl overflow-hidden shadow-lg relative group",children:[u.jsx("img",{src:U.image,alt:"Featured Group",className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}),u.jsxs("div",{className:"flex-1 space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"px-3 py-1 bg-orange-100 text-orange-600 rounded-full text-sm font-medium",children:"Featured Group"}),u.jsx("div",{className:"h-2 w-2 rounded-full bg-orange-500 animate-pulse"})]}),u.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:U.name}),u.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:U.description}),u.jsxs("div",{className:"flex items-center gap-6 pt-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center text-orange-500 font-medium text-lg",children:E[U.id]||0}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-gray-800 font-medium",children:"Members"}),u.jsx("span",{className:"text-sm text-gray-500",children:"Active Community"})]})]}),u.jsxs("button",{onClick:()=>L(U),disabled:a===U.id,className:"ml-auto group relative inline-flex items-center justify-center px-8 py-3 bg-orange-500 text-white rounded-full overflow-hidden transition-all duration-300 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none",children:[u.jsx("div",{className:"absolute inset-0 w-0 bg-orange-600 transition-all duration-300 ease-out group-hover:w-full"}),u.jsx("span",{className:"relative flex items-center gap-2",children:a===U.id?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Joining..."]}):u.jsxs(u.Fragment,{children:["Gabung Sekarang",u.jsx("svg",{className:"w-5 h-5 transform group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})]})]})]})})});return i?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFB827] via-[#FF9636] to-[#FF8144] flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-xl text-center max-w-md",children:[u.jsx("div",{className:"text-red-500 mb-4",children:u.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsx("p",{className:"text-gray-800 mb-4",children:i}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-6 py-2 bg-orange-500 text-white rounded-full hover:bg-orange-600 transition-all transform hover:scale-105",children:"Try Again"}),u.jsx("button",{onClick:O,className:"w-full px-6 py-2 bg-gray-100 text-gray-800 rounded-full hover:bg-gray-200 transition-all transform hover:scale-105",children:"Initialize Sample Groups"})]})]})}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#FFB827] via-[#FF9636] to-[#FF8144] relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),u.jsx("div",{className:"absolute inset-0 bg-[url('/patterns/topography.svg')] opacity-10"}),u.jsxs("div",{className:"container mx-auto px-4 py-12 relative z-10",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6 drop-shadow-lg mt-14",children:"Komunitas Belajar"}),u.jsx("p",{className:"text-white/90 max-w-2xl mx-auto text-lg mb-8",children:"Bergabung dengan komunitas belajar, diskusi dengan teman-teman, dan berbagi pengalaman bersama."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[!x&&u.jsxs("button",{onClick:()=>k("/login",{state:{from:"/komunitas"}}),className:"group relative inline-flex items-center justify-center px-8 py-3 bg-white text-orange-500 rounded-full overflow-hidden transition-all duration-300 transform hover:scale-105 hover:shadow-xl",children:[u.jsx("div",{className:"absolute inset-0 w-3 bg-orange-500 transition-all duration-500 ease-out group-hover:w-full"}),u.jsxs("span",{className:"relative group-hover:text-white transition-colors duration-200 flex items-center gap-2",children:["Login untuk Bergabung",u.jsx("svg",{className:"w-5 h-5 transform group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]}),n.length===0&&!t&&u.jsxs("button",{onClick:O,className:"group relative inline-flex items-center justify-center px-8 py-3 bg-orange-500 text-white rounded-full overflow-hidden transition-all duration-300 transform hover:scale-105 hover:shadow-xl",children:[u.jsx("div",{className:"absolute inset-0 w-3 bg-white transition-all duration-500 ease-out group-hover:w-full"}),u.jsxs("span",{className:"relative group-hover:text-orange-500 transition-colors duration-200 flex items-center gap-2",children:["Initialize Sample Groups",u.jsx("svg",{className:"w-5 h-5 transform group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]})]})]})]}),u.jsx("div",{className:"max-w-4xl mx-auto mb-12",children:u.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:u.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsx("div",{className:"flex-1",children:u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Cari komunitas...",value:d,onChange:U=>f(U.target.value),className:"w-full px-4 py-3 pl-12 rounded-xl border border-gray-200 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all"}),u.jsx("svg",{className:"w-6 h-6 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),u.jsx("div",{className:"md:w-48",children:u.jsx("select",{value:g,onChange:U=>y(U.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all appearance-none bg-white",children:S.map(U=>u.jsx("option",{value:U,children:U.charAt(0).toUpperCase()+U.slice(1)},U))})})]})})}),n.find(U=>U.type==="featured")&&W(n.find(U=>U.type==="featured")),u.jsx("div",{className:"max-w-7xl mx-auto",children:t?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(U=>u.jsxs("div",{className:"bg-white/90 animate-pulse rounded-xl overflow-hidden",children:[u.jsx("div",{className:"aspect-video bg-gray-200"}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]},U))}):N.filter(U=>U.type!=="featured").length===0?u.jsx("div",{className:"text-center py-12",children:u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-8 max-w-md mx-auto",children:[u.jsx("img",{src:"/icons/empty-state.svg",alt:"No results",className:"w-32 h-32 mx-auto mb-4"}),u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Communities Found"}),u.jsx("p",{className:"text-gray-600",children:"We couldn't find any communities matching your search criteria. Try adjusting your filters or search terms."})]})}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.filter(U=>U.type!=="featured").map(U=>Q(U))})})]})]})}const fm={sent:"bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-tr-none hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 group-hover:scale-[1.02] hover:ring-2 hover:ring-orange-300/50",received:"bg-white text-gray-800 rounded-tl-none hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 group-hover:scale-[1.02] border border-gray-100 hover:border-orange-200",system:"bg-gradient-to-r from-orange-50 to-orange-100/50 text-orange-600 font-medium shadow-sm transform hover:-translate-y-0.5 transition-all duration-300 px-6 py-2 rounded-full backdrop-blur-sm",image:"p-2 bg-white hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 group-hover:scale-[1.02] hover:ring-2 hover:ring-orange-200/50 rounded-2xl"};function nj({image:n,onClose:e}){const[t,r]=A.useState(!1),[i,s]=A.useState(!0),a=()=>{s(!1)},c=f=>{f.stopPropagation(),r(!t)},d=A.useCallback(f=>{f.key==="Escape"&&e()},[e]);return A.useEffect(()=>(document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}),[d]),u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4",onClick:e,children:u.jsxs("div",{className:"relative max-w-7xl w-full animate-fadeIn",children:[u.jsx("button",{onClick:e,className:"absolute -top-12 right-0 text-white/80 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10",title:"Close (Esc)",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),u.jsxs("div",{className:"absolute -top-12 left-0 flex items-center gap-4",children:[u.jsx("button",{onClick:f=>{f.stopPropagation(),r(!t)},className:"text-white/80 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10 flex items-center gap-2",title:t?"Zoom Out":"Zoom In",children:t?u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})}),u.jsx("span",{className:"text-sm",children:"Zoom Out"})]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7"})}),u.jsx("span",{className:"text-sm",children:"Zoom In"})]})}),u.jsxs("button",{onClick:f=>{f.stopPropagation(),window.open(n,"_blank")},className:"text-white/80 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10 flex items-center gap-2",title:"Open Original",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),u.jsx("span",{className:"text-sm",children:"Open Original"})]})]}),i&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-12 border-4 border-white/20 border-t-white/100 rounded-full animate-spin"})}),u.jsx("div",{className:`relative overflow-hidden rounded-lg ${i?"opacity-0":"opacity-100"} transition-opacity duration-300`,children:u.jsx("img",{src:n,alt:"Full size",className:`w-full h-auto rounded-lg shadow-2xl transition-all duration-300 ${t?"scale-150 cursor-zoom-out":"scale-100 cursor-zoom-in"}`,onClick:c,onLoad:a,style:{maxHeight:"85vh",objectFit:"contain"}})}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/50 to-transparent text-white opacity-0 hover:opacity-100 transition-opacity",children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"text-sm",children:["Click to ",t?"zoom out":"zoom in"," • Press ESC to close"]})})})]})})}nj.propTypes={image:Ie.string.isRequired,onClose:Ie.func.isRequired};function OH(){var Ve,Ue,Ge;const{groupId:n}=jp(),{currentUser:e}=qr(),t=_r(),[r,i]=A.useState([]),[s,a]=A.useState(null),[c,d]=A.useState(!0),[f,g]=A.useState(null),[y,x]=A.useState([]),[k,E]=A.useState(!1),[P,S]=A.useState({userId:null,userName:null}),[N,L]=A.useState(""),[O,Q]=A.useState([]),[W,U]=A.useState(0),[C,I]=A.useState(!1),j=A.useRef(null),D=A.useRef(null),[F,q]=A.useState(0),[V,ge]=A.useState(null),[Pe,Me]=A.useState(null);A.useEffect(()=>{if(e&&n){const Z=gn(yn,`groups/${n}/onlineMembers/${e.uid}`),Ee=gn(yn,".info/connected");return od(Ee,Xe=>{Xe.val()===!0&&(li(Z,!0).catch(console.error),li(Z,null).catch(console.error))}),li(Z,!0).catch(console.error),()=>{sP(Ee),li(Z,null).catch(console.error)}}},[e,n]),A.useEffect(()=>{let Z=!0;return(async()=>{if(!e){t("/login",{state:{from:`/group/${n}`}});return}try{if(!Z)return;d(!0),g(null);const Je=await ej(n,e.uid);if(!Z)return;if(!Je){g("You are not a member of this group"),d(!1);return}const Xe=await DH(n);if(!Z)return;if(!Xe){g("Group not found"),d(!1);return}a(Xe),q(Xe.memberCount||0);const an=await LH(n);if(!Z)return;Q(an);const Ft=gn(yn,`groups/${n}/onlineMembers`),Sn=gn(yn,`groups/${n}`),Fn=gn(yn,`messages/${n}`),mi=od(Ft,xn=>{Z&&(xn.exists()?x(Object.keys(xn.val())):x([]))}),Oi=od(Sn,xn=>{if(!Z)return;const Cn=xn.val();Cn&&(q(Cn.memberCount||0),a(wr=>({...wr,...Cn})))}),ht=od(Fn,xn=>{if(!Z)return;const Cn=[];xn.exists()?(xn.forEach(wr=>{Cn.push({id:wr.key,...wr.val()})}),i(Cn.sort((wr,Ps)=>new Date(wr.timestamp)-new Date(Ps.timestamp)))):i([])});return d(!1),()=>{mi(),Oi(),ht()}}catch(Je){console.error("Error accessing group:",Je),Z&&(g(Je.message||"Failed to access group"),d(!1))}})(),()=>{Z=!1}},[n,e,t]);const fe=()=>{if(j.current){const{scrollTop:Z,scrollHeight:Ee,clientHeight:Je}=j.current,Xe=Ee-Z-Je<100;I(!Xe),Xe&&U(0)}};A.useEffect(()=>{if(j.current&&!N){const{scrollTop:Z,scrollHeight:Ee,clientHeight:Je}=j.current;Ee-Z-Je<100&&(j.current.scrollTop=Ee,U(0))}},[r,N]);const re=()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight,U(0))},ve=async Z=>{if(e)try{const Ee=new Date().toISOString(),Je={type:Z.type,content:Z.content,user:{id:e.uid,name:e.displayName||"Anonymous",avatar:e.photoURL||"/default-avatar.png"},timestamp:Ee};await fx(n,Je),S({userId:null,userName:null}),D.current&&clearTimeout(D.current),re()}catch(Ee){console.error("Failed to send message:",Ee),g("Failed to send message")}},he=()=>{S({userId:e.uid,userName:e.displayName||"Anonymous"}),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{S({userId:null,userName:null})},2e3)},$=r.filter(Z=>{var Je,Xe,an,Ft,Sn,Fn;const Ee=N.toLowerCase();switch(Z.type){case"text":return Z.content.toLowerCase().includes(Ee)||((Xe=(Je=Z.user)==null?void 0:Je.name)==null?void 0:Xe.toLowerCase().includes(Ee));case"image":return(Ft=(an=Z.user)==null?void 0:an.name)==null?void 0:Ft.toLowerCase().includes(Ee);case"mixed":return Z.content.text.toLowerCase().includes(Ee)||((Fn=(Sn=Z.user)==null?void 0:Sn.name)==null?void 0:Fn.toLowerCase().includes(Ee));case"system":return Z.content.toLowerCase().includes(Ee);default:return!1}}),ne=Z=>{const Ee=new Date(Z),Xe=Math.floor((new Date-Ee)/(1e3*60*60*24));return Xe===0?"Today":Xe===1?"Yesterday":Xe<7?Ee.toLocaleDateString("en-US",{weekday:"long"}):Ee.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},xe=Z=>{ge(Z)},Re=async Z=>{if(e)try{const Ee=gn(yn,`messages/${n}/${Z}`);await _7(Ee);const Je={type:"system",content:`${e.displayName} deleted a message`,timestamp:new Date().toISOString()};await fx(n,Je)}catch(Ee){console.error("Failed to delete message:",Ee),g("Failed to delete message")}},Oe=async(Z,Ee)=>{if(e)try{const Je=gn(yn,`messages/${n}/${Z}`);await w7(Je,{content:Ee,edited:!0,editedAt:new Date().toISOString()}),Me(null)}catch(Je){console.error("Failed to edit message:",Je),g("Failed to edit message")}};return c?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFB827] via-[#FF9636] to-[#FF8144] p-4 flex items-center justify-center",children:u.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-xl",children:u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Loading chat room..."})]})})}):f?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFB827] via-[#FF9636] to-[#FF8144] p-4 flex items-center justify-center",children:u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-xl text-center",children:[u.jsx("div",{className:"text-red-500 mb-4",children:u.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsx("p",{className:"text-gray-800 mb-4",children:f}),u.jsx("button",{onClick:()=>t("/komunitas"),className:"px-6 py-2 bg-orange-500 text-white rounded-full hover:bg-orange-600 transition-all transform hover:scale-105",children:"Back to Communities"})]})}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#FFB827] via-[#FF9636] to-[#FF8144] p-4",children:[V&&u.jsx(nj,{image:V,onClose:()=>ge(null)}),u.jsxs("div",{className:"max-w-6xl mx-auto bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl h-[85vh] flex mt-24 border border-white/20 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5 pointer-events-none"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/10 to-transparent pointer-events-none"}),u.jsxs("div",{className:"flex-1 flex flex-col relative z-10",children:[u.jsxs("div",{className:"p-4 border-b bg-white/50 backdrop-blur-sm sticky top-0 z-20",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative group cursor-pointer",children:[s!=null&&s.image?u.jsx("img",{src:s.image,alt:s.name,className:"w-12 h-12 rounded-2xl object-cover ring-2 ring-orange-500/20 group-hover:ring-orange-500/50 transition-all duration-300 transform group-hover:scale-105"}):u.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-orange-100 to-orange-200 flex items-center justify-center ring-2 ring-orange-500/20 group-hover:ring-orange-500/50 transition-all duration-300 transform group-hover:scale-105",children:u.jsx("span",{className:"text-2xl text-orange-500 font-semibold",children:((Ve=s==null?void 0:s.name)==null?void 0:Ve.charAt(0))||"?"})}),u.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gradient-to-br from-green-400 to-green-500 w-5 h-5 rounded-full ring-2 ring-white flex items-center justify-center text-[10px] text-white font-medium shadow-lg transform group-hover:scale-110 transition-transform",children:y.length})]}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-xl font-bold text-gray-800 group-hover:text-orange-500 transition-colors flex items-center gap-2",children:[(s==null?void 0:s.name)||"Loading...",u.jsxs("span",{className:"text-xs px-2 py-1 bg-orange-100 text-orange-600 rounded-full font-medium",children:[F," members"]})]}),u.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-2",children:[u.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),y.length," online now"]}),u.jsx("span",{children:"•"}),u.jsxs("span",{className:"text-gray-400",children:["Last active ",new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:()=>E(!k),className:`p-2.5 rounded-xl transition-all relative group ${k?"bg-orange-100 text-orange-600":"hover:bg-orange-50 text-gray-600 hover:text-orange-500"}`,title:"Toggle Members",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),u.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-500 text-white text-[10px] rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity transform scale-0 group-hover:scale-100",children:F})]}),u.jsx("button",{onClick:()=>t("/komunitas"),className:"p-2.5 hover:bg-red-50 rounded-xl transition-all text-gray-600 hover:text-red-500 hover:rotate-90 transform duration-300",title:"Close",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),u.jsx("div",{className:"mt-4",children:u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Search in conversation...",value:N,onChange:Z=>L(Z.target.value),className:"w-full px-4 py-2.5 pl-10 rounded-xl border border-gray-200 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none text-sm bg-white/50 backdrop-blur-sm transition-all placeholder:text-gray-400"}),u.jsx("svg",{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),N&&u.jsx("button",{onClick:()=>L(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]}),u.jsxs("div",{ref:j,className:"flex-1 overflow-y-auto p-4 space-y-4 scroll-smooth",onScroll:fe,children:[$.map((Z,Ee)=>{var Ft,Sn,Fn,mi,Oi;const Je=Ee===0||ne(Z.timestamp)!==ne($[Ee-1].timestamp),Xe=Ee===0||((Ft=Z.user)==null?void 0:Ft.id)!==((Sn=$[Ee-1].user)==null?void 0:Sn.id),an=Ee===$.length-1||((Fn=Z.user)==null?void 0:Fn.id)!==((mi=$[Ee+1].user)==null?void 0:mi.id);return u.jsxs("div",{className:"animate-fadeIn",children:[Je&&u.jsx("div",{className:"flex items-center justify-center my-6",children:u.jsx("div",{className:"bg-orange-50 text-orange-600 px-4 py-1 rounded-full text-sm font-medium shadow-sm",children:ne(Z.timestamp)})}),u.jsx("div",{className:`flex items-start gap-3 group ${Z.type==="system"?"justify-center":((Oi=Z.user)==null?void 0:Oi.id)===(e==null?void 0:e.uid)?"flex-row-reverse":""} ${Xe?"mt-4":"mt-1"}`,children:Z.type==="system"?u.jsx("div",{className:fm.system,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Z.content]})}):u.jsxs(u.Fragment,{children:[Xe&&u.jsxs("div",{className:"relative group animate-fadeIn",children:[Z.user.avatar?u.jsx("img",{src:Z.user.avatar,alt:Z.user.name,className:"w-8 h-8 rounded-full ring-2 ring-white/80 group-hover:ring-orange-500/20 transition-all transform group-hover:scale-110 hover:rotate-6"}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-orange-100 to-orange-200 ring-2 ring-white/80 group-hover:ring-orange-500/20 transition-all transform group-hover:scale-110 hover:rotate-6 flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-semibold text-orange-500",children:Z.user.name.charAt(0).toUpperCase()})}),y.includes(Z.user.id)&&u.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full ring-2 ring-white animate-pulse"})]}),u.jsxs("div",{className:`flex flex-col ${Z.user.id===(e==null?void 0:e.uid)?"items-end":""}`,children:[Xe&&u.jsxs("div",{className:"flex items-center gap-2 mb-1 animate-fadeIn",children:[u.jsx("span",{className:"text-sm font-medium text-gray-800 hover:text-orange-500 transition-colors cursor-default",children:Z.user.name}),u.jsx("span",{className:"text-xs text-gray-400 hover:text-gray-600 transition-colors cursor-default",children:new Date(Z.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),Z.edited&&u.jsx("span",{className:"text-xs text-gray-400 italic hover:text-orange-400 transition-colors cursor-default",children:"(edited)"})]}),u.jsx("div",{className:"relative group animate-fadeIn",children:u.jsx("div",{className:`px-4 py-2 rounded-2xl max-w-md transition-all duration-200 backdrop-blur-sm relative group ${Z.type==="image"||Z.type==="mixed"?fm.image:Z.user.id===(e==null?void 0:e.uid)?fm.sent:fm.received} ${!Xe&&Z.user.id===(e==null?void 0:e.uid)?"rounded-tr-xl":""} ${!Xe&&Z.user.id!==(e==null?void 0:e.uid)?"rounded-tl-xl":""} mt-2`,children:Z.type==="mixed"?u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"relative group overflow-hidden rounded-xl",children:[u.jsx("img",{src:Z.content.image,alt:"Shared image",className:"max-w-sm rounded-xl cursor-zoom-in hover:scale-[1.02] transition-transform duration-300",onClick:()=>xe(Z.content.image)}),u.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl flex items-center justify-center backdrop-blur-sm",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:ht=>{ht.stopPropagation(),xe(Z.content.image)},className:"p-2 bg-white/20 hover:bg-white/40 rounded-full transition-all transform hover:scale-110",title:"View full size",children:u.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),Z.user.id===(e==null?void 0:e.uid)&&u.jsx(u.Fragment,{children:u.jsx("button",{onClick:ht=>{ht.stopPropagation(),window.confirm("Are you sure you want to delete this message?")&&Re(Z.id)},className:"p-2 bg-white/20 hover:bg-red-500/60 rounded-full transition-all transform hover:scale-110",title:"Delete message",children:u.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})})]}),u.jsxs("div",{className:"relative group",children:[Z.user.id===(e==null?void 0:e.uid)&&u.jsxs("div",{className:"absolute -right-16 top-0 opacity-0 group-hover:opacity-100 transition-all duration-300 flex flex-row items-start gap-1 pt-1",children:[u.jsxs("button",{onClick:()=>Me(Z),className:"p-2 rounded-lg bg-white hover:bg-orange-50 text-gray-600 hover:text-orange-500 transition-all hover:scale-105 shadow-md hover:shadow-orange-500/20 flex items-center gap-1",title:"Edit message",children:[u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),u.jsx("span",{className:"text-xs",children:"Edit"})]}),u.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to delete this message?")&&Re(Z.id)},className:"p-2 rounded-lg bg-white hover:bg-red-50 text-gray-600 hover:text-red-500 transition-all hover:scale-105 shadow-md hover:shadow-red-500/20 flex items-center gap-1",title:"Delete message",children:[u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),u.jsx("span",{className:"text-xs",children:"Delete"})]})]}),u.jsx("p",{className:`whitespace-pre-wrap break-words px-2 pb-1 ${Z.user.id===(e==null?void 0:e.uid)?"text-white":"text-gray-800"}`,children:Z.content.text})]})]}):Z.type==="image"?u.jsxs("div",{className:"relative group overflow-hidden rounded-xl",children:[u.jsx("img",{src:Z.content,alt:"Shared image",className:"max-w-sm rounded-xl cursor-zoom-in hover:scale-[1.02] transition-transform duration-300",onClick:()=>xe(Z.content)}),u.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl flex items-center justify-center backdrop-blur-sm",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:ht=>{ht.stopPropagation(),xe(Z.content)},className:"p-2 bg-white/20 hover:bg-white/40 rounded-full transition-all transform hover:scale-110",title:"View full size",children:u.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),Z.user.id===(e==null?void 0:e.uid)&&u.jsx("button",{onClick:ht=>{ht.stopPropagation(),window.confirm("Are you sure you want to delete this message?")&&Re(Z.id)},className:"p-2 bg-white/20 hover:bg-red-500/60 rounded-full transition-all transform hover:scale-110",title:"Delete message",children:u.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]}):(Pe==null?void 0:Pe.id)===Z.id?u.jsxs("div",{className:"min-w-[200px] relative",children:[u.jsx("div",{className:"absolute -top-6 left-0 text-xs text-gray-500 flex items-center gap-2",children:u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Editing message"]})}),u.jsx("textarea",{autoFocus:!0,defaultValue:Z.content,className:"w-full p-3 rounded-lg border border-orange-200 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none text-gray-800 text-sm resize-none shadow-sm",onKeyDown:ht=>{ht.key==="Enter"&&!ht.shiftKey?(ht.preventDefault(),Oe(Z.id,ht.target.value)):ht.key==="Escape"&&Me(null)},onBlur:ht=>{ht.target.value!==Z.content?Oe(Z.id,ht.target.value):Me(null)}}),u.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"text-gray-400 flex items-center gap-2",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Press Enter to save"]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Esc to cancel"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>Me(null),className:"px-2 py-1 rounded-md text-gray-500 hover:text-red-500 hover:bg-red-50 transition-colors",children:"Cancel"}),u.jsx("button",{onClick:ht=>Oe(Z.id,ht.target.previousSibling.previousSibling.value),className:"px-2 py-1 rounded-md bg-orange-500 text-white hover:bg-orange-600 transition-colors",children:"Save"})]})]})]}):u.jsxs("div",{className:"relative group",children:[Z.user.id===(e==null?void 0:e.uid)&&u.jsxs("div",{className:"absolute -top-8 right-0 opacity-0 group-hover:opacity-100 transition-all duration-300 flex flex-row items-center gap-1 bg-white/95 backdrop-blur-sm rounded-full p-1 shadow-lg",children:[u.jsxs("button",{onClick:()=>Me(Z),className:"p-1.5 rounded-full hover:bg-orange-50 text-gray-600 hover:text-orange-500 transition-all hover:scale-105 flex items-center gap-1",title:"Edit message",children:[u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),u.jsx("span",{className:"text-xs",children:"Edit"})]}),u.jsx("div",{className:"w-px h-4 bg-gray-200"}),u.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to delete this message?")&&Re(Z.id)},className:"p-1.5 rounded-full hover:bg-red-50 text-gray-600 hover:text-red-500 transition-all hover:scale-105 flex items-center gap-1",title:"Delete message",children:[u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),u.jsx("span",{className:"text-xs",children:"Delete"})]})]}),u.jsx("p",{className:"whitespace-pre-wrap break-words",children:Z.content})]})})}),an&&!Xe&&u.jsx("span",{className:"text-xs text-gray-400 mt-1 hover:text-gray-600 transition-colors cursor-default animate-fadeIn",children:new Date(Z.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})})]},Z.id)}),P.userId&&u.jsxs("div",{className:`flex items-center gap-3 px-4 py-2 animate-fadeIn ${P.userId===(e==null?void 0:e.uid)?"justify-end":"justify-start"}`,children:[P.userId!==(e==null?void 0:e.uid)&&u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-orange-100 to-orange-200 flex items-center justify-center ring-2 ring-white/80",children:u.jsx("span",{className:"text-sm font-semibold text-orange-500",children:((Ue=P.userName)==null?void 0:Ue.charAt(0).toUpperCase())||"?"})}),u.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full ring-2 ring-white"})]}),u.jsxs("div",{className:`bg-white/80 backdrop-blur-sm px-4 py-2 rounded-xl shadow-sm flex items-center gap-2 ${P.userId===(e==null?void 0:e.uid)?"bg-orange-50":""}`,children:[u.jsxs("div",{className:"flex space-x-1",children:[u.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-bounce"}),u.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),u.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]}),u.jsx("span",{className:"text-sm text-gray-500",children:P.userId===(e==null?void 0:e.uid)?"You are typing...":`${P.userName} is typing...`})]}),P.userId===(e==null?void 0:e.uid)&&u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-orange-100 to-orange-200 flex items-center justify-center ring-2 ring-white/80",children:u.jsx("span",{className:"text-sm font-semibold text-orange-500",children:((Ge=P.userName)==null?void 0:Ge.charAt(0).toUpperCase())||"?"})}),u.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full ring-2 ring-white"})]})]})]}),C&&u.jsx("div",{className:"absolute bottom-24 right-8 animate-fadeIn",children:u.jsxs("button",{onClick:re,className:"bg-orange-500 text-white p-3 rounded-full shadow-lg hover:bg-orange-600 transition-all group relative hover:scale-110",title:"Scroll to bottom",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),W>0&&u.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center animate-pulse",children:W})]})}),u.jsx("div",{className:"p-4 border-t bg-white/50 backdrop-blur-sm",children:u.jsx(qw,{onSendMessage:ve,onTyping:he,isLoading:c,placeholder:"Type your message..."})})]}),k&&u.jsx("div",{className:"w-72 border-l border-gray-200 bg-white/50 backdrop-blur-sm overflow-y-auto animate-slideInRight",children:u.jsxs("div",{className:"p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Members"}),u.jsx("span",{className:"bg-orange-100 text-orange-600 px-2 py-1 rounded-full text-sm font-medium",children:F})]}),u.jsx("div",{className:"space-y-2",children:O.map(Z=>u.jsxs("div",{className:"flex items-center gap-3 p-2.5 rounded-xl hover:bg-white/90 transition-all duration-300 group hover:shadow-md",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-100 to-orange-200 ring-2 ring-white/80 group-hover:ring-orange-500/20 transition-all transform group-hover:scale-110 hover:rotate-6 flex items-center justify-center",children:u.jsx("span",{className:"text-lg font-semibold text-orange-500",children:Z.name.charAt(0).toUpperCase()})}),y.includes(Z.id)&&u.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full ring-2 ring-white animate-pulse"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-800 truncate group-hover:text-orange-500 transition-colors",children:Z.name}),u.jsx("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:y.includes(Z.id)?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),u.jsx("span",{className:"text-green-600",children:"Online"})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-300"}),u.jsx("span",{children:"Offline"})]})})]})]},Z.id))})]})})]})]})}function FH(){const n=_r();return A.useEffect(()=>{n("/ai-chat")},[n]),u.jsx(QR,{})}function BH(){const n=_r();return A.useEffect(()=>{n("/komunitas")},[n]),u.jsx(tj,{})}function UH(){const[n,e]=A.useState([]),[t,r]=A.useState(!0);return A.useEffect(()=>{(async()=>{try{const s=Hn(it,"scholarships"),c=(await Lr(s)).docs.map(d=>({id:d.id,...d.data()}));e(c)}catch(s){console.error("Error fetching scholarships:",s),Et.error("Failed to load scholarships")}finally{r(!1)}})()},[]),t?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-8",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsx(ee.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl font-bold text-white mb-8",children:"Available Scholarships"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(i=>u.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},className:"bg-white rounded-xl p-6 shadow-lg",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:i.title}),u.jsx("p",{className:"text-gray-600 mb-4",children:i.description}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{className:"text-sm text-gray-500",children:[u.jsx("span",{className:"font-medium",children:"Provider:"})," ",i.provider]}),u.jsxs("p",{className:"text-sm text-gray-500",children:[u.jsx("span",{className:"font-medium",children:"Deadline:"})," ",i.deadline]}),u.jsxs("p",{className:"text-sm text-gray-500",children:[u.jsx("span",{className:"font-medium",children:"Value:"})," ",i.value]})]}),u.jsx(ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"mt-4 bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Learn More"})]},i.id))})]})})}const rj=[{id:"mext-2024",title:"Beasiswa MEXT 2024",provider:"Pemerintah Jepang",description:"Program beasiswa dari pemerintah Jepang untuk mahasiswa internasional yang ingin melanjutkan studi S1/S2/S3 di Jepang dengan tanggungan biaya penuh dan tunjangan hidup.",value:"Biaya kuliah penuh + ¥117.000-¥147.000 per bulan",deadline:"15 Mei 2024",requirements:["Usia di bawah 35 tahun","IPK minimal 3,0/4,0","Kemampuan bahasa Jepang atau Inggris yang baik","Ijazah S1 (untuk program S2)","Ijazah S2 (untuk program S3)","Proposal penelitian yang kuat"],benefits:["Biaya kuliah ditanggung penuh","Tunjangan bulanan","Tiket pesawat pulang-pergi","Pelatihan bahasa Jepang selama 6 bulan","Asuransi kesehatan"],category:"internasional",status:"buka",image:qR,website:"https://www.mext.go.jp/en/policy/education/highered/title02/detail02/1373897.htm"},{id:"lpdp-2024",title:"Beasiswa LPDP 2024",provider:"Pemerintah Indonesia",description:"Beasiswa prestisius dari pemerintah untuk warga negara Indonesia yang ingin melanjutkan studi S2 atau S3 baik di dalam maupun luar negeri.",value:"Pendanaan penuh hingga $50.000/tahun",deadline:"30 April 2024",requirements:["Warga Negara Indonesia","Usia maksimal 35 tahun (S2) / 40 tahun (S3)","IPK minimal 3,0/4,0","IELTS 6,5 atau TOEFL iBT 80","Surat penerimaan dari universitas tujuan","Komitmen kembali ke Indonesia"],benefits:["Biaya kuliah ditanggung penuh","Tunjangan hidup bulanan","Tunjangan penelitian","Tunjangan buku","Asuransi perjalanan","Tunjangan kedatangan"],category:"pemerintah",status:"buka",image:$R,website:"https://lpdp.kemenkeu.go.id"},{id:"bi-2024",title:"Beasiswa Bank Indonesia 2024",provider:"Bank Indonesia",description:"Program beasiswa bergengsi dari Bank Indonesia untuk mahasiswa berprestasi di bidang ekonomi, perbankan, dan keuangan.",value:"Biaya kuliah penuh + tunjangan bulanan",deadline:"15 April 2024",requirements:["Warga Negara Indonesia","Usia maksimal 23 tahun","IPK minimal 3,25","Jurusan Ekonomi/Perbankan/Keuangan","Mahasiswa aktif semester 4-6","Memiliki prestasi akademik yang baik"],benefits:["Biaya kuliah ditanggung penuh","Tunjangan hidup bulanan","Dana penelitian","Tunjangan buku","Pengembangan profesional","Kesempatan magang"],category:"pemerintah",status:"buka",image:WR,website:"https://www.bi.go.id/id/institute/beasiswa/"}];function $w({scholarship:n,onSubmit:e,onClose:t,isOpen:r,userDocuments:i}){var W,U,C,I,j,D,F,q,V;const[s,a]=A.useState({fullName:"",email:"",phone:"",university:"",major:"",semester:"",gpa:"",motivation:"",achievements:"",documents:{cv:((W=i==null?void 0:i.CV)==null?void 0:W.url)||null,transcript:((U=i==null?void 0:i.IJAZAH)==null?void 0:U.url)||null,recommendation:((C=i==null?void 0:i.PIAGAM)==null?void 0:C.url)||null},documentUrls:{cv:((I=i==null?void 0:i.CV)==null?void 0:I.url)||null,transcript:((j=i==null?void 0:i.IJAZAH)==null?void 0:j.url)||null,recommendation:((D=i==null?void 0:i.PIAGAM)==null?void 0:D.url)||null},documentNames:{cv:((F=i==null?void 0:i.CV)==null?void 0:F.fileName)||null,transcript:((q=i==null?void 0:i.IJAZAH)==null?void 0:q.fileName)||null,recommendation:((V=i==null?void 0:i.PIAGAM)==null?void 0:V.fileName)||null}}),[c,d]=A.useState(1),f=4,g=ge=>{const{name:Pe,value:Me}=ge.target;a(fe=>({...fe,[Pe]:Me}))},y=ge=>{const{name:Pe,files:Me}=ge.target;a(fe=>({...fe,documents:{...fe.documents,[Pe]:Me[0]}}))},x=ge=>{ge.preventDefault(),e(s)},k=ge=>s.documentNames[ge]?s.documentNames[ge]:"No file chosen",E=ge=>s.documentUrls[ge]?u.jsxs("div",{className:"mt-2 text-sm text-green-600",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u.jsx("span",{className:"font-medium",children:"Document already uploaded:"})]}),u.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[u.jsx("span",{className:"text-gray-600",children:k(ge)}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("a",{href:s.documentUrls[ge],target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:text-orange-600 flex items-center gap-1",children:[u.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),u.jsxs("button",{type:"button",onClick:()=>P(ge),className:"text-red-500 hover:text-red-600 flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]})]})]})]}):null,P=ge=>{a(Pe=>({...Pe,documents:{...Pe.documents,[ge]:null},documentUrls:{...Pe.documentUrls,[ge]:null}}))},S=()=>{c<f&&d(c+1)},N=()=>{c>1&&d(c-1)},L=()=>u.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(ge=>u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${ge===c?"bg-orange-500 text-white":ge<c?"bg-green-500 text-white":"bg-gray-200 text-gray-500"}`,children:ge<c?u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):ge}),ge<f&&u.jsx("div",{className:`w-12 h-1 ${ge<c?"bg-green-500":"bg-gray-200"}`})]},ge))}),O=()=>u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-700 flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Required Documents"]}),u.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CV/Resume"}),!s.documentUrls.cv&&u.jsx("input",{type:"file",name:"cv",onChange:y,required:!s.documentUrls.cv,accept:".pdf,.doc,.docx",className:`mt-1 block w-full text-sm text-gray-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-full file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-orange-50 file:text-orange-700\r
                hover:file:bg-orange-100`}),E("cv")]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Academic Transcript"}),!s.documentUrls.transcript&&u.jsx("input",{type:"file",name:"transcript",onChange:y,required:!s.documentUrls.transcript,accept:".pdf",className:`mt-1 block w-full text-sm text-gray-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-full file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-orange-50 file:text-orange-700\r
                hover:file:bg-orange-100`}),E("transcript")]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Recommendation Letter"}),!s.documentUrls.recommendation&&u.jsx("input",{type:"file",name:"recommendation",onChange:y,required:!s.documentUrls.recommendation,accept:".pdf",className:`mt-1 block w-full text-sm text-gray-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-full file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-orange-50 file:text-orange-700\r
                hover:file:bg-orange-100`}),E("recommendation")]})]})]}),Q=()=>{switch(c){case 1:return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-700 flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Personal Information"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),u.jsx("input",{type:"text",name:"fullName",value:s.fullName,onChange:g,required:!0,className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:s.email,onChange:g,required:!0,className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),u.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:g,required:!0,className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"})]})]})]});case 2:return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-700 flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Academic Information"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"University"}),u.jsx("input",{type:"text",name:"university",value:s.university,onChange:g,required:!0,className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Major"}),u.jsx("input",{type:"text",name:"major",value:s.major,onChange:g,required:!0,className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Semester"}),u.jsx("input",{type:"number",name:"semester",value:s.semester,onChange:g,required:!0,min:"1",max:"14",className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GPA"}),u.jsx("input",{type:"number",name:"gpa",value:s.gpa,onChange:g,required:!0,step:"0.01",min:"0",max:"4",className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"})]})]})]});case 3:return O();case 4:return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-700 flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Additional Information"]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Motivation Letter"}),u.jsx("textarea",{name:"motivation",value:s.motivation,onChange:g,required:!0,rows:"4",className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",placeholder:"Tell us why you deserve this scholarship..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Achievements"}),u.jsx("textarea",{name:"achievements",value:s.achievements,onChange:g,rows:"4",className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",placeholder:"List your relevant achievements..."})]})]});default:return null}};return u.jsx(Ac,{children:r&&u.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:u.jsxs(ee.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:ge=>ge.stopPropagation(),className:"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Apply for ",n==null?void 0:n.title]}),u.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Step ",c," of ",f]})]}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),L(),u.jsxs("form",{onSubmit:x,className:"space-y-6",children:[Q(),u.jsxs("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[u.jsx("button",{type:"button",onClick:N,className:`px-4 py-2 text-sm font-medium rounded-lg ${c===1?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-gray-700 bg-gray-100 hover:bg-gray-200"}`,disabled:c===1,children:"Previous"}),c===f?u.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-orange-500 rounded-lg hover:bg-orange-600",children:"Submit Application"}):u.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 text-sm font-medium text-white bg-orange-500 rounded-lg hover:bg-orange-600",children:"Next"})]})]})]})})})}$w.propTypes={scholarship:Ie.shape({title:Ie.string.isRequired}).isRequired,onSubmit:Ie.func.isRequired,onClose:Ie.func.isRequired,isOpen:Ie.bool.isRequired,userDocuments:Ie.object};$w.defaultProps={userDocuments:{}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij="firebasestorage.googleapis.com",sj="storageBucket",zH=2*60*1e3,qH=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends Mi{constructor(e,t,r=0){super(Yy(e),`Firebase Storage: ${t} (${Yy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vt||(Vt={}));function Yy(n){return"storage/"+n}function Ww(){const n="An unknown error occurred, please check the error payload for server response.";return new Ot(Vt.UNKNOWN,n)}function $H(n){return new Ot(Vt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function WH(n){return new Ot(Vt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HH(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Vt.UNAUTHENTICATED,n)}function KH(){return new Ot(Vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function GH(n){return new Ot(Vt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function QH(){return new Ot(Vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function JH(){return new Ot(Vt.CANCELED,"User canceled the upload/download.")}function YH(n){return new Ot(Vt.INVALID_URL,"Invalid URL '"+n+"'.")}function XH(n){return new Ot(Vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function ZH(){return new Ot(Vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sj+"' property when initializing the app?")}function eK(){return new Ot(Vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function tK(){return new Ot(Vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function nK(n){return new Ot(Vt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mx(n){return new Ot(Vt.INVALID_ARGUMENT,n)}function oj(){return new Ot(Vt.APP_DELETED,"The Firebase app was deleted.")}function rK(n){return new Ot(Vt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sd(n,e){return new Ot(Vt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Xu(n){throw new Ot(Vt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=gr.makeFromUrl(e,t)}catch{return new gr(e,"")}if(r.path==="")return r;throw XH(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(Q){Q.path.charAt(Q.path.length-1)==="/"&&(Q.path_=Q.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),d={bucket:1,path:3};function f(Q){Q.path_=decodeURIComponent(Q.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",k=new RegExp(`^https?://${y}/${g}/b/${i}/o${x}`,"i"),E={bucket:1,path:3},P=t===ij?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",N=new RegExp(`^https?://${P}/${i}/${S}`,"i"),O=[{regex:c,indices:d,postModify:s},{regex:k,indices:E,postModify:f},{regex:N,indices:{bucket:1,path:2},postModify:f}];for(let Q=0;Q<O.length;Q++){const W=O[Q],U=W.regex.exec(e);if(U){const C=U[W.indices.bucket];let I=U[W.indices.path];I||(I=""),r=new gr(C,I),W.postModify(r);break}}if(r==null)throw YH(e);return r}}class iK{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(n,e,t){let r=1,i=null,s=null,a=!1,c=0;function d(){return c===2}let f=!1;function g(...S){f||(f=!0,e.apply(null,S))}function y(S){i=setTimeout(()=>{i=null,n(k,d())},S)}function x(){s&&clearTimeout(s)}function k(S,...N){if(f){x();return}if(S){x(),g.call(null,S,...N);return}if(d()||a){x(),g.call(null,S,...N);return}r<64&&(r*=2);let O;c===1?(c=2,O=0):O=(r+Math.random())*1e3,y(O)}let E=!1;function P(S){E||(E=!0,x(),!f&&(i!==null?(S||(c=2),clearTimeout(i),y(0)):S||(c=1)))}return y(0),s=setTimeout(()=>{a=!0,P(!0)},t),P}function oK(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(n){return n!==void 0}function lK(n){return typeof n=="object"&&!Array.isArray(n)}function Hw(n){return typeof n=="string"||n instanceof String}function wI(n){return Kw()&&n instanceof Blob}function Kw(){return typeof Blob<"u"}function bI(n,e,t,r){if(r<e)throw mx(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw mx(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function aj(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var La;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(La||(La={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cK(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK{constructor(e,t,r,i,s,a,c,d,f,g,y,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,E)=>{this.resolve_=k,this.reject_=E,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new mm(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const c=s.getErrorCode()===La.NO_ERROR,d=s.getStatus();if(!c||cK(d,this.additionalRetryCodes_)&&this.retry){const g=s.getErrorCode()===La.ABORT;r(!1,new mm(!1,null,g));return}const f=this.successCodes_.indexOf(d)!==-1;r(!0,new mm(f,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());aK(d)?s(d):s()}catch(d){a(d)}else if(c!==null){const d=Ww();d.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,d)):a(d)}else if(i.canceled){const d=this.appDelete_?oj():JH();a(d)}else{const d=QH();a(d)}};this.canceled_?t(!1,new mm(!1,null,!0)):this.backoffId_=sK(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&oK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function dK(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function hK(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function fK(n,e){e&&(n["X-Firebase-GMPID"]=e)}function mK(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function pK(n,e,t,r,i,s,a=!0){const c=aj(n.urlParams),d=n.url+c,f=Object.assign({},n.headers);return fK(f,e),dK(f,t),hK(f,s),mK(f,r),new uK(d,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function yK(...n){const e=gK();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Kw())return new Blob(n);throw new Ot(Vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function vK(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xK(n){if(typeof atob>"u")throw nK("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xy{constructor(e,t){this.data=e,this.contentType=t||null}}function _K(n,e){switch(n){case Ai.RAW:return new Xy(lj(e));case Ai.BASE64:case Ai.BASE64URL:return new Xy(cj(n,e));case Ai.DATA_URL:return new Xy(bK(e),kK(e))}throw Ww()}function lj(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=n.charCodeAt(++t);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function wK(n){let e;try{e=decodeURIComponent(n)}catch{throw Sd(Ai.DATA_URL,"Malformed data URL.")}return lj(e)}function cj(n,e){switch(n){case Ai.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Sd(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ai.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Sd(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=xK(e)}catch(i){throw i.message.includes("polyfill")?i:Sd(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class uj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Sd(Ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=EK(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function bK(n){const e=new uj(n);return e.base64?cj(Ai.BASE64,e.rest):wK(e.rest)}function kK(n){return new uj(n).contentType}function EK(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t){let r=0,i="";wI(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(wI(this.data_)){const r=this.data_,i=vK(r,e,t);return i===null?null:new fo(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new fo(r,!0)}}static getBlob(...e){if(Kw()){const t=e.map(r=>r instanceof fo?r.data_:r);return new fo(yK.apply(null,t))}else{const t=e.map(a=>Hw(a)?_K(Ai.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(a=>{for(let c=0;c<a.length;c++)i[s++]=a[c]}),new fo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(n){let e;try{e=JSON.parse(n)}catch{return null}return lK(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function IK(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function hj(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SK(n,e){return e}class $n{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||SK}}let pm=null;function CK(n){return!Hw(n)||n.length<2?n:hj(n)}function fj(){if(pm)return pm;const n=[];n.push(new $n("bucket")),n.push(new $n("generation")),n.push(new $n("metageneration")),n.push(new $n("name","fullPath",!0));function e(s,a){return CK(a)}const t=new $n("name");t.xform=e,n.push(t);function r(s,a){return a!==void 0?Number(a):a}const i=new $n("size");return i.xform=r,n.push(i),n.push(new $n("timeCreated")),n.push(new $n("updated")),n.push(new $n("md5Hash",null,!0)),n.push(new $n("cacheControl",null,!0)),n.push(new $n("contentDisposition",null,!0)),n.push(new $n("contentEncoding",null,!0)),n.push(new $n("contentLanguage",null,!0)),n.push(new $n("contentType",null,!0)),n.push(new $n("metadata","customMetadata",!0)),pm=n,pm}function NK(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new gr(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function AK(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const a=t[s];r[a.local]=a.xform(r,e[a.server])}return NK(r,n),r}function mj(n,e,t){const r=dj(e);return r===null?null:AK(n,r,t)}function PK(n,e,t,r){const i=dj(e);if(i===null||!Hw(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(f=>{const g=n.bucket,y=n.fullPath,x="/b/"+a(g)+"/o/"+a(y),k=Gw(x,t,r),E=aj({alt:"media",token:f});return k+E})[0]}function RK(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class pj{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(n){if(!n)throw Ww()}function jK(n,e){function t(r,i){const s=mj(n,i,e);return gj(s!==null),s}return t}function DK(n,e){function t(r,i){const s=mj(n,i,e);return gj(s!==null),PK(s,i,n.host,n._protocol)}return t}function yj(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=KH():i=HH():t.getStatus()===402?i=WH(n.bucket):t.getStatus()===403?i=GH(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function LK(n){const e=yj(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=$H(n.path)),s.serverResponse=i.serverResponse,s}return t}function MK(n,e,t){const r=e.fullServerUrl(),i=Gw(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,c=new pj(i,s,DK(n,t),a);return c.errorHandler=LK(e),c}function VK(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function OK(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=VK(null,e)),r}function FK(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let O="";for(let Q=0;Q<2;Q++)O=O+Math.random().toString().slice(2);return O}const d=c();a["Content-Type"]="multipart/related; boundary="+d;const f=OK(e,r,i),g=RK(f,t),y="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,x=`\r
--`+d+"--",k=fo.getBlob(y,r,x);if(k===null)throw eK();const E={name:f.fullPath},P=Gw(s,n.host,n._protocol),S="POST",N=n.maxUploadRetryTime,L=new pj(P,S,jK(n,t),N);return L.urlParams=E,L.headers=a,L.body=k.uploadData(),L.errorHandler=yj(e),L}class BK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=La.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=La.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=La.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Xu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class UK extends BK{initXhr(){this.xhr_.responseType="text"}}function vj(){return new UK}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,t){this._service=e,t instanceof gr?this._location=t:this._location=gr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qa(e,t)}get root(){const e=new gr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hj(this._location.path)}get storage(){return this._service}get parent(){const e=TK(this._location.path);if(e===null)return null;const t=new gr(this._location.bucket,e);return new Qa(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw rK(e)}}function zK(n,e,t){n._throwIfRoot("uploadBytes");const r=FK(n.storage,n._location,fj(),new fo(e,!0),t);return n.storage.makeRequestWithTokens(r,vj).then(i=>({metadata:i,ref:n}))}function qK(n){n._throwIfRoot("getDownloadURL");const e=MK(n.storage,n._location,fj());return n.storage.makeRequestWithTokens(e,vj).then(t=>{if(t===null)throw tK();return t})}function $K(n,e){const t=IK(n._location.path,e),r=new gr(n._location.bucket,t);return new Qa(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WK(n){return/^[A-Za-z]+:\/\//.test(n)}function HK(n,e){return new Qa(n,e)}function xj(n,e){if(n instanceof Qw){const t=n;if(t._bucket==null)throw ZH();const r=new Qa(t,t._bucket);return e!=null?xj(r,e):r}else return e!==void 0?$K(n,e):n}function KK(n,e){if(e&&WK(e)){if(n instanceof Qw)return HK(n,e);throw mx("To use ref(service, url), the first argument must be a Storage instance.")}else return xj(n,e)}function kI(n,e){const t=e==null?void 0:e[sj];return t==null?null:gr.makeFromBucketSpec(t,n)}function GK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Tx(i,n.app.options.projectId))}class Qw{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=ij,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zH,this._maxUploadRetryTime=qH,this._requests=new Set,i!=null?this._bucket=gr.makeFromBucketSpec(i,this._host):this._bucket=kI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gr.makeFromBucketSpec(this._url,e):this._bucket=kI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qa(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new iK(oj());{const a=pK(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const EI="@firebase/storage",TI="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="storage";function QK(n,e,t){return n=ot(n),zK(n,e,t)}function JK(n){return n=ot(n),qK(n)}function YK(n,e){return n=ot(n),KK(n,e)}function XK(n=Fp(),e){n=ot(n);const r=ih(n,_j).getImmediate({identifier:e}),i=Ex("storage");return i&&ZK(r,...i),r}function ZK(n,e,t,r={}){GK(n,e,t,r)}function eG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Qw(t,r,i,e,jo)}function tG(){To(new vs(_j,eG,"PUBLIC").setMultipleInstances(!0)),Vr(EI,TI,""),Vr(EI,TI,"esm2017")}tG();function nG(){const[n,e]=A.useState([]),[t,r]=A.useState(!0),[i,s]=A.useState(!1),{currentUser:a}=qr(),[c,d]=A.useState(null),[f,g]=A.useState(!1),[y,x]=A.useState({});A.useEffect(()=>{k(),E()},[]);const k=async()=>{try{let N=rj.map(L=>({...L,hasApplied:!1}));if(a){const L=Hn(it,"applications"),O=ds(L,hs("userId","==",a.uid)),W=(await Lr(O)).docs.map(U=>U.data().scholarshipId);N=N.map(U=>({...U,hasApplied:W.includes(U.id)}))}e(N)}catch(N){console.error("Error fetching scholarships:",N),Et.error("Failed to load scholarships")}finally{r(!1)}},E=async()=>{if(a!=null&&a.uid)try{const N=Hn(it,"documents"),L=ds(N,hs("userId","==",a.uid)),O=await Lr(L),Q={};O.forEach(W=>{const U=W.data();Q[U.type]={url:U.url,fileName:U.fileName,uploadedAt:U.uploadedAt}}),x(Q)}catch(N){console.error("Error fetching user documents:",N)}},P=async N=>{if(!a){Et.error("Please login to apply");return}s(!0);try{const L=XK(),O={...N.documentUrls};for(const[W,U]of Object.entries(N.documents))if(U&&!O[W]){const C=YK(L,`applications/${a.uid}/${c.id}/${W}`);await QK(C,U),O[W]=await JK(C)}const Q=Hn(it,"applications");await cg(Q,{userId:a.uid,scholarshipId:c.id,scholarshipTitle:c.title,provider:c.provider,status:"pending",appliedAt:new Date().toISOString(),deadline:c.deadline,value:c.value,applicationData:{...N,documents:O}}),Et.success("Application submitted successfully!"),g(!1),k()}catch(L){console.error("Error applying for scholarship:",L),Et.error("Failed to submit application")}finally{s(!1)}},S=N=>{d(N),g(!0)};return t?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#FFA726] to-[#FF9800] p-8",children:u.jsxs("div",{className:"ml-0 md:ml-24 max-w-7xl mx-auto",children:[u.jsx(ee.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl font-bold text-white mb-8",children:"Available Scholarships"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(N=>u.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},className:"bg-white rounded-xl overflow-hidden shadow-lg",children:[u.jsxs("div",{className:"relative h-48 overflow-hidden",children:[u.jsx("img",{src:N.image,alt:N.title,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),u.jsx("span",{className:`absolute top-4 right-4 px-3 py-1 rounded-full text-sm font-medium ${N.hasApplied?"bg-green-100 text-green-600":"bg-orange-100 text-orange-600"}`,children:N.hasApplied?"Applied":N.status})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"flex items-start justify-between mb-4",children:u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:N.title}),u.jsx("p",{className:"text-gray-600",children:N.provider})]})}),u.jsx("p",{className:"text-gray-600 mb-4",children:N.description}),u.jsxs("div",{className:"space-y-2 mb-4",children:[u.jsxs("p",{className:"text-sm text-gray-500",children:[u.jsx("span",{className:"font-medium",children:"Value:"})," ",N.value]}),u.jsxs("p",{className:"text-sm text-gray-500",children:[u.jsx("span",{className:"font-medium",children:"Deadline:"})," ",new Date(N.deadline).toLocaleDateString()]})]}),u.jsxs("a",{href:N.website,target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:text-orange-600 text-sm flex items-center gap-1 mb-4",children:["Visit Website",u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),u.jsx(ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>S(N),disabled:N.hasApplied||i,className:`w-full py-2 rounded-lg font-semibold transition-colors ${N.hasApplied?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-orange-500 text-white hover:bg-orange-600"}`,children:N.hasApplied?"Already Applied":"Apply Now"})]})]},N.id))}),u.jsx($w,{scholarship:c,isOpen:f,onClose:()=>g(!1),onSubmit:P,userDocuments:y})]})})}async function rG(){try{const n=Hn(it,"scholarships");if(!(await Lr(n)).empty){console.log("Scholarships already initialized");return}const t=rj.map(r=>cg(n,{...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));await Promise.all(t),console.log("Scholarships initialized successfully")}catch(n){console.error("Error initializing scholarships:",n)}}function iG(){const n=zr(),{currentUser:e}=qr();A.useEffect(()=>{e!=null&&e.uid&&(M7(e.uid),rG())},[e]);const r=!(["/profile","/courses","/podcast","/document","/achievements","/beasiswa"].includes(n.pathname)||n.pathname.startsWith("/podcast/")||n.pathname.startsWith("/course/")||n.pathname.startsWith("/quiz/")),s=["/profile","/courses","/podcast","/podcast/:id","/document","/course/:id","/quiz/:courseId","/achievements","/beasiswa"].some(a=>n.pathname===a||a.includes(":")&&n.pathname.startsWith(a.split(":")[0]));return u.jsxs("div",{className:"App",children:[r&&u.jsx(D$,{}),s&&u.jsx(zR,{}),u.jsxs(ED,{children:[u.jsx(Ht,{path:"/",element:u.jsx(wW,{})}),u.jsx(Ht,{path:"/ai-chat",element:u.jsx(QR,{})}),u.jsx(Ht,{path:"/login",element:u.jsx(CW,{})}),u.jsx(Ht,{path:"/signup",element:u.jsx(NW,{})}),u.jsx(Ht,{path:"/profile",element:u.jsx(Ii,{children:u.jsx(hH,{})})}),u.jsx(Ht,{path:"/courses",element:u.jsx(Ii,{children:u.jsx(_H,{})})}),u.jsx(Ht,{path:"/document",element:u.jsx(Ii,{children:u.jsx(TH,{})})}),u.jsx(Ht,{path:"/podcast/:id",element:u.jsx(Ii,{children:u.jsx(EH,{})})}),u.jsx(Ht,{path:"/podcast",element:u.jsx(wH,{})}),u.jsx(Ht,{path:"/course/:id",element:u.jsx(Ii,{children:u.jsx(NH,{})})}),u.jsx(Ht,{path:"/quiz/:courseId",element:u.jsx(Ii,{children:u.jsx(AH,{})})}),u.jsx(Ht,{path:"/admin",element:u.jsx(RH,{})}),u.jsx(Ht,{path:"/achievements",element:u.jsx(Ii,{children:u.jsx(IH,{})})}),u.jsx(Ht,{path:"/komunitas",element:u.jsx(tj,{})}),u.jsx(Ht,{path:"/group/:groupId",element:u.jsx(Ii,{children:u.jsx(OH,{})})}),u.jsx(Ht,{path:"/chat",element:u.jsx(FH,{})}),u.jsx(Ht,{path:"/community",element:u.jsx(BH,{})}),u.jsx(Ht,{path:"/scholarships",element:u.jsx(UH,{})}),u.jsx(Ht,{path:"/beasiswa",element:u.jsx(Ii,{children:u.jsx(nG,{})})})]})]})}function Ii({children:n}){const e=zr(),{currentUser:t,loading:r}=qr();return r?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#FF9800]"})}):t?n:u.jsx(bD,{to:"/login",state:{from:e},replace:!0})}Ii.propTypes={children:Ie.node.isRequired};function sG(){return u.jsx(aP,{children:u.jsx(GD,{children:u.jsx(iG,{})})})}R4.createRoot(document.getElementById("root")).render(u.jsx(A.StrictMode,{children:u.jsx(sG,{})}));
